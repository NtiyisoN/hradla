{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/es6/canvas.js","src/es6/contextMenu.js","src/es6/editorElements.js","src/es6/floatingMenu.js","src/es6/importExport.js","src/es6/logic.js","src/es6/main.js","src/es6/simulation.js","src/es6/smallFunctions.js","src/es6/structuresAndClasses.js","src/es6/svgObjects.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","\"use strict\";\n\nimport * as svgObj from './svgObjects.js'\nimport * as editorElements from './editorElements.js'\nimport Logic from './logic.js'\nimport ContextMenu from './contextMenu.js'\nimport FloatingMenu from './floatingMenu.js'\nimport Simulation from './simulation.js'\nimport Fn from './smallFunctions.js'\n\nclass ViewBox {\n    constructor(left, top, width, height) {\n        this.real = { left, top, width, height }\n\n        this.zoom = 1\n        this.leftShift = 0\n        this.topShift = 0\n    }\n\n    get width() {\n        return this.real.width / this.zoom\n    }\n\n    get height() {\n        return this.real.height / this.zoom\n    }\n\n    get left() {\n        return this.real.left - (this.leftShift / this.zoom) + ((this.real.width - this.width) / 2)\n    }\n\n    get top() {\n        return this.real.top - (this.topShift / this.zoom) + ((this.real.height - this.height) / 2)\n    }\n\n    get str() {\n        return `${this.left} ${this.top} ${this.width} ${this.height}`\n    }\n\n    // transforms horizontal units to the scale and shift of the editor\n    transformX(x) {\n        return this.left + (x / this.zoom)\n    }\n\n    // transforms vertical units to the scale and shift of the editor\n    transformY(y) {\n        return this.top + (y / this.zoom)\n    }\n}\n\nexport default class Svg {\n    constructor(canvas, gridSize) {\n        this.$svg = $(canvas);\n\n        this.gridSize = gridSize;\n\n        this.boxes = []; // stores all boxes\n        this.wires = []; // stores all wires\n\n        this.simulationEnabled = true\n        this.simulation = new Simulation(this); // dummy, will be overwritten on startNewSimulation\n\n        // create the defs element, used for patterns\n        this.$defs = $(\"<defs>\");\n        this.$svg.prepend(this.$defs);\n\n        // BACKGROUND PATTERN\n        let pattern = new svgObj.Pattern(\"grid\", this.gridSize, this.gridSize);\n\n        let patternPoints = new svgObj.PolylinePoints()\n            .append(new svgObj.PolylinePoint(0, 0))\n            .append(new svgObj.PolylinePoint(this.gridSize, 0))\n            .append(new svgObj.PolylinePoint(this.gridSize, this.gridSize));\n\n        pattern.addChild(new svgObj.PolyLine(patternPoints, \"#a3a4d2\", 2));\n        this.addPattern(pattern.get());\n\n        this.background = new svgObj.Rectangle(0, 0, this.width, this.height, \"url(#grid)\", \"none\");\n        this.appendJQueryObject(this.background.get());\n        this.refresh();\n\n        // set the viewbox for future zooming and moving of the canvas\n        this.$svg.attr('preserveAspectRatio', 'xMinYMin slice')\n        this.viewbox = new ViewBox(0, 0, this.width, this.height)\n        this.applyViewbox()\n\n        // CONSTRUCT CONTEXT MENU\n        this.contextMenu = new ContextMenu(this);\n\n        // CONSTRUCT FLOATING MENU\n        // this.floatingMenu = new FloatingMenu(this);\n        this.floatingMenu = new FloatingMenu(this);\n\n        // ALL EVENT CALLBACKS\n        let target;\n        this.$svg.on('mousedown', event => {\n            target = this.getRealTarget(event.target);\n            if(target!==undefined) {\n                // propagate mousedown to the real target\n                target.onMouseDown(event);\n            } else {\n                // mousedown happened directly on the svg\n                this.onMouseDown(event)\n            }\n\n            this.hideContextMenu();\n            event.preventDefault();\n        }).on('mousemove', event => {\n            if(target!==undefined) {\n                target.onMouseMove(event);\n            } else {\n                // mousemove happened directly on the svg\n                this.onMouseMove(event)\n            }\n\n            event.preventDefault();\n        }).on('mouseup', (event) => {\n            if(target!==undefined) {\n                target.onMouseUp(event);\n            } else {\n                // mouseup happened directly on the svg\n                this.onMouseUp(event)\n            }\n\n            target = undefined;\n\n            event.preventDefault();\n        }).on(\"contextmenu\", event => {\n            this.displayContextMenu(event.pageX, event.pageY, this.getRealJQueryTarget(event.target));\n            event.preventDefault();\n        });\n\n        Fn.addMouseScrollEventListener(canvas, event => {\n            // zoom only if the ctrl key is pressed\n            if(event.ctrlKey) {\n                switch (event.delta) {\n                    case 1:\n                        this.zoom += 0.1\n                        break\n                    case -1:\n                        this.zoom -= 0.1\n                        break\n                }\n            }\n\n            event.preventDefault()\n        })\n    }\n\n    get width() {\n        return this.$svg.width()\n    }\n\n    get height() {\n        return this.$svg.height()\n    }\n\n    onMouseDown(event) {\n        if(event.ctrlKey) {\n            this.moveCanvas = {\n                left: event.pageX,\n                top: event.pageY\n            }\n        }\n    }\n\n    onMouseMove(event) {\n        if(this.moveCanvas) {\n            let left = event.pageX - this.moveCanvas.left\n            let top = event.pageY - this.moveCanvas.top\n\n            this.viewbox.leftShift += left\n            this.viewbox.topShift += top\n            this.applyViewbox()\n\n            this.moveCanvas = {\n                left: event.pageX,\n                top: event.pageY\n            }\n        }\n    }\n\n    onMouseUp(event) {\n        if(this.moveCanvas) {\n            this.moveCanvas = undefined\n        }\n    }\n\n    applyViewbox() {\n        // adjust background\n        this.background.addAttr({\n            x: this.viewbox.left,\n            y: this.viewbox.top,\n            width: this.viewbox.width,\n            height: this.viewbox.height\n        })\n\n        // set the viewBox attribute\n        this.$svg.attr('viewBox', this.viewbox.str)\n    }\n\n    get zoom() {\n        return this.viewbox.zoom\n    }\n\n    set zoom(value) {\n        this.viewbox.zoom = value\n        this.applyViewbox()\n        // this.refresh()\n    }\n\n    get exportData() {\n        this.exportWireIdMap = new Map();\n        this.exportWireId = 0;\n\n        let data = {\n            // todo implement gridSize scaling\n            // gridSize: this.gridSize,\n            boxes: []\n        };\n\n        for(let i = 0; i < this.boxes.length; ++i) {\n            data.boxes[i] = this.boxes[i].exportData;\n        }\n\n        return data;\n    }\n\n    importData(data) {\n        this.simulationEnabled = false\n\n        // todo implement gridSize scaling\n\n        // list of wires to be added\n        let newWires = new Map();\n\n        for(let i = 0 ; i < data.boxes.length; ++i) {\n            // add box\n            let box;\n            switch (data.boxes[i].category) {\n                case \"gate\":\n                    // add new gate (without reloading the SVG, we will reload it once after the import)\n                    box = this.newGate(data.boxes[i].name, 0, 0, false);\n                    break;\n                case \"io\":\n                    switch (data.boxes[i].name) {\n                        case \"input\":\n                            // add new input (without reloading the SVG, we will reload it once after the import)\n                            box = this.newInput(0, 0, data.boxes[i].isOn, false);\n                            break;\n                        case \"output\":\n                            // add new output (without reloading the SVG, we will reload it once after the import)\n                            box = this.newOutput(0, 0, false);\n                            break;\n                        default:\n                            console.error(\"Unknown io box name '\"+data.boxes[i].name+\"'.\");\n                            break;\n                    }\n                    break;\n                default:\n                    console.error(\"Unknown box category '\"+data.boxes[i].category+\"'.\");\n            }\n\n            if (box) {\n                // proccess box transforms (translation and rotation)\n                let transform = new editorElements.Transform();\n                for(let j = 0 ; j < data.boxes[i].transform.items.length ; ++j) {\n                    switch (data.boxes[i].transform.items[j].name) {\n                        case \"translate\":\n                            transform.setTranslate(\n                                data.boxes[i].transform.items[j].args[0],\n                                data.boxes[i].transform.items[j].args[1]\n                            );\n                            break;\n                        case \"rotate\":\n                            transform.setRotate(\n                                data.boxes[i].transform.items[j].args[0],\n                                data.boxes[i].transform.items[j].args[1],\n                                data.boxes[i].transform.items[j].args[2]\n                            );\n                            break;\n                        default:\n                            console.error(\"Unknown transform property '\"+data.boxes[i].transform.items[j].name+\"'.\");\n                            break;\n                    }\n                }\n\n                box.setTransform(transform);\n\n                // add all wires to the list of wires to be added\n                for(let j = 0 ; j < data.boxes[i].connections.length ; ++j) {\n                    // get the artificial wire id\n                    let wireId = data.boxes[i].connections[j].wireId;\n\n                    // pass the values got from json into a variable that will be added into the map\n                    let value = {\n                        index: data.boxes[i].connections[j].index,\n                        type: data.boxes[i].connections[j].type,\n                        boxId: box.id\n                    };\n\n                    // add the value to the map\n                    if(newWires.has(wireId)) {\n                        // if there already is a wire with this id in the map,\n                        // add the value to the end of the array of values\n                        let mapValue = newWires.get(wireId);\n                        mapValue[mapValue.length] = value;\n                        newWires.set(wireId, mapValue);\n                    } else {\n                        // if there is no wire with this id in the map\n                        // add the wire and set the value to be the first element in the array\n                        newWires.set(wireId, [value]);\n                    }\n                }\n            }\n        }\n\n        // refresh the SVG document (needed for wiring)\n        this.refresh();\n\n        // with all boxes added, we can now connect them with wires\n        newWires.forEach(item => {\n            let connectorIds = [];\n            if(item[0] && item[1]) {\n                for (const i of [0, 1]) {\n                    let box = this.getBoxById(item[i].boxId);\n\n                    connectorIds[i] = box.connectors[item[i].index].id;\n                }\n            }\n            this.newWire(connectorIds[0], connectorIds[1], true);\n        });\n\n        // refresh the SVG document\n        this.refresh();\n\n        this.simulationEnabled = true;\n        for (let box of this.boxes) {\n            if (box instanceof editorElements.InputBox) {\n                // switch the input box state to the oposit and back, for some reason calling box.refreshState()\n                // results in weird unfinished simulation\n                // this causes update of the output connector and a start of a new simulation\n\n                // todo find better solution instead of this workaround\n                box.on = !box.on\n                box.on = !box.on\n            }\n        }\n    }\n\n    wireCreationHelper(connectorId) {\n        if(!this.firstConnectorId) {\n            this.firstConnectorId = connectorId;\n        } else {\n            this.newWire(this.firstConnectorId, connectorId);\n            this.firstConnectorId = undefined;\n        }\n    }\n\n    startNewSimulation(startingConnector, state) {\n        if(this.simulationEnabled) {\n            this.simulation = new Simulation(this)\n            this.simulation.notifyChange(startingConnector.id, state)\n            this.simulation.run()\n        }\n    }\n\n    newGate(name, x, y, refresh = true) {\n        return this.newBox(x, y, new editorElements.Gate(this, name, x, y), refresh);\n    }\n\n    newInput(x, y, isOn = false, refresh = true) {\n        return this.newBox(x, y, new editorElements.InputBox(this, isOn), refresh);\n    }\n\n    newOutput(x, y, refresh = true) {\n        return this.newBox(x, y, new editorElements.OutputBox(this), refresh);\n    }\n\n    newBox(x, y, object, refresh = true) {\n        let index = this.boxes.length;\n\n        this.boxes[index] = object;\n\n        // translate the gate if x and y has been specified\n        if(x && y) {\n            let tr = new editorElements.Transform();\n            tr.setTranslate(x, y);\n\n            this.boxes[index].svgObj.addAttr({\"transform\": tr.get()});\n        }\n\n        this.appendElement(this.boxes[index], refresh);\n\n        return this.boxes[index];\n    }\n\n    removeBox(gateId) {\n        let $gate = $(\"#\"+gateId);\n\n        // find the gate in svg's list of gates\n        let gateIndex = -1;\n        for(let i = 0 ; i < this.boxes.length ; i++) {\n            if(this.boxes[i].svgObj.id===gateId) {\n                gateIndex = i;\n                break;\n            }\n        }\n\n        if(gateIndex > -1) {\n            // remove all wires connected to this gate\n            for(let i = 0; i < this.boxes[gateIndex].connectors.length; i++) {\n                this.removeWiresByConnectorId(this.boxes[gateIndex].connectors[i].svgObj.id);\n            }\n\n            // remove the gate\n            this.boxes.splice(gateIndex, 1);\n            $gate.remove();\n        } else {\n            console.error(\"Trying to remove an nonexisting gate. (Gate id: \"+gateId+\")\");\n        }\n    }\n\n    newWire(fromId, toId, refresh = true) {\n        // wire must connect two distinct elements\n        if (fromId===toId)\n            return false\n\n        let connectors = [this.getConnectorById(fromId), this.getConnectorById(toId)]\n\n        // input connectors can be connected to one wire max\n        connectors.forEach(conn => {\n            if(conn.isInputConnector)\n                this.removeWiresByConnectorId(conn.id)\n        })\n        let index = this.wires.length;\n        this.wires[index] = new editorElements.Wire(this, fromId, toId, this.gridSize, refresh);\n\n        connectors.forEach(conn => {\n            conn.addWireId(this.wires[index].svgObj.id);\n        })\n\n        this.appendElement(this.wires[index], refresh);\n        this.moveToBackById(this.wires[index].svgObj.id);\n\n        if(refresh)\n            this.wires[index].updateWireState()\n\n        return this.wires[index];\n    }\n\n    getWireById(wireId) {\n        for (const wire of this.wires) {\n            if(wire.svgObj.id === wireId) {\n                return wire\n            }\n        }\n\n        return false;\n    }\n\n    getWiresByConnectorId(connectorId) {\n        let connector = this.getConnectorById(connectorId);\n        return connector.wireIds;\n    }\n\n    removeWireById(wireId) {\n        for(let i = 0 ; i < this.wires.length ; ++i) {\n            if (this.wires[i].svgObj.id === wireId) {\n\n                let connector1 = this.wires[i].startConnector;\n                let connector2 = this.wires[i].endConnector;\n\n                connector1.removeWireIdAndUpdate(wireId);\n                connector2.removeWireIdAndUpdate(wireId);\n\n                this.wires[i].svgObj.$el.remove();\n                this.wires.splice(i, 1);\n\n                break;\n            }\n        }\n    }\n\n    removeWiresByConnectorId(connectorId) {\n        let connector = this.getConnectorById(connectorId);\n\n        connector.wireIds.forEach(wireId => {\n            let wire = this.getWireById(wireId);\n\n            // get the other connector that is the wire connected to\n            let otherConnector = this.getConnectorById(wire.fromId, wire);\n            if(otherConnector.svgObj.id===connectorId) {\n                otherConnector = this.getConnectorById(wire.toId, wire);\n            }\n\n            // delete the wire record from the other connector\n            otherConnector.wireIds.delete(wireId);\n\n            // remove the wire representation using jQuery\n            $(\"#\" + wireId).remove();\n\n            // if otherConnector is an input connector, set its state to unknown\n            if(otherConnector.isInputConnector) {\n                otherConnector.setState(Logic.state.unknown);\n            }\n        });\n\n        // clear the list of wire Ids\n        connector.wireIds.clear();\n        // if connector is an input connector, set its state to unknown\n        if(connector.isInputConnector) {\n            connector.setState(Logic.state.unknown);\n        }\n    }\n\n    getBoxById(gateId) {\n        for(let i = 0 ; i < this.boxes.length ; i++) {\n            if(this.boxes[i].svgObj.id===gateId) {\n                return this.boxes[i];\n            }\n        }\n        return false;\n    }\n\n    getBoxByConnectorId(connectorId) {\n        for(let i = 0 ; i < this.boxes.length ; i++) {\n            if (this.boxes[i].getConnectorById(connectorId) !== undefined) {\n                return this.boxes[i];\n            }\n        }\n        return false;\n    }\n\n    getConnectorById(connectorId, wire) {\n        // the wire variable is used as heuristic,\n        // when we know the wire, we have to check only\n        // two gates instead of all of them\n\n        if(wire!==undefined) {\n            // we know the wire -- we can check only gates at the ends of this wire\n            let connector = wire.startBox.getConnectorById(connectorId)\n            if (!connector) {\n                connector = wire.endBox.getConnectorById(connectorId)\n            }\n            return connector\n\n        } else {\n            // we do not know the wire -- we have to check all gates\n            for (const box of this.boxes) {\n                const connector = box.getConnectorById(connectorId)\n                if(connector) {\n                    return connector\n                }\n            }\n        }\n\n        return false\n    }\n\n    // if the object, that user interacted with, is not a connector and is in a group\n    // return the group jQuery object instead of the original jQuery object\n    getRealJQueryTarget(target) {\n        let $target = $(target);\n        if(!$target.hasClass(\"connector\") && $target.parents('g').length > 0) {\n            $target = $target.parent();\n            while ($target.prop(\"tagName\") !== \"G\" && $target.prop(\"tagName\") !== \"g\") {\n                $target = $target.parent();\n            }\n        }\n        return $target;\n    }\n\n    // returns the editorElement that user interacted with, the \"target\" argument is a jQuery element\n    getRealTarget(target) {\n        // eventy se museji zpracovat tady, protoze v SVG se eventy nepropaguji\n        let $target = $(target);\n\n        if($target.hasClass(\"connector\")) {\n            // this is a connector, don't traverse groups\n            return this.getConnectorById($target.attr('id'));\n        } else if($target.parents('g').length > 0) {\n            // this element is in a group and it is not a connector\n\n            // traversing up the DOM tree until we find the closest group\n            let $parentGroup = $target.parent();\n            while ($parentGroup.prop(\"tagName\") !== \"G\" && $parentGroup.prop(\"tagName\") !== \"g\") {\n                $parentGroup = $parentGroup.parent();\n            }\n\n            return this.getBoxById($parentGroup.attr('id'));\n        } else if ($target.hasClass(\"wire\")) {\n            return this.getWireById($target.attr('id'));\n        } else {\n            return undefined;\n        }\n    }\n\n    appendElement(element, refresh = true) {\n        this.appendJQueryObject(element.get(), refresh);\n    }\n\n    appendJQueryObject(object, refresh = true) {\n        this.$svg.append(object);\n        if(refresh) {\n            this.refresh();\n        }\n    }\n\n    addPattern(pattern) {\n        this.$defs.append(pattern);\n        this.refresh();\n    }\n\n    // reload the SVG document (needed to display newly appended jQuery object)\n    refresh() {\n        this.$svg.html(this.$svg.html());\n        console.log(\"SVG document has been reloaded.\")\n    }\n\n    displayContextMenu(x, y, $target) {\n        this.contextMenu.display(x, y, $target);\n    }\n    hideContextMenu() {\n        this.contextMenu.hide();\n    }\n\n    // snap a value to a grid\n    snapToGrid(value) {\n        return Math.round(value / this.gridSize) * this.gridSize;\n    }\n\n    // static function for snapping a value to a grid\n    static snapToGrid(value, gridSize) {\n        return Math.round(value / gridSize) * gridSize;\n    }\n\n    // get set of nodes, that cannot be used for wiring at any circumstances\n    getNonRoutableNodes() {\n        let blockedNodes = new Set();\n        // for each box\n        for(let i = 0 ; i < this.boxes.length ; ++i) {\n            // get the jQuery child with class .rect (\"hitbox\")\n            let rect = $('#' + this.boxes[i].svgObj.id).children(\".rect\")[0];\n            // get the position of the rectangle\n            let position = $(rect).position();\n\n            // snap the position to the grid\n            position.left = this.snapToGrid(position.left);\n            position.top = this.snapToGrid(position.top);\n\n            // for each item in blockedNodes (set of blocked nodes with coordinates relative\n            // to the left upper corner of rect; unit used is \"one gridSize\") convert the coordinates\n            // to absolute (multiple with gridSize and add position of rect) and add the result to the set\n            for(let item of this.boxes[i].blockedNodes) {\n                let absoluteX = position.left + item.x * this.gridSize;\n                let absoluteY = position.top + item.y * this.gridSize;\n\n                blockedNodes.add({\n                    x: absoluteX,\n                    y: absoluteY\n                });\n            }\n        }\n        // todo ensure that this.refresh() is really unnecessary\n        // this.refresh();\n        // return the set\n        return blockedNodes;\n    }\n\n    moveToFrontById(objId) {\n        this.$svg.append($(\"#\" + objId));\n    }\n\n    moveToBackById(objId) {\n        $(\"#\" + this.background.id)\n            .after($(\"#\" + objId));\n    }\n\n    // get set of nodes, that is better not to use for wiring\n    getInconvenientNodes(ignoreWireId) {\n\n        let inconvenientNodes = new Set();\n        // for each wire\n        for(let i = 0 ; i < this.wires.length ; ++i) {\n            // (ignore the wire that is specified in the ignoreWireId argument (if any))\n            if(ignoreWireId===undefined || ignoreWireId!==this.wires[i].svgObj.id) {\n                // cycle through points, for each neigbours add all points that are in between them\n                // i.e.: (0,0) and (0,30) are blocking these nodes: (0,0), (0,10), (0,20), (0,30)\n                let prevPoint;\n                this.wires[i].points.forEach(point => {\n                    if (prevPoint === undefined) {\n                        // if the prevPoint is undefined, add the first point\n                        inconvenientNodes.add({x: point.x, y: point.y});\n                    } else {\n                        // else add all the point between the prevPoint (excluded) and point (included)\n\n                        if(prevPoint.x===point.x) {\n                            // if the line is horizontal\n                            let from = Math.min(prevPoint.y, point.y);\n                            let to = Math.max(prevPoint.y, point.y);\n\n                            while(from <= to) {\n                                inconvenientNodes.add({x: point.x, y: from});\n                                from += this.gridSize;\n                            }\n                        } else if(prevPoint.y===point.y) {\n                            // if the line is vertical\n                            let from = Math.min(prevPoint.x, point.x);\n                            let to = Math.max(prevPoint.x, point.x);\n\n                            while(from <= to) {\n                                inconvenientNodes.add({x: from, y: point.y});\n                                from += this.gridSize;\n                            }\n                        } else {\n                            // line is neither horizontal nor vertical, throw an error for better future debugging\n                            console.error(\"getInconvenientNodes: line between two points is neither horizontal nor vertical\");\n                        }\n                    }\n\n                    // set new prevPoint\n                    prevPoint = {\n                        x: point.x,\n                        y: point.y\n                    };\n                });\n\n\n            }\n        }\n        // return the set\n        return inconvenientNodes;\n    }\n}\n","\"use strict\";\n\nclass ContextMenuItem {\n    constructor(name, type, contextMenu, parentSVG, clickFunction) {\n        this.name = name;\n        this.type = type;\n        this.contextMenu = contextMenu;\n        this.parentSVG = parentSVG;\n\n        this.$el = $(\"<li>\");\n        $(this.$el)\n            .text(name)\n            .attr(\"type\", type);\n\n        if(clickFunction) {\n            $(this.$el).click(\n                event => {\n                    clickFunction(event);\n                    contextMenu.hide();\n                }\n            );\n        }\n    }\n\n    addClass(cls) {\n        this.$el.addClass(cls);\n        return this;\n    }\n\n    appendItem(item) {\n        if(!this.subList) {\n            this.subList = $(\"<ul>\");\n            this.$el.append(this.subList);\n        }\n\n        this.subList.append(item.jQuery);\n\n        return item;\n    }\n\n    get jQuery() {\n        return this.$el;\n    }\n}\nclass GateMenuItem extends ContextMenuItem {\n    constructor(type, contextMenu, parentSVG) {\n        super(\n            type, // name is the type\n            type,\n            contextMenu,\n            parentSVG,\n            event => {\n                let position = {\n                    left: Math.round(contextMenu.position.x / parentSVG.gridSize) * parentSVG.gridSize,\n                    top: Math.round(contextMenu.position.y / parentSVG.gridSize) * parentSVG.gridSize\n                };\n\n                parentSVG.newGate(\n                    type,\n                    position.left, // x coordinate\n                    position.top // y coordinate\n                );\n            }\n        );\n    }\n}\n\nexport default class ContextMenu {\n    constructor(parentSVG) {\n        this.parentSVG = parentSVG;\n\n        const gates = [\"not\", \"and\", \"or\", \"nand\", \"nor\", \"xor\", \"xnor\"];\n\n        this.position = {\n            x: 0, y: 0\n        };\n\n        this.$el = $(\"<ul>\");\n        this.$el.attr('id', 'contextMenu');\n\n        let gateList = new ContextMenuItem(\"New gate\", '', this, parentSVG);\n        for (let i = 0 ; i < gates.length ; ++i) {\n            gateList.appendItem(\n                new GateMenuItem(gates[i], this, parentSVG)\n            );\n        }\n        this.appendItem(gateList);\n\n        this.appendItem(\n            new ContextMenuItem(\"Input box\", '', this, parentSVG,\n                () => {\n                    let position = {\n                        left: this.parentSVG.snapToGrid(this.position.x),\n                        top: this.parentSVG.snapToGrid(this.position.y)\n                    };\n\n                    parentSVG.newInput(position.left, position.top);\n                }\n            )\n        );\n\n        this.appendItem(new ContextMenuItem(\"Output box\", '', this, parentSVG, () => {\n            let position = {\n                left: this.parentSVG.snapToGrid(this.position.x),\n                top: this.parentSVG.snapToGrid(this.position.y)\n            };\n\n            parentSVG.newOutput(position.left, position.top);\n        }));\n\n        this.appendConditionalItem('box', 'Remove this item', id => {this.parentSVG.removeBox(id)});\n        this.appendConditionalItem('wire', 'Remove this wire', id => {this.parentSVG.removeWireById(id)});\n\n        parentSVG.$svg.before(this.$el);\n    }\n\n    appendItem(item) {\n        this.$el.append(item.jQuery);\n        return item;\n    }\n\n    // appends an connditional item (that is shown only if the target\n    // has the class itemClass)\n    // clickFunction takes one argument: ID of the target\n    appendConditionalItem(itemClass, text, clickFunction) {\n        if(!this.conditionalItems) {\n            this.conditionalItems = [];\n        }\n\n        this.conditionalItems[this.conditionalItems.length] = {\n            itemClass: itemClass,\n            text: text,\n            clickFunction: clickFunction\n        }\n    }\n\n    // decides whether or not to display specific conditional items\n    resolveConditionalItems($target) {\n        for(let i = 0; i < this.conditionalItems.length; ++i) {\n            if($target.hasClass(this.conditionalItems[i].itemClass)) {\n                this.appendItem(\n                    new ContextMenuItem(\n                        this.conditionalItems[i].text, '', this, this.parentSVG,\n                        () => {\n                            this.conditionalItems[i].clickFunction($target.attr('id'));\n                        }\n                    )\n                ).addClass('conditional');\n            }\n        }\n    }\n\n    // hides all conditional items\n    hideAllConditionalItems() {\n        this.$el.children('.conditional').remove();\n    }\n\n    // displays the context menu with the right set of conditional items\n    display(x, y, $target) {\n        this.position = {\n            x: x,\n            y: y\n        };\n\n        this.$el.css({\n            display: 'block',\n            top: y + \"px\",\n            left: x + \"px\"\n        });\n\n        this.resolveConditionalItems($target);\n    }\n\n    // hides the context menu\n    hide() {\n        this.$el.css({display: 'none'});\n        this.hideAllConditionalItems();\n    }\n}\n","import * as svgObj from './svgObjects.js'\nimport * as Structures from './structuresAndClasses.js'\nimport Logic from './logic.js'\n\n// mapping logical states to css classes\nconst stateClasses = {\n    on: \"stateOn\",\n    off: \"stateOff\",\n    unknown: \"stateUnknown\",\n    oscillating: \"stateOscillating\"\n};\n\n// helper class used by Transform\nclass Property {\n    constructor(string) {\n        if(string!==undefined) {\n            this.name = string.replace(/^[ ]*([^(]+).*/, \"$1\");\n            this.args = string.replace(/^[^(]+\\((.*)\\)/, \"$1\").split(' ');\n        }\n    }\n\n    setName(name) {\n        this.name = name;\n    }\n\n    setArguments(args) {\n        this.args = args;\n    }\n\n    get() {\n        return this.name + \"(\" + this.args.join(\" \") + \")\";\n    }\n}\n\n// used to manipulate the transform argument used in SVG\nexport class Transform {\n    constructor(string) {\n        this.items = [];\n\n        if(string!==undefined) {\n            let splitItems = string.split(\")\");\n\n            for (let i = 0 ; i < splitItems.length ; i++) {\n                if(splitItems[i]) { // if not empty\n                    this.items.push(new Property(splitItems[i] + \")\"));\n                }\n            }\n        }\n    }\n\n    // returns index or -1\n    getIndex(name) {\n        for(let i = 0 ; i < this.items.length; i++) {\n            if(name === this.items[i].name) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    getTranslate() {\n        let args = this.getArguments(this.getIndex(\"translate\"));\n\n        return {\n            x: args[0],\n            y: args[1]\n        }\n    }\n\n    getRotate() {\n        let args = this.getArguments(this.getIndex(\"rotate\"));\n\n        return {\n            deg: args[0],\n            centreX: args[1],\n            centreY: args[2]\n        }\n    }\n\n    // sets the translation\n    setTranslate(x, y) {\n        this.setParameter(\"translate\", [x, y]);\n    }\n\n    // sets the rotation\n    setRotate(deg, centreX, centreY) {\n        this.setParameter(\"rotate\", [deg, centreX, centreY]);\n    }\n\n    // add the rotation\n    rotateRight(centreX, centreY) {\n        if(this.getIndex(\"rotate\")===-1) {\n            this.setRotate(90, centreX, centreY);\n        } else {\n            let newRotation = (parseInt(this.getRotate().deg) + 90) % 360;\n\n            if(newRotation===180) {\n                // swap centre coordinates\n                // because rotate(c, x, y) is defined like transform(-x, -y) rotate(c) transform(x, y)\n                let a = centreX;\n                centreX = centreY;\n                centreY = a;\n            }\n\n            this.setRotate(\n                newRotation,\n                centreX,\n                centreY\n            );\n        }\n    }\n\n    // returns the transform properties concatenated\n    get() {\n        let retVal = \"\";\n        for(let i = 0 ; i < this.items.length ; i++) {\n            if(i!==0) {\n                retVal += \" \";\n            }\n            retVal += this.items[i].get();\n        }\n        return retVal;\n    }\n\n    getArguments(index) {\n        return this.items[index].args;\n    }\n\n    setParameter(name, args) {\n        // determine index of the parameter (if set), else index == -1\n        let index = this.getIndex(name);\n\n        // if the property has been already set, change it (rewrite the array in the right index)\n        // else create a new one (set index to the length of an array --> ad an item to the end)\n        if(index===-1) {\n            index = this.items.length;\n            this.items[index] = new Property();\n            this.items[index].setName(name);\n        }\n\n        // save args under the right index\n        this.items[index].setArguments(args);\n    }\n}\n\n// parent class for all network elements\nclass NetworkElement {\n    constructor(parentSVG) {\n        if(!parentSVG) {\n            console.error(\"Parent SVG element has not been defined.\");\n        }\n        this.parentSVG = parentSVG;\n\n        // used to store the svjObject's instance of this element\n        this.svgObj = undefined;\n    }\n\n    get id() {\n        return this.svgObj.id;\n    }\n\n    onMouseDown() {\n        // empty function to prevent error messages, function is implemented later in the Box class\n    }\n\n    onMouseUp() {\n        // empty function to prevent error messages, function is implemented later in the Box and Connector classes\n    }\n\n    onMouseMove() {\n        // empty function to prevent error messages, function is implemented later in the Box class\n    }\n\n    get exportData() {\n        console.error(\"'json' getter has not been defined for this element\", this);\n        return undefined;\n    }\n}\n\n// parent class for input and output connectors (the things you click on\n// when you want to connect elements)\nclass Connector extends NetworkElement {\n    constructor(parentSVG, gridSize, left, top) { // unit of left / top is the size of the grid\n        super(parentSVG);\n\n        this.gridSize = gridSize;\n        this.connectorSize = gridSize;\n        this.connectorOffset = this.connectorSize / 2;\n\n        this.svgObj = new svgObj.Rectangle(\n            left * this.gridSize - this.connectorOffset,\n            top * this.gridSize - this.connectorOffset,\n            this.connectorSize,\n            this.connectorSize,\n            \"none\",\n            \"black\"\n        );\n\n        this.svgObj.$el.addClass(\"connector\");\n\n        this.stateAttr = false;\n\n        // if a wire can set connector's state\n        this.isInputConnector = false;\n\n        this.stateAttr = Logic.state.unknown;\n        this.svgObj.addClass(stateClasses.unknown);\n\n        this.wireIds = new Set();\n    }\n\n    get isOutputConnector() {\n        return !this.isInputConnector;\n    }\n\n    static get type() {\n        return {\n            inputConnector: 0,\n            outputConnector: 1\n        }\n    }\n\n    addWireId(wireId) {\n        this.wireIds.add(wireId);\n    }\n\n    removeWireId(wireId) {\n        this.wireIds.delete(wireId);\n    }\n\n    // removes the wire and updates the connector\n    removeWireIdAndUpdate(wireId) {\n        this.removeWireId(wireId);\n    }\n\n    setState(state, propagationId) {\n        this.svgObj.removeClasses(stateClasses.on, stateClasses.off, stateClasses.unknown, stateClasses.oscillating);\n\n        switch (state) {\n            case Logic.state.unknown:\n                this.svgObj.addClass(stateClasses.unknown);\n                break;\n            case Logic.state.on:\n                this.svgObj.addClass(stateClasses.on);\n                break;\n            case Logic.state.off:\n                this.svgObj.addClass(stateClasses.off);\n                break;\n            case Logic.state.oscillating:\n                this.svgObj.addClass(stateClasses.oscillating);\n                break;\n        }\n\n        this.stateAttr = state;\n    }\n\n    get state() {\n        return this.stateAttr;\n    }\n\n    get() {\n        return this.svgObj;\n    }\n\n    onMouseUp() {\n        this.parentSVG.wireCreationHelper(this.svgObj.id);\n    }\n}\n\nexport class InputConnector extends Connector {\n    constructor(parentSVG, gridSize, left, top) {\n        super(parentSVG, gridSize, left, top);\n\n\n        this.type = Connector.type.inputConnector;\n        this.isInputConnector = true;\n    }\n\n    setState(state) {\n        // console.log('setState on', this.id)\n\n        super.setState(state);\n\n        let gate = this.parentSVG.getBoxByConnectorId(this.svgObj.id);\n        gate.refreshState();\n    }\n\n    removeWireIdAndUpdate(wireId) {\n        super.removeWireIdAndUpdate(wireId);\n        this.setState(Logic.state.unknown);\n    }\n\n    get state() {\n        return super.state;\n    }\n}\n\nexport class OutputConnector extends Connector {\n    constructor(parentSVG, gridSize, left, top) {\n        super(parentSVG, gridSize, left, top);\n\n        // used to set the wire state during wire initialization based on the output connector state\n        this.isOutput = true;\n\n        this.type = Connector.type.outputConnector;\n    }\n\n    setState(state) {\n        super.setState(state);\n\n        for (const wireId of this.wireIds) {\n            this.parentSVG.getWireById(wireId).setState(state);\n        }\n    }\n\n    get state() {\n        return super.state;\n    }\n}\n\n// parent class for gates and input and output boxes\nclass Box extends NetworkElement {\n    constructor(parentSVG, name, category, gridWidth, gridHeight) {\n        super(parentSVG);\n\n        this.name = name;\n        this.category = category;\n        this.gridSize = this.parentSVG.gridSize;\n\n        this.url = \"img/\" + this.category + \"/\" + this.name + \".svg\";\n\n        this.connectors = [];\n\n        this.svgObj = new svgObj.Group();\n\n        this.width = gridWidth * this.gridSize;\n        this.height = gridHeight * this.gridSize;\n\n        this.gridWidth = gridWidth;\n        this.gridHeight = gridHeight;\n\n        // transparent background rectangle\n        let rectangle = new svgObj.Rectangle(0, 0, this.width, this.height, \"none\", \"none\");\n        rectangle.$el.addClass('rect');\n        this.svgObj.addChild(rectangle);\n        // image of the element\n        this.image = new svgObj.SvgImage(0, 0, this.width, this.height, this.url);\n        this.svgObj.addChild(this.image);\n\n        // add draggability and rotatability\n        this.svgObj.draggable(true);\n        this.svgObj.rotatable(true);\n\n        // add type=\"gate\", used in special callbacks in contextmenu\n        this.svgObj.addAttr({\"type\": category});\n\n        this.svgObj.$el.addClass(\"box\");\n        this.svgObj.$el.addClass(category);\n\n        this.generateBlockNodes();\n    }\n\n    get inputConnectors() {\n        return this.connectors.filter(conn => conn.isInputConnector)\n    }\n\n    get outputConnectors() {\n        return this.connectors.filter(conn => conn.isOutputConnector)\n    }\n\n    get exportData() {\n        let connections = [];\n\n        // go through all connectors\n        let counter = 0\n        for (const conn of this.connectors) {\n            // go through each its wire id\n            for (const item of conn.wireIds) {\n                let thisWireId;\n                if(!this.parentSVG.exportWireIdMap.has(item)) {\n                    // if the wire id is not in the map, add it and assign new arbitrary id\n                    this.parentSVG.exportWireIdMap.set(item, this.parentSVG.exportWireId);\n                    thisWireId = this.parentSVG.exportWireId;\n                    this.parentSVG.exportWireId++;\n                } else {\n                    // else get id from the map\n                    thisWireId = this.parentSVG.exportWireIdMap.get(item);\n                }\n\n\n                // add this connection to the list\n                connections[connections.length] = {\n                    index: counter,\n                    type: conn.type,\n                    wireId: thisWireId\n                };\n            }\n            counter++\n        }\n\n        return {\n            name: this.name,\n            // id: this.svgObj.id,\n            category: this.category,\n            transform: this.getTransform(),\n            connections: connections\n        };\n    }\n\n    generateBlockNodes(marginTop = 0, marginRight = 0, marginBottom = 0, marginLeft = 0, ...specialNodes) {\n        this.blockedNodes = new Set();\n        for(let x = marginLeft ; x <= this.gridWidth - marginRight ; x++) {\n            for(let y = marginTop ; y <= this.gridHeight - marginBottom ; y++) {\n                this.blockedNodes.add({\n                    x: x,\n                    y: y\n                });\n            }\n        }\n\n        for (let node of specialNodes) {\n            this.blockedNodes.add(node);\n        }\n    }\n\n    refreshState() {\n        // empty function, redefined in inherited elements\n        // refreshState takes input connector values and sets output values accordingly\n        console.warn(\"Calling the virtual function refreshState has no effect.\");\n    }\n\n    // usage: changeImage(\"abc\") changes image url to image-abc.svg\n    //        changeImage() changes image url to the default one (image.svg)\n    changeImage(suffix) {\n        if(suffix === undefined || suffix === \"\") {\n            suffix = \"\";\n        } else {\n            suffix = \"-\" + suffix;\n        }\n        this.url = \"img/\" + this.category + \"/\" + this.name + suffix + \".svg\";\n\n        this.image.changeUrl(this.url);\n    }\n\n    // returns a jQuery object\n    get() {\n        return this.svgObj.get();\n    }\n\n    removeBlockedNode(x, y) {\n        for(let item of this.blockedNodes) {\n            if(item.x===x && item.y===y) {\n                this.blockedNodes.delete(item);\n                break;\n            }\n        }\n    }\n\n    rotateBlockedNodesRight() {\n        if(this.rotation===undefined || this.rotation===4) {\n            this.rotation = 0;\n        }\n        this.rotation++;\n\n        if(this.rotation === 1 || this.rotation === 3) {\n            let newBlockedNodes = new Set();\n            this.blockedNodes.forEach(item => {\n                newBlockedNodes.add({\n                    x: Math.abs(item.y - this.gridHeight),\n                    y: item.x\n                });\n            });\n            this.blockedNodes = newBlockedNodes;\n        } else if(this.rotation === 2 || this.rotation === 4) {\n            let newBlockedNodes = new Set();\n            this.blockedNodes.forEach(item => {\n                newBlockedNodes.add({\n                    x: Math.abs(item.y - this.gridWidth),\n                    y: item.x\n                });\n            });\n            this.blockedNodes = newBlockedNodes;\n        }\n    }\n\n    addConnector(left, top, connectorType) {\n        let index = this.connectors.length;\n        if(connectorType===Connector.type.inputConnector) {\n            this.connectors[index] = new InputConnector(this.parentSVG, this.gridSize, left, top);\n        } else {\n            this.connectors[index] = new OutputConnector(this.parentSVG, this.gridSize, left, top);\n        }\n        this.svgObj.addChild(this.connectors[index].get());\n\n        this.removeBlockedNode(left, top);\n    }\n\n    // returns the connector object based on its id\n    getConnectorById(connectorId) {\n        for(let i = 0 ; i < this.connectors.length ; i++) {\n            if(this.connectors[i].id===connectorId) {\n                return this.connectors[i];\n            }\n        }\n        // if connector not found, return undefined\n        return undefined;\n    }\n\n    getTransform() {\n        let transform;\n        if (!this.svgObj.$el.attr(\"transform\")) {\n            // the element does not have a \"transform\" property --> create it\n            transform = new Transform();\n            transform.setTranslate(0, 0);\n            this.svgObj.addAttr({\"transform\": transform.get()});\n        } else {\n            // the element does have a \"transform\" property --> change it\n            transform = new Transform(this.svgObj.$el.attr(\"transform\"));\n        }\n        return transform;\n    }\n\n    setTransform(transform) {\n        this.svgObj.addAttr({\"transform\": transform.get()});\n    }\n\n    transformEvent(event) {\n        event.pageX = this.parentSVG.viewbox.transformX(event.pageX)\n        event.pageY = this.parentSVG.viewbox.transformY(event.pageY)\n\n        return event\n    }\n\n    onMouseDown(event) {\n        this.mouseLeft = false;\n        if(event.which === 1) {\n            this.mouseLeft = true;\n            this.onMouseDownLeft(event);\n\n            // move the DOM element to front\n            this.parentSVG.moveToFrontById(this.svgObj.id);\n        }\n    }\n\n    onMouseDownLeft(event) {\n        this.mouseMoved = false;\n\n        let transform = this.getTransform();\n\n        // save the current item position into a variable\n        let currentPosition = transform.getTranslate();\n\n        let {pageX, pageY} = this.transformEvent(event)\n\n        // calculate mouse offset from the object origin\n        this.offset = {\n            x: pageX - currentPosition.x,\n            y: pageY - currentPosition.y\n        };\n    }\n\n    onMouseMove(event) {\n        if(this.mouseLeft) {\n            this.mouseMoved = true;\n\n            let {pageX, pageY} = this.transformEvent(event)\n\n            const left = pageX - this.offset.x;\n            const top = pageY - this.offset.y;\n\n            let transform = this.getTransform();\n            transform.setTranslate(left, top);\n\n            this.setTransform(transform);\n\n            this.updateWires(true);\n        }\n    }\n\n    onMouseUp(event) {\n        if(event.which === 1) {\n            if(this.mouseMoved) {\n                this.onDrop(event);\n            } else {\n                this.onClick();\n            }\n        } else if (event.which === 2 ) {\n            this.onClickMiddle();\n        }\n    }\n\n    onDrop(event) {\n        let {pageX, pageY} = this.transformEvent(event)\n\n        let left = pageX - this.offset.x;\n        let top = pageY - this.offset.y;\n\n        left = this.parentSVG.snapToGrid(left);\n        top = this.parentSVG.snapToGrid(top);\n\n        let transform = this.getTransform();\n        transform.setTranslate(left, top);\n\n        this.setTransform(transform);\n\n        this.updateWires();\n    }\n\n    onClick() {\n        // empty function, will be redefined in InputBox\n    }\n\n    onClickMiddle() {\n        let transform = this.getTransform();\n\n        let rect = this.svgObj.$el[0].getBoundingClientRect();\n\n        let centreX = Math.round(rect.width / 2);\n        let centreY = Math.round(rect.height / 2);\n\n        centreX -= centreX % this.gridSize;\n        centreY -= centreY % this.gridSize;\n\n        transform.rotateRight(\n            centreX,\n            centreY\n        );\n\n        this.svgObj.addAttr({\"transform\": transform.get()});\n\n        this.rotateBlockedNodesRight();\n\n        this.updateWires();\n    }\n\n    // updates all wires connected to this box\n    updateWires(temporary = false) {\n        this.connectors.forEach(conn => {\n            conn.wireIds.forEach(wireId => {\n                let wire = this.parentSVG.getWireById(wireId);\n                if(temporary) {\n                    wire.temporaryWire();\n                } else {\n                    wire.routeWire();\n                }\n            })\n        })\n    }\n}\n\nexport class InputBox extends Box {\n    constructor(parentSVG, isOn = false) {\n        const width = 7;\n        const height = 4;\n\n        super(parentSVG, \"input\", \"io\", width, height);\n\n        this.addConnector(width, height / 2, Connector.type.outputConnector);\n\n        this.on = isOn;\n    }\n\n    get exportData() {\n        let data = super.exportData;\n        data.isOn = this.isOn;\n        return data;\n    }\n\n    generateBlockNodes() {\n        super.generateBlockNodes(0, 1, 1, 0);\n    }\n\n    refreshState() {\n        // start a new simulation from the output connector\n        this.parentSVG.startNewSimulation(this.connectors[0], this.connectors[0].state)\n    }\n\n    set on(isOn) {\n        if (isOn) {\n            // turn on\n            this.changeImage(\"on\");\n            this.connectors[0].setState(Logic.state.on);\n            this.refreshState()\n        } else {\n            // turn off\n            this.changeImage();\n            this.connectors[0].setState(Logic.state.off);\n            this.refreshState()\n        }\n\n        this.isOn = isOn;\n    }\n\n    get on() {\n        return this.isOn;\n    }\n\n    onClick() {\n        this.on = !this.on;\n    }\n}\n\nexport class OutputBox extends Box {\n    constructor(parentSVG) {\n        const height = 4;\n        const width = 5;\n\n        super(parentSVG, \"output\", \"io\", width, height);\n\n        this.addConnector(0, height / 2, Connector.type.inputConnector);\n    }\n\n    refreshState() {\n        this.setState(this.connectors[0].state);\n    }\n\n    setState(state) {\n        switch (state) {\n            case Logic.state.on:\n                this.changeImage(\"on\");\n                break;\n            case Logic.state.off:\n                this.changeImage(\"off\");\n                break;\n            case Logic.state.unknown:\n                this.changeImage();\n                break;\n            case Logic.state.oscillating:\n                this.changeImage(\"osc\");\n                break;\n        }\n    }\n\n    generateBlockNodes() {\n        super.generateBlockNodes(0, 0, 0, 1);\n    }\n}\n\nexport class Gate extends Box {\n    constructor(parentSVG, name) {\n        const width = 9;\n        const height = 4;\n\n        super(parentSVG, name, \"gate\", width, height);\n\n        // output\n        this.addConnector(width, height / 2, Connector.type.outputConnector);\n\n        if(this.name===\"not\") {\n            // input\n            this.addConnector(0, height / 2, Connector.type.inputConnector);\n        } else {\n            // input\n            this.addConnector(0, height / 4, Connector.type.inputConnector);\n            this.addConnector(0, height / (4/3), Connector.type.inputConnector);\n\n            // add one blockedNode between the inputs (for better looking wiring)\n            // and regenerate blocked nodes\n            this.generateBlockNodes({\n                x: 0,\n                y: height / 2\n            });\n        }\n\n        this.refreshState();\n    }\n\n    generateBlockNodes(specialNode) {\n        if(specialNode!==undefined) {\n            super.generateBlockNodes(0, 1, 0, 1, specialNode);\n        } else {\n            super.generateBlockNodes(0, 1, 0, 1);\n        }\n    }\n\n    refreshState() {\n        let state = Logic.state.unknown\n        switch (this.name) {\n            case \"and\":\n                state =  Logic.and(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"nand\":\n                state =  Logic.nand(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"nor\":\n                state =  Logic.nor(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"not\":\n                state =  Logic.not(this.connectors[1].state)\n                break;\n            case \"or\":\n                state =  Logic.or(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"xnor\":\n                state =  Logic.xnor(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"xor\":\n                state =  Logic.xor(this.connectors[1].state, this.connectors[2].state)\n                break;\n        }\n        // notify the simulator about this change\n        this.parentSVG.simulation.notifyChange(this.connectors[0].id, state)\n    }\n}\n\nexport class Wire extends NetworkElement {\n    constructor(parentSVG, fromId, toId, gridSize, refresh = true) {\n        // small todo: rework start... end... to arrays? (not important)\n\n        super(parentSVG);\n\n        this.gridSize = gridSize;\n\n        this.fromId = fromId;\n        this.toId = toId;\n\n        this.startBox = this.parentSVG.getBoxByConnectorId(fromId);\n        this.endBox = this.parentSVG.getBoxByConnectorId(toId);\n\n        this.boxes = [this.startBox, this.endBox]\n\n        this.startConnector = this.parentSVG.getConnectorById(fromId);\n        this.endConnector = this.parentSVG.getConnectorById(toId);\n\n        this.connectors = [this.startConnector, this.endConnector]\n        this.routeWire(true, refresh);\n\n        this.stateAttr = Logic.state.unknown;\n\n        for (let connector of this.connectors) {\n            if(connector.isOutput) {\n                this.setState(connector.state);\n            }\n        }\n\n        this.svgObj.$el.addClass(\"wire\");\n    }\n\n    get exportData() {\n        return {\n            fromId: this.fromId,\n            toId: this.toId\n        };\n    }\n\n    setState(state) {\n        this.svgObj.removeClasses(stateClasses.on, stateClasses.off, stateClasses.unknown, stateClasses.oscillating);\n\n        switch (state) {\n            case Logic.state.unknown:\n                this.svgObj.addClass(stateClasses.unknown);\n                break;\n            case Logic.state.on:\n                this.svgObj.addClass(stateClasses.on);\n                break;\n            case Logic.state.off:\n                this.svgObj.addClass(stateClasses.off);\n                break;\n            case Logic.state.oscillating:\n                this.svgObj.addClass(stateClasses.oscillating);\n                break;\n        }\n\n        if (this.startConnector.isInputConnector) {\n            this.startConnector.setState(state);\n        }\n        if(this.endConnector.isInputConnector) {\n            this.endConnector.setState(state);\n        }\n\n        this.stateAttr = state;\n    }\n\n    get state() {\n        return this.stateAttr;\n    }\n\n    updateWireState() {\n        for (const box of this.boxes) {\n            box.refreshState()\n        }\n        // for (const conn of this.connectors) {\n        //     if(conn.isOutputConnector) {\n        //         this.parentSVG.startNewSimulation(conn.id, conn.state)\n        //     }\n        // }\n    }\n\n    get() {\n        return this.svgObj.get();\n    }\n\n    getTemporaryWirePoints() {\n        let points = new svgObj.PolylinePoints();\n        points.append(new svgObj.PolylinePoint(this.wireStart.x, this.wireStart.y));\n        points.append(new svgObj.PolylinePoint(this.wireEnd.x, this.wireEnd.y));\n        return points;\n    }\n\n    temporaryWire() {\n        this.wireStart = this.getCoordinates(this.startConnector, false);\n        this.wireEnd = this.getCoordinates(this.endConnector, false);\n\n        this.setWirePath(this.getTemporaryWirePoints());\n\n        // this.svgObj.removeClasses(stateClasses.on, stateClasses.off, stateClasses.unknown, stateClasses.oscillating);\n        // this.svgObj.addClass(stateClasses.unknown);\n    }\n\n    routeWire(snapToGrid = true, refresh = true) {\n        this.wireStart = this.getCoordinates(this.startConnector, snapToGrid);\n        this.wireEnd = this.getCoordinates(this.endConnector, snapToGrid);\n\n        this.points = this.aStar(\n            {\n                x: this.wireStart.x / this.gridSize,\n                y: this.wireStart.y / this.gridSize\n            },\n            {\n                x: this.wireEnd.x / this.gridSize,\n                y: this.wireEnd.y / this.gridSize\n            });\n\n        this.setWirePath(this.points);\n\n        if (refresh)\n            this.updateWireState();\n    }\n\n    setWirePath(points) {\n        // set the line\n        if(this.svgObj!==undefined) {\n            this.svgObj.updatePoints(points);\n        } else {\n            this.svgObj = new svgObj.PolyLine(points, \"#8b8b8b\", 2);\n        }\n\n        this.svgObj.removeClasses(stateClasses.on, stateClasses.off, stateClasses.unknown, stateClasses.oscillating);\n        this.svgObj.addClass(stateClasses.unknown);\n\n        this.svgObj.addAttr({\n            fromId: this.fromId,\n            toId: this.toId\n        });\n    }\n\n\n\n    // implementation based on this pseudocode: https://en.wikipedia.org/wiki/A*_search_algorithm#Pseudocode\n    aStar(start, end) {\n        // number of nodes, that can be opened at once\n        // once is this limit exceeded, aStar will fail and getTemporaryWirePoints will be used instead\n        const maxNodeLimit = 50000;\n\n        let closedNodes = new Set();\n        let openNodes = new Set();\n        openNodes.add(start);\n\n        let cameFrom = new Map();\n\n        // default value: infinity\n        let gScore = new Structures.MapWithDefaultValue(Infinity);\n        gScore.set(start, 0);\n\n        // default value: infinity\n        let fScore = new Structures.MapWithDefaultValue(Infinity);\n        fScore.set(start, Wire.manhattanDistance(start, end));\n\n        let nonRoutable = this.parentSVG.getNonRoutableNodes();\n        let punishedButRoutable;\n        if(this.svgObj===undefined) {\n            punishedButRoutable = this.parentSVG.getInconvenientNodes();\n        } else {\n            punishedButRoutable = this.parentSVG.getInconvenientNodes(this.svgObj.id);\n        }\n\n        while (openNodes.size > 0) {\n            let currentNode;\n            let currentNodeFScore;\n\n            // find the value from openNodes that has the lowest fScore\n            // (can be implemented effectively using min-heap data structure (maybe todo sometime)?)\n            for (const node of openNodes) {\n                if(!currentNode || fScore.get(node) < currentNodeFScore) {\n                    currentNode = node;\n                    currentNodeFScore = fScore.get(currentNode)\n                }\n            }\n\n            if(svgObj.PolylinePoint.equals(currentNode, end)) {\n                return this.reconstructPath(cameFrom, currentNode);\n            }\n\n            openNodes.delete(currentNode);\n            closedNodes.add(currentNode);\n\n            // the farthest points accessible without avoiding obstacles in every direction\n            // (but max 50 in each direction)\n            for(let direction = 0 ; direction < 4 ; direction++) {\n                let newPoint = Wire.movePoint(currentNode, direction);\n                for(let i = 0 ; i < 50 ; i++) {\n                    // if newPoint is in the set of non routable points,\n                    // don't add it and stop proceeding in this direction\n                    if(Wire.setHasThisPoint(nonRoutable, this.scalePointToGrid(newPoint))) {\n                        break;\n                    }\n\n                    // skip this node, if it has been already closed\n                    // or if it is on the list of non routable nodes\n                    if (closedNodes.has(newPoint)) {\n                        continue;\n                    }\n\n                    if (!openNodes.has(newPoint).y) {\n                        openNodes.add(newPoint);\n                    }\n\n                    // calculate possible GScore by adding 1 to the score of the node we came from\n                    // (we prioritize to minimize the number of nodes and not the distance,\n                    //  so we are adding 1 on all nodes, even if the euclidean / mannhatan distance may vary)\n                    let increment = 1;\n                    if(i!==0) {\n                        increment = 2;\n                    }\n                    let possibleGScore = gScore.get(currentNode) + increment;\n\n                    if(Wire.setHasThisPoint(punishedButRoutable, this.scalePointToGrid(newPoint))) {\n                        // if the node is in the set of punished node, punish it by adding to the GScore\n                        possibleGScore += 1;\n                    }\n\n                    if (possibleGScore >= gScore.get(newPoint)) {\n                        continue;\n                    }\n\n                    cameFrom.set(newPoint, currentNode);\n                    gScore.set(newPoint, possibleGScore);\n                    fScore.set(newPoint, possibleGScore + Wire.manhattanDistance(newPoint, end));\n\n                    // if newPoint is in the set of punished but routable points,\n                    // add it but stop proceeding in this direction\n                    if(Wire.setHasThisPoint(punishedButRoutable, this.scalePointToGrid(newPoint))) {\n                        break;\n                    }\n\n                    // move to the next point in the direciton\n                    newPoint = Wire.movePoint(newPoint, direction);\n                }\n            }\n\n            if(openNodes.size > maxNodeLimit) {\n                break;\n            }\n        }\n        // if we got here, the path does not exist -> let's use temporary path ignoring all colisions\n        return this.getTemporaryWirePoints();\n    }\n    static movePoint(point, direction) {\n        switch (direction) {\n            case 0: // up\n                return {\n                    x: point.x,\n                    y: point.y - 1\n                };\n            case 1: // right\n                return {\n                    x: point.x + 1,\n                    y: point.y\n                };\n            case 2: // down\n                return {\n                    x: point.x,\n                    y: point.y + 1\n                };\n            case 3: // left\n                return {\n                    x: point.x - 1,\n                    y: point.y\n                };\n        }\n    }\n    scalePointToGrid(point) {\n        return {\n            x: point.x * this.gridSize,\n            y: point.y * this.gridSize\n        }\n    }\n\n    reconstructPath(cameFrom, currentNode) {\n        let totalPath = new svgObj.PolylinePoints();\n        totalPath.append(new svgObj.PolylinePoint(currentNode.x * this.gridSize, currentNode.y * this.gridSize));\n\n        while (cameFrom.has(currentNode)) {\n            currentNode = cameFrom.get(currentNode);\n            totalPath.append(new svgObj.PolylinePoint(currentNode.x * this.gridSize, currentNode.y * this.gridSize));\n        }\n\n        return totalPath;\n    }\n\n    static manhattanDistance(a, b) {\n        // Manhattan geometry\n        return Math.abs(a.x - b.x) + Math.abs(a.y - b.y);\n    }\n\n    static setHasThisPoint(set, point) {\n        for (let item of set) {\n            if(item.x === point.x && item.y === point.y) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    getCoordinates(connector, snapToGrid = true) {\n        // connector.svgObj.id has to be called, else the getCoordinates does not work on the first call in Firefox 55\n        let dummy = connector.svgObj.id;\n\n        let $connector = connector.svgObj.$el;\n\n        let position = $connector.position();\n\n        position.left = this.parentSVG.viewbox.transformX(position.left)\n        position.top = this.parentSVG.viewbox.transformY(position.top)\n\n        let width = $connector.attr(\"width\");\n        let height = $connector.attr(\"height\");\n\n        let x = position.left + width / 2;\n        let y = position.top + height / 2;\n        if(snapToGrid) {\n            x = this.parentSVG.snapToGrid(x);\n            y = this.parentSVG.snapToGrid(y);\n        }\n\n        return {\n            x: x,\n            y: y\n        };\n    }\n}\n","import {exportNetwork, importNetwok} from \"./importExport.js\";\n\nclass jqueryElement {\n    constructor(specificTag) {\n        if(!specificTag) {\n            this.$el = $(\"<div>\");\n        } else {\n            this.$el = $(\"<\" + specificTag + \">\")\n        }\n    }\n}\n\n// const mouseIcon =\n//     \"<svg class=\\\"mouseIcon\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"121.77131mm\\\" width=\\\"82.327583mm\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 291.71191 431.47314\\\">\" +\n//     \"<g transform=\\\"translate(-202.70908,-260.9232)\\\">\\n\" +\n//     \"            <path d=\\\"m202.81108 443.50667c-0.1257 11.05683 0.0651 12.12915 0.0528 23.09375 1.0404 39.29165-4.03281 79.5842 8.81441 117.56836 17.52602 58.00742 70.7612 107.07793 133.12907 108.11719 60.80448 2.61247 115.80638-41.48912 136.65249-96.93555 15.21942-34.70561 12.7447-72.82638 12.834-109.72266-0.40356-17.24905 0.27452-24.7329 0.0879-42.12109h-291.57066z\\\"/>\\n\" +\n//     \"            <path class=\\\"left\\\" d=\\\"m335.67788 260.93032c-58.6525 0.65566-99.6319 43.51386-120.0821 96.99219-10.5505 24.06012-12.5935 41.77797-12.8867 67.58203h135.7832v-164.57226c-0.006 0.00008-0.0117-0.00008-0.0176 0-0.9347-0.011-1.8658-0.0124-2.7968-0.002z\\\"/>\\n\" +\n//     \"            <path class=\\\"right\\\" d=\\\"m361.46787 260.92993c-0.94207-0.01-1.8864-0.009-2.83203 0.004v164.57226h135.78516c-0.26257-24.46948-2.2521-40.74823-11.50391-63.90243-19.34709-55.03225-61.73043-100.04525-121.44922-100.67383z\\\"/>\\n\" +\n//     \"            <path class=\\\"middle\\\" d=\\\"m348.56504 294.93365c15.03714 0 27.14286 12.10572 27.14286 27.14286v40c0 15.03714-12.10572 27.14286-27.14286 27.14286s-27.14286-12.10572-27.14286-27.14286v-40c0-15.03714 12.10572-27.14286 27.14286-27.14286z\\\" stroke=\\\"#fff\\\" stroke-linecap=\\\"round\\\" stroke-width=\\\"20\\\"/>\\n\" +\n//     \"        </g>\" +\n//     \"</svg>\";\n\nclass helpWindowItem extends jqueryElement {\n    constructor(text) {\n        super();\n\n        this.$el.addClass(\"helpWindowItem\");\n        this.$el.html(text);\n    }\n}\n\nclass helpWindow extends jqueryElement {\n    constructor() {\n        super();\n\n        this.$el.attr(\"id\", \"help\");\n\n        this.append(new helpWindowItem(\"<strong>main menu</strong>: right click\"));\n        this.append(new helpWindowItem(\"drag and drop to <strong>move elements</strong>\"));\n        this.append(new helpWindowItem(\"<strong>middle click</strong> to rotate elements\"));\n        this.append(new helpWindowItem(\"<strong>click <img src='img/gui/help.svg' class='helpicon' alt='help icon'></strong> to display documentation (in czech)\"));\n    }\n\n    append(item) {\n        this.$el.append(item.$el);\n    }\n}\n\n\nclass floatingMenuItem extends jqueryElement {\n    constructor(specificClass, icon, title, specificTag) {\n        super(specificTag);\n\n        this.$el.addClass(\"button\");\n        this.$el.addClass(specificClass);\n\n        this.$el.append(\n            $(\"<img>\")\n                .attr(\"src\", \"img/gui/\" + icon + \".svg\")\n                .attr(\"alt\", title)\n                .attr(\"title\", title)\n        );\n    }\n}\n\nexport default class floatingMenu extends jqueryElement {\n    constructor(parentSVG) {\n        super();\n\n        const id = 'floatingMenu';\n\n        this.$el.attr(\"id\", id);\n\n        /* IMPORT */\n\n        // here will be the instance of Lity stored\n        // (we need to store it, because the \"import\" button also closes Lity)\n        let lityInstanceImport;\n\n        let importButton = new floatingMenuItem(\"import\", \"import\", \"Import a network\", \"a\");\n        importButton.$el.on(\"click\", () => {\n            let $popup = $(\"<div>\")\n                .addClass(\"importExport\")\n                .addClass(\"import\");\n\n            let textareaId = \"importJSON\";\n\n            $popup.append(\n                $(\"<textarea></textarea>\").attr('id', textareaId)\n            ).append(\n                $(\"<a>\")\n                    .attr({\n                        \"href\": \"#\",\n                        \"class\": \"upload\"\n                    })\n                    .append(\n                        $(\"<img>\").attr('src', \"img/gui/import.svg\")\n                    )\n                    .append(\" import from JSON\")\n                    .on('click', () => {\n                        let $textarea = $('#'+textareaId);\n\n                        // get textarea contents\n                        let importString = $textarea.val();\n\n                        // close Lity\n                        lityInstanceImport.close();\n\n                        // proccess the imported data\n                        new importNetwok(parentSVG, importString);\n                    })\n            );\n\n            lityInstanceImport = lity($popup);\n        });\n\n        this.append(importButton);\n\n        /* EXPORT */\n\n        let exportButton = new floatingMenuItem(\"export\", \"export\", \"Export this network\", \"a\");\n        exportButton.$el.on(\"click\", () => {\n            let data = new exportNetwork(parentSVG);\n\n            // create the popup container holding all popup content (that will be passed to lity)\n            let $popup = $(\"<div>\")\n                .addClass(\"importExport\")\n                .addClass(\"export\");\n\n            // generate the block with code to be displayed and append it to the popup element\n            $popup.append(\n                $(\"<pre>\").append(\n                    $(\"<code>\")\n                        .text(\n                            data.json(exportNetwork.style.pretty)\n                        )\n                )\n            );\n\n            // generate the links\n            $popup.append(\n                $(\"<a>\").attr({\n                    \"href\": data.json(exportNetwork.style.pretty, true),\n                    \"class\": \"download\",\n                    \"download\": \"network.json\"\n                }).append(\n                    $(\"<img>\").attr('src', \"img/gui/export.svg\")\n                ).append(\" expanded JSON\")\n            );\n            $popup.append(\n                $(\"<a>\").attr({\n                    \"href\": data.json(exportNetwork.style.compact, true),\n                    \"class\": \"download\",\n                    \"download\": \"network.min.json\"\n                }).append(\n                    $(\"<img>\").attr('src', \"img/gui/export.svg\")\n                ).append(\" compact JSON\")\n            );\n\n            lity($popup);\n        });\n\n        this.append(exportButton);\n\n        /* HELP */\n\n        let help = new floatingMenuItem(\"help\", \"help\", \"Display help\", \"a\");\n        help.$el.on(\"mouseover\", () => {\n            $(\"#help\").addClass(\"visible\");\n        }).on(\"mouseout\", () => {\n            $(\"#help\").removeClass(\"visible\");\n        });\n\n        help.$el.attr({\n            'href': './docs/user.html',\n            'data-lity': ''\n        });\n        this.append(help);\n\n        parentSVG.$svg.after(this.$el);\n        parentSVG.$svg.after(new helpWindow().$el);\n    }\n\n    append(menuItem) {\n        this.$el.append(menuItem.$el);\n    }\n}\n","\"use strict\";\n\nexport class exportNetwork {\n    constructor(parentSVG) {\n        this.parentSVG = parentSVG;\n    }\n\n    get exportData() {\n        return this.parentSVG.exportData;\n    }\n\n    json(style = exportNetwork.style.compact, dataUri = false) {\n        if(dataUri) {\n            return 'data:application/json;charset=utf-8,'\n                + encodeURIComponent(this.json(style));\n        } else {\n            switch (style) {\n                case exportNetwork.style.compact:\n                    return JSON.stringify(this.exportData);\n                case exportNetwork.style.pretty:\n                    return JSON.stringify(this.exportData, null, 2);\n            }\n        }\n    }\n\n    static get style() {\n        return {\n            pretty: 0,\n            compact: 1\n        }\n    };\n}\n\nexport class importNetwok {\n    constructor(parentSVG, string) {\n        parentSVG.importData(\n            JSON.parse(string)\n        );\n    }\n\n}","\"use strict\";\n\n// logic functions used in the gate evaluation\nexport default class Logic {\n    static and(a, b) {\n        return Logic.testLogicRulesSymmetric(a, b, [\n            [Logic.state.on, Logic.state.on, Logic.state.on],\n            [Logic.state.on, Logic.state.off, Logic.state.off],\n            [Logic.state.on, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.on, Logic.state.oscillating, Logic.state.oscillating],\n\n            [Logic.state.off, Logic.state.off, Logic.state.off],\n            [Logic.state.off, Logic.state.unknown, Logic.state.off],\n            [Logic.state.off, Logic.state.oscillating, Logic.state.off],\n\n            [Logic.state.unknown, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.unknown, Logic.state.oscillating, Logic.state.unknown],\n\n            [Logic.state.oscillating, Logic.state.oscillating, Logic.state.oscillating]\n        ]);\n    }\n    static nand(a, b) {\n        return Logic.not(Logic.and(a, b));\n    }\n    static nor(a, b) {\n        return Logic.not(Logic.or(a, b));\n    }\n    static not(a) {\n        if(a === Logic.state.on) {\n            return Logic.state.off;\n        } else if (a === Logic.state.off) {\n            return Logic.state.on;\n        } else {\n            return a;\n        }\n    }\n    static or(a, b) {\n        return Logic.testLogicRulesSymmetric(a, b, [\n            [Logic.state.on, Logic.state.on, Logic.state.on],\n            [Logic.state.on, Logic.state.off, Logic.state.on],\n            [Logic.state.on, Logic.state.unknown, Logic.state.on],\n            [Logic.state.on, Logic.state.oscillating, Logic.state.on],\n\n            [Logic.state.off, Logic.state.off, Logic.state.off],\n            [Logic.state.off, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.off, Logic.state.oscillating, Logic.state.oscillating],\n\n            [Logic.state.unknown, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.unknown, Logic.state.oscillating, Logic.state.unknown],\n\n            [Logic.state.oscillating, Logic.state.oscillating, Logic.state.oscillating]\n        ]);\n    }\n    static xnor(a, b) {\n        return Logic.not(Logic.xor(a, b));\n    }\n    static xor(a, b) {\n        return Logic.testLogicRulesSymmetric(a, b, [\n            [Logic.state.on, Logic.state.on, Logic.state.off],\n            [Logic.state.on, Logic.state.off, Logic.state.on],\n            [Logic.state.on, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.on, Logic.state.oscillating, Logic.state.oscillating],\n\n            [Logic.state.off, Logic.state.off, Logic.state.off],\n            [Logic.state.off, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.off, Logic.state.oscillating, Logic.state.oscillating],\n\n            [Logic.state.unknown, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.unknown, Logic.state.oscillating, Logic.state.unknown],\n\n            [Logic.state.oscillating, Logic.state.oscillating, Logic.state.oscillating]\n        ]);\n    }\n\n    static get state() {\n        return {\n            unknown: 0,\n            on: 1,\n            off: 2,\n            oscillating: 3\n        }\n    }\n\n    static testLogicRulesSymmetric(a, b, rules) {\n        for (let i = 0 ; i < rules.length ; i++) {\n            if((rules[i][0]===a && rules[i][1]===b) || (rules[i][0]===b && rules[i][1]===a)) {\n                return rules[i][2];\n            }\n        }\n    }\n}","import Svg from './canvas.js';\n\n$(function () {\n    let svg = new Svg(\"svg#canvas\", 10);\n\n    /* DEMO */\n    // ONE BIT COMPARATOR\n    /*\n    let i1 = svg.newInput(100, 100);\n    let i2 = svg.newInput(100, 200);\n\n    let n1 = svg.newGate(\"not\", 200, 100);\n    let n2 = svg.newGate(\"not\", 200, 200);\n\n    let a1 = svg.newGate(\"and\", 360, 90);\n    let a2 = svg.newGate(\"and\", 360, 210);\n\n    let nor = svg.newGate(\"nor\", 540, 150);\n\n    let o1 = svg.newOutput(680, 90);\n    let o2 = svg.newOutput(680, 150);\n    let o3 = svg.newOutput(680, 210);\n\n    svg.newWire(i1.outputs[0].svgObj.id, n1.inputs[0].svgObj.id);\n    svg.newWire(i2.outputs[0].svgObj.id, n2.inputs[0].svgObj.id);\n\n    svg.newWire(i1.outputs[0].svgObj.id, a2.inputs[1].svgObj.id);\n    svg.newWire(i2.outputs[0].svgObj.id, a1.inputs[0].svgObj.id);\n\n    svg.newWire(n1.outputs[0].svgObj.id, a1.inputs[1].svgObj.id);\n    svg.newWire(n2.outputs[0].svgObj.id, a2.inputs[0].svgObj.id);\n\n    svg.newWire(a1.outputs[0].svgObj.id, nor.inputs[0].svgObj.id);\n    svg.newWire(a2.outputs[0].svgObj.id, nor.inputs[1].svgObj.id);\n\n    svg.newWire(a1.outputs[0].svgObj.id, o1.inputs[0].svgObj.id);\n    svg.newWire(nor.outputs[0].svgObj.id, o2.inputs[0].svgObj.id);\n    svg.newWire(a2.outputs[0].svgObj.id, o3.inputs[0].svgObj.id);\n    */\n\n    // BINARY ADDER\n    /*\n    let i1 = svg.newInput(80, 90);\n    let i2 = svg.newInput(80, 130);\n    let i3 = svg.newInput(80, 180);\n\n    let x1 = svg.newGate(\"xor\", 360, 100);\n    let x2 = svg.newGate(\"xor\", 360, 170);\n\n    let a1 = svg.newGate(\"and\", 250, 220);\n    a1.onClickMiddle();// a jednou rotovany\n    let a2 = svg.newGate(\"and\", 500, 320);\n\n    let or = svg.newGate(\"or\", 620, 310);\n\n    let o1 = svg.newOutput(750, 270);\n    let o2 = svg.newOutput(750, 310);\n\n    svg.newWire(i1.outputs[0].svgObj.id, x1.inputs[0].svgObj.id);\n    svg.newWire(i2.outputs[0].svgObj.id, x1.inputs[1].svgObj.id);\n    svg.newWire(i3.outputs[0].svgObj.id, x2.inputs[1].svgObj.id);\n\n    svg.newWire(i1.outputs[0].svgObj.id, a1.inputs[1].svgObj.id);\n\n    svg.newWire(i2.outputs[0].svgObj.id, a1.inputs[0].svgObj.id);\n\n    svg.newWire(i3.outputs[0].svgObj.id, a2.inputs[1].svgObj.id);\n\n    svg.newWire(x1.outputs[0].svgObj.id, x2.inputs[0].svgObj.id);\n    svg.newWire(x1.outputs[0].svgObj.id, a2.inputs[0].svgObj.id);\n\n    svg.newWire(a1.outputs[0].svgObj.id, or.inputs[0].svgObj.id);\n\n    svg.newWire(x2.outputs[0].svgObj.id, o1.inputs[0].svgObj.id);\n    svg.newWire(a2.outputs[0].svgObj.id, or.inputs[1].svgObj.id);\n\n    svg.newWire(or.outputs[0].svgObj.id, o2.inputs[0].svgObj.id);\n    */\n});","import Logic from './logic.js'\n\nclass stateChange {\n    constructor(connectorId, state, whoCausedIt) {\n        this.connectorId = connectorId\n        this.state = state\n        this.whoCausedIt = whoCausedIt\n    }\n}\n\n// all connectors mentioned here are OUTPUT CONNECTORS\nexport default class Simulation {\n    constructor(parentSVG) {\n        this.parentSVG = parentSVG\n\n        // maps each affected output connector to it's directly preceeding output connectors\n        this.predecessors = new Map();\n\n        // maps waveId -> array of outputConnectors affected\n        this.waves = new Map();\n        this.wave = 0\n\n        this.cycledConnectors = new Map()\n        this.resolvedCycledConnectors = new Set()\n\n    }\n\n    run() {\n        this.wave++;\n        while(this.waves.has(this.wave)) {\n            this.step()\n            this.waves.delete(this.wave) // clean old waves on the go\n            this.wave++\n        }\n    }\n\n    step() {\n        for (let {connectorId, state, whoCausedIt} of this.waves.get(this.wave)) {\n            // skip resolved cycles\n            if(this.resolvedCycledConnectors.has(connectorId)) {\n                continue\n            }\n\n            // skip connector that are cycles\n            if (this.cycledConnectors.has(connectorId)) {\n                // get the set of states that this connector appeared from the moment the signal first cycled\n                let states = this.cycledConnectors.get(connectorId)\n\n                // if the connector already had this state in this cycle, resolve the cycle\n                if(states.has(state)) {\n\n                    // if there are more states in the set, the connector is oscillating\n                    // (else it keeps its state and we just break the cycle)\n                    if(states.size > 1) {\n                        state = Logic.state.oscillating\n                    }\n\n                    // mark this connector as resolved\n                    this.resolvedCycledConnectors.add(connectorId)\n\n                // this is a new, unseen state, add it to the set and continue simulating the cycle\n                } else {\n                    states.add(state)\n                }\n\n                // map the modified set of states to the connector\n                this.cycledConnectors.set(connectorId, states)\n            }\n\n            this.whoCausedIt = connectorId\n            /*  process all outputConnectors by setting their state\n                this will trigger a following event chain:\n                    outputConnector changes\n                    -> all connected wires change\n                    -> all inputConnectors connected to these wires change\n                    -> all elements that contain these inputConnectors change\n                    -> these elements compute the new state of their output connectors and call notifyChange()\n            */\n\n\n            if(whoCausedIt) {\n                this.addPredecessor(connectorId, whoCausedIt)\n            }\n\n            if (!this.cycledConnectors.has(connectorId) && this.getAllPredecessors(connectorId).has(connectorId)) {\n                this.cycledConnectors.set(connectorId, new Set([state]))\n            }\n\n\n            // reflect the changes in SVG\n            let connector = this.parentSVG.getConnectorById(connectorId)\n            if(connector) {\n                connector.setState(state)\n            }\n        }\n        this.whoCausedIt = undefined\n    }\n\n    // mark a predecessorConnectorId as a predecessor of connectorId\n    addPredecessor(connectorId, predecessorConnectorId) {\n        if(!this.predecessors.has(connectorId)) {\n            this.predecessors.set(connectorId, new Set())\n        }\n\n        this.predecessors.get(connectorId).add(predecessorConnectorId)\n    }\n\n    // returns set of all output connectors, that are before this output connector\n    getAllPredecessors(connectorId) {\n        if(!this.predecessors.has(connectorId)) {\n            this.predecessors.set(connectorId, new Set())\n        }\n\n        let all = new Set()\n\n        this.predecessors.get(connectorId).forEach(all.add, all);\n\n        let prevSize = 0\n        let size = all.size\n        while(prevSize < size) {\n            for (let connector of all) {\n                if (this.predecessors.has(connector)) {\n                    this.predecessors.get(connector).forEach(all.add, all);\n                }\n            }\n            prevSize = size\n            size = all.size\n        }\n\n        return all\n    }\n\n    notifyChange(connectorId, state) {\n        let waveId = this.wave + 1\n\n        if(!this.waves.has(waveId)) {\n            this.waves.set(waveId, [])\n        }\n\n        this.waves.get(waveId).push(new stateChange(connectorId, state, this.whoCausedIt));\n    }\n}\n","\"use strict\";\n\nexport default class Fn {\n    static deepCopy(arr) {\n        return $.extend(true, [], arr);\n    }\n\n    static addMouseScrollEventListener(query, func) {\n        let MouseWheelHandler = event => {\n            var event = window.event || event; // old IE support\n            event.delta = Math.max(-1, Math.min(1, (event.wheelDelta || -event.detail)));\n\n            func(event)\n\n            return false;\n        }\n\n        // TODO add more backwards compatibility somehow\n        let svgelement = document.querySelector(query);\n\n        if (svgelement.addEventListener) {\n            // IE9, Chrome, Safari, Opera\n            svgelement.addEventListener(\"mousewheel\", MouseWheelHandler, false);\n            // Firefox\n            svgelement.addEventListener(\"DOMMouseScroll\", MouseWheelHandler, false);\n        } else  {\n            // IE 6/7/8\n            svgelement.attachEvent(\"onmousewheel\", MouseWheelHandler);\n        }\n        svgelement.addEventListener('mousewheel', function(e) {\n            console.log('event', e)\n        }, false)\n    }\n}\n","\"use strict\";\n\n// singleton to generate unique id's\nlet existingIdInstance = null;\n// usage: let id = new Id().unique\nexport class Id {\n    constructor() {\n        if(!existingIdInstance){\n            existingIdInstance = this;\n        }\n\n        this.prefix = \"id\";\n        this.nextId = 0;\n\n        return existingIdInstance;\n    }\n\n    get unique() {\n        let retVal = this.generate();\n\n        // find next unused idXXXX to prevent id collision that might be caused by some other component\n        // (it really should not happen, but this is a simple method to ensure safety)\n        while($(\"#\"+retVal).length) {\n            this.nextId++;\n            retVal = this.generate();\n        }\n        // return this id\n        this.nextId++;\n\n        return retVal;\n    }\n\n    generate() {\n        return this.prefix + this.nextId;\n    }\n}\n\n// to es5 compiler friendly implementation (\"calling a builtin Map constructor without new is forbidden\")\nexport class MapWithDefaultValue {\n    constructor(defaultValue) {\n        this.map = new Map();\n        this.default = defaultValue;\n\n\n    }\n\n    get size() {\n        return this.map.size;\n    }\n\n    clear() {\n        return this.map.clear();\n    }\n\n    forEach(...args) {\n        return this.map.forEach(...args);\n    }\n\n    get(key) {\n        return this.map.get(key);\n    }\n\n    delete(key) {\n        return this.map.delete(key);\n    }\n\n    set(key, value) {\n        return this.map.set(key, value);\n    }\n\n    has(key) {\n        return this.map.has(key);\n    }\n\n    entries() {\n        return this.map.entries();\n    }\n\n    keys() {\n        return this.map.keys();\n    }\n\n    values() {\n        return this.map.values();\n    }\n}\n\n/*\n// es6 implementation\nexport class MapWithDefaultValue extends Map {\n    constructor(defaultValue) {\n        super();\n\n        this.default = defaultValue;\n    }\n\n    get(key) {\n        if(this.has(key)) {\n            return super.get(key);\n        } else {\n            return this.default;\n        }\n    }\n}\n*/","import * as Structures from './structuresAndClasses.js'\n\nclass Tag {\n    constructor(tagName) {\n        this.tagName = tagName;\n\n        this.$el = $(\"<\"+this.tagName+\">\");\n\n        this.id = new Structures.Id().unique;\n    }\n\n    addClass(name) {\n        this.$el.addClass(name);\n    }\n\n    removeClasses(...classes) {\n        for(let item of classes) {\n            this.$el.removeClass(item);\n        }\n    }\n\n    addAttr(assoc) {\n        this.checkIfElementExistsInDOM();\n\n        // add attributes to the element\n        this.$el.attr(assoc);\n    }\n\n    getAttr(name) {\n        this.checkIfElementExistsInDOM();\n\n        return this.$el.attr(name);\n    }\n\n    removeAttr(name) {\n        this.checkIfElementExistsInDOM();\n\n        this.$el.removeAttr(name);\n    }\n\n    set id(id) {\n        this.addAttr({\"id\": id});\n    };\n\n    get id() {\n        return this.getAttr(\"id\");\n    };\n\n    get() {\n        this.checkIfElementExistsInDOM();\n        return this.$el;\n    }\n\n    // if the element exists in dom, we need to fetch it using jQuery\n    checkIfElementExistsInDOM() {\n        let $jqElement = $(\"#\"+this.$el.attr('id'));\n        if($jqElement.length) {\n            this.$el = $jqElement;\n        }\n    }\n}\n\nclass Draggable extends Tag {\n    constructor(tagName) {\n        super(tagName);\n    }\n\n    draggable(value) {\n        this.addAttr({\"draggable\": value});\n    }\n}\n\nclass Rotatable extends Tag {\n    constructor(tagName) {\n        super(tagName);\n    }\n\n    rotatable(value) {\n        this.addAttr({\"rotatable\": value});\n    }\n}\n\n// there is no multiple inheritance in ES6, so I have to do something ugly like this\nclass DraggableRotatable extends Draggable {\n    constructor(tagName) {\n        super(tagName);\n    }\n\n    rotatable(value) {\n        this.addAttr({\"rotatable\": value});\n    }\n}\n\nclass SvgElement extends DraggableRotatable {\n    constructor(x, y, w, h, tagName) {\n        super(tagName);\n\n        this.addAttr({\n            x: x,\n            y: y,\n            width: w,\n            height: h\n        });\n    }\n}\n\nexport class Rectangle extends SvgElement {\n    constructor(x, y, w, h, fill, stroke) {\n        super(x, y, w, h, \"rect\");\n        this.addAttr({\n            fill: fill,\n            stroke: stroke,\n            'stroke-width': 0.5,\n            'pointer-events': 'all' // to trigger hover even with transparent background\n        });\n    }\n}\n\nexport class SvgImage extends SvgElement {\n    constructor(x, y, w, h, url) {\n        super(x, y, w, h, \"image\");\n        this.addAttr({\n            \"xlink:href\": url\n        });\n    }\n\n    changeUrl(url) {\n        this.addAttr({\n            \"xlink:href\": url\n        });\n    }\n}\n\nexport class Group extends DraggableRotatable {\n    constructor() {\n        super(\"g\");\n    }\n\n    addChild(el) {\n        this.$el.append(el.$el);\n        return el; // pro jednodussi \"let rect = g.addChild(new Rectangle(...\"\n    }\n}\n\nexport class PolylinePoint {\n    constructor(x, y) {\n        this.x = 0;\n        this.y = 0;\n        if(x !== undefined && y !== undefined) {\n            this.x = x;\n            this.y = y;\n        }\n    }\n\n    set(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    static parseFromString(string) {\n        let arr = string.split(\",\");\n        return new PolylinePoint(arr[0], arr[1]);\n    }\n\n    get string() {\n        return this.x + \",\" + this.y;\n    }\n\n    static equals(a, b) {\n        return a.x === b.x && a.y === b.y;\n    }\n}\n\nclass SmartArray {\n    constructor(arr) {\n        if(arr !== undefined) {\n            this.arr = arr;\n        } else {\n            this.arr = [];\n        }\n    }\n\n    copy() {\n        return SmartArray($.extend(true, [], this.arr));\n    }\n\n    append(point) {\n        return this.addWithIndex(point, this.arr.length);\n    }\n\n    prepend(point) {\n        return this.addWithIndex(point, 0);\n    }\n\n    // add a point at the specified index, move all following items\n    addWithIndex(point, index) {\n        for(let i = this.arr.length ; i > index ; --i) {\n            this.arr[i] = this.arr[i-1];\n        }\n        this.arr[index] = point;\n        return this; // to enable chaining of append / preppend / addWithIndex commands\n    }\n\n    get length() {\n        return this.arr.length;\n    }\n\n    getItem(index) {\n        return this.arr[index];\n    }\n\n    get last() {\n        if(this.length!==0) {\n            return this.arr[this.length - 1];\n        } else {\n            return false;\n        }\n    }\n\n    get first() {\n        if(this.length!==0) {\n            return this.arr[0];\n        } else {\n            return false;\n        }\n    }\n\n    // indexArray must be sorted (ASC, eg. [1, 3, 4, 8])\n    remove(index) {\n        let length = this.length;\n\n        for(let i = index ; i < length ; ++i) {\n            this.arr[i] = this.arr[i + 1];\n        }\n        this.arr.pop();\n    }\n}\n\nexport class PolylinePoints extends SmartArray {\n    constructor(arr) {\n        super(arr);\n    }\n\n    copy() {\n        return new PolylinePoints($.extend(true, [], this.arr));\n    }\n\n    append(point) {\n        // call inherited function to handle the appending\n        super.append(point);\n\n        // if the second to last point is unnecessary, remove it\n        let length = this.length;\n        if ( length >= 3\n                && (    ( this.getItem(length - 3).x === this.getItem(length - 2).x &&\n                          this.getItem(length - 2).x === this.getItem(length - 1).x )\n                     || ( this.getItem(length - 3).y === this.getItem(length - 2).y &&\n                          this.getItem(length - 2).y === this.getItem(length - 1).y )\n                   )\n           )\n        {\n            this.remove(length - 2);\n        }\n\n        // return this element (to allow chaining)\n        return this;\n    }\n\n\n    static parseFromString(string) {\n        let pointStrings = string.split(\" \");\n        let points = new PolylinePoints();\n\n        for(let i = 0 ; i < pointStrings.length ; ++i) {\n            points.append(PolylinePoint.parseFromString(pointStrings[i]));\n        }\n\n        return points;\n    }\n\n    get string() {\n        let string = \"\";\n        for(let i = 0 ; i < this.length ; ++i) {\n            if(i !== 0) {\n                string += \" \";\n            }\n            string += this.arr[i].string;\n        }\n        return string;\n    }\n\n    forEach(func) {\n        for(let i = 0 ; i < this.arr.length ; ++i) {\n            func(this.arr[i]);\n        }\n    }\n}\n\nexport class PolyLine extends Tag {\n    constructor(points, color, strokeWidth) {\n        super(\"polyline\");\n\n        this.addAttr({\n            points: points.string,\n            stroke: color,\n            fill: \"none\",\n            \"stroke-width\": strokeWidth\n        });\n    }\n\n    updatePoints(points) {\n        this.addAttr({\n            points: points.string\n        });\n    }\n}\n\nexport class Pattern extends Tag {\n    constructor(id, width, height) {\n        super(\"pattern\");\n\n        this.addAttr({\n            id: id,\n            x: 0,\n            y: 0,\n            width: width,\n            height: height,\n            patternUnits: \"userSpaceOnUse\",\n            viewBox: \"0 0 \"+width+\" \"+height\n        });\n    }\n\n    addChild(el) {\n        this.$el.append(el.$el);\n        return el; // pro jednodussi \"let rect = g.addChild(new Rectangle(...\"\n    }\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZXM2L2NhbnZhcy5qcyIsInNyYy9lczYvY29udGV4dE1lbnUuanMiLCJzcmMvZXM2L2VkaXRvckVsZW1lbnRzLmpzIiwic3JjL2VzNi9mbG9hdGluZ01lbnUuanMiLCJzcmMvZXM2L2ltcG9ydEV4cG9ydC5qcyIsInNyYy9lczYvbG9naWMuanMiLCJzcmMvZXM2L21haW4uanMiLCJzcmMvZXM2L3NpbXVsYXRpb24uanMiLCJzcmMvZXM2L3NtYWxsRnVuY3Rpb25zLmpzIiwic3JjL2VzNi9zdHJ1Y3R1cmVzQW5kQ2xhc3Nlcy5qcyIsInNyYy9lczYvc3ZnT2JqZWN0cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOzs7Ozs7OztBQUVBOztJQUFZLE07O0FBQ1o7O0lBQVksYzs7QUFDWjs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7Ozs7O0lBRU0sTztBQUNGLHFCQUFZLElBQVosRUFBa0IsR0FBbEIsRUFBdUIsS0FBdkIsRUFBOEIsTUFBOUIsRUFBc0M7QUFBQTs7QUFDbEMsYUFBSyxJQUFMLEdBQVksRUFBRSxVQUFGLEVBQVEsUUFBUixFQUFhLFlBQWIsRUFBb0IsY0FBcEIsRUFBWjs7QUFFQSxhQUFLLElBQUwsR0FBWSxDQUFaO0FBQ0EsYUFBSyxTQUFMLEdBQWlCLENBQWpCO0FBQ0EsYUFBSyxRQUFMLEdBQWdCLENBQWhCO0FBQ0g7Ozs7OztBQXNCRDttQ0FDVyxDLEVBQUc7QUFDVixtQkFBTyxLQUFLLElBQUwsR0FBYSxJQUFJLEtBQUssSUFBN0I7QUFDSDs7QUFFRDs7OzttQ0FDVyxDLEVBQUc7QUFDVixtQkFBTyxLQUFLLEdBQUwsR0FBWSxJQUFJLEtBQUssSUFBNUI7QUFDSDs7OzRCQTVCVztBQUNSLG1CQUFPLEtBQUssSUFBTCxDQUFVLEtBQVYsR0FBa0IsS0FBSyxJQUE5QjtBQUNIOzs7NEJBRVk7QUFDVCxtQkFBTyxLQUFL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QWdCLEdBQUcsR0FBbkI7QUFDQSxtQkFBTyxFQUFQLENBRlMsQ0FFRTtBQUNkOzs7O0VBbEJ3QixHIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc31yZXR1cm4gZX0pKCkiLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0ICogYXMgc3ZnT2JqIGZyb20gJy4vc3ZnT2JqZWN0cy5qcydcbmltcG9ydCAqIGFzIGVkaXRvckVsZW1lbnRzIGZyb20gJy4vZWRpdG9yRWxlbWVudHMuanMnXG5pbXBvcnQgTG9naWMgZnJvbSAnLi9sb2dpYy5qcydcbmltcG9ydCBDb250ZXh0TWVudSBmcm9tICcuL2NvbnRleHRNZW51LmpzJ1xuaW1wb3J0IEZsb2F0aW5nTWVudSBmcm9tICcuL2Zsb2F0aW5nTWVudS5qcydcbmltcG9ydCBTaW11bGF0aW9uIGZyb20gJy4vc2ltdWxhdGlvbi5qcydcbmltcG9ydCBGbiBmcm9tICcuL3NtYWxsRnVuY3Rpb25zLmpzJ1xuXG5jbGFzcyBWaWV3Qm94IHtcbiAgICBjb25zdHJ1Y3RvcihsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5yZWFsID0geyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQgfVxuXG4gICAgICAgIHRoaXMuem9vbSA9IDFcbiAgICAgICAgdGhpcy5sZWZ0U2hpZnQgPSAwXG4gICAgICAgIHRoaXMudG9wU2hpZnQgPSAwXG4gICAgfVxuXG4gICAgZ2V0IHdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFsLndpZHRoIC8gdGhpcy56b29tXG4gICAgfVxuXG4gICAgZ2V0IGhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbC5oZWlnaHQgLyB0aGlzLnpvb21cbiAgICB9XG5cbiAgICBnZXQgbGVmdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbC5sZWZ0IC0gKHRoaXMubGVmdFNoaWZ0IC8gdGhpcy56b29tKSArICgodGhpcy5yZWFsLndpZHRoIC0gdGhpcy53aWR0aCkgLyAyKVxuICAgIH1cblxuICAgIGdldCB0b3AoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWwudG9wIC0gKHRoaXMudG9wU2hpZnQgLyB0aGlzLnpvb20pICsgKCh0aGlzLnJlYWwuaGVpZ2h0IC0gdGhpcy5oZWlnaHQpIC8gMilcbiAgICB9XG5cbiAgICBnZXQgc3RyKCkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5sZWZ0fSAke3RoaXMudG9wfSAke3RoaXMud2lkdGh9ICR7dGhpcy5oZWlnaHR9YFxuICAgIH1cblxuICAgIC8vIHRyYW5zZm9ybXMgaG9yaXpvbnRhbCB1bml0cyB0byB0aGUgc2NhbGUgYW5kIHNoaWZ0IG9mIHRoZSBlZGl0b3JcbiAgICB0cmFuc2Zvcm1YKHgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdCArICh4IC8gdGhpcy56b29tKVxuICAgIH1cblxuICAgIC8vIHRyYW5zZm9ybXMgdmVydGljYWwgdW5pdHMgdG8gdGhlIHNjYWxlIGFuZCBzaGlmdCBvZiB0aGUgZWRpdG9yXG4gICAgdHJhbnNmb3JtWSh5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvcCArICh5IC8gdGhpcy56b29tKVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3ZnIHtcbiAgICBjb25zdHJ1Y3RvcihjYW52YXMsIGdyaWRTaXplKSB7XG4gICAgICAgIHRoaXMuJHN2ZyA9ICQoY2FudmFzKTtcblxuICAgICAgICB0aGlzLmdyaWRTaXplID0gZ3JpZFNpemU7XG5cbiAgICAgICAgdGhpcy5ib3hlcyA9IFtdOyAvLyBzdG9yZXMgYWxsIGJveGVzXG4gICAgICAgIHRoaXMud2lyZXMgPSBbXTsgLy8gc3RvcmVzIGFsbCB3aXJlc1xuXG4gICAgICAgIHRoaXMuc2ltdWxhdGlvbkVuYWJsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuc2ltdWxhdGlvbiA9IG5ldyBTaW11bGF0aW9uKHRoaXMpOyAvLyBkdW1teSwgd2lsbCBiZSBvdmVyd3JpdHRlbiBvbiBzdGFydE5ld1NpbXVsYXRpb25cblxuICAgICAgICAvLyBjcmVhdGUgdGhlIGRlZnMgZWxlbWVudCwgdXNlZCBmb3IgcGF0dGVybnNcbiAgICAgICAgdGhpcy4kZGVmcyA9ICQoXCI8ZGVmcz5cIik7XG4gICAgICAgIHRoaXMuJHN2Zy5wcmVwZW5kKHRoaXMuJGRlZnMpO1xuXG4gICAgICAgIC8vIEJBQ0tHUk9VTkQgUEFUVEVSTlxuICAgICAgICBsZXQgcGF0dGVybiA9IG5ldyBzdmdPYmouUGF0dGVybihcImdyaWRcIiwgdGhpcy5ncmlkU2l6ZSwgdGhpcy5ncmlkU2l6ZSk7XG5cbiAgICAgICAgbGV0IHBhdHRlcm5Qb2ludHMgPSBuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnRzKClcbiAgICAgICAgICAgIC5hcHBlbmQobmV3IHN2Z09iai5Qb2x5bGluZVBvaW50KDAsIDApKVxuICAgICAgICAgICAgLmFwcGVuZChuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnQodGhpcy5ncmlkU2l6ZSwgMCkpXG4gICAgICAgICAgICAuYXBwZW5kKG5ldyBzdmdPYmouUG9seWxpbmVQb2ludCh0aGlzLmdyaWRTaXplLCB0aGlzLmdyaWRTaXplKSk7XG5cbiAgICAgICAgcGF0dGVybi5hZGRDaGlsZChuZXcgc3ZnT2JqLlBvbHlMaW5lKHBhdHRlcm5Qb2ludHMsIFwiI2EzYTRkMlwiLCAyKSk7XG4gICAgICAgIHRoaXMuYWRkUGF0dGVybihwYXR0ZXJuLmdldCgpKTtcblxuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSBuZXcgc3ZnT2JqLlJlY3RhbmdsZSgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgXCJ1cmwoI2dyaWQpXCIsIFwibm9uZVwiKTtcbiAgICAgICAgdGhpcy5hcHBlbmRKUXVlcnlPYmplY3QodGhpcy5iYWNrZ3JvdW5kLmdldCgpKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG5cbiAgICAgICAgLy8gc2V0IHRoZSB2aWV3Ym94IGZvciBmdXR1cmUgem9vbWluZyBhbmQgbW92aW5nIG9mIHRoZSBjYW52YXNcbiAgICAgICAgdGhpcy4kc3ZnLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pbllNaW4gc2xpY2UnKVxuICAgICAgICB0aGlzLnZpZXdib3ggPSBuZXcgVmlld0JveCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodClcbiAgICAgICAgdGhpcy5hcHBseVZpZXdib3goKVxuXG4gICAgICAgIC8vIENPTlNUUlVDVCBDT05URVhUIE1FTlVcbiAgICAgICAgdGhpcy5jb250ZXh0TWVudSA9IG5ldyBDb250ZXh0TWVudSh0aGlzKTtcblxuICAgICAgICAvLyBDT05TVFJVQ1QgRkxPQVRJTkcgTUVOVVxuICAgICAgICAvLyB0aGlzLmZsb2F0aW5nTWVudSA9IG5ldyBGbG9hdGluZ01lbnUodGhpcyk7XG4gICAgICAgIHRoaXMuZmxvYXRpbmdNZW51ID0gbmV3IEZsb2F0aW5nTWVudSh0aGlzKTtcblxuICAgICAgICAvLyBBTEwgRVZFTlQgQ0FMTEJBQ0tTXG4gICAgICAgIGxldCB0YXJnZXQ7XG4gICAgICAgIHRoaXMuJHN2Zy5vbignbW91c2Vkb3duJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5nZXRSZWFsVGFyZ2V0KGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICBpZih0YXJnZXQhPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBwcm9wYWdhdGUgbW91c2Vkb3duIHRvIHRoZSByZWFsIHRhcmdldFxuICAgICAgICAgICAgICAgIHRhcmdldC5vbk1vdXNlRG93bihldmVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG1vdXNlZG93biBoYXBwZW5lZCBkaXJlY3RseSBvbiB0aGUgc3ZnXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1vdXNlRG93bihldmVudClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5oaWRlQ29udGV4dE1lbnUoKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pLm9uKCdtb3VzZW1vdmUnLCBldmVudCA9PiB7XG4gICAgICAgICAgICBpZih0YXJnZXQhPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQub25Nb3VzZU1vdmUoZXZlbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBtb3VzZW1vdmUgaGFwcGVuZWQgZGlyZWN0bHkgb24gdGhlIHN2Z1xuICAgICAgICAgICAgICAgIHRoaXMub25Nb3VzZU1vdmUoZXZlbnQpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pLm9uKCdtb3VzZXVwJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZih0YXJnZXQhPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQub25Nb3VzZVVwKGV2ZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbW91c2V1cCBoYXBwZW5lZCBkaXJlY3RseSBvbiB0aGUgc3ZnXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1vdXNlVXAoZXZlbnQpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRhcmdldCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSkub24oXCJjb250ZXh0bWVudVwiLCBldmVudCA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlDb250ZXh0TWVudShldmVudC5wYWdlWCwgZXZlbnQucGFnZVksIHRoaXMuZ2V0UmVhbEpRdWVyeVRhcmdldChldmVudC50YXJnZXQpKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIEZuLmFkZE1vdXNlU2Nyb2xsRXZlbnRMaXN0ZW5lcihjYW52YXMsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIC8vIHpvb20gb25seSBpZiB0aGUgY3RybCBrZXkgaXMgcHJlc3NlZFxuICAgICAgICAgICAgaWYoZXZlbnQuY3RybEtleSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuZGVsdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tICs9IDAuMVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbSAtPSAwLjFcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0IHdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kc3ZnLndpZHRoKClcbiAgICB9XG5cbiAgICBnZXQgaGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kc3ZnLmhlaWdodCgpXG4gICAgfVxuXG4gICAgb25Nb3VzZURvd24oZXZlbnQpIHtcbiAgICAgICAgaWYoZXZlbnQuY3RybEtleSkge1xuICAgICAgICAgICAgdGhpcy5tb3ZlQ2FudmFzID0ge1xuICAgICAgICAgICAgICAgIGxlZnQ6IGV2ZW50LnBhZ2VYLFxuICAgICAgICAgICAgICAgIHRvcDogZXZlbnQucGFnZVlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTW91c2VNb3ZlKGV2ZW50KSB7XG4gICAgICAgIGlmKHRoaXMubW92ZUNhbnZhcykge1xuICAgICAgICAgICAgbGV0IGxlZnQgPSBldmVudC5wYWdlWCAtIHRoaXMubW92ZUNhbnZhcy5sZWZ0XG4gICAgICAgICAgICBsZXQgdG9wID0gZXZlbnQucGFnZVkgLSB0aGlzLm1vdmVDYW52YXMudG9wXG5cbiAgICAgICAgICAgIHRoaXMudmlld2JveC5sZWZ0U2hpZnQgKz0gbGVmdFxuICAgICAgICAgICAgdGhpcy52aWV3Ym94LnRvcFNoaWZ0ICs9IHRvcFxuICAgICAgICAgICAgdGhpcy5hcHBseVZpZXdib3goKVxuXG4gICAgICAgICAgICB0aGlzLm1vdmVDYW52YXMgPSB7XG4gICAgICAgICAgICAgICAgbGVmdDogZXZlbnQucGFnZVgsXG4gICAgICAgICAgICAgICAgdG9wOiBldmVudC5wYWdlWVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Nb3VzZVVwKGV2ZW50KSB7XG4gICAgICAgIGlmKHRoaXMubW92ZUNhbnZhcykge1xuICAgICAgICAgICAgdGhpcy5tb3ZlQ2FudmFzID0gdW5kZWZpbmVkXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhcHBseVZpZXdib3goKSB7XG4gICAgICAgIC8vIGFkanVzdCBiYWNrZ3JvdW5kXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZC5hZGRBdHRyKHtcbiAgICAgICAgICAgIHg6IHRoaXMudmlld2JveC5sZWZ0LFxuICAgICAgICAgICAgeTogdGhpcy52aWV3Ym94LnRvcCxcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnZpZXdib3gud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMudmlld2JveC5oZWlnaHRcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBzZXQgdGhlIHZpZXdCb3ggYXR0cmlidXRlXG4gICAgICAgIHRoaXMuJHN2Zy5hdHRyKCd2aWV3Qm94JywgdGhpcy52aWV3Ym94LnN0cilcbiAgICB9XG5cbiAgICBnZXQgem9vbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld2JveC56b29tXG4gICAgfVxuXG4gICAgc2V0IHpvb20odmFsdWUpIHtcbiAgICAgICAgdGhpcy52aWV3Ym94Lnpvb20gPSB2YWx1ZVxuICAgICAgICB0aGlzLmFwcGx5Vmlld2JveCgpXG4gICAgICAgIC8vIHRoaXMucmVmcmVzaCgpXG4gICAgfVxuXG4gICAgZ2V0IGV4cG9ydERhdGEoKSB7XG4gICAgICAgIHRoaXMuZXhwb3J0V2lyZUlkTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmV4cG9ydFdpcmVJZCA9IDA7XG5cbiAgICAgICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICAgICAvLyB0b2RvIGltcGxlbWVudCBncmlkU2l6ZSBzY2FsaW5nXG4gICAgICAgICAgICAvLyBncmlkU2l6ZTogdGhpcy5ncmlkU2l6ZSxcbiAgICAgICAgICAgIGJveGVzOiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmJveGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBkYXRhLmJveGVzW2ldID0gdGhpcy5ib3hlc1tpXS5leHBvcnREYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgaW1wb3J0RGF0YShkYXRhKSB7XG4gICAgICAgIHRoaXMuc2ltdWxhdGlvbkVuYWJsZWQgPSBmYWxzZVxuXG4gICAgICAgIC8vIHRvZG8gaW1wbGVtZW50IGdyaWRTaXplIHNjYWxpbmdcblxuICAgICAgICAvLyBsaXN0IG9mIHdpcmVzIHRvIGJlIGFkZGVkXG4gICAgICAgIGxldCBuZXdXaXJlcyA9IG5ldyBNYXAoKTtcblxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IGRhdGEuYm94ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIC8vIGFkZCBib3hcbiAgICAgICAgICAgIGxldCBib3g7XG4gICAgICAgICAgICBzd2l0Y2ggKGRhdGEuYm94ZXNbaV0uY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZ2F0ZVwiOlxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgbmV3IGdhdGUgKHdpdGhvdXQgcmVsb2FkaW5nIHRoZSBTVkcsIHdlIHdpbGwgcmVsb2FkIGl0IG9uY2UgYWZ0ZXIgdGhlIGltcG9ydClcbiAgICAgICAgICAgICAgICAgICAgYm94ID0gdGhpcy5uZXdHYXRlKGRhdGEuYm94ZXNbaV0ubmFtZSwgMCwgMCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiaW9cIjpcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkYXRhLmJveGVzW2ldLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbnB1dFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBuZXcgaW5wdXQgKHdpdGhvdXQgcmVsb2FkaW5nIHRoZSBTVkcsIHdlIHdpbGwgcmVsb2FkIGl0IG9uY2UgYWZ0ZXIgdGhlIGltcG9ydClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3ggPSB0aGlzLm5ld0lucHV0KDAsIDAsIGRhdGEuYm94ZXNbaV0uaXNPbiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm91dHB1dFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBuZXcgb3V0cHV0ICh3aXRob3V0IHJlbG9hZGluZyB0aGUgU1ZHLCB3ZSB3aWxsIHJlbG9hZCBpdCBvbmNlIGFmdGVyIHRoZSBpbXBvcnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94ID0gdGhpcy5uZXdPdXRwdXQoMCwgMCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVW5rbm93biBpbyBib3ggbmFtZSAnXCIrZGF0YS5ib3hlc1tpXS5uYW1lK1wiJy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlVua25vd24gYm94IGNhdGVnb3J5ICdcIitkYXRhLmJveGVzW2ldLmNhdGVnb3J5K1wiJy5cIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChib3gpIHtcbiAgICAgICAgICAgICAgICAvLyBwcm9jY2VzcyBib3ggdHJhbnNmb3JtcyAodHJhbnNsYXRpb24gYW5kIHJvdGF0aW9uKVxuICAgICAgICAgICAgICAgIGxldCB0cmFuc2Zvcm0gPSBuZXcgZWRpdG9yRWxlbWVudHMuVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMCA7IGogPCBkYXRhLmJveGVzW2ldLnRyYW5zZm9ybS5pdGVtcy5sZW5ndGggOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkYXRhLmJveGVzW2ldLnRyYW5zZm9ybS5pdGVtc1tqXS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtLnNldFRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib3hlc1tpXS50cmFuc2Zvcm0uaXRlbXNbal0uYXJnc1swXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib3hlc1tpXS50cmFuc2Zvcm0uaXRlbXNbal0uYXJnc1sxXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicm90YXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtLnNldFJvdGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib3hlc1tpXS50cmFuc2Zvcm0uaXRlbXNbal0uYXJnc1swXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib3hlc1tpXS50cmFuc2Zvcm0uaXRlbXNbal0uYXJnc1sxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib3hlc1tpXS50cmFuc2Zvcm0uaXRlbXNbal0uYXJnc1syXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmtub3duIHRyYW5zZm9ybSBwcm9wZXJ0eSAnXCIrZGF0YS5ib3hlc1tpXS50cmFuc2Zvcm0uaXRlbXNbal0ubmFtZStcIicuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYm94LnNldFRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xuXG4gICAgICAgICAgICAgICAgLy8gYWRkIGFsbCB3aXJlcyB0byB0aGUgbGlzdCBvZiB3aXJlcyB0byBiZSBhZGRlZFxuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDAgOyBqIDwgZGF0YS5ib3hlc1tpXS5jb25uZWN0aW9ucy5sZW5ndGggOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBhcnRpZmljaWFsIHdpcmUgaWRcbiAgICAgICAgICAgICAgICAgICAgbGV0IHdpcmVJZCA9IGRhdGEuYm94ZXNbaV0uY29ubmVjdGlvbnNbal0ud2lyZUlkO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHBhc3MgdGhlIHZhbHVlcyBnb3QgZnJvbSBqc29uIGludG8gYSB2YXJpYWJsZSB0aGF0IHdpbGwgYmUgYWRkZWQgaW50byB0aGUgbWFwXG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBkYXRhLmJveGVzW2ldLmNvbm5lY3Rpb25zW2pdLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZGF0YS5ib3hlc1tpXS5jb25uZWN0aW9uc1tqXS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm94SWQ6IGJveC5pZFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgdmFsdWUgdG8gdGhlIG1hcFxuICAgICAgICAgICAgICAgICAgICBpZihuZXdXaXJlcy5oYXMod2lyZUlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgYWxyZWFkeSBpcyBhIHdpcmUgd2l0aCB0aGlzIGlkIGluIHRoZSBtYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIHZhbHVlIHRvIHRoZSBlbmQgb2YgdGhlIGFycmF5IG9mIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hcFZhbHVlID0gbmV3V2lyZXMuZ2V0KHdpcmVJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBWYWx1ZVttYXBWYWx1ZS5sZW5ndGhdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdXaXJlcy5zZXQod2lyZUlkLCBtYXBWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyB3aXJlIHdpdGggdGhpcyBpZCBpbiB0aGUgbWFwXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIHdpcmUgYW5kIHNldCB0aGUgdmFsdWUgdG8gYmUgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGFycmF5XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdXaXJlcy5zZXQod2lyZUlkLCBbdmFsdWVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlZnJlc2ggdGhlIFNWRyBkb2N1bWVudCAobmVlZGVkIGZvciB3aXJpbmcpXG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuXG4gICAgICAgIC8vIHdpdGggYWxsIGJveGVzIGFkZGVkLCB3ZSBjYW4gbm93IGNvbm5lY3QgdGhlbSB3aXRoIHdpcmVzXG4gICAgICAgIG5ld1dpcmVzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBsZXQgY29ubmVjdG9ySWRzID0gW107XG4gICAgICAgICAgICBpZihpdGVtWzBdICYmIGl0ZW1bMV0pIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgWzAsIDFdKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBib3ggPSB0aGlzLmdldEJveEJ5SWQoaXRlbVtpXS5ib3hJZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdG9ySWRzW2ldID0gYm94LmNvbm5lY3RvcnNbaXRlbVtpXS5pbmRleF0uaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5uZXdXaXJlKGNvbm5lY3Rvcklkc1swXSwgY29ubmVjdG9ySWRzWzFdLCB0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gcmVmcmVzaCB0aGUgU1ZHIGRvY3VtZW50XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuXG4gICAgICAgIHRoaXMuc2ltdWxhdGlvbkVuYWJsZWQgPSB0cnVlO1xuICAgICAgICBmb3IgKGxldCBib3ggb2YgdGhpcy5ib3hlcykge1xuICAgICAgICAgICAgaWYgKGJveCBpbnN0YW5jZW9mIGVkaXRvckVsZW1lbnRzLklucHV0Qm94KSB7XG4gICAgICAgICAgICAgICAgLy8gc3dpdGNoIHRoZSBpbnB1dCBib3ggc3RhdGUgdG8gdGhlIG9wb3NpdCBhbmQgYmFjaywgZm9yIHNvbWUgcmVhc29uIGNhbGxpbmcgYm94LnJlZnJlc2hTdGF0ZSgpXG4gICAgICAgICAgICAgICAgLy8gcmVzdWx0cyBpbiB3ZWlyZCB1bmZpbmlzaGVkIHNpbXVsYXRpb25cbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNhdXNlcyB1cGRhdGUgb2YgdGhlIG91dHB1dCBjb25uZWN0b3IgYW5kIGEgc3RhcnQgb2YgYSBuZXcgc2ltdWxhdGlvblxuXG4gICAgICAgICAgICAgICAgLy8gdG9kbyBmaW5kIGJldHRlciBzb2x1dGlvbiBpbnN0ZWFkIG9mIHRoaXMgd29ya2Fyb3VuZFxuICAgICAgICAgICAgICAgIGJveC5vbiA9ICFib3gub25cbiAgICAgICAgICAgICAgICBib3gub24gPSAhYm94Lm9uXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB3aXJlQ3JlYXRpb25IZWxwZXIoY29ubmVjdG9ySWQpIHtcbiAgICAgICAgaWYoIXRoaXMuZmlyc3RDb25uZWN0b3JJZCkge1xuICAgICAgICAgICAgdGhpcy5maXJzdENvbm5lY3RvcklkID0gY29ubmVjdG9ySWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5ld1dpcmUodGhpcy5maXJzdENvbm5lY3RvcklkLCBjb25uZWN0b3JJZCk7XG4gICAgICAgICAgICB0aGlzLmZpcnN0Q29ubmVjdG9ySWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGFydE5ld1NpbXVsYXRpb24oc3RhcnRpbmdDb25uZWN0b3IsIHN0YXRlKSB7XG4gICAgICAgIGlmKHRoaXMuc2ltdWxhdGlvbkVuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2ltdWxhdGlvbiA9IG5ldyBTaW11bGF0aW9uKHRoaXMpXG4gICAgICAgICAgICB0aGlzLnNpbXVsYXRpb24ubm90aWZ5Q2hhbmdlKHN0YXJ0aW5nQ29ubmVjdG9yLmlkLCBzdGF0ZSlcbiAgICAgICAgICAgIHRoaXMuc2ltdWxhdGlvbi5ydW4oKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmV3R2F0ZShuYW1lLCB4LCB5LCByZWZyZXNoID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXdCb3goeCwgeSwgbmV3IGVkaXRvckVsZW1lbnRzLkdhdGUodGhpcywgbmFtZSwgeCwgeSksIHJlZnJlc2gpO1xuICAgIH1cblxuICAgIG5ld0lucHV0KHgsIHksIGlzT24gPSBmYWxzZSwgcmVmcmVzaCA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV3Qm94KHgsIHksIG5ldyBlZGl0b3JFbGVtZW50cy5JbnB1dEJveCh0aGlzLCBpc09uKSwgcmVmcmVzaCk7XG4gICAgfVxuXG4gICAgbmV3T3V0cHV0KHgsIHksIHJlZnJlc2ggPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5ld0JveCh4LCB5LCBuZXcgZWRpdG9yRWxlbWVudHMuT3V0cHV0Qm94KHRoaXMpLCByZWZyZXNoKTtcbiAgICB9XG5cbiAgICBuZXdCb3goeCwgeSwgb2JqZWN0LCByZWZyZXNoID0gdHJ1ZSkge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmJveGVzLmxlbmd0aDtcblxuICAgICAgICB0aGlzLmJveGVzW2luZGV4XSA9IG9iamVjdDtcblxuICAgICAgICAvLyB0cmFuc2xhdGUgdGhlIGdhdGUgaWYgeCBhbmQgeSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICAgICAgaWYoeCAmJiB5KSB7XG4gICAgICAgICAgICBsZXQgdHIgPSBuZXcgZWRpdG9yRWxlbWVudHMuVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICB0ci5zZXRUcmFuc2xhdGUoeCwgeSk7XG5cbiAgICAgICAgICAgIHRoaXMuYm94ZXNbaW5kZXhdLnN2Z09iai5hZGRBdHRyKHtcInRyYW5zZm9ybVwiOiB0ci5nZXQoKX0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hcHBlbmRFbGVtZW50KHRoaXMuYm94ZXNbaW5kZXhdLCByZWZyZXNoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5ib3hlc1tpbmRleF07XG4gICAgfVxuXG4gICAgcmVtb3ZlQm94KGdhdGVJZCkge1xuICAgICAgICBsZXQgJGdhdGUgPSAkKFwiI1wiK2dhdGVJZCk7XG5cbiAgICAgICAgLy8gZmluZCB0aGUgZ2F0ZSBpbiBzdmcncyBsaXN0IG9mIGdhdGVzXG4gICAgICAgIGxldCBnYXRlSW5kZXggPSAtMTtcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLmJveGVzLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgaWYodGhpcy5ib3hlc1tpXS5zdmdPYmouaWQ9PT1nYXRlSWQpIHtcbiAgICAgICAgICAgICAgICBnYXRlSW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoZ2F0ZUluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBhbGwgd2lyZXMgY29ubmVjdGVkIHRvIHRoaXMgZ2F0ZVxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuYm94ZXNbZ2F0ZUluZGV4XS5jb25uZWN0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVXaXJlc0J5Q29ubmVjdG9ySWQodGhpcy5ib3hlc1tnYXRlSW5kZXhdLmNvbm5lY3RvcnNbaV0uc3ZnT2JqLmlkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBnYXRlXG4gICAgICAgICAgICB0aGlzLmJveGVzLnNwbGljZShnYXRlSW5kZXgsIDEpO1xuICAgICAgICAgICAgJGdhdGUucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVHJ5aW5nIHRvIHJlbW92ZSBhbiBub25leGlzdGluZyBnYXRlLiAoR2F0ZSBpZDogXCIrZ2F0ZUlkK1wiKVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG5ld1dpcmUoZnJvbUlkLCB0b0lkLCByZWZyZXNoID0gdHJ1ZSkge1xuICAgICAgICAvLyB3aXJlIG11c3QgY29ubmVjdCB0d28gZGlzdGluY3QgZWxlbWVudHNcbiAgICAgICAgaWYgKGZyb21JZD09PXRvSWQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcblxuICAgICAgICBsZXQgY29ubmVjdG9ycyA9IFt0aGlzLmdldENvbm5lY3RvckJ5SWQoZnJvbUlkKSwgdGhpcy5nZXRDb25uZWN0b3JCeUlkKHRvSWQpXVxuXG4gICAgICAgIC8vIGlucHV0IGNvbm5lY3RvcnMgY2FuIGJlIGNvbm5lY3RlZCB0byBvbmUgd2lyZSBtYXhcbiAgICAgICAgY29ubmVjdG9ycy5mb3JFYWNoKGNvbm4gPT4ge1xuICAgICAgICAgICAgaWYoY29ubi5pc0lucHV0Q29ubmVjdG9yKVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlV2lyZXNCeUNvbm5lY3RvcklkKGNvbm4uaWQpXG4gICAgICAgIH0pXG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMud2lyZXMubGVuZ3RoO1xuICAgICAgICB0aGlzLndpcmVzW2luZGV4XSA9IG5ldyBlZGl0b3JFbGVtZW50cy5XaXJlKHRoaXMsIGZyb21JZCwgdG9JZCwgdGhpcy5ncmlkU2l6ZSwgcmVmcmVzaCk7XG5cbiAgICAgICAgY29ubmVjdG9ycy5mb3JFYWNoKGNvbm4gPT4ge1xuICAgICAgICAgICAgY29ubi5hZGRXaXJlSWQodGhpcy53aXJlc1tpbmRleF0uc3ZnT2JqLmlkKTtcbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLmFwcGVuZEVsZW1lbnQodGhpcy53aXJlc1tpbmRleF0sIHJlZnJlc2gpO1xuICAgICAgICB0aGlzLm1vdmVUb0JhY2tCeUlkKHRoaXMud2lyZXNbaW5kZXhdLnN2Z09iai5pZCk7XG5cbiAgICAgICAgaWYocmVmcmVzaClcbiAgICAgICAgICAgIHRoaXMud2lyZXNbaW5kZXhdLnVwZGF0ZVdpcmVTdGF0ZSgpXG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2lyZXNbaW5kZXhdO1xuICAgIH1cblxuICAgIGdldFdpcmVCeUlkKHdpcmVJZCkge1xuICAgICAgICBmb3IgKGNvbnN0IHdpcmUgb2YgdGhpcy53aXJlcykge1xuICAgICAgICAgICAgaWYod2lyZS5zdmdPYmouaWQgPT09IHdpcmVJZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB3aXJlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZ2V0V2lyZXNCeUNvbm5lY3RvcklkKGNvbm5lY3RvcklkKSB7XG4gICAgICAgIGxldCBjb25uZWN0b3IgPSB0aGlzLmdldENvbm5lY3RvckJ5SWQoY29ubmVjdG9ySWQpO1xuICAgICAgICByZXR1cm4gY29ubmVjdG9yLndpcmVJZHM7XG4gICAgfVxuXG4gICAgcmVtb3ZlV2lyZUJ5SWQod2lyZUlkKSB7XG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy53aXJlcy5sZW5ndGggOyArK2kpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLndpcmVzW2ldLnN2Z09iai5pZCA9PT0gd2lyZUlkKSB7XG5cbiAgICAgICAgICAgICAgICBsZXQgY29ubmVjdG9yMSA9IHRoaXMud2lyZXNbaV0uc3RhcnRDb25uZWN0b3I7XG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3RvcjIgPSB0aGlzLndpcmVzW2ldLmVuZENvbm5lY3RvcjtcblxuICAgICAgICAgICAgICAgIGNvbm5lY3RvcjEucmVtb3ZlV2lyZUlkQW5kVXBkYXRlKHdpcmVJZCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdG9yMi5yZW1vdmVXaXJlSWRBbmRVcGRhdGUod2lyZUlkKTtcblxuICAgICAgICAgICAgICAgIHRoaXMud2lyZXNbaV0uc3ZnT2JqLiRlbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLndpcmVzLnNwbGljZShpLCAxKTtcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVtb3ZlV2lyZXNCeUNvbm5lY3RvcklkKGNvbm5lY3RvcklkKSB7XG4gICAgICAgIGxldCBjb25uZWN0b3IgPSB0aGlzLmdldENvbm5lY3RvckJ5SWQoY29ubmVjdG9ySWQpO1xuXG4gICAgICAgIGNvbm5lY3Rvci53aXJlSWRzLmZvckVhY2god2lyZUlkID0+IHtcbiAgICAgICAgICAgIGxldCB3aXJlID0gdGhpcy5nZXRXaXJlQnlJZCh3aXJlSWQpO1xuXG4gICAgICAgICAgICAvLyBnZXQgdGhlIG90aGVyIGNvbm5lY3RvciB0aGF0IGlzIHRoZSB3aXJlIGNvbm5lY3RlZCB0b1xuICAgICAgICAgICAgbGV0IG90aGVyQ29ubmVjdG9yID0gdGhpcy5nZXRDb25uZWN0b3JCeUlkKHdpcmUuZnJvbUlkLCB3aXJlKTtcbiAgICAgICAgICAgIGlmKG90aGVyQ29ubmVjdG9yLnN2Z09iai5pZD09PWNvbm5lY3RvcklkKSB7XG4gICAgICAgICAgICAgICAgb3RoZXJDb25uZWN0b3IgPSB0aGlzLmdldENvbm5lY3RvckJ5SWQod2lyZS50b0lkLCB3aXJlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSB3aXJlIHJlY29yZCBmcm9tIHRoZSBvdGhlciBjb25uZWN0b3JcbiAgICAgICAgICAgIG90aGVyQ29ubmVjdG9yLndpcmVJZHMuZGVsZXRlKHdpcmVJZCk7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgd2lyZSByZXByZXNlbnRhdGlvbiB1c2luZyBqUXVlcnlcbiAgICAgICAgICAgICQoXCIjXCIgKyB3aXJlSWQpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAvLyBpZiBvdGhlckNvbm5lY3RvciBpcyBhbiBpbnB1dCBjb25uZWN0b3IsIHNldCBpdHMgc3RhdGUgdG8gdW5rbm93blxuICAgICAgICAgICAgaWYob3RoZXJDb25uZWN0b3IuaXNJbnB1dENvbm5lY3Rvcikge1xuICAgICAgICAgICAgICAgIG90aGVyQ29ubmVjdG9yLnNldFN0YXRlKExvZ2ljLnN0YXRlLnVua25vd24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjbGVhciB0aGUgbGlzdCBvZiB3aXJlIElkc1xuICAgICAgICBjb25uZWN0b3Iud2lyZUlkcy5jbGVhcigpO1xuICAgICAgICAvLyBpZiBjb25uZWN0b3IgaXMgYW4gaW5wdXQgY29ubmVjdG9yLCBzZXQgaXRzIHN0YXRlIHRvIHVua25vd25cbiAgICAgICAgaWYoY29ubmVjdG9yLmlzSW5wdXRDb25uZWN0b3IpIHtcbiAgICAgICAgICAgIGNvbm5lY3Rvci5zZXRTdGF0ZShMb2dpYy5zdGF0ZS51bmtub3duKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEJveEJ5SWQoZ2F0ZUlkKSB7XG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy5ib3hlcy5sZW5ndGggOyBpKyspIHtcbiAgICAgICAgICAgIGlmKHRoaXMuYm94ZXNbaV0uc3ZnT2JqLmlkPT09Z2F0ZUlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm94ZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGdldEJveEJ5Q29ubmVjdG9ySWQoY29ubmVjdG9ySWQpIHtcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLmJveGVzLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuYm94ZXNbaV0uZ2V0Q29ubmVjdG9yQnlJZChjb25uZWN0b3JJZCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJveGVzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBnZXRDb25uZWN0b3JCeUlkKGNvbm5lY3RvcklkLCB3aXJlKSB7XG4gICAgICAgIC8vIHRoZSB3aXJlIHZhcmlhYmxlIGlzIHVzZWQgYXMgaGV1cmlzdGljLFxuICAgICAgICAvLyB3aGVuIHdlIGtub3cgdGhlIHdpcmUsIHdlIGhhdmUgdG8gY2hlY2sgb25seVxuICAgICAgICAvLyB0d28gZ2F0ZXMgaW5zdGVhZCBvZiBhbGwgb2YgdGhlbVxuXG4gICAgICAgIGlmKHdpcmUhPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIHdlIGtub3cgdGhlIHdpcmUgLS0gd2UgY2FuIGNoZWNrIG9ubHkgZ2F0ZXMgYXQgdGhlIGVuZHMgb2YgdGhpcyB3aXJlXG4gICAgICAgICAgICBsZXQgY29ubmVjdG9yID0gd2lyZS5zdGFydEJveC5nZXRDb25uZWN0b3JCeUlkKGNvbm5lY3RvcklkKVxuICAgICAgICAgICAgaWYgKCFjb25uZWN0b3IpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0b3IgPSB3aXJlLmVuZEJveC5nZXRDb25uZWN0b3JCeUlkKGNvbm5lY3RvcklkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3RvclxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyB3ZSBkbyBub3Qga25vdyB0aGUgd2lyZSAtLSB3ZSBoYXZlIHRvIGNoZWNrIGFsbCBnYXRlc1xuICAgICAgICAgICAgZm9yIChjb25zdCBib3ggb2YgdGhpcy5ib3hlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RvciA9IGJveC5nZXRDb25uZWN0b3JCeUlkKGNvbm5lY3RvcklkKVxuICAgICAgICAgICAgICAgIGlmKGNvbm5lY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29ubmVjdG9yXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLy8gaWYgdGhlIG9iamVjdCwgdGhhdCB1c2VyIGludGVyYWN0ZWQgd2l0aCwgaXMgbm90IGEgY29ubmVjdG9yIGFuZCBpcyBpbiBhIGdyb3VwXG4gICAgLy8gcmV0dXJuIHRoZSBncm91cCBqUXVlcnkgb2JqZWN0IGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIGpRdWVyeSBvYmplY3RcbiAgICBnZXRSZWFsSlF1ZXJ5VGFyZ2V0KHRhcmdldCkge1xuICAgICAgICBsZXQgJHRhcmdldCA9ICQodGFyZ2V0KTtcbiAgICAgICAgaWYoISR0YXJnZXQuaGFzQ2xhc3MoXCJjb25uZWN0b3JcIikgJiYgJHRhcmdldC5wYXJlbnRzKCdnJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJHRhcmdldCA9ICR0YXJnZXQucGFyZW50KCk7XG4gICAgICAgICAgICB3aGlsZSAoJHRhcmdldC5wcm9wKFwidGFnTmFtZVwiKSAhPT0gXCJHXCIgJiYgJHRhcmdldC5wcm9wKFwidGFnTmFtZVwiKSAhPT0gXCJnXCIpIHtcbiAgICAgICAgICAgICAgICAkdGFyZ2V0ID0gJHRhcmdldC5wYXJlbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJHRhcmdldDtcbiAgICB9XG5cbiAgICAvLyByZXR1cm5zIHRoZSBlZGl0b3JFbGVtZW50IHRoYXQgdXNlciBpbnRlcmFjdGVkIHdpdGgsIHRoZSBcInRhcmdldFwiIGFyZ3VtZW50IGlzIGEgalF1ZXJ5IGVsZW1lbnRcbiAgICBnZXRSZWFsVGFyZ2V0KHRhcmdldCkge1xuICAgICAgICAvLyBldmVudHkgc2UgbXVzZWppIHpwcmFjb3ZhdCB0YWR5LCBwcm90b3plIHYgU1ZHIHNlIGV2ZW50eSBuZXByb3BhZ3VqaVxuICAgICAgICBsZXQgJHRhcmdldCA9ICQodGFyZ2V0KTtcblxuICAgICAgICBpZigkdGFyZ2V0Lmhhc0NsYXNzKFwiY29ubmVjdG9yXCIpKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGlzIGEgY29ubmVjdG9yLCBkb24ndCB0cmF2ZXJzZSBncm91cHNcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENvbm5lY3RvckJ5SWQoJHRhcmdldC5hdHRyKCdpZCcpKTtcbiAgICAgICAgfSBlbHNlIGlmKCR0YXJnZXQucGFyZW50cygnZycpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIHRoaXMgZWxlbWVudCBpcyBpbiBhIGdyb3VwIGFuZCBpdCBpcyBub3QgYSBjb25uZWN0b3JcblxuICAgICAgICAgICAgLy8gdHJhdmVyc2luZyB1cCB0aGUgRE9NIHRyZWUgdW50aWwgd2UgZmluZCB0aGUgY2xvc2VzdCBncm91cFxuICAgICAgICAgICAgbGV0ICRwYXJlbnRHcm91cCA9ICR0YXJnZXQucGFyZW50KCk7XG4gICAgICAgICAgICB3aGlsZSAoJHBhcmVudEdyb3VwLnByb3AoXCJ0YWdOYW1lXCIpICE9PSBcIkdcIiAmJiAkcGFyZW50R3JvdXAucHJvcChcInRhZ05hbWVcIikgIT09IFwiZ1wiKSB7XG4gICAgICAgICAgICAgICAgJHBhcmVudEdyb3VwID0gJHBhcmVudEdyb3VwLnBhcmVudCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRCb3hCeUlkKCRwYXJlbnRHcm91cC5hdHRyKCdpZCcpKTtcbiAgICAgICAgfSBlbHNlIGlmICgkdGFyZ2V0Lmhhc0NsYXNzKFwid2lyZVwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0V2lyZUJ5SWQoJHRhcmdldC5hdHRyKCdpZCcpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhcHBlbmRFbGVtZW50KGVsZW1lbnQsIHJlZnJlc2ggPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kSlF1ZXJ5T2JqZWN0KGVsZW1lbnQuZ2V0KCksIHJlZnJlc2gpO1xuICAgIH1cblxuICAgIGFwcGVuZEpRdWVyeU9iamVjdChvYmplY3QsIHJlZnJlc2ggPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuJHN2Zy5hcHBlbmQob2JqZWN0KTtcbiAgICAgICAgaWYocmVmcmVzaCkge1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGRQYXR0ZXJuKHBhdHRlcm4pIHtcbiAgICAgICAgdGhpcy4kZGVmcy5hcHBlbmQocGF0dGVybik7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH1cblxuICAgIC8vIHJlbG9hZCB0aGUgU1ZHIGRvY3VtZW50IChuZWVkZWQgdG8gZGlzcGxheSBuZXdseSBhcHBlbmRlZCBqUXVlcnkgb2JqZWN0KVxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIHRoaXMuJHN2Zy5odG1sKHRoaXMuJHN2Zy5odG1sKCkpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlNWRyBkb2N1bWVudCBoYXMgYmVlbiByZWxvYWRlZC5cIilcbiAgICB9XG5cbiAgICBkaXNwbGF5Q29udGV4dE1lbnUoeCwgeSwgJHRhcmdldCkge1xuICAgICAgICB0aGlzLmNvbnRleHRNZW51LmRpc3BsYXkoeCwgeSwgJHRhcmdldCk7XG4gICAgfVxuICAgIGhpZGVDb250ZXh0TWVudSgpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0TWVudS5oaWRlKCk7XG4gICAgfVxuXG4gICAgLy8gc25hcCBhIHZhbHVlIHRvIGEgZ3JpZFxuICAgIHNuYXBUb0dyaWQodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodmFsdWUgLyB0aGlzLmdyaWRTaXplKSAqIHRoaXMuZ3JpZFNpemU7XG4gICAgfVxuXG4gICAgLy8gc3RhdGljIGZ1bmN0aW9uIGZvciBzbmFwcGluZyBhIHZhbHVlIHRvIGEgZ3JpZFxuICAgIHN0YXRpYyBzbmFwVG9HcmlkKHZhbHVlLCBncmlkU2l6ZSkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAvIGdyaWRTaXplKSAqIGdyaWRTaXplO1xuICAgIH1cblxuICAgIC8vIGdldCBzZXQgb2Ygbm9kZXMsIHRoYXQgY2Fubm90IGJlIHVzZWQgZm9yIHdpcmluZyBhdCBhbnkgY2lyY3Vtc3RhbmNlc1xuICAgIGdldE5vblJvdXRhYmxlTm9kZXMoKSB7XG4gICAgICAgIGxldCBibG9ja2VkTm9kZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIC8vIGZvciBlYWNoIGJveFxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuYm94ZXMubGVuZ3RoIDsgKytpKSB7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIGpRdWVyeSBjaGlsZCB3aXRoIGNsYXNzIC5yZWN0IChcImhpdGJveFwiKVxuICAgICAgICAgICAgbGV0IHJlY3QgPSAkKCcjJyArIHRoaXMuYm94ZXNbaV0uc3ZnT2JqLmlkKS5jaGlsZHJlbihcIi5yZWN0XCIpWzBdO1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgcmVjdGFuZ2xlXG4gICAgICAgICAgICBsZXQgcG9zaXRpb24gPSAkKHJlY3QpLnBvc2l0aW9uKCk7XG5cbiAgICAgICAgICAgIC8vIHNuYXAgdGhlIHBvc2l0aW9uIHRvIHRoZSBncmlkXG4gICAgICAgICAgICBwb3NpdGlvbi5sZWZ0ID0gdGhpcy5zbmFwVG9HcmlkKHBvc2l0aW9uLmxlZnQpO1xuICAgICAgICAgICAgcG9zaXRpb24udG9wID0gdGhpcy5zbmFwVG9HcmlkKHBvc2l0aW9uLnRvcCk7XG5cbiAgICAgICAgICAgIC8vIGZvciBlYWNoIGl0ZW0gaW4gYmxvY2tlZE5vZGVzIChzZXQgb2YgYmxvY2tlZCBub2RlcyB3aXRoIGNvb3JkaW5hdGVzIHJlbGF0aXZlXG4gICAgICAgICAgICAvLyB0byB0aGUgbGVmdCB1cHBlciBjb3JuZXIgb2YgcmVjdDsgdW5pdCB1c2VkIGlzIFwib25lIGdyaWRTaXplXCIpIGNvbnZlcnQgdGhlIGNvb3JkaW5hdGVzXG4gICAgICAgICAgICAvLyB0byBhYnNvbHV0ZSAobXVsdGlwbGUgd2l0aCBncmlkU2l6ZSBhbmQgYWRkIHBvc2l0aW9uIG9mIHJlY3QpIGFuZCBhZGQgdGhlIHJlc3VsdCB0byB0aGUgc2V0XG4gICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgdGhpcy5ib3hlc1tpXS5ibG9ja2VkTm9kZXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgYWJzb2x1dGVYID0gcG9zaXRpb24ubGVmdCArIGl0ZW0ueCAqIHRoaXMuZ3JpZFNpemU7XG4gICAgICAgICAgICAgICAgbGV0IGFic29sdXRlWSA9IHBvc2l0aW9uLnRvcCArIGl0ZW0ueSAqIHRoaXMuZ3JpZFNpemU7XG5cbiAgICAgICAgICAgICAgICBibG9ja2VkTm9kZXMuYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgeDogYWJzb2x1dGVYLFxuICAgICAgICAgICAgICAgICAgICB5OiBhYnNvbHV0ZVlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB0b2RvIGVuc3VyZSB0aGF0IHRoaXMucmVmcmVzaCgpIGlzIHJlYWxseSB1bm5lY2Vzc2FyeVxuICAgICAgICAvLyB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBzZXRcbiAgICAgICAgcmV0dXJuIGJsb2NrZWROb2RlcztcbiAgICB9XG5cbiAgICBtb3ZlVG9Gcm9udEJ5SWQob2JqSWQpIHtcbiAgICAgICAgdGhpcy4kc3ZnLmFwcGVuZCgkKFwiI1wiICsgb2JqSWQpKTtcbiAgICB9XG5cbiAgICBtb3ZlVG9CYWNrQnlJZChvYmpJZCkge1xuICAgICAgICAkKFwiI1wiICsgdGhpcy5iYWNrZ3JvdW5kLmlkKVxuICAgICAgICAgICAgLmFmdGVyKCQoXCIjXCIgKyBvYmpJZCkpO1xuICAgIH1cblxuICAgIC8vIGdldCBzZXQgb2Ygbm9kZXMsIHRoYXQgaXMgYmV0dGVyIG5vdCB0byB1c2UgZm9yIHdpcmluZ1xuICAgIGdldEluY29udmVuaWVudE5vZGVzKGlnbm9yZVdpcmVJZCkge1xuXG4gICAgICAgIGxldCBpbmNvbnZlbmllbnROb2RlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gZm9yIGVhY2ggd2lyZVxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMud2lyZXMubGVuZ3RoIDsgKytpKSB7XG4gICAgICAgICAgICAvLyAoaWdub3JlIHRoZSB3aXJlIHRoYXQgaXMgc3BlY2lmaWVkIGluIHRoZSBpZ25vcmVXaXJlSWQgYXJndW1lbnQgKGlmIGFueSkpXG4gICAgICAgICAgICBpZihpZ25vcmVXaXJlSWQ9PT11bmRlZmluZWQgfHwgaWdub3JlV2lyZUlkIT09dGhpcy53aXJlc1tpXS5zdmdPYmouaWQpIHtcbiAgICAgICAgICAgICAgICAvLyBjeWNsZSB0aHJvdWdoIHBvaW50cywgZm9yIGVhY2ggbmVpZ2JvdXJzIGFkZCBhbGwgcG9pbnRzIHRoYXQgYXJlIGluIGJldHdlZW4gdGhlbVxuICAgICAgICAgICAgICAgIC8vIGkuZS46ICgwLDApIGFuZCAoMCwzMCkgYXJlIGJsb2NraW5nIHRoZXNlIG5vZGVzOiAoMCwwKSwgKDAsMTApLCAoMCwyMCksICgwLDMwKVxuICAgICAgICAgICAgICAgIGxldCBwcmV2UG9pbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy53aXJlc1tpXS5wb2ludHMuZm9yRWFjaChwb2ludCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2UG9pbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHByZXZQb2ludCBpcyB1bmRlZmluZWQsIGFkZCB0aGUgZmlyc3QgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY29udmVuaWVudE5vZGVzLmFkZCh7eDogcG9pbnQueCwgeTogcG9pbnQueX0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSBhZGQgYWxsIHRoZSBwb2ludCBiZXR3ZWVuIHRoZSBwcmV2UG9pbnQgKGV4Y2x1ZGVkKSBhbmQgcG9pbnQgKGluY2x1ZGVkKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihwcmV2UG9pbnQueD09PXBvaW50LngpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgbGluZSBpcyBob3Jpem9udGFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZyb20gPSBNYXRoLm1pbihwcmV2UG9pbnQueSwgcG9pbnQueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRvID0gTWF0aC5tYXgocHJldlBvaW50LnksIHBvaW50LnkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUoZnJvbSA8PSB0bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNvbnZlbmllbnROb2Rlcy5hZGQoe3g6IHBvaW50LngsIHk6IGZyb219KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSArPSB0aGlzLmdyaWRTaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihwcmV2UG9pbnQueT09PXBvaW50LnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgbGluZSBpcyB2ZXJ0aWNhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmcm9tID0gTWF0aC5taW4ocHJldlBvaW50LngsIHBvaW50LngpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0byA9IE1hdGgubWF4KHByZXZQb2ludC54LCBwb2ludC54KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKGZyb20gPD0gdG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jb252ZW5pZW50Tm9kZXMuYWRkKHt4OiBmcm9tLCB5OiBwb2ludC55fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gKz0gdGhpcy5ncmlkU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpbmUgaXMgbmVpdGhlciBob3Jpem9udGFsIG5vciB2ZXJ0aWNhbCwgdGhyb3cgYW4gZXJyb3IgZm9yIGJldHRlciBmdXR1cmUgZGVidWdnaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImdldEluY29udmVuaWVudE5vZGVzOiBsaW5lIGJldHdlZW4gdHdvIHBvaW50cyBpcyBuZWl0aGVyIGhvcml6b250YWwgbm9yIHZlcnRpY2FsXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG5ldyBwcmV2UG9pbnRcbiAgICAgICAgICAgICAgICAgICAgcHJldlBvaW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDogcG9pbnQueCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHBvaW50LnlcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0dXJuIHRoZSBzZXRcbiAgICAgICAgcmV0dXJuIGluY29udmVuaWVudE5vZGVzO1xuICAgIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5jbGFzcyBDb250ZXh0TWVudUl0ZW0ge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIHR5cGUsIGNvbnRleHRNZW51LCBwYXJlbnRTVkcsIGNsaWNrRnVuY3Rpb24pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5jb250ZXh0TWVudSA9IGNvbnRleHRNZW51O1xuICAgICAgICB0aGlzLnBhcmVudFNWRyA9IHBhcmVudFNWRztcblxuICAgICAgICB0aGlzLiRlbCA9ICQoXCI8bGk+XCIpO1xuICAgICAgICAkKHRoaXMuJGVsKVxuICAgICAgICAgICAgLnRleHQobmFtZSlcbiAgICAgICAgICAgIC5hdHRyKFwidHlwZVwiLCB0eXBlKTtcblxuICAgICAgICBpZihjbGlja0Z1bmN0aW9uKSB7XG4gICAgICAgICAgICAkKHRoaXMuJGVsKS5jbGljayhcbiAgICAgICAgICAgICAgICBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrRnVuY3Rpb24oZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0TWVudS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZENsYXNzKGNscykge1xuICAgICAgICB0aGlzLiRlbC5hZGRDbGFzcyhjbHMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBhcHBlbmRJdGVtKGl0ZW0pIHtcbiAgICAgICAgaWYoIXRoaXMuc3ViTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5zdWJMaXN0ID0gJChcIjx1bD5cIik7XG4gICAgICAgICAgICB0aGlzLiRlbC5hcHBlbmQodGhpcy5zdWJMaXN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3ViTGlzdC5hcHBlbmQoaXRlbS5qUXVlcnkpO1xuXG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cblxuICAgIGdldCBqUXVlcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRlbDtcbiAgICB9XG59XG5jbGFzcyBHYXRlTWVudUl0ZW0gZXh0ZW5kcyBDb250ZXh0TWVudUl0ZW0ge1xuICAgIGNvbnN0cnVjdG9yKHR5cGUsIGNvbnRleHRNZW51LCBwYXJlbnRTVkcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICB0eXBlLCAvLyBuYW1lIGlzIHRoZSB0eXBlXG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgY29udGV4dE1lbnUsXG4gICAgICAgICAgICBwYXJlbnRTVkcsXG4gICAgICAgICAgICBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBNYXRoLnJvdW5kKGNvbnRleHRNZW51LnBvc2l0aW9uLnggLyBwYXJlbnRTVkcuZ3JpZFNpemUpICogcGFyZW50U1ZHLmdyaWRTaXplLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IE1hdGgucm91bmQoY29udGV4dE1lbnUucG9zaXRpb24ueSAvIHBhcmVudFNWRy5ncmlkU2l6ZSkgKiBwYXJlbnRTVkcuZ3JpZFNpemVcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcGFyZW50U1ZHLm5ld0dhdGUoXG4gICAgICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLmxlZnQsIC8vIHggY29vcmRpbmF0ZVxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi50b3AgLy8geSBjb29yZGluYXRlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRleHRNZW51IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTVkcpIHtcbiAgICAgICAgdGhpcy5wYXJlbnRTVkcgPSBwYXJlbnRTVkc7XG5cbiAgICAgICAgY29uc3QgZ2F0ZXMgPSBbXCJub3RcIiwgXCJhbmRcIiwgXCJvclwiLCBcIm5hbmRcIiwgXCJub3JcIiwgXCJ4b3JcIiwgXCJ4bm9yXCJdO1xuXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7XG4gICAgICAgICAgICB4OiAwLCB5OiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy4kZWwgPSAkKFwiPHVsPlwiKTtcbiAgICAgICAgdGhpcy4kZWwuYXR0cignaWQnLCAnY29udGV4dE1lbnUnKTtcblxuICAgICAgICBsZXQgZ2F0ZUxpc3QgPSBuZXcgQ29udGV4dE1lbnVJdGVtKFwiTmV3IGdhdGVcIiwgJycsIHRoaXMsIHBhcmVudFNWRyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IGdhdGVzLmxlbmd0aCA7ICsraSkge1xuICAgICAgICAgICAgZ2F0ZUxpc3QuYXBwZW5kSXRlbShcbiAgICAgICAgICAgICAgICBuZXcgR2F0ZU1lbnVJdGVtKGdhdGVzW2ldLCB0aGlzLCBwYXJlbnRTVkcpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXBwZW5kSXRlbShnYXRlTGlzdCk7XG5cbiAgICAgICAgdGhpcy5hcHBlbmRJdGVtKFxuICAgICAgICAgICAgbmV3IENvbnRleHRNZW51SXRlbShcIklucHV0IGJveFwiLCAnJywgdGhpcywgcGFyZW50U1ZHLFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogdGhpcy5wYXJlbnRTVkcuc25hcFRvR3JpZCh0aGlzLnBvc2l0aW9uLngpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiB0aGlzLnBhcmVudFNWRy5zbmFwVG9HcmlkKHRoaXMucG9zaXRpb24ueSlcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRTVkcubmV3SW5wdXQocG9zaXRpb24ubGVmdCwgcG9zaXRpb24udG9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5hcHBlbmRJdGVtKG5ldyBDb250ZXh0TWVudUl0ZW0oXCJPdXRwdXQgYm94XCIsICcnLCB0aGlzLCBwYXJlbnRTVkcsICgpID0+IHtcbiAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLnBhcmVudFNWRy5zbmFwVG9HcmlkKHRoaXMucG9zaXRpb24ueCksXG4gICAgICAgICAgICAgICAgdG9wOiB0aGlzLnBhcmVudFNWRy5zbmFwVG9HcmlkKHRoaXMucG9zaXRpb24ueSlcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHBhcmVudFNWRy5uZXdPdXRwdXQocG9zaXRpb24ubGVmdCwgcG9zaXRpb24udG9wKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHRoaXMuYXBwZW5kQ29uZGl0aW9uYWxJdGVtKCdib3gnLCAnUmVtb3ZlIHRoaXMgaXRlbScsIGlkID0+IHt0aGlzLnBhcmVudFNWRy5yZW1vdmVCb3goaWQpfSk7XG4gICAgICAgIHRoaXMuYXBwZW5kQ29uZGl0aW9uYWxJdGVtKCd3aXJlJywgJ1JlbW92ZSB0aGlzIHdpcmUnLCBpZCA9PiB7dGhpcy5wYXJlbnRTVkcucmVtb3ZlV2lyZUJ5SWQoaWQpfSk7XG5cbiAgICAgICAgcGFyZW50U1ZHLiRzdmcuYmVmb3JlKHRoaXMuJGVsKTtcbiAgICB9XG5cbiAgICBhcHBlbmRJdGVtKGl0ZW0pIHtcbiAgICAgICAgdGhpcy4kZWwuYXBwZW5kKGl0ZW0ualF1ZXJ5KTtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuXG4gICAgLy8gYXBwZW5kcyBhbiBjb25uZGl0aW9uYWwgaXRlbSAodGhhdCBpcyBzaG93biBvbmx5IGlmIHRoZSB0YXJnZXRcbiAgICAvLyBoYXMgdGhlIGNsYXNzIGl0ZW1DbGFzcylcbiAgICAvLyBjbGlja0Z1bmN0aW9uIHRha2VzIG9uZSBhcmd1bWVudDogSUQgb2YgdGhlIHRhcmdldFxuICAgIGFwcGVuZENvbmRpdGlvbmFsSXRlbShpdGVtQ2xhc3MsIHRleHQsIGNsaWNrRnVuY3Rpb24pIHtcbiAgICAgICAgaWYoIXRoaXMuY29uZGl0aW9uYWxJdGVtcykge1xuICAgICAgICAgICAgdGhpcy5jb25kaXRpb25hbEl0ZW1zID0gW107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbmRpdGlvbmFsSXRlbXNbdGhpcy5jb25kaXRpb25hbEl0ZW1zLmxlbmd0aF0gPSB7XG4gICAgICAgICAgICBpdGVtQ2xhc3M6IGl0ZW1DbGFzcyxcbiAgICAgICAgICAgIHRleHQ6IHRleHQsXG4gICAgICAgICAgICBjbGlja0Z1bmN0aW9uOiBjbGlja0Z1bmN0aW9uXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBkZWNpZGVzIHdoZXRoZXIgb3Igbm90IHRvIGRpc3BsYXkgc3BlY2lmaWMgY29uZGl0aW9uYWwgaXRlbXNcbiAgICByZXNvbHZlQ29uZGl0aW9uYWxJdGVtcygkdGFyZ2V0KSB7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmRpdGlvbmFsSXRlbXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmKCR0YXJnZXQuaGFzQ2xhc3ModGhpcy5jb25kaXRpb25hbEl0ZW1zW2ldLml0ZW1DbGFzcykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEl0ZW0oXG4gICAgICAgICAgICAgICAgICAgIG5ldyBDb250ZXh0TWVudUl0ZW0oXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmRpdGlvbmFsSXRlbXNbaV0udGV4dCwgJycsIHRoaXMsIHRoaXMucGFyZW50U1ZHLFxuICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uYWxJdGVtc1tpXS5jbGlja0Z1bmN0aW9uKCR0YXJnZXQuYXR0cignaWQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLmFkZENsYXNzKCdjb25kaXRpb25hbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gaGlkZXMgYWxsIGNvbmRpdGlvbmFsIGl0ZW1zXG4gICAgaGlkZUFsbENvbmRpdGlvbmFsSXRlbXMoKSB7XG4gICAgICAgIHRoaXMuJGVsLmNoaWxkcmVuKCcuY29uZGl0aW9uYWwnKS5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICAvLyBkaXNwbGF5cyB0aGUgY29udGV4dCBtZW51IHdpdGggdGhlIHJpZ2h0IHNldCBvZiBjb25kaXRpb25hbCBpdGVtc1xuICAgIGRpc3BsYXkoeCwgeSwgJHRhcmdldCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHlcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLiRlbC5jc3Moe1xuICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgICAgIHRvcDogeSArIFwicHhcIixcbiAgICAgICAgICAgIGxlZnQ6IHggKyBcInB4XCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZXNvbHZlQ29uZGl0aW9uYWxJdGVtcygkdGFyZ2V0KTtcbiAgICB9XG5cbiAgICAvLyBoaWRlcyB0aGUgY29udGV4dCBtZW51XG4gICAgaGlkZSgpIHtcbiAgICAgICAgdGhpcy4kZWwuY3NzKHtkaXNwbGF5OiAnbm9uZSd9KTtcbiAgICAgICAgdGhpcy5oaWRlQWxsQ29uZGl0aW9uYWxJdGVtcygpO1xuICAgIH1cbn1cbiIsImltcG9ydCAqIGFzIHN2Z09iaiBmcm9tICcuL3N2Z09iamVjdHMuanMnXG5pbXBvcnQgKiBhcyBTdHJ1Y3R1cmVzIGZyb20gJy4vc3RydWN0dXJlc0FuZENsYXNzZXMuanMnXG5pbXBvcnQgTG9naWMgZnJvbSAnLi9sb2dpYy5qcydcblxuLy8gbWFwcGluZyBsb2dpY2FsIHN0YXRlcyB0byBjc3MgY2xhc3Nlc1xuY29uc3Qgc3RhdGVDbGFzc2VzID0ge1xuICAgIG9uOiBcInN0YXRlT25cIixcbiAgICBvZmY6IFwic3RhdGVPZmZcIixcbiAgICB1bmtub3duOiBcInN0YXRlVW5rbm93blwiLFxuICAgIG9zY2lsbGF0aW5nOiBcInN0YXRlT3NjaWxsYXRpbmdcIlxufTtcblxuLy8gaGVscGVyIGNsYXNzIHVzZWQgYnkgVHJhbnNmb3JtXG5jbGFzcyBQcm9wZXJ0eSB7XG4gICAgY29uc3RydWN0b3Ioc3RyaW5nKSB7XG4gICAgICAgIGlmKHN0cmluZyE9PXVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gc3RyaW5nLnJlcGxhY2UoL15bIF0qKFteKF0rKS4qLywgXCIkMVwiKTtcbiAgICAgICAgICAgIHRoaXMuYXJncyA9IHN0cmluZy5yZXBsYWNlKC9eW14oXStcXCgoLiopXFwpLywgXCIkMVwiKS5zcGxpdCgnICcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0TmFtZShuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxuXG4gICAgc2V0QXJndW1lbnRzKGFyZ3MpIHtcbiAgICAgICAgdGhpcy5hcmdzID0gYXJncztcbiAgICB9XG5cbiAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWUgKyBcIihcIiArIHRoaXMuYXJncy5qb2luKFwiIFwiKSArIFwiKVwiO1xuICAgIH1cbn1cblxuLy8gdXNlZCB0byBtYW5pcHVsYXRlIHRoZSB0cmFuc2Zvcm0gYXJndW1lbnQgdXNlZCBpbiBTVkdcbmV4cG9ydCBjbGFzcyBUcmFuc2Zvcm0ge1xuICAgIGNvbnN0cnVjdG9yKHN0cmluZykge1xuICAgICAgICB0aGlzLml0ZW1zID0gW107XG5cbiAgICAgICAgaWYoc3RyaW5nIT09dW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgc3BsaXRJdGVtcyA9IHN0cmluZy5zcGxpdChcIilcIik7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IHNwbGl0SXRlbXMubGVuZ3RoIDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYoc3BsaXRJdGVtc1tpXSkgeyAvLyBpZiBub3QgZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKG5ldyBQcm9wZXJ0eShzcGxpdEl0ZW1zW2ldICsgXCIpXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm5zIGluZGV4IG9yIC0xXG4gICAgZ2V0SW5kZXgobmFtZSkge1xuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmKG5hbWUgPT09IHRoaXMuaXRlbXNbaV0ubmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIGdldFRyYW5zbGF0ZSgpIHtcbiAgICAgICAgbGV0IGFyZ3MgPSB0aGlzLmdldEFyZ3VtZW50cyh0aGlzLmdldEluZGV4KFwidHJhbnNsYXRlXCIpKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogYXJnc1swXSxcbiAgICAgICAgICAgIHk6IGFyZ3NbMV1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFJvdGF0ZSgpIHtcbiAgICAgICAgbGV0IGFyZ3MgPSB0aGlzLmdldEFyZ3VtZW50cyh0aGlzLmdldEluZGV4KFwicm90YXRlXCIpKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGVnOiBhcmdzWzBdLFxuICAgICAgICAgICAgY2VudHJlWDogYXJnc1sxXSxcbiAgICAgICAgICAgIGNlbnRyZVk6IGFyZ3NbMl1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHNldHMgdGhlIHRyYW5zbGF0aW9uXG4gICAgc2V0VHJhbnNsYXRlKHgsIHkpIHtcbiAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXIoXCJ0cmFuc2xhdGVcIiwgW3gsIHldKTtcbiAgICB9XG5cbiAgICAvLyBzZXRzIHRoZSByb3RhdGlvblxuICAgIHNldFJvdGF0ZShkZWcsIGNlbnRyZVgsIGNlbnRyZVkpIHtcbiAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXIoXCJyb3RhdGVcIiwgW2RlZywgY2VudHJlWCwgY2VudHJlWV0pO1xuICAgIH1cblxuICAgIC8vIGFkZCB0aGUgcm90YXRpb25cbiAgICByb3RhdGVSaWdodChjZW50cmVYLCBjZW50cmVZKSB7XG4gICAgICAgIGlmKHRoaXMuZ2V0SW5kZXgoXCJyb3RhdGVcIik9PT0tMSkge1xuICAgICAgICAgICAgdGhpcy5zZXRSb3RhdGUoOTAsIGNlbnRyZVgsIGNlbnRyZVkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IG5ld1JvdGF0aW9uID0gKHBhcnNlSW50KHRoaXMuZ2V0Um90YXRlKCkuZGVnKSArIDkwKSAlIDM2MDtcblxuICAgICAgICAgICAgaWYobmV3Um90YXRpb249PT0xODApIHtcbiAgICAgICAgICAgICAgICAvLyBzd2FwIGNlbnRyZSBjb29yZGluYXRlc1xuICAgICAgICAgICAgICAgIC8vIGJlY2F1c2Ugcm90YXRlKGMsIHgsIHkpIGlzIGRlZmluZWQgbGlrZSB0cmFuc2Zvcm0oLXgsIC15KSByb3RhdGUoYykgdHJhbnNmb3JtKHgsIHkpXG4gICAgICAgICAgICAgICAgbGV0IGEgPSBjZW50cmVYO1xuICAgICAgICAgICAgICAgIGNlbnRyZVggPSBjZW50cmVZO1xuICAgICAgICAgICAgICAgIGNlbnRyZVkgPSBhO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldFJvdGF0ZShcbiAgICAgICAgICAgICAgICBuZXdSb3RhdGlvbixcbiAgICAgICAgICAgICAgICBjZW50cmVYLFxuICAgICAgICAgICAgICAgIGNlbnRyZVlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm5zIHRoZSB0cmFuc2Zvcm0gcHJvcGVydGllcyBjb25jYXRlbmF0ZWRcbiAgICBnZXQoKSB7XG4gICAgICAgIGxldCByZXRWYWwgPSBcIlwiO1xuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoIDsgaSsrKSB7XG4gICAgICAgICAgICBpZihpIT09MCkge1xuICAgICAgICAgICAgICAgIHJldFZhbCArPSBcIiBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldFZhbCArPSB0aGlzLml0ZW1zW2ldLmdldCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXRWYWw7XG4gICAgfVxuXG4gICAgZ2V0QXJndW1lbnRzKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zW2luZGV4XS5hcmdzO1xuICAgIH1cblxuICAgIHNldFBhcmFtZXRlcihuYW1lLCBhcmdzKSB7XG4gICAgICAgIC8vIGRldGVybWluZSBpbmRleCBvZiB0aGUgcGFyYW1ldGVyIChpZiBzZXQpLCBlbHNlIGluZGV4ID09IC0xXG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuZ2V0SW5kZXgobmFtZSk7XG5cbiAgICAgICAgLy8gaWYgdGhlIHByb3BlcnR5IGhhcyBiZWVuIGFscmVhZHkgc2V0LCBjaGFuZ2UgaXQgKHJld3JpdGUgdGhlIGFycmF5IGluIHRoZSByaWdodCBpbmRleClcbiAgICAgICAgLy8gZWxzZSBjcmVhdGUgYSBuZXcgb25lIChzZXQgaW5kZXggdG8gdGhlIGxlbmd0aCBvZiBhbiBhcnJheSAtLT4gYWQgYW4gaXRlbSB0byB0aGUgZW5kKVxuICAgICAgICBpZihpbmRleD09PS0xKSB7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5pdGVtc1tpbmRleF0gPSBuZXcgUHJvcGVydHkoKTtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNbaW5kZXhdLnNldE5hbWUobmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzYXZlIGFyZ3MgdW5kZXIgdGhlIHJpZ2h0IGluZGV4XG4gICAgICAgIHRoaXMuaXRlbXNbaW5kZXhdLnNldEFyZ3VtZW50cyhhcmdzKTtcbiAgICB9XG59XG5cbi8vIHBhcmVudCBjbGFzcyBmb3IgYWxsIG5ldHdvcmsgZWxlbWVudHNcbmNsYXNzIE5ldHdvcmtFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTVkcpIHtcbiAgICAgICAgaWYoIXBhcmVudFNWRykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlBhcmVudCBTVkcgZWxlbWVudCBoYXMgbm90IGJlZW4gZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJlbnRTVkcgPSBwYXJlbnRTVkc7XG5cbiAgICAgICAgLy8gdXNlZCB0byBzdG9yZSB0aGUgc3ZqT2JqZWN0J3MgaW5zdGFuY2Ugb2YgdGhpcyBlbGVtZW50XG4gICAgICAgIHRoaXMuc3ZnT2JqID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ZnT2JqLmlkO1xuICAgIH1cblxuICAgIG9uTW91c2VEb3duKCkge1xuICAgICAgICAvLyBlbXB0eSBmdW5jdGlvbiB0byBwcmV2ZW50IGVycm9yIG1lc3NhZ2VzLCBmdW5jdGlvbiBpcyBpbXBsZW1lbnRlZCBsYXRlciBpbiB0aGUgQm94IGNsYXNzXG4gICAgfVxuXG4gICAgb25Nb3VzZVVwKCkge1xuICAgICAgICAvLyBlbXB0eSBmdW5jdGlvbiB0byBwcmV2ZW50IGVycm9yIG1lc3NhZ2VzLCBmdW5jdGlvbiBpcyBpbXBsZW1lbnRlZCBsYXRlciBpbiB0aGUgQm94IGFuZCBDb25uZWN0b3IgY2xhc3Nlc1xuICAgIH1cblxuICAgIG9uTW91c2VNb3ZlKCkge1xuICAgICAgICAvLyBlbXB0eSBmdW5jdGlvbiB0byBwcmV2ZW50IGVycm9yIG1lc3NhZ2VzLCBmdW5jdGlvbiBpcyBpbXBsZW1lbnRlZCBsYXRlciBpbiB0aGUgQm94IGNsYXNzXG4gICAgfVxuXG4gICAgZ2V0IGV4cG9ydERhdGEoKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCInanNvbicgZ2V0dGVyIGhhcyBub3QgYmVlbiBkZWZpbmVkIGZvciB0aGlzIGVsZW1lbnRcIiwgdGhpcyk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuXG4vLyBwYXJlbnQgY2xhc3MgZm9yIGlucHV0IGFuZCBvdXRwdXQgY29ubmVjdG9ycyAodGhlIHRoaW5ncyB5b3UgY2xpY2sgb25cbi8vIHdoZW4geW91IHdhbnQgdG8gY29ubmVjdCBlbGVtZW50cylcbmNsYXNzIENvbm5lY3RvciBleHRlbmRzIE5ldHdvcmtFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTVkcsIGdyaWRTaXplLCBsZWZ0LCB0b3ApIHsgLy8gdW5pdCBvZiBsZWZ0IC8gdG9wIGlzIHRoZSBzaXplIG9mIHRoZSBncmlkXG4gICAgICAgIHN1cGVyKHBhcmVudFNWRyk7XG5cbiAgICAgICAgdGhpcy5ncmlkU2l6ZSA9IGdyaWRTaXplO1xuICAgICAgICB0aGlzLmNvbm5lY3RvclNpemUgPSBncmlkU2l6ZTtcbiAgICAgICAgdGhpcy5jb25uZWN0b3JPZmZzZXQgPSB0aGlzLmNvbm5lY3RvclNpemUgLyAyO1xuXG4gICAgICAgIHRoaXMuc3ZnT2JqID0gbmV3IHN2Z09iai5SZWN0YW5nbGUoXG4gICAgICAgICAgICBsZWZ0ICogdGhpcy5ncmlkU2l6ZSAtIHRoaXMuY29ubmVjdG9yT2Zmc2V0LFxuICAgICAgICAgICAgdG9wICogdGhpcy5ncmlkU2l6ZSAtIHRoaXMuY29ubmVjdG9yT2Zmc2V0LFxuICAgICAgICAgICAgdGhpcy5jb25uZWN0b3JTaXplLFxuICAgICAgICAgICAgdGhpcy5jb25uZWN0b3JTaXplLFxuICAgICAgICAgICAgXCJub25lXCIsXG4gICAgICAgICAgICBcImJsYWNrXCJcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnN2Z09iai4kZWwuYWRkQ2xhc3MoXCJjb25uZWN0b3JcIik7XG5cbiAgICAgICAgdGhpcy5zdGF0ZUF0dHIgPSBmYWxzZTtcblxuICAgICAgICAvLyBpZiBhIHdpcmUgY2FuIHNldCBjb25uZWN0b3IncyBzdGF0ZVxuICAgICAgICB0aGlzLmlzSW5wdXRDb25uZWN0b3IgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLnN0YXRlQXR0ciA9IExvZ2ljLnN0YXRlLnVua25vd247XG4gICAgICAgIHRoaXMuc3ZnT2JqLmFkZENsYXNzKHN0YXRlQ2xhc3Nlcy51bmtub3duKTtcblxuICAgICAgICB0aGlzLndpcmVJZHMgPSBuZXcgU2V0KCk7XG4gICAgfVxuXG4gICAgZ2V0IGlzT3V0cHV0Q29ubmVjdG9yKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuaXNJbnB1dENvbm5lY3RvcjtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbnB1dENvbm5lY3RvcjogMCxcbiAgICAgICAgICAgIG91dHB1dENvbm5lY3RvcjogMVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkV2lyZUlkKHdpcmVJZCkge1xuICAgICAgICB0aGlzLndpcmVJZHMuYWRkKHdpcmVJZCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlV2lyZUlkKHdpcmVJZCkge1xuICAgICAgICB0aGlzLndpcmVJZHMuZGVsZXRlKHdpcmVJZCk7XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlcyB0aGUgd2lyZSBhbmQgdXBkYXRlcyB0aGUgY29ubmVjdG9yXG4gICAgcmVtb3ZlV2lyZUlkQW5kVXBkYXRlKHdpcmVJZCkge1xuICAgICAgICB0aGlzLnJlbW92ZVdpcmVJZCh3aXJlSWQpO1xuICAgIH1cblxuICAgIHNldFN0YXRlKHN0YXRlLCBwcm9wYWdhdGlvbklkKSB7XG4gICAgICAgIHRoaXMuc3ZnT2JqLnJlbW92ZUNsYXNzZXMoc3RhdGVDbGFzc2VzLm9uLCBzdGF0ZUNsYXNzZXMub2ZmLCBzdGF0ZUNsYXNzZXMudW5rbm93biwgc3RhdGVDbGFzc2VzLm9zY2lsbGF0aW5nKTtcblxuICAgICAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIExvZ2ljLnN0YXRlLnVua25vd246XG4gICAgICAgICAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2xhc3Moc3RhdGVDbGFzc2VzLnVua25vd24pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMb2dpYy5zdGF0ZS5vbjpcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iai5hZGRDbGFzcyhzdGF0ZUNsYXNzZXMub24pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMb2dpYy5zdGF0ZS5vZmY6XG4gICAgICAgICAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2xhc3Moc3RhdGVDbGFzc2VzLm9mZik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nOlxuICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqLmFkZENsYXNzKHN0YXRlQ2xhc3Nlcy5vc2NpbGxhdGluZyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0YXRlQXR0ciA9IHN0YXRlO1xuICAgIH1cblxuICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVBdHRyO1xuICAgIH1cblxuICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ZnT2JqO1xuICAgIH1cblxuICAgIG9uTW91c2VVcCgpIHtcbiAgICAgICAgdGhpcy5wYXJlbnRTVkcud2lyZUNyZWF0aW9uSGVscGVyKHRoaXMuc3ZnT2JqLmlkKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBJbnB1dENvbm5lY3RvciBleHRlbmRzIENvbm5lY3RvciB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHLCBncmlkU2l6ZSwgbGVmdCwgdG9wKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudFNWRywgZ3JpZFNpemUsIGxlZnQsIHRvcCk7XG5cblxuICAgICAgICB0aGlzLnR5cGUgPSBDb25uZWN0b3IudHlwZS5pbnB1dENvbm5lY3RvcjtcbiAgICAgICAgdGhpcy5pc0lucHV0Q29ubmVjdG9yID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnc2V0U3RhdGUgb24nLCB0aGlzLmlkKVxuXG4gICAgICAgIHN1cGVyLnNldFN0YXRlKHN0YXRlKTtcblxuICAgICAgICBsZXQgZ2F0ZSA9IHRoaXMucGFyZW50U1ZHLmdldEJveEJ5Q29ubmVjdG9ySWQodGhpcy5zdmdPYmouaWQpO1xuICAgICAgICBnYXRlLnJlZnJlc2hTdGF0ZSgpO1xuICAgIH1cblxuICAgIHJlbW92ZVdpcmVJZEFuZFVwZGF0ZSh3aXJlSWQpIHtcbiAgICAgICAgc3VwZXIucmVtb3ZlV2lyZUlkQW5kVXBkYXRlKHdpcmVJZCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoTG9naWMuc3RhdGUudW5rbm93bik7XG4gICAgfVxuXG4gICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuc3RhdGU7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgT3V0cHV0Q29ubmVjdG9yIGV4dGVuZHMgQ29ubmVjdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTVkcsIGdyaWRTaXplLCBsZWZ0LCB0b3ApIHtcbiAgICAgICAgc3VwZXIocGFyZW50U1ZHLCBncmlkU2l6ZSwgbGVmdCwgdG9wKTtcblxuICAgICAgICAvLyB1c2VkIHRvIHNldCB0aGUgd2lyZSBzdGF0ZSBkdXJpbmcgd2lyZSBpbml0aWFsaXphdGlvbiBiYXNlZCBvbiB0aGUgb3V0cHV0IGNvbm5lY3RvciBzdGF0ZVxuICAgICAgICB0aGlzLmlzT3V0cHV0ID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLnR5cGUgPSBDb25uZWN0b3IudHlwZS5vdXRwdXRDb25uZWN0b3I7XG4gICAgfVxuXG4gICAgc2V0U3RhdGUoc3RhdGUpIHtcbiAgICAgICAgc3VwZXIuc2V0U3RhdGUoc3RhdGUpO1xuXG4gICAgICAgIGZvciAoY29uc3Qgd2lyZUlkIG9mIHRoaXMud2lyZUlkcykge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRTVkcuZ2V0V2lyZUJ5SWQod2lyZUlkKS5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5zdGF0ZTtcbiAgICB9XG59XG5cbi8vIHBhcmVudCBjbGFzcyBmb3IgZ2F0ZXMgYW5kIGlucHV0IGFuZCBvdXRwdXQgYm94ZXNcbmNsYXNzIEJveCBleHRlbmRzIE5ldHdvcmtFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTVkcsIG5hbWUsIGNhdGVnb3J5LCBncmlkV2lkdGgsIGdyaWRIZWlnaHQpIHtcbiAgICAgICAgc3VwZXIocGFyZW50U1ZHKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgICAgIHRoaXMuZ3JpZFNpemUgPSB0aGlzLnBhcmVudFNWRy5ncmlkU2l6ZTtcblxuICAgICAgICB0aGlzLnVybCA9IFwiaW1nL1wiICsgdGhpcy5jYXRlZ29yeSArIFwiL1wiICsgdGhpcy5uYW1lICsgXCIuc3ZnXCI7XG5cbiAgICAgICAgdGhpcy5jb25uZWN0b3JzID0gW107XG5cbiAgICAgICAgdGhpcy5zdmdPYmogPSBuZXcgc3ZnT2JqLkdyb3VwKCk7XG5cbiAgICAgICAgdGhpcy53aWR0aCA9IGdyaWRXaWR0aCAqIHRoaXMuZ3JpZFNpemU7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gZ3JpZEhlaWdodCAqIHRoaXMuZ3JpZFNpemU7XG5cbiAgICAgICAgdGhpcy5ncmlkV2lkdGggPSBncmlkV2lkdGg7XG4gICAgICAgIHRoaXMuZ3JpZEhlaWdodCA9IGdyaWRIZWlnaHQ7XG5cbiAgICAgICAgLy8gdHJhbnNwYXJlbnQgYmFja2dyb3VuZCByZWN0YW5nbGVcbiAgICAgICAgbGV0IHJlY3RhbmdsZSA9IG5ldyBzdmdPYmouUmVjdGFuZ2xlKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCBcIm5vbmVcIiwgXCJub25lXCIpO1xuICAgICAgICByZWN0YW5nbGUuJGVsLmFkZENsYXNzKCdyZWN0Jyk7XG4gICAgICAgIHRoaXMuc3ZnT2JqLmFkZENoaWxkKHJlY3RhbmdsZSk7XG4gICAgICAgIC8vIGltYWdlIG9mIHRoZSBlbGVtZW50XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgc3ZnT2JqLlN2Z0ltYWdlKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnVybCk7XG4gICAgICAgIHRoaXMuc3ZnT2JqLmFkZENoaWxkKHRoaXMuaW1hZ2UpO1xuXG4gICAgICAgIC8vIGFkZCBkcmFnZ2FiaWxpdHkgYW5kIHJvdGF0YWJpbGl0eVxuICAgICAgICB0aGlzLnN2Z09iai5kcmFnZ2FibGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuc3ZnT2JqLnJvdGF0YWJsZSh0cnVlKTtcblxuICAgICAgICAvLyBhZGQgdHlwZT1cImdhdGVcIiwgdXNlZCBpbiBzcGVjaWFsIGNhbGxiYWNrcyBpbiBjb250ZXh0bWVudVxuICAgICAgICB0aGlzLnN2Z09iai5hZGRBdHRyKHtcInR5cGVcIjogY2F0ZWdvcnl9KTtcblxuICAgICAgICB0aGlzLnN2Z09iai4kZWwuYWRkQ2xhc3MoXCJib3hcIik7XG4gICAgICAgIHRoaXMuc3ZnT2JqLiRlbC5hZGRDbGFzcyhjYXRlZ29yeSk7XG5cbiAgICAgICAgdGhpcy5nZW5lcmF0ZUJsb2NrTm9kZXMoKTtcbiAgICB9XG5cbiAgICBnZXQgaW5wdXRDb25uZWN0b3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0b3JzLmZpbHRlcihjb25uID0+IGNvbm4uaXNJbnB1dENvbm5lY3RvcilcbiAgICB9XG5cbiAgICBnZXQgb3V0cHV0Q29ubmVjdG9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdG9ycy5maWx0ZXIoY29ubiA9PiBjb25uLmlzT3V0cHV0Q29ubmVjdG9yKVxuICAgIH1cblxuICAgIGdldCBleHBvcnREYXRhKCkge1xuICAgICAgICBsZXQgY29ubmVjdGlvbnMgPSBbXTtcblxuICAgICAgICAvLyBnbyB0aHJvdWdoIGFsbCBjb25uZWN0b3JzXG4gICAgICAgIGxldCBjb3VudGVyID0gMFxuICAgICAgICBmb3IgKGNvbnN0IGNvbm4gb2YgdGhpcy5jb25uZWN0b3JzKSB7XG4gICAgICAgICAgICAvLyBnbyB0aHJvdWdoIGVhY2ggaXRzIHdpcmUgaWRcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb25uLndpcmVJZHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGhpc1dpcmVJZDtcbiAgICAgICAgICAgICAgICBpZighdGhpcy5wYXJlbnRTVkcuZXhwb3J0V2lyZUlkTWFwLmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgd2lyZSBpZCBpcyBub3QgaW4gdGhlIG1hcCwgYWRkIGl0IGFuZCBhc3NpZ24gbmV3IGFyYml0cmFyeSBpZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudFNWRy5leHBvcnRXaXJlSWRNYXAuc2V0KGl0ZW0sIHRoaXMucGFyZW50U1ZHLmV4cG9ydFdpcmVJZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNXaXJlSWQgPSB0aGlzLnBhcmVudFNWRy5leHBvcnRXaXJlSWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50U1ZHLmV4cG9ydFdpcmVJZCsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVsc2UgZ2V0IGlkIGZyb20gdGhlIG1hcFxuICAgICAgICAgICAgICAgICAgICB0aGlzV2lyZUlkID0gdGhpcy5wYXJlbnRTVkcuZXhwb3J0V2lyZUlkTWFwLmdldChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIC8vIGFkZCB0aGlzIGNvbm5lY3Rpb24gdG8gdGhlIGxpc3RcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uc1tjb25uZWN0aW9ucy5sZW5ndGhdID0ge1xuICAgICAgICAgICAgICAgICAgICBpbmRleDogY291bnRlcixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogY29ubi50eXBlLFxuICAgICAgICAgICAgICAgICAgICB3aXJlSWQ6IHRoaXNXaXJlSWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY291bnRlcisrXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgLy8gaWQ6IHRoaXMuc3ZnT2JqLmlkLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcnksXG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRoaXMuZ2V0VHJhbnNmb3JtKCksXG4gICAgICAgICAgICBjb25uZWN0aW9uczogY29ubmVjdGlvbnNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUJsb2NrTm9kZXMobWFyZ2luVG9wID0gMCwgbWFyZ2luUmlnaHQgPSAwLCBtYXJnaW5Cb3R0b20gPSAwLCBtYXJnaW5MZWZ0ID0gMCwgLi4uc3BlY2lhbE5vZGVzKSB7XG4gICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IobGV0IHggPSBtYXJnaW5MZWZ0IDsgeCA8PSB0aGlzLmdyaWRXaWR0aCAtIG1hcmdpblJpZ2h0IDsgeCsrKSB7XG4gICAgICAgICAgICBmb3IobGV0IHkgPSBtYXJnaW5Ub3AgOyB5IDw9IHRoaXMuZ3JpZEhlaWdodCAtIG1hcmdpbkJvdHRvbSA7IHkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzLmFkZCh7XG4gICAgICAgICAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICAgICAgICAgIHk6IHlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IG5vZGUgb2Ygc3BlY2lhbE5vZGVzKSB7XG4gICAgICAgICAgICB0aGlzLmJsb2NrZWROb2Rlcy5hZGQobm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZWZyZXNoU3RhdGUoKSB7XG4gICAgICAgIC8vIGVtcHR5IGZ1bmN0aW9uLCByZWRlZmluZWQgaW4gaW5oZXJpdGVkIGVsZW1lbnRzXG4gICAgICAgIC8vIHJlZnJlc2hTdGF0ZSB0YWtlcyBpbnB1dCBjb25uZWN0b3IgdmFsdWVzIGFuZCBzZXRzIG91dHB1dCB2YWx1ZXMgYWNjb3JkaW5nbHlcbiAgICAgICAgY29uc29sZS53YXJuKFwiQ2FsbGluZyB0aGUgdmlydHVhbCBmdW5jdGlvbiByZWZyZXNoU3RhdGUgaGFzIG5vIGVmZmVjdC5cIik7XG4gICAgfVxuXG4gICAgLy8gdXNhZ2U6IGNoYW5nZUltYWdlKFwiYWJjXCIpIGNoYW5nZXMgaW1hZ2UgdXJsIHRvIGltYWdlLWFiYy5zdmdcbiAgICAvLyAgICAgICAgY2hhbmdlSW1hZ2UoKSBjaGFuZ2VzIGltYWdlIHVybCB0byB0aGUgZGVmYXVsdCBvbmUgKGltYWdlLnN2ZylcbiAgICBjaGFuZ2VJbWFnZShzdWZmaXgpIHtcbiAgICAgICAgaWYoc3VmZml4ID09PSB1bmRlZmluZWQgfHwgc3VmZml4ID09PSBcIlwiKSB7XG4gICAgICAgICAgICBzdWZmaXggPSBcIlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VmZml4ID0gXCItXCIgKyBzdWZmaXg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cmwgPSBcImltZy9cIiArIHRoaXMuY2F0ZWdvcnkgKyBcIi9cIiArIHRoaXMubmFtZSArIHN1ZmZpeCArIFwiLnN2Z1wiO1xuXG4gICAgICAgIHRoaXMuaW1hZ2UuY2hhbmdlVXJsKHRoaXMudXJsKTtcbiAgICB9XG5cbiAgICAvLyByZXR1cm5zIGEgalF1ZXJ5IG9iamVjdFxuICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ZnT2JqLmdldCgpO1xuICAgIH1cblxuICAgIHJlbW92ZUJsb2NrZWROb2RlKHgsIHkpIHtcbiAgICAgICAgZm9yKGxldCBpdGVtIG9mIHRoaXMuYmxvY2tlZE5vZGVzKSB7XG4gICAgICAgICAgICBpZihpdGVtLng9PT14ICYmIGl0ZW0ueT09PXkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrZWROb2Rlcy5kZWxldGUoaXRlbSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByb3RhdGVCbG9ja2VkTm9kZXNSaWdodCgpIHtcbiAgICAgICAgaWYodGhpcy5yb3RhdGlvbj09PXVuZGVmaW5lZCB8fCB0aGlzLnJvdGF0aW9uPT09NCkge1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb3RhdGlvbisrO1xuXG4gICAgICAgIGlmKHRoaXMucm90YXRpb24gPT09IDEgfHwgdGhpcy5yb3RhdGlvbiA9PT0gMykge1xuICAgICAgICAgICAgbGV0IG5ld0Jsb2NrZWROb2RlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3QmxvY2tlZE5vZGVzLmFkZCh7XG4gICAgICAgICAgICAgICAgICAgIHg6IE1hdGguYWJzKGl0ZW0ueSAtIHRoaXMuZ3JpZEhlaWdodCksXG4gICAgICAgICAgICAgICAgICAgIHk6IGl0ZW0ueFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmJsb2NrZWROb2RlcyA9IG5ld0Jsb2NrZWROb2RlcztcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMucm90YXRpb24gPT09IDIgfHwgdGhpcy5yb3RhdGlvbiA9PT0gNCkge1xuICAgICAgICAgICAgbGV0IG5ld0Jsb2NrZWROb2RlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3QmxvY2tlZE5vZGVzLmFkZCh7XG4gICAgICAgICAgICAgICAgICAgIHg6IE1hdGguYWJzKGl0ZW0ueSAtIHRoaXMuZ3JpZFdpZHRoKSxcbiAgICAgICAgICAgICAgICAgICAgeTogaXRlbS54XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzID0gbmV3QmxvY2tlZE5vZGVzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkQ29ubmVjdG9yKGxlZnQsIHRvcCwgY29ubmVjdG9yVHlwZSkge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmNvbm5lY3RvcnMubGVuZ3RoO1xuICAgICAgICBpZihjb25uZWN0b3JUeXBlPT09Q29ubmVjdG9yLnR5cGUuaW5wdXRDb25uZWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yc1tpbmRleF0gPSBuZXcgSW5wdXRDb25uZWN0b3IodGhpcy5wYXJlbnRTVkcsIHRoaXMuZ3JpZFNpemUsIGxlZnQsIHRvcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RvcnNbaW5kZXhdID0gbmV3IE91dHB1dENvbm5lY3Rvcih0aGlzLnBhcmVudFNWRywgdGhpcy5ncmlkU2l6ZSwgbGVmdCwgdG9wKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN2Z09iai5hZGRDaGlsZCh0aGlzLmNvbm5lY3RvcnNbaW5kZXhdLmdldCgpKTtcblxuICAgICAgICB0aGlzLnJlbW92ZUJsb2NrZWROb2RlKGxlZnQsIHRvcCk7XG4gICAgfVxuXG4gICAgLy8gcmV0dXJucyB0aGUgY29ubmVjdG9yIG9iamVjdCBiYXNlZCBvbiBpdHMgaWRcbiAgICBnZXRDb25uZWN0b3JCeUlkKGNvbm5lY3RvcklkKSB7XG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy5jb25uZWN0b3JzLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgaWYodGhpcy5jb25uZWN0b3JzW2ldLmlkPT09Y29ubmVjdG9ySWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0b3JzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlmIGNvbm5lY3RvciBub3QgZm91bmQsIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBnZXRUcmFuc2Zvcm0oKSB7XG4gICAgICAgIGxldCB0cmFuc2Zvcm07XG4gICAgICAgIGlmICghdGhpcy5zdmdPYmouJGVsLmF0dHIoXCJ0cmFuc2Zvcm1cIikpIHtcbiAgICAgICAgICAgIC8vIHRoZSBlbGVtZW50IGRvZXMgbm90IGhhdmUgYSBcInRyYW5zZm9ybVwiIHByb3BlcnR5IC0tPiBjcmVhdGUgaXRcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybS5zZXRUcmFuc2xhdGUoMCwgMCk7XG4gICAgICAgICAgICB0aGlzLnN2Z09iai5hZGRBdHRyKHtcInRyYW5zZm9ybVwiOiB0cmFuc2Zvcm0uZ2V0KCl9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHRoZSBlbGVtZW50IGRvZXMgaGF2ZSBhIFwidHJhbnNmb3JtXCIgcHJvcGVydHkgLS0+IGNoYW5nZSBpdFxuICAgICAgICAgICAgdHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSh0aGlzLnN2Z09iai4kZWwuYXR0cihcInRyYW5zZm9ybVwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybTtcbiAgICB9XG5cbiAgICBzZXRUcmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHRoaXMuc3ZnT2JqLmFkZEF0dHIoe1widHJhbnNmb3JtXCI6IHRyYW5zZm9ybS5nZXQoKX0pO1xuICAgIH1cblxuICAgIHRyYW5zZm9ybUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnBhZ2VYID0gdGhpcy5wYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1YKGV2ZW50LnBhZ2VYKVxuICAgICAgICBldmVudC5wYWdlWSA9IHRoaXMucGFyZW50U1ZHLnZpZXdib3gudHJhbnNmb3JtWShldmVudC5wYWdlWSlcblxuICAgICAgICByZXR1cm4gZXZlbnRcbiAgICB9XG5cbiAgICBvbk1vdXNlRG93bihldmVudCkge1xuICAgICAgICB0aGlzLm1vdXNlTGVmdCA9IGZhbHNlO1xuICAgICAgICBpZihldmVudC53aGljaCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5tb3VzZUxlZnQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5vbk1vdXNlRG93bkxlZnQoZXZlbnQpO1xuXG4gICAgICAgICAgICAvLyBtb3ZlIHRoZSBET00gZWxlbWVudCB0byBmcm9udFxuICAgICAgICAgICAgdGhpcy5wYXJlbnRTVkcubW92ZVRvRnJvbnRCeUlkKHRoaXMuc3ZnT2JqLmlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTW91c2VEb3duTGVmdChldmVudCkge1xuICAgICAgICB0aGlzLm1vdXNlTW92ZWQgPSBmYWxzZTtcblxuICAgICAgICBsZXQgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oKTtcblxuICAgICAgICAvLyBzYXZlIHRoZSBjdXJyZW50IGl0ZW0gcG9zaXRpb24gaW50byBhIHZhcmlhYmxlXG4gICAgICAgIGxldCBjdXJyZW50UG9zaXRpb24gPSB0cmFuc2Zvcm0uZ2V0VHJhbnNsYXRlKCk7XG5cbiAgICAgICAgbGV0IHtwYWdlWCwgcGFnZVl9ID0gdGhpcy50cmFuc2Zvcm1FdmVudChldmVudClcblxuICAgICAgICAvLyBjYWxjdWxhdGUgbW91c2Ugb2Zmc2V0IGZyb20gdGhlIG9iamVjdCBvcmlnaW5cbiAgICAgICAgdGhpcy5vZmZzZXQgPSB7XG4gICAgICAgICAgICB4OiBwYWdlWCAtIGN1cnJlbnRQb3NpdGlvbi54LFxuICAgICAgICAgICAgeTogcGFnZVkgLSBjdXJyZW50UG9zaXRpb24ueVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIG9uTW91c2VNb3ZlKGV2ZW50KSB7XG4gICAgICAgIGlmKHRoaXMubW91c2VMZWZ0KSB7XG4gICAgICAgICAgICB0aGlzLm1vdXNlTW92ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBsZXQge3BhZ2VYLCBwYWdlWX0gPSB0aGlzLnRyYW5zZm9ybUV2ZW50KGV2ZW50KVxuXG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gcGFnZVggLSB0aGlzLm9mZnNldC54O1xuICAgICAgICAgICAgY29uc3QgdG9wID0gcGFnZVkgLSB0aGlzLm9mZnNldC55O1xuXG4gICAgICAgICAgICBsZXQgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybS5zZXRUcmFuc2xhdGUobGVmdCwgdG9wKTtcblxuICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtKTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVXaXJlcyh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTW91c2VVcChldmVudCkge1xuICAgICAgICBpZihldmVudC53aGljaCA9PT0gMSkge1xuICAgICAgICAgICAgaWYodGhpcy5tb3VzZU1vdmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRyb3AoZXZlbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChldmVudC53aGljaCA9PT0gMiApIHtcbiAgICAgICAgICAgIHRoaXMub25DbGlja01pZGRsZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Ecm9wKGV2ZW50KSB7XG4gICAgICAgIGxldCB7cGFnZVgsIHBhZ2VZfSA9IHRoaXMudHJhbnNmb3JtRXZlbnQoZXZlbnQpXG5cbiAgICAgICAgbGV0IGxlZnQgPSBwYWdlWCAtIHRoaXMub2Zmc2V0Lng7XG4gICAgICAgIGxldCB0b3AgPSBwYWdlWSAtIHRoaXMub2Zmc2V0Lnk7XG5cbiAgICAgICAgbGVmdCA9IHRoaXMucGFyZW50U1ZHLnNuYXBUb0dyaWQobGVmdCk7XG4gICAgICAgIHRvcCA9IHRoaXMucGFyZW50U1ZHLnNuYXBUb0dyaWQodG9wKTtcblxuICAgICAgICBsZXQgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgdHJhbnNmb3JtLnNldFRyYW5zbGF0ZShsZWZ0LCB0b3ApO1xuXG4gICAgICAgIHRoaXMuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVXaXJlcygpO1xuICAgIH1cblxuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIC8vIGVtcHR5IGZ1bmN0aW9uLCB3aWxsIGJlIHJlZGVmaW5lZCBpbiBJbnB1dEJveFxuICAgIH1cblxuICAgIG9uQ2xpY2tNaWRkbGUoKSB7XG4gICAgICAgIGxldCB0cmFuc2Zvcm0gPSB0aGlzLmdldFRyYW5zZm9ybSgpO1xuXG4gICAgICAgIGxldCByZWN0ID0gdGhpcy5zdmdPYmouJGVsWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIGxldCBjZW50cmVYID0gTWF0aC5yb3VuZChyZWN0LndpZHRoIC8gMik7XG4gICAgICAgIGxldCBjZW50cmVZID0gTWF0aC5yb3VuZChyZWN0LmhlaWdodCAvIDIpO1xuXG4gICAgICAgIGNlbnRyZVggLT0gY2VudHJlWCAlIHRoaXMuZ3JpZFNpemU7XG4gICAgICAgIGNlbnRyZVkgLT0gY2VudHJlWSAlIHRoaXMuZ3JpZFNpemU7XG5cbiAgICAgICAgdHJhbnNmb3JtLnJvdGF0ZVJpZ2h0KFxuICAgICAgICAgICAgY2VudHJlWCxcbiAgICAgICAgICAgIGNlbnRyZVlcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnN2Z09iai5hZGRBdHRyKHtcInRyYW5zZm9ybVwiOiB0cmFuc2Zvcm0uZ2V0KCl9KTtcblxuICAgICAgICB0aGlzLnJvdGF0ZUJsb2NrZWROb2Rlc1JpZ2h0KCk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVXaXJlcygpO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZXMgYWxsIHdpcmVzIGNvbm5lY3RlZCB0byB0aGlzIGJveFxuICAgIHVwZGF0ZVdpcmVzKHRlbXBvcmFyeSA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdG9ycy5mb3JFYWNoKGNvbm4gPT4ge1xuICAgICAgICAgICAgY29ubi53aXJlSWRzLmZvckVhY2god2lyZUlkID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgd2lyZSA9IHRoaXMucGFyZW50U1ZHLmdldFdpcmVCeUlkKHdpcmVJZCk7XG4gICAgICAgICAgICAgICAgaWYodGVtcG9yYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHdpcmUudGVtcG9yYXJ5V2lyZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHdpcmUucm91dGVXaXJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBJbnB1dEJveCBleHRlbmRzIEJveCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHLCBpc09uID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSA3O1xuICAgICAgICBjb25zdCBoZWlnaHQgPSA0O1xuXG4gICAgICAgIHN1cGVyKHBhcmVudFNWRywgXCJpbnB1dFwiLCBcImlvXCIsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIHRoaXMuYWRkQ29ubmVjdG9yKHdpZHRoLCBoZWlnaHQgLyAyLCBDb25uZWN0b3IudHlwZS5vdXRwdXRDb25uZWN0b3IpO1xuXG4gICAgICAgIHRoaXMub24gPSBpc09uO1xuICAgIH1cblxuICAgIGdldCBleHBvcnREYXRhKCkge1xuICAgICAgICBsZXQgZGF0YSA9IHN1cGVyLmV4cG9ydERhdGE7XG4gICAgICAgIGRhdGEuaXNPbiA9IHRoaXMuaXNPbjtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVCbG9ja05vZGVzKCkge1xuICAgICAgICBzdXBlci5nZW5lcmF0ZUJsb2NrTm9kZXMoMCwgMSwgMSwgMCk7XG4gICAgfVxuXG4gICAgcmVmcmVzaFN0YXRlKCkge1xuICAgICAgICAvLyBzdGFydCBhIG5ldyBzaW11bGF0aW9uIGZyb20gdGhlIG91dHB1dCBjb25uZWN0b3JcbiAgICAgICAgdGhpcy5wYXJlbnRTVkcuc3RhcnROZXdTaW11bGF0aW9uKHRoaXMuY29ubmVjdG9yc1swXSwgdGhpcy5jb25uZWN0b3JzWzBdLnN0YXRlKVxuICAgIH1cblxuICAgIHNldCBvbihpc09uKSB7XG4gICAgICAgIGlmIChpc09uKSB7XG4gICAgICAgICAgICAvLyB0dXJuIG9uXG4gICAgICAgICAgICB0aGlzLmNoYW5nZUltYWdlKFwib25cIik7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RvcnNbMF0uc2V0U3RhdGUoTG9naWMuc3RhdGUub24pO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoU3RhdGUoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gdHVybiBvZmZcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UoKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yc1swXS5zZXRTdGF0ZShMb2dpYy5zdGF0ZS5vZmYpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoU3RhdGUoKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc09uID0gaXNPbjtcbiAgICB9XG5cbiAgICBnZXQgb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzT247XG4gICAgfVxuXG4gICAgb25DbGljaygpIHtcbiAgICAgICAgdGhpcy5vbiA9ICF0aGlzLm9uO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE91dHB1dEJveCBleHRlbmRzIEJveCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHKSB7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IDQ7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gNTtcblxuICAgICAgICBzdXBlcihwYXJlbnRTVkcsIFwib3V0cHV0XCIsIFwiaW9cIiwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgdGhpcy5hZGRDb25uZWN0b3IoMCwgaGVpZ2h0IC8gMiwgQ29ubmVjdG9yLnR5cGUuaW5wdXRDb25uZWN0b3IpO1xuICAgIH1cblxuICAgIHJlZnJlc2hTdGF0ZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmNvbm5lY3RvcnNbMF0uc3RhdGUpO1xuICAgIH1cblxuICAgIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUub246XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZShcIm9uXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMb2dpYy5zdGF0ZS5vZmY6XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZShcIm9mZlwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUudW5rbm93bjpcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUltYWdlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nOlxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UoXCJvc2NcIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZW5lcmF0ZUJsb2NrTm9kZXMoKSB7XG4gICAgICAgIHN1cGVyLmdlbmVyYXRlQmxvY2tOb2RlcygwLCAwLCAwLCAxKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHYXRlIGV4dGVuZHMgQm94IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTVkcsIG5hbWUpIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSA5O1xuICAgICAgICBjb25zdCBoZWlnaHQgPSA0O1xuXG4gICAgICAgIHN1cGVyKHBhcmVudFNWRywgbmFtZSwgXCJnYXRlXCIsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIC8vIG91dHB1dFxuICAgICAgICB0aGlzLmFkZENvbm5lY3Rvcih3aWR0aCwgaGVpZ2h0IC8gMiwgQ29ubmVjdG9yLnR5cGUub3V0cHV0Q29ubmVjdG9yKTtcblxuICAgICAgICBpZih0aGlzLm5hbWU9PT1cIm5vdFwiKSB7XG4gICAgICAgICAgICAvLyBpbnB1dFxuICAgICAgICAgICAgdGhpcy5hZGRDb25uZWN0b3IoMCwgaGVpZ2h0IC8gMiwgQ29ubmVjdG9yLnR5cGUuaW5wdXRDb25uZWN0b3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gaW5wdXRcbiAgICAgICAgICAgIHRoaXMuYWRkQ29ubmVjdG9yKDAsIGhlaWdodCAvIDQsIENvbm5lY3Rvci50eXBlLmlucHV0Q29ubmVjdG9yKTtcbiAgICAgICAgICAgIHRoaXMuYWRkQ29ubmVjdG9yKDAsIGhlaWdodCAvICg0LzMpLCBDb25uZWN0b3IudHlwZS5pbnB1dENvbm5lY3Rvcik7XG5cbiAgICAgICAgICAgIC8vIGFkZCBvbmUgYmxvY2tlZE5vZGUgYmV0d2VlbiB0aGUgaW5wdXRzIChmb3IgYmV0dGVyIGxvb2tpbmcgd2lyaW5nKVxuICAgICAgICAgICAgLy8gYW5kIHJlZ2VuZXJhdGUgYmxvY2tlZCBub2Rlc1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUJsb2NrTm9kZXMoe1xuICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICAgICAgeTogaGVpZ2h0IC8gMlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlZnJlc2hTdGF0ZSgpO1xuICAgIH1cblxuICAgIGdlbmVyYXRlQmxvY2tOb2RlcyhzcGVjaWFsTm9kZSkge1xuICAgICAgICBpZihzcGVjaWFsTm9kZSE9PXVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3VwZXIuZ2VuZXJhdGVCbG9ja05vZGVzKDAsIDEsIDAsIDEsIHNwZWNpYWxOb2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1cGVyLmdlbmVyYXRlQmxvY2tOb2RlcygwLCAxLCAwLCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlZnJlc2hTdGF0ZSgpIHtcbiAgICAgICAgbGV0IHN0YXRlID0gTG9naWMuc3RhdGUudW5rbm93blxuICAgICAgICBzd2l0Y2ggKHRoaXMubmFtZSkge1xuICAgICAgICAgICAgY2FzZSBcImFuZFwiOlxuICAgICAgICAgICAgICAgIHN0YXRlID0gIExvZ2ljLmFuZCh0aGlzLmNvbm5lY3RvcnNbMV0uc3RhdGUsIHRoaXMuY29ubmVjdG9yc1syXS5zdGF0ZSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJuYW5kXCI6XG4gICAgICAgICAgICAgICAgc3RhdGUgPSAgTG9naWMubmFuZCh0aGlzLmNvbm5lY3RvcnNbMV0uc3RhdGUsIHRoaXMuY29ubmVjdG9yc1syXS5zdGF0ZSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJub3JcIjpcbiAgICAgICAgICAgICAgICBzdGF0ZSA9ICBMb2dpYy5ub3IodGhpcy5jb25uZWN0b3JzWzFdLnN0YXRlLCB0aGlzLmNvbm5lY3RvcnNbMl0uc3RhdGUpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibm90XCI6XG4gICAgICAgICAgICAgICAgc3RhdGUgPSAgTG9naWMubm90KHRoaXMuY29ubmVjdG9yc1sxXS5zdGF0ZSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJvclwiOlxuICAgICAgICAgICAgICAgIHN0YXRlID0gIExvZ2ljLm9yKHRoaXMuY29ubmVjdG9yc1sxXS5zdGF0ZSwgdGhpcy5jb25uZWN0b3JzWzJdLnN0YXRlKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInhub3JcIjpcbiAgICAgICAgICAgICAgICBzdGF0ZSA9ICBMb2dpYy54bm9yKHRoaXMuY29ubmVjdG9yc1sxXS5zdGF0ZSwgdGhpcy5jb25uZWN0b3JzWzJdLnN0YXRlKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInhvclwiOlxuICAgICAgICAgICAgICAgIHN0YXRlID0gIExvZ2ljLnhvcih0aGlzLmNvbm5lY3RvcnNbMV0uc3RhdGUsIHRoaXMuY29ubmVjdG9yc1syXS5zdGF0ZSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBub3RpZnkgdGhlIHNpbXVsYXRvciBhYm91dCB0aGlzIGNoYW5nZVxuICAgICAgICB0aGlzLnBhcmVudFNWRy5zaW11bGF0aW9uLm5vdGlmeUNoYW5nZSh0aGlzLmNvbm5lY3RvcnNbMF0uaWQsIHN0YXRlKVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFdpcmUgZXh0ZW5kcyBOZXR3b3JrRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHLCBmcm9tSWQsIHRvSWQsIGdyaWRTaXplLCByZWZyZXNoID0gdHJ1ZSkge1xuICAgICAgICAvLyBzbWFsbCB0b2RvOiByZXdvcmsgc3RhcnQuLi4gZW5kLi4uIHRvIGFycmF5cz8gKG5vdCBpbXBvcnRhbnQpXG5cbiAgICAgICAgc3VwZXIocGFyZW50U1ZHKTtcblxuICAgICAgICB0aGlzLmdyaWRTaXplID0gZ3JpZFNpemU7XG5cbiAgICAgICAgdGhpcy5mcm9tSWQgPSBmcm9tSWQ7XG4gICAgICAgIHRoaXMudG9JZCA9IHRvSWQ7XG5cbiAgICAgICAgdGhpcy5zdGFydEJveCA9IHRoaXMucGFyZW50U1ZHLmdldEJveEJ5Q29ubmVjdG9ySWQoZnJvbUlkKTtcbiAgICAgICAgdGhpcy5lbmRCb3ggPSB0aGlzLnBhcmVudFNWRy5nZXRCb3hCeUNvbm5lY3RvcklkKHRvSWQpO1xuXG4gICAgICAgIHRoaXMuYm94ZXMgPSBbdGhpcy5zdGFydEJveCwgdGhpcy5lbmRCb3hdXG5cbiAgICAgICAgdGhpcy5zdGFydENvbm5lY3RvciA9IHRoaXMucGFyZW50U1ZHLmdldENvbm5lY3RvckJ5SWQoZnJvbUlkKTtcbiAgICAgICAgdGhpcy5lbmRDb25uZWN0b3IgPSB0aGlzLnBhcmVudFNWRy5nZXRDb25uZWN0b3JCeUlkKHRvSWQpO1xuXG4gICAgICAgIHRoaXMuY29ubmVjdG9ycyA9IFt0aGlzLnN0YXJ0Q29ubmVjdG9yLCB0aGlzLmVuZENvbm5lY3Rvcl1cbiAgICAgICAgdGhpcy5yb3V0ZVdpcmUodHJ1ZSwgcmVmcmVzaCk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZUF0dHIgPSBMb2dpYy5zdGF0ZS51bmtub3duO1xuXG4gICAgICAgIGZvciAobGV0IGNvbm5lY3RvciBvZiB0aGlzLmNvbm5lY3RvcnMpIHtcbiAgICAgICAgICAgIGlmKGNvbm5lY3Rvci5pc091dHB1dCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoY29ubmVjdG9yLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3ZnT2JqLiRlbC5hZGRDbGFzcyhcIndpcmVcIik7XG4gICAgfVxuXG4gICAgZ2V0IGV4cG9ydERhdGEoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmcm9tSWQ6IHRoaXMuZnJvbUlkLFxuICAgICAgICAgICAgdG9JZDogdGhpcy50b0lkXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2V0U3RhdGUoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdmdPYmoucmVtb3ZlQ2xhc3NlcyhzdGF0ZUNsYXNzZXMub24sIHN0YXRlQ2xhc3Nlcy5vZmYsIHN0YXRlQ2xhc3Nlcy51bmtub3duLCBzdGF0ZUNsYXNzZXMub3NjaWxsYXRpbmcpO1xuXG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUudW5rbm93bjpcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iai5hZGRDbGFzcyhzdGF0ZUNsYXNzZXMudW5rbm93bik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExvZ2ljLnN0YXRlLm9uOlxuICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqLmFkZENsYXNzKHN0YXRlQ2xhc3Nlcy5vbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExvZ2ljLnN0YXRlLm9mZjpcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iai5hZGRDbGFzcyhzdGF0ZUNsYXNzZXMub2ZmKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUub3NjaWxsYXRpbmc6XG4gICAgICAgICAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2xhc3Moc3RhdGVDbGFzc2VzLm9zY2lsbGF0aW5nKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0Q29ubmVjdG9yLmlzSW5wdXRDb25uZWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRDb25uZWN0b3Iuc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuZW5kQ29ubmVjdG9yLmlzSW5wdXRDb25uZWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZW5kQ29ubmVjdG9yLnNldFN0YXRlKHN0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhdGVBdHRyID0gc3RhdGU7XG4gICAgfVxuXG4gICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZUF0dHI7XG4gICAgfVxuXG4gICAgdXBkYXRlV2lyZVN0YXRlKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGJveCBvZiB0aGlzLmJveGVzKSB7XG4gICAgICAgICAgICBib3gucmVmcmVzaFN0YXRlKClcbiAgICAgICAgfVxuICAgICAgICAvLyBmb3IgKGNvbnN0IGNvbm4gb2YgdGhpcy5jb25uZWN0b3JzKSB7XG4gICAgICAgIC8vICAgICBpZihjb25uLmlzT3V0cHV0Q29ubmVjdG9yKSB7XG4gICAgICAgIC8vICAgICAgICAgdGhpcy5wYXJlbnRTVkcuc3RhcnROZXdTaW11bGF0aW9uKGNvbm4uaWQsIGNvbm4uc3RhdGUpXG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH1cbiAgICB9XG5cbiAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN2Z09iai5nZXQoKTtcbiAgICB9XG5cbiAgICBnZXRUZW1wb3JhcnlXaXJlUG9pbnRzKCkge1xuICAgICAgICBsZXQgcG9pbnRzID0gbmV3IHN2Z09iai5Qb2x5bGluZVBvaW50cygpO1xuICAgICAgICBwb2ludHMuYXBwZW5kKG5ldyBzdmdPYmouUG9seWxpbmVQb2ludCh0aGlzLndpcmVTdGFydC54LCB0aGlzLndpcmVTdGFydC55KSk7XG4gICAgICAgIHBvaW50cy5hcHBlbmQobmV3IHN2Z09iai5Qb2x5bGluZVBvaW50KHRoaXMud2lyZUVuZC54LCB0aGlzLndpcmVFbmQueSkpO1xuICAgICAgICByZXR1cm4gcG9pbnRzO1xuICAgIH1cblxuICAgIHRlbXBvcmFyeVdpcmUoKSB7XG4gICAgICAgIHRoaXMud2lyZVN0YXJ0ID0gdGhpcy5nZXRDb29yZGluYXRlcyh0aGlzLnN0YXJ0Q29ubmVjdG9yLCBmYWxzZSk7XG4gICAgICAgIHRoaXMud2lyZUVuZCA9IHRoaXMuZ2V0Q29vcmRpbmF0ZXModGhpcy5lbmRDb25uZWN0b3IsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLnNldFdpcmVQYXRoKHRoaXMuZ2V0VGVtcG9yYXJ5V2lyZVBvaW50cygpKTtcblxuICAgICAgICAvLyB0aGlzLnN2Z09iai5yZW1vdmVDbGFzc2VzKHN0YXRlQ2xhc3Nlcy5vbiwgc3RhdGVDbGFzc2VzLm9mZiwgc3RhdGVDbGFzc2VzLnVua25vd24sIHN0YXRlQ2xhc3Nlcy5vc2NpbGxhdGluZyk7XG4gICAgICAgIC8vIHRoaXMuc3ZnT2JqLmFkZENsYXNzKHN0YXRlQ2xhc3Nlcy51bmtub3duKTtcbiAgICB9XG5cbiAgICByb3V0ZVdpcmUoc25hcFRvR3JpZCA9IHRydWUsIHJlZnJlc2ggPSB0cnVlKSB7XG4gICAgICAgIHRoaXMud2lyZVN0YXJ0ID0gdGhpcy5nZXRDb29yZGluYXRlcyh0aGlzLnN0YXJ0Q29ubmVjdG9yLCBzbmFwVG9HcmlkKTtcbiAgICAgICAgdGhpcy53aXJlRW5kID0gdGhpcy5nZXRDb29yZGluYXRlcyh0aGlzLmVuZENvbm5lY3Rvciwgc25hcFRvR3JpZCk7XG5cbiAgICAgICAgdGhpcy5wb2ludHMgPSB0aGlzLmFTdGFyKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHg6IHRoaXMud2lyZVN0YXJ0LnggLyB0aGlzLmdyaWRTaXplLFxuICAgICAgICAgICAgICAgIHk6IHRoaXMud2lyZVN0YXJ0LnkgLyB0aGlzLmdyaWRTaXplXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHg6IHRoaXMud2lyZUVuZC54IC8gdGhpcy5ncmlkU2l6ZSxcbiAgICAgICAgICAgICAgICB5OiB0aGlzLndpcmVFbmQueSAvIHRoaXMuZ3JpZFNpemVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2V0V2lyZVBhdGgodGhpcy5wb2ludHMpO1xuXG4gICAgICAgIGlmIChyZWZyZXNoKVxuICAgICAgICAgICAgdGhpcy51cGRhdGVXaXJlU3RhdGUoKTtcbiAgICB9XG5cbiAgICBzZXRXaXJlUGF0aChwb2ludHMpIHtcbiAgICAgICAgLy8gc2V0IHRoZSBsaW5lXG4gICAgICAgIGlmKHRoaXMuc3ZnT2JqIT09dW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnN2Z09iai51cGRhdGVQb2ludHMocG9pbnRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3ZnT2JqID0gbmV3IHN2Z09iai5Qb2x5TGluZShwb2ludHMsIFwiIzhiOGI4YlwiLCAyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3ZnT2JqLnJlbW92ZUNsYXNzZXMoc3RhdGVDbGFzc2VzLm9uLCBzdGF0ZUNsYXNzZXMub2ZmLCBzdGF0ZUNsYXNzZXMudW5rbm93biwgc3RhdGVDbGFzc2VzLm9zY2lsbGF0aW5nKTtcbiAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2xhc3Moc3RhdGVDbGFzc2VzLnVua25vd24pO1xuXG4gICAgICAgIHRoaXMuc3ZnT2JqLmFkZEF0dHIoe1xuICAgICAgICAgICAgZnJvbUlkOiB0aGlzLmZyb21JZCxcbiAgICAgICAgICAgIHRvSWQ6IHRoaXMudG9JZFxuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG4gICAgLy8gaW1wbGVtZW50YXRpb24gYmFzZWQgb24gdGhpcyBwc2V1ZG9jb2RlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BKl9zZWFyY2hfYWxnb3JpdGhtI1BzZXVkb2NvZGVcbiAgICBhU3RhcihzdGFydCwgZW5kKSB7XG4gICAgICAgIC8vIG51bWJlciBvZiBub2RlcywgdGhhdCBjYW4gYmUgb3BlbmVkIGF0IG9uY2VcbiAgICAgICAgLy8gb25jZSBpcyB0aGlzIGxpbWl0IGV4Y2VlZGVkLCBhU3RhciB3aWxsIGZhaWwgYW5kIGdldFRlbXBvcmFyeVdpcmVQb2ludHMgd2lsbCBiZSB1c2VkIGluc3RlYWRcbiAgICAgICAgY29uc3QgbWF4Tm9kZUxpbWl0ID0gNTAwMDA7XG5cbiAgICAgICAgbGV0IGNsb3NlZE5vZGVzID0gbmV3IFNldCgpO1xuICAgICAgICBsZXQgb3Blbk5vZGVzID0gbmV3IFNldCgpO1xuICAgICAgICBvcGVuTm9kZXMuYWRkKHN0YXJ0KTtcblxuICAgICAgICBsZXQgY2FtZUZyb20gPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgLy8gZGVmYXVsdCB2YWx1ZTogaW5maW5pdHlcbiAgICAgICAgbGV0IGdTY29yZSA9IG5ldyBTdHJ1Y3R1cmVzLk1hcFdpdGhEZWZhdWx0VmFsdWUoSW5maW5pdHkpO1xuICAgICAgICBnU2NvcmUuc2V0KHN0YXJ0LCAwKTtcblxuICAgICAgICAvLyBkZWZhdWx0IHZhbHVlOiBpbmZpbml0eVxuICAgICAgICBsZXQgZlNjb3JlID0gbmV3IFN0cnVjdHVyZXMuTWFwV2l0aERlZmF1bHRWYWx1ZShJbmZpbml0eSk7XG4gICAgICAgIGZTY29yZS5zZXQoc3RhcnQsIFdpcmUubWFuaGF0dGFuRGlzdGFuY2Uoc3RhcnQsIGVuZCkpO1xuXG4gICAgICAgIGxldCBub25Sb3V0YWJsZSA9IHRoaXMucGFyZW50U1ZHLmdldE5vblJvdXRhYmxlTm9kZXMoKTtcbiAgICAgICAgbGV0IHB1bmlzaGVkQnV0Um91dGFibGU7XG4gICAgICAgIGlmKHRoaXMuc3ZnT2JqPT09dW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwdW5pc2hlZEJ1dFJvdXRhYmxlID0gdGhpcy5wYXJlbnRTVkcuZ2V0SW5jb252ZW5pZW50Tm9kZXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHB1bmlzaGVkQnV0Um91dGFibGUgPSB0aGlzLnBhcmVudFNWRy5nZXRJbmNvbnZlbmllbnROb2Rlcyh0aGlzLnN2Z09iai5pZCk7XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAob3Blbk5vZGVzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudE5vZGU7XG4gICAgICAgICAgICBsZXQgY3VycmVudE5vZGVGU2NvcmU7XG5cbiAgICAgICAgICAgIC8vIGZpbmQgdGhlIHZhbHVlIGZyb20gb3Blbk5vZGVzIHRoYXQgaGFzIHRoZSBsb3dlc3QgZlNjb3JlXG4gICAgICAgICAgICAvLyAoY2FuIGJlIGltcGxlbWVudGVkIGVmZmVjdGl2ZWx5IHVzaW5nIG1pbi1oZWFwIGRhdGEgc3RydWN0dXJlIChtYXliZSB0b2RvIHNvbWV0aW1lKT8pXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2Ygb3Blbk5vZGVzKSB7XG4gICAgICAgICAgICAgICAgaWYoIWN1cnJlbnROb2RlIHx8IGZTY29yZS5nZXQobm9kZSkgPCBjdXJyZW50Tm9kZUZTY29yZSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlRlNjb3JlID0gZlNjb3JlLmdldChjdXJyZW50Tm9kZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHN2Z09iai5Qb2x5bGluZVBvaW50LmVxdWFscyhjdXJyZW50Tm9kZSwgZW5kKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlY29uc3RydWN0UGF0aChjYW1lRnJvbSwgY3VycmVudE5vZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvcGVuTm9kZXMuZGVsZXRlKGN1cnJlbnROb2RlKTtcbiAgICAgICAgICAgIGNsb3NlZE5vZGVzLmFkZChjdXJyZW50Tm9kZSk7XG5cbiAgICAgICAgICAgIC8vIHRoZSBmYXJ0aGVzdCBwb2ludHMgYWNjZXNzaWJsZSB3aXRob3V0IGF2b2lkaW5nIG9ic3RhY2xlcyBpbiBldmVyeSBkaXJlY3Rpb25cbiAgICAgICAgICAgIC8vIChidXQgbWF4IDUwIGluIGVhY2ggZGlyZWN0aW9uKVxuICAgICAgICAgICAgZm9yKGxldCBkaXJlY3Rpb24gPSAwIDsgZGlyZWN0aW9uIDwgNCA7IGRpcmVjdGlvbisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1BvaW50ID0gV2lyZS5tb3ZlUG9pbnQoY3VycmVudE5vZGUsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCA1MCA7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiBuZXdQb2ludCBpcyBpbiB0aGUgc2V0IG9mIG5vbiByb3V0YWJsZSBwb2ludHMsXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGFkZCBpdCBhbmQgc3RvcCBwcm9jZWVkaW5nIGluIHRoaXMgZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIGlmKFdpcmUuc2V0SGFzVGhpc1BvaW50KG5vblJvdXRhYmxlLCB0aGlzLnNjYWxlUG9pbnRUb0dyaWQobmV3UG9pbnQpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBza2lwIHRoaXMgbm9kZSwgaWYgaXQgaGFzIGJlZW4gYWxyZWFkeSBjbG9zZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gb3IgaWYgaXQgaXMgb24gdGhlIGxpc3Qgb2Ygbm9uIHJvdXRhYmxlIG5vZGVzXG4gICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZWROb2Rlcy5oYXMobmV3UG9pbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghb3Blbk5vZGVzLmhhcyhuZXdQb2ludCkueSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3Blbk5vZGVzLmFkZChuZXdQb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgcG9zc2libGUgR1Njb3JlIGJ5IGFkZGluZyAxIHRvIHRoZSBzY29yZSBvZiB0aGUgbm9kZSB3ZSBjYW1lIGZyb21cbiAgICAgICAgICAgICAgICAgICAgLy8gKHdlIHByaW9yaXRpemUgdG8gbWluaW1pemUgdGhlIG51bWJlciBvZiBub2RlcyBhbmQgbm90IHRoZSBkaXN0YW5jZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gIHNvIHdlIGFyZSBhZGRpbmcgMSBvbiBhbGwgbm9kZXMsIGV2ZW4gaWYgdGhlIGV1Y2xpZGVhbiAvIG1hbm5oYXRhbiBkaXN0YW5jZSBtYXkgdmFyeSlcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluY3JlbWVudCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGlmKGkhPT0wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnQgPSAyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBwb3NzaWJsZUdTY29yZSA9IGdTY29yZS5nZXQoY3VycmVudE5vZGUpICsgaW5jcmVtZW50O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKFdpcmUuc2V0SGFzVGhpc1BvaW50KHB1bmlzaGVkQnV0Um91dGFibGUsIHRoaXMuc2NhbGVQb2ludFRvR3JpZChuZXdQb2ludCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgbm9kZSBpcyBpbiB0aGUgc2V0IG9mIHB1bmlzaGVkIG5vZGUsIHB1bmlzaCBpdCBieSBhZGRpbmcgdG8gdGhlIEdTY29yZVxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zc2libGVHU2NvcmUgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NzaWJsZUdTY29yZSA+PSBnU2NvcmUuZ2V0KG5ld1BvaW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjYW1lRnJvbS5zZXQobmV3UG9pbnQsIGN1cnJlbnROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgZ1Njb3JlLnNldChuZXdQb2ludCwgcG9zc2libGVHU2NvcmUpO1xuICAgICAgICAgICAgICAgICAgICBmU2NvcmUuc2V0KG5ld1BvaW50LCBwb3NzaWJsZUdTY29yZSArIFdpcmUubWFuaGF0dGFuRGlzdGFuY2UobmV3UG9pbnQsIGVuZCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIG5ld1BvaW50IGlzIGluIHRoZSBzZXQgb2YgcHVuaXNoZWQgYnV0IHJvdXRhYmxlIHBvaW50cyxcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGl0IGJ1dCBzdG9wIHByb2NlZWRpbmcgaW4gdGhpcyBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgaWYoV2lyZS5zZXRIYXNUaGlzUG9pbnQocHVuaXNoZWRCdXRSb3V0YWJsZSwgdGhpcy5zY2FsZVBvaW50VG9HcmlkKG5ld1BvaW50KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gbW92ZSB0byB0aGUgbmV4dCBwb2ludCBpbiB0aGUgZGlyZWNpdG9uXG4gICAgICAgICAgICAgICAgICAgIG5ld1BvaW50ID0gV2lyZS5tb3ZlUG9pbnQobmV3UG9pbnQsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihvcGVuTm9kZXMuc2l6ZSA+IG1heE5vZGVMaW1pdCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHdlIGdvdCBoZXJlLCB0aGUgcGF0aCBkb2VzIG5vdCBleGlzdCAtPiBsZXQncyB1c2UgdGVtcG9yYXJ5IHBhdGggaWdub3JpbmcgYWxsIGNvbGlzaW9uc1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRUZW1wb3JhcnlXaXJlUG9pbnRzKCk7XG4gICAgfVxuICAgIHN0YXRpYyBtb3ZlUG9pbnQocG9pbnQsIGRpcmVjdGlvbikge1xuICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY2FzZSAwOiAvLyB1cFxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHg6IHBvaW50LngsXG4gICAgICAgICAgICAgICAgICAgIHk6IHBvaW50LnkgLSAxXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgMTogLy8gcmlnaHRcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB4OiBwb2ludC54ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgeTogcG9pbnQueVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIDI6IC8vIGRvd25cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB4OiBwb2ludC54LFxuICAgICAgICAgICAgICAgICAgICB5OiBwb2ludC55ICsgMVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIDM6IC8vIGxlZnRcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB4OiBwb2ludC54IC0gMSxcbiAgICAgICAgICAgICAgICAgICAgeTogcG9pbnQueVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2NhbGVQb2ludFRvR3JpZChwb2ludCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogcG9pbnQueCAqIHRoaXMuZ3JpZFNpemUsXG4gICAgICAgICAgICB5OiBwb2ludC55ICogdGhpcy5ncmlkU2l6ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVjb25zdHJ1Y3RQYXRoKGNhbWVGcm9tLCBjdXJyZW50Tm9kZSkge1xuICAgICAgICBsZXQgdG90YWxQYXRoID0gbmV3IHN2Z09iai5Qb2x5bGluZVBvaW50cygpO1xuICAgICAgICB0b3RhbFBhdGguYXBwZW5kKG5ldyBzdmdPYmouUG9seWxpbmVQb2ludChjdXJyZW50Tm9kZS54ICogdGhpcy5ncmlkU2l6ZSwgY3VycmVudE5vZGUueSAqIHRoaXMuZ3JpZFNpemUpKTtcblxuICAgICAgICB3aGlsZSAoY2FtZUZyb20uaGFzKGN1cnJlbnROb2RlKSkge1xuICAgICAgICAgICAgY3VycmVudE5vZGUgPSBjYW1lRnJvbS5nZXQoY3VycmVudE5vZGUpO1xuICAgICAgICAgICAgdG90YWxQYXRoLmFwcGVuZChuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnQoY3VycmVudE5vZGUueCAqIHRoaXMuZ3JpZFNpemUsIGN1cnJlbnROb2RlLnkgKiB0aGlzLmdyaWRTaXplKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdG90YWxQYXRoO1xuICAgIH1cblxuICAgIHN0YXRpYyBtYW5oYXR0YW5EaXN0YW5jZShhLCBiKSB7XG4gICAgICAgIC8vIE1hbmhhdHRhbiBnZW9tZXRyeVxuICAgICAgICByZXR1cm4gTWF0aC5hYnMoYS54IC0gYi54KSArIE1hdGguYWJzKGEueSAtIGIueSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHNldEhhc1RoaXNQb2ludChzZXQsIHBvaW50KSB7XG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2Ygc2V0KSB7XG4gICAgICAgICAgICBpZihpdGVtLnggPT09IHBvaW50LnggJiYgaXRlbS55ID09PSBwb2ludC55KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGdldENvb3JkaW5hdGVzKGNvbm5lY3Rvciwgc25hcFRvR3JpZCA9IHRydWUpIHtcbiAgICAgICAgLy8gY29ubmVjdG9yLnN2Z09iai5pZCBoYXMgdG8gYmUgY2FsbGVkLCBlbHNlIHRoZSBnZXRDb29yZGluYXRlcyBkb2VzIG5vdCB3b3JrIG9uIHRoZSBmaXJzdCBjYWxsIGluIEZpcmVmb3ggNTVcbiAgICAgICAgbGV0IGR1bW15ID0gY29ubmVjdG9yLnN2Z09iai5pZDtcblxuICAgICAgICBsZXQgJGNvbm5lY3RvciA9IGNvbm5lY3Rvci5zdmdPYmouJGVsO1xuXG4gICAgICAgIGxldCBwb3NpdGlvbiA9ICRjb25uZWN0b3IucG9zaXRpb24oKTtcblxuICAgICAgICBwb3NpdGlvbi5sZWZ0ID0gdGhpcy5wYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1YKHBvc2l0aW9uLmxlZnQpXG4gICAgICAgIHBvc2l0aW9uLnRvcCA9IHRoaXMucGFyZW50U1ZHLnZpZXdib3gudHJhbnNmb3JtWShwb3NpdGlvbi50b3ApXG5cbiAgICAgICAgbGV0IHdpZHRoID0gJGNvbm5lY3Rvci5hdHRyKFwid2lkdGhcIik7XG4gICAgICAgIGxldCBoZWlnaHQgPSAkY29ubmVjdG9yLmF0dHIoXCJoZWlnaHRcIik7XG5cbiAgICAgICAgbGV0IHggPSBwb3NpdGlvbi5sZWZ0ICsgd2lkdGggLyAyO1xuICAgICAgICBsZXQgeSA9IHBvc2l0aW9uLnRvcCArIGhlaWdodCAvIDI7XG4gICAgICAgIGlmKHNuYXBUb0dyaWQpIHtcbiAgICAgICAgICAgIHggPSB0aGlzLnBhcmVudFNWRy5zbmFwVG9HcmlkKHgpO1xuICAgICAgICAgICAgeSA9IHRoaXMucGFyZW50U1ZHLnNuYXBUb0dyaWQoeSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHlcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQge2V4cG9ydE5ldHdvcmssIGltcG9ydE5ldHdva30gZnJvbSBcIi4vaW1wb3J0RXhwb3J0LmpzXCI7XG5cbmNsYXNzIGpxdWVyeUVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHNwZWNpZmljVGFnKSB7XG4gICAgICAgIGlmKCFzcGVjaWZpY1RhZykge1xuICAgICAgICAgICAgdGhpcy4kZWwgPSAkKFwiPGRpdj5cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRlbCA9ICQoXCI8XCIgKyBzcGVjaWZpY1RhZyArIFwiPlwiKVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBjb25zdCBtb3VzZUljb24gPVxuLy8gICAgIFwiPHN2ZyBjbGFzcz1cXFwibW91c2VJY29uXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIGhlaWdodD1cXFwiMTIxLjc3MTMxbW1cXFwiIHdpZHRoPVxcXCI4Mi4zMjc1ODNtbVxcXCIgdmVyc2lvbj1cXFwiMS4xXFxcIiB2aWV3Qm94PVxcXCIwIDAgMjkxLjcxMTkxIDQzMS40NzMxNFxcXCI+XCIgK1xuLy8gICAgIFwiPGcgdHJhbnNmb3JtPVxcXCJ0cmFuc2xhdGUoLTIwMi43MDkwOCwtMjYwLjkyMzIpXFxcIj5cXG5cIiArXG4vLyAgICAgXCIgICAgICAgICAgICA8cGF0aCBkPVxcXCJtMjAyLjgxMTA4IDQ0My41MDY2N2MtMC4xMjU3IDExLjA1NjgzIDAuMDY1MSAxMi4xMjkxNSAwLjA1MjggMjMuMDkzNzUgMS4wNDA0IDM5LjI5MTY1LTQuMDMyODEgNzkuNTg0MiA4LjgxNDQxIDExNy41NjgzNiAxNy41MjYwMiA1OC4wMDc0MiA3MC43NjEyIDEwNy4wNzc5MyAxMzMuMTI5MDcgMTA4LjExNzE5IDYwLjgwNDQ4IDIuNjEyNDcgMTE1LjgwNjM4LTQxLjQ4OTEyIDEzNi42NTI0OS05Ni45MzU1NSAxNS4yMTk0Mi0zNC43MDU2MSAxMi43NDQ3LTcyLjgyNjM4IDEyLjgzNC0xMDkuNzIyNjYtMC40MDM1Ni0xNy4yNDkwNSAwLjI3NDUyLTI0LjczMjkgMC4wODc5LTQyLjEyMTA5aC0yOTEuNTcwNjZ6XFxcIi8+XFxuXCIgK1xuLy8gICAgIFwiICAgICAgICAgICAgPHBhdGggY2xhc3M9XFxcImxlZnRcXFwiIGQ9XFxcIm0zMzUuNjc3ODggMjYwLjkzMDMyYy01OC42NTI1IDAuNjU1NjYtOTkuNjMxOSA0My41MTM4Ni0xMjAuMDgyMSA5Ni45OTIxOS0xMC41NTA1IDI0LjA2MDEyLTEyLjU5MzUgNDEuNzc3OTctMTIuODg2NyA2Ny41ODIwM2gxMzUuNzgzMnYtMTY0LjU3MjI2Yy0wLjAwNiAwLjAwMDA4LTAuMDExNy0wLjAwMDA4LTAuMDE3NiAwLTAuOTM0Ny0wLjAxMS0xLjg2NTgtMC4wMTI0LTIuNzk2OC0wLjAwMnpcXFwiLz5cXG5cIiArXG4vLyAgICAgXCIgICAgICAgICAgICA8cGF0aCBjbGFzcz1cXFwicmlnaHRcXFwiIGQ9XFxcIm0zNjEuNDY3ODcgMjYwLjkyOTkzYy0wLjk0MjA3LTAuMDEtMS44ODY0LTAuMDA5LTIuODMyMDMgMC4wMDR2MTY0LjU3MjI2aDEzNS43ODUxNmMtMC4yNjI1Ny0yNC40Njk0OC0yLjI1MjEtNDAuNzQ4MjMtMTEuNTAzOTEtNjMuOTAyNDMtMTkuMzQ3MDktNTUuMDMyMjUtNjEuNzMwNDMtMTAwLjA0NTI1LTEyMS40NDkyMi0xMDAuNjczODN6XFxcIi8+XFxuXCIgK1xuLy8gICAgIFwiICAgICAgICAgICAgPHBhdGggY2xhc3M9XFxcIm1pZGRsZVxcXCIgZD1cXFwibTM0OC41NjUwNCAyOTQuOTMzNjVjMTUuMDM3MTQgMCAyNy4xNDI4NiAxMi4xMDU3MiAyNy4xNDI4NiAyNy4xNDI4NnY0MGMwIDE1LjAzNzE0LTEyLjEwNTcyIDI3LjE0Mjg2LTI3LjE0Mjg2IDI3LjE0Mjg2cy0yNy4xNDI4Ni0xMi4xMDU3Mi0yNy4xNDI4Ni0yNy4xNDI4NnYtNDBjMC0xNS4wMzcxNCAxMi4xMDU3Mi0yNy4xNDI4NiAyNy4xNDI4Ni0yNy4xNDI4NnpcXFwiIHN0cm9rZT1cXFwiI2ZmZlxcXCIgc3Ryb2tlLWxpbmVjYXA9XFxcInJvdW5kXFxcIiBzdHJva2Utd2lkdGg9XFxcIjIwXFxcIi8+XFxuXCIgK1xuLy8gICAgIFwiICAgICAgICA8L2c+XCIgK1xuLy8gICAgIFwiPC9zdmc+XCI7XG5cbmNsYXNzIGhlbHBXaW5kb3dJdGVtIGV4dGVuZHMganF1ZXJ5RWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IodGV4dCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKFwiaGVscFdpbmRvd0l0ZW1cIik7XG4gICAgICAgIHRoaXMuJGVsLmh0bWwodGV4dCk7XG4gICAgfVxufVxuXG5jbGFzcyBoZWxwV2luZG93IGV4dGVuZHMganF1ZXJ5RWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy4kZWwuYXR0cihcImlkXCIsIFwiaGVscFwiKTtcblxuICAgICAgICB0aGlzLmFwcGVuZChuZXcgaGVscFdpbmRvd0l0ZW0oXCI8c3Ryb25nPm1haW4gbWVudTwvc3Ryb25nPjogcmlnaHQgY2xpY2tcIikpO1xuICAgICAgICB0aGlzLmFwcGVuZChuZXcgaGVscFdpbmRvd0l0ZW0oXCJkcmFnIGFuZCBkcm9wIHRvIDxzdHJvbmc+bW92ZSBlbGVtZW50czwvc3Ryb25nPlwiKSk7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5ldyBoZWxwV2luZG93SXRlbShcIjxzdHJvbmc+bWlkZGxlIGNsaWNrPC9zdHJvbmc+IHRvIHJvdGF0ZSBlbGVtZW50c1wiKSk7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5ldyBoZWxwV2luZG93SXRlbShcIjxzdHJvbmc+Y2xpY2sgPGltZyBzcmM9J2ltZy9ndWkvaGVscC5zdmcnIGNsYXNzPSdoZWxwaWNvbicgYWx0PSdoZWxwIGljb24nPjwvc3Ryb25nPiB0byBkaXNwbGF5IGRvY3VtZW50YXRpb24gKGluIGN6ZWNoKVwiKSk7XG4gICAgfVxuXG4gICAgYXBwZW5kKGl0ZW0pIHtcbiAgICAgICAgdGhpcy4kZWwuYXBwZW5kKGl0ZW0uJGVsKTtcbiAgICB9XG59XG5cblxuY2xhc3MgZmxvYXRpbmdNZW51SXRlbSBleHRlbmRzIGpxdWVyeUVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHNwZWNpZmljQ2xhc3MsIGljb24sIHRpdGxlLCBzcGVjaWZpY1RhZykge1xuICAgICAgICBzdXBlcihzcGVjaWZpY1RhZyk7XG5cbiAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoXCJidXR0b25cIik7XG4gICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKHNwZWNpZmljQ2xhc3MpO1xuXG4gICAgICAgIHRoaXMuJGVsLmFwcGVuZChcbiAgICAgICAgICAgICQoXCI8aW1nPlwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwic3JjXCIsIFwiaW1nL2d1aS9cIiArIGljb24gKyBcIi5zdmdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImFsdFwiLCB0aXRsZSlcbiAgICAgICAgICAgICAgICAuYXR0cihcInRpdGxlXCIsIHRpdGxlKVxuICAgICAgICApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZmxvYXRpbmdNZW51IGV4dGVuZHMganF1ZXJ5RWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgY29uc3QgaWQgPSAnZmxvYXRpbmdNZW51JztcblxuICAgICAgICB0aGlzLiRlbC5hdHRyKFwiaWRcIiwgaWQpO1xuXG4gICAgICAgIC8qIElNUE9SVCAqL1xuXG4gICAgICAgIC8vIGhlcmUgd2lsbCBiZSB0aGUgaW5zdGFuY2Ugb2YgTGl0eSBzdG9yZWRcbiAgICAgICAgLy8gKHdlIG5lZWQgdG8gc3RvcmUgaXQsIGJlY2F1c2UgdGhlIFwiaW1wb3J0XCIgYnV0dG9uIGFsc28gY2xvc2VzIExpdHkpXG4gICAgICAgIGxldCBsaXR5SW5zdGFuY2VJbXBvcnQ7XG5cbiAgICAgICAgbGV0IGltcG9ydEJ1dHRvbiA9IG5ldyBmbG9hdGluZ01lbnVJdGVtKFwiaW1wb3J0XCIsIFwiaW1wb3J0XCIsIFwiSW1wb3J0IGEgbmV0d29ya1wiLCBcImFcIik7XG4gICAgICAgIGltcG9ydEJ1dHRvbi4kZWwub24oXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgJHBvcHVwID0gJChcIjxkaXY+XCIpXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiaW1wb3J0RXhwb3J0XCIpXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiaW1wb3J0XCIpO1xuXG4gICAgICAgICAgICBsZXQgdGV4dGFyZWFJZCA9IFwiaW1wb3J0SlNPTlwiO1xuXG4gICAgICAgICAgICAkcG9wdXAuYXBwZW5kKFxuICAgICAgICAgICAgICAgICQoXCI8dGV4dGFyZWE+PC90ZXh0YXJlYT5cIikuYXR0cignaWQnLCB0ZXh0YXJlYUlkKVxuICAgICAgICAgICAgKS5hcHBlbmQoXG4gICAgICAgICAgICAgICAgJChcIjxhPlwiKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImhyZWZcIjogXCIjXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNsYXNzXCI6IFwidXBsb2FkXCJcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCI8aW1nPlwiKS5hdHRyKCdzcmMnLCBcImltZy9ndWkvaW1wb3J0LnN2Z1wiKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoXCIgaW1wb3J0IGZyb20gSlNPTlwiKVxuICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0ICR0ZXh0YXJlYSA9ICQoJyMnK3RleHRhcmVhSWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdGV4dGFyZWEgY29udGVudHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbXBvcnRTdHJpbmcgPSAkdGV4dGFyZWEudmFsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb3NlIExpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpdHlJbnN0YW5jZUltcG9ydC5jbG9zZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcm9jY2VzcyB0aGUgaW1wb3J0ZWQgZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IGltcG9ydE5ldHdvayhwYXJlbnRTVkcsIGltcG9ydFN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsaXR5SW5zdGFuY2VJbXBvcnQgPSBsaXR5KCRwb3B1cCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYXBwZW5kKGltcG9ydEJ1dHRvbik7XG5cbiAgICAgICAgLyogRVhQT1JUICovXG5cbiAgICAgICAgbGV0IGV4cG9ydEJ1dHRvbiA9IG5ldyBmbG9hdGluZ01lbnVJdGVtKFwiZXhwb3J0XCIsIFwiZXhwb3J0XCIsIFwiRXhwb3J0IHRoaXMgbmV0d29ya1wiLCBcImFcIik7XG4gICAgICAgIGV4cG9ydEJ1dHRvbi4kZWwub24oXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IG5ldyBleHBvcnROZXR3b3JrKHBhcmVudFNWRyk7XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgcG9wdXAgY29udGFpbmVyIGhvbGRpbmcgYWxsIHBvcHVwIGNvbnRlbnQgKHRoYXQgd2lsbCBiZSBwYXNzZWQgdG8gbGl0eSlcbiAgICAgICAgICAgIGxldCAkcG9wdXAgPSAkKFwiPGRpdj5cIilcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJpbXBvcnRFeHBvcnRcIilcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJleHBvcnRcIik7XG5cbiAgICAgICAgICAgIC8vIGdlbmVyYXRlIHRoZSBibG9jayB3aXRoIGNvZGUgdG8gYmUgZGlzcGxheWVkIGFuZCBhcHBlbmQgaXQgdG8gdGhlIHBvcHVwIGVsZW1lbnRcbiAgICAgICAgICAgICRwb3B1cC5hcHBlbmQoXG4gICAgICAgICAgICAgICAgJChcIjxwcmU+XCIpLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgJChcIjxjb2RlPlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5qc29uKGV4cG9ydE5ldHdvcmsuc3R5bGUucHJldHR5KVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIGdlbmVyYXRlIHRoZSBsaW5rc1xuICAgICAgICAgICAgJHBvcHVwLmFwcGVuZChcbiAgICAgICAgICAgICAgICAkKFwiPGE+XCIpLmF0dHIoe1xuICAgICAgICAgICAgICAgICAgICBcImhyZWZcIjogZGF0YS5qc29uKGV4cG9ydE5ldHdvcmsuc3R5bGUucHJldHR5LCB0cnVlKSxcbiAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcImRvd25sb2FkXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZG93bmxvYWRcIjogXCJuZXR3b3JrLmpzb25cIlxuICAgICAgICAgICAgICAgIH0pLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgJChcIjxpbWc+XCIpLmF0dHIoJ3NyYycsIFwiaW1nL2d1aS9leHBvcnQuc3ZnXCIpXG4gICAgICAgICAgICAgICAgKS5hcHBlbmQoXCIgZXhwYW5kZWQgSlNPTlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICRwb3B1cC5hcHBlbmQoXG4gICAgICAgICAgICAgICAgJChcIjxhPlwiKS5hdHRyKHtcbiAgICAgICAgICAgICAgICAgICAgXCJocmVmXCI6IGRhdGEuanNvbihleHBvcnROZXR3b3JrLnN0eWxlLmNvbXBhY3QsIHRydWUpLFxuICAgICAgICAgICAgICAgICAgICBcImNsYXNzXCI6IFwiZG93bmxvYWRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJkb3dubG9hZFwiOiBcIm5ldHdvcmsubWluLmpzb25cIlxuICAgICAgICAgICAgICAgIH0pLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgJChcIjxpbWc+XCIpLmF0dHIoJ3NyYycsIFwiaW1nL2d1aS9leHBvcnQuc3ZnXCIpXG4gICAgICAgICAgICAgICAgKS5hcHBlbmQoXCIgY29tcGFjdCBKU09OXCIpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsaXR5KCRwb3B1cCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYXBwZW5kKGV4cG9ydEJ1dHRvbik7XG5cbiAgICAgICAgLyogSEVMUCAqL1xuXG4gICAgICAgIGxldCBoZWxwID0gbmV3IGZsb2F0aW5nTWVudUl0ZW0oXCJoZWxwXCIsIFwiaGVscFwiLCBcIkRpc3BsYXkgaGVscFwiLCBcImFcIik7XG4gICAgICAgIGhlbHAuJGVsLm9uKFwibW91c2VvdmVyXCIsICgpID0+IHtcbiAgICAgICAgICAgICQoXCIjaGVscFwiKS5hZGRDbGFzcyhcInZpc2libGVcIik7XG4gICAgICAgIH0pLm9uKFwibW91c2VvdXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgJChcIiNoZWxwXCIpLnJlbW92ZUNsYXNzKFwidmlzaWJsZVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaGVscC4kZWwuYXR0cih7XG4gICAgICAgICAgICAnaHJlZic6ICcuL2RvY3MvdXNlci5odG1sJyxcbiAgICAgICAgICAgICdkYXRhLWxpdHknOiAnJ1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hcHBlbmQoaGVscCk7XG5cbiAgICAgICAgcGFyZW50U1ZHLiRzdmcuYWZ0ZXIodGhpcy4kZWwpO1xuICAgICAgICBwYXJlbnRTVkcuJHN2Zy5hZnRlcihuZXcgaGVscFdpbmRvdygpLiRlbCk7XG4gICAgfVxuXG4gICAgYXBwZW5kKG1lbnVJdGVtKSB7XG4gICAgICAgIHRoaXMuJGVsLmFwcGVuZChtZW51SXRlbS4kZWwpO1xuICAgIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnQgY2xhc3MgZXhwb3J0TmV0d29yayB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHKSB7XG4gICAgICAgIHRoaXMucGFyZW50U1ZHID0gcGFyZW50U1ZHO1xuICAgIH1cblxuICAgIGdldCBleHBvcnREYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnRTVkcuZXhwb3J0RGF0YTtcbiAgICB9XG5cbiAgICBqc29uKHN0eWxlID0gZXhwb3J0TmV0d29yay5zdHlsZS5jb21wYWN0LCBkYXRhVXJpID0gZmFsc2UpIHtcbiAgICAgICAgaWYoZGF0YVVyaSkge1xuICAgICAgICAgICAgcmV0dXJuICdkYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCwnXG4gICAgICAgICAgICAgICAgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5qc29uKHN0eWxlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHN0eWxlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBleHBvcnROZXR3b3JrLnN0eWxlLmNvbXBhY3Q6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmV4cG9ydERhdGEpO1xuICAgICAgICAgICAgICAgIGNhc2UgZXhwb3J0TmV0d29yay5zdHlsZS5wcmV0dHk6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmV4cG9ydERhdGEsIG51bGwsIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBzdHlsZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByZXR0eTogMCxcbiAgICAgICAgICAgIGNvbXBhY3Q6IDFcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCBjbGFzcyBpbXBvcnROZXR3b2sge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFNWRywgc3RyaW5nKSB7XG4gICAgICAgIHBhcmVudFNWRy5pbXBvcnREYXRhKFxuICAgICAgICAgICAgSlNPTi5wYXJzZShzdHJpbmcpXG4gICAgICAgICk7XG4gICAgfVxuXG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIGxvZ2ljIGZ1bmN0aW9ucyB1c2VkIGluIHRoZSBnYXRlIGV2YWx1YXRpb25cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZ2ljIHtcbiAgICBzdGF0aWMgYW5kKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIExvZ2ljLnRlc3RMb2dpY1J1bGVzU3ltbWV0cmljKGEsIGIsIFtcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9uXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vZmZdLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9uLCBMb2dpYy5zdGF0ZS51bmtub3duLCBMb2dpYy5zdGF0ZS51bmtub3duXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nXSxcblxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vZmZdLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUub2ZmXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vZmYsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS5vZmZdLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93bl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLnVua25vd25dLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZ11cbiAgICAgICAgXSk7XG4gICAgfVxuICAgIHN0YXRpYyBuYW5kKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIExvZ2ljLm5vdChMb2dpYy5hbmQoYSwgYikpO1xuICAgIH1cbiAgICBzdGF0aWMgbm9yKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIExvZ2ljLm5vdChMb2dpYy5vcihhLCBiKSk7XG4gICAgfVxuICAgIHN0YXRpYyBub3QoYSkge1xuICAgICAgICBpZihhID09PSBMb2dpYy5zdGF0ZS5vbikge1xuICAgICAgICAgICAgcmV0dXJuIExvZ2ljLnN0YXRlLm9mZjtcbiAgICAgICAgfSBlbHNlIGlmIChhID09PSBMb2dpYy5zdGF0ZS5vZmYpIHtcbiAgICAgICAgICAgIHJldHVybiBMb2dpYy5zdGF0ZS5vbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBvcihhLCBiKSB7XG4gICAgICAgIHJldHVybiBMb2dpYy50ZXN0TG9naWNSdWxlc1N5bW1ldHJpYyhhLCBiLCBbXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9uLCBMb2dpYy5zdGF0ZS5vbl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub25dLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9uLCBMb2dpYy5zdGF0ZS51bmtub3duLCBMb2dpYy5zdGF0ZS5vbl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS5vbl0sXG5cbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vZmYsIExvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub2ZmXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vZmYsIExvZ2ljLnN0YXRlLnVua25vd24sIExvZ2ljLnN0YXRlLnVua25vd25dLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nXSxcblxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLnVua25vd24sIExvZ2ljLnN0YXRlLnVua25vd24sIExvZ2ljLnN0YXRlLnVua25vd25dLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLnVua25vd24sIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS51bmtub3duXSxcblxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZywgTG9naWMuc3RhdGUub3NjaWxsYXRpbmddXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICBzdGF0aWMgeG5vcihhLCBiKSB7XG4gICAgICAgIHJldHVybiBMb2dpYy5ub3QoTG9naWMueG9yKGEsIGIpKTtcbiAgICB9XG4gICAgc3RhdGljIHhvcihhLCBiKSB7XG4gICAgICAgIHJldHVybiBMb2dpYy50ZXN0TG9naWNSdWxlc1N5bW1ldHJpYyhhLCBiLCBbXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9uLCBMb2dpYy5zdGF0ZS5vZmZdLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9uLCBMb2dpYy5zdGF0ZS5vZmYsIExvZ2ljLnN0YXRlLm9uXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93bl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZ10sXG5cbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vZmYsIExvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub2ZmXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vZmYsIExvZ2ljLnN0YXRlLnVua25vd24sIExvZ2ljLnN0YXRlLnVua25vd25dLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nXSxcblxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLnVua25vd24sIExvZ2ljLnN0YXRlLnVua25vd24sIExvZ2ljLnN0YXRlLnVua25vd25dLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLnVua25vd24sIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS51bmtub3duXSxcblxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZywgTG9naWMuc3RhdGUub3NjaWxsYXRpbmddXG4gICAgICAgIF0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1bmtub3duOiAwLFxuICAgICAgICAgICAgb246IDEsXG4gICAgICAgICAgICBvZmY6IDIsXG4gICAgICAgICAgICBvc2NpbGxhdGluZzogM1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIHRlc3RMb2dpY1J1bGVzU3ltbWV0cmljKGEsIGIsIHJ1bGVzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IHJ1bGVzLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgaWYoKHJ1bGVzW2ldWzBdPT09YSAmJiBydWxlc1tpXVsxXT09PWIpIHx8IChydWxlc1tpXVswXT09PWIgJiYgcnVsZXNbaV1bMV09PT1hKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBydWxlc1tpXVsyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgU3ZnIGZyb20gJy4vY2FudmFzLmpzJztcblxuJChmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHN2ZyA9IG5ldyBTdmcoXCJzdmcjY2FudmFzXCIsIDEwKTtcblxuICAgIC8qIERFTU8gKi9cbiAgICAvLyBPTkUgQklUIENPTVBBUkFUT1JcbiAgICAvKlxuICAgIGxldCBpMSA9IHN2Zy5uZXdJbnB1dCgxMDAsIDEwMCk7XG4gICAgbGV0IGkyID0gc3ZnLm5ld0lucHV0KDEwMCwgMjAwKTtcblxuICAgIGxldCBuMSA9IHN2Zy5uZXdHYXRlKFwibm90XCIsIDIwMCwgMTAwKTtcbiAgICBsZXQgbjIgPSBzdmcubmV3R2F0ZShcIm5vdFwiLCAyMDAsIDIwMCk7XG5cbiAgICBsZXQgYTEgPSBzdmcubmV3R2F0ZShcImFuZFwiLCAzNjAsIDkwKTtcbiAgICBsZXQgYTIgPSBzdmcubmV3R2F0ZShcImFuZFwiLCAzNjAsIDIxMCk7XG5cbiAgICBsZXQgbm9yID0gc3ZnLm5ld0dhdGUoXCJub3JcIiwgNTQwLCAxNTApO1xuXG4gICAgbGV0IG8xID0gc3ZnLm5ld091dHB1dCg2ODAsIDkwKTtcbiAgICBsZXQgbzIgPSBzdmcubmV3T3V0cHV0KDY4MCwgMTUwKTtcbiAgICBsZXQgbzMgPSBzdmcubmV3T3V0cHV0KDY4MCwgMjEwKTtcblxuICAgIHN2Zy5uZXdXaXJlKGkxLm91dHB1dHNbMF0uc3ZnT2JqLmlkLCBuMS5pbnB1dHNbMF0uc3ZnT2JqLmlkKTtcbiAgICBzdmcubmV3V2lyZShpMi5vdXRwdXRzWzBdLnN2Z09iai5pZCwgbjIuaW5wdXRzWzBdLnN2Z09iai5pZCk7XG5cbiAgICBzdmcubmV3V2lyZShpMS5vdXRwdXRzWzBdLnN2Z09iai5pZCwgYTIuaW5wdXRzWzFdLnN2Z09iai5pZCk7XG4gICAgc3ZnLm5ld1dpcmUoaTIub3V0cHV0c1swXS5zdmdPYmouaWQsIGExLmlucHV0c1swXS5zdmdPYmouaWQpO1xuXG4gICAgc3ZnLm5ld1dpcmUobjEub3V0cHV0c1swXS5zdmdPYmouaWQsIGExLmlucHV0c1sxXS5zdmdPYmouaWQpO1xuICAgIHN2Zy5uZXdXaXJlKG4yLm91dHB1dHNbMF0uc3ZnT2JqLmlkLCBhMi5pbnB1dHNbMF0uc3ZnT2JqLmlkKTtcblxuICAgIHN2Zy5uZXdXaXJlKGExLm91dHB1dHNbMF0uc3ZnT2JqLmlkLCBub3IuaW5wdXRzWzBdLnN2Z09iai5pZCk7XG4gICAgc3ZnLm5ld1dpcmUoYTIub3V0cHV0c1swXS5zdmdPYmouaWQsIG5vci5pbnB1dHNbMV0uc3ZnT2JqLmlkKTtcblxuICAgIHN2Zy5uZXdXaXJlKGExLm91dHB1dHNbMF0uc3ZnT2JqLmlkLCBvMS5pbnB1dHNbMF0uc3ZnT2JqLmlkKTtcbiAgICBzdmcubmV3V2lyZShub3Iub3V0cHV0c1swXS5zdmdPYmouaWQsIG8yLmlucHV0c1swXS5zdmdPYmouaWQpO1xuICAgIHN2Zy5uZXdXaXJlKGEyLm91dHB1dHNbMF0uc3ZnT2JqLmlkLCBvMy5pbnB1dHNbMF0uc3ZnT2JqLmlkKTtcbiAgICAqL1xuXG4gICAgLy8gQklOQVJZIEFEREVSXG4gICAgLypcbiAgICBsZXQgaTEgPSBzdmcubmV3SW5wdXQoODAsIDkwKTtcbiAgICBsZXQgaTIgPSBzdmcubmV3SW5wdXQoODAsIDEzMCk7XG4gICAgbGV0IGkzID0gc3ZnLm5ld0lucHV0KDgwLCAxODApO1xuXG4gICAgbGV0IHgxID0gc3ZnLm5ld0dhdGUoXCJ4b3JcIiwgMzYwLCAxMDApO1xuICAgIGxldCB4MiA9IHN2Zy5uZXdHYXRlKFwieG9yXCIsIDM2MCwgMTcwKTtcblxuICAgIGxldCBhMSA9IHN2Zy5uZXdHYXRlKFwiYW5kXCIsIDI1MCwgMjIwKTtcbiAgICBhMS5vbkNsaWNrTWlkZGxlKCk7Ly8gYSBqZWRub3Ugcm90b3ZhbnlcbiAgICBsZXQgYTIgPSBzdmcubmV3R2F0ZShcImFuZFwiLCA1MDAsIDMyMCk7XG5cbiAgICBsZXQgb3IgPSBzdmcubmV3R2F0ZShcIm9yXCIsIDYyMCwgMzEwKTtcblxuICAgIGxldCBvMSA9IHN2Zy5uZXdPdXRwdXQoNzUwLCAyNzApO1xuICAgIGxldCBvMiA9IHN2Zy5uZXdPdXRwdXQoNzUwLCAzMTApO1xuXG4gICAgc3ZnLm5ld1dpcmUoaTEub3V0cHV0c1swXS5zdmdPYmouaWQsIHgxLmlucHV0c1swXS5zdmdPYmouaWQpO1xuICAgIHN2Zy5uZXdXaXJlKGkyLm91dHB1dHNbMF0uc3ZnT2JqLmlkLCB4MS5pbnB1dHNbMV0uc3ZnT2JqLmlkKTtcbiAgICBzdmcubmV3V2lyZShpMy5vdXRwdXRzWzBdLnN2Z09iai5pZCwgeDIuaW5wdXRzWzFdLnN2Z09iai5pZCk7XG5cbiAgICBzdmcubmV3V2lyZShpMS5vdXRwdXRzWzBdLnN2Z09iai5pZCwgYTEuaW5wdXRzWzFdLnN2Z09iai5pZCk7XG5cbiAgICBzdmcubmV3V2lyZShpMi5vdXRwdXRzWzBdLnN2Z09iai5pZCwgYTEuaW5wdXRzWzBdLnN2Z09iai5pZCk7XG5cbiAgICBzdmcubmV3V2lyZShpMy5vdXRwdXRzWzBdLnN2Z09iai5pZCwgYTIuaW5wdXRzWzFdLnN2Z09iai5pZCk7XG5cbiAgICBzdmcubmV3V2lyZSh4MS5vdXRwdXRzWzBdLnN2Z09iai5pZCwgeDIuaW5wdXRzWzBdLnN2Z09iai5pZCk7XG4gICAgc3ZnLm5ld1dpcmUoeDEub3V0cHV0c1swXS5zdmdPYmouaWQsIGEyLmlucHV0c1swXS5zdmdPYmouaWQpO1xuXG4gICAgc3ZnLm5ld1dpcmUoYTEub3V0cHV0c1swXS5zdmdPYmouaWQsIG9yLmlucHV0c1swXS5zdmdPYmouaWQpO1xuXG4gICAgc3ZnLm5ld1dpcmUoeDIub3V0cHV0c1swXS5zdmdPYmouaWQsIG8xLmlucHV0c1swXS5zdmdPYmouaWQpO1xuICAgIHN2Zy5uZXdXaXJlKGEyLm91dHB1dHNbMF0uc3ZnT2JqLmlkLCBvci5pbnB1dHNbMV0uc3ZnT2JqLmlkKTtcblxuICAgIHN2Zy5uZXdXaXJlKG9yLm91dHB1dHNbMF0uc3ZnT2JqLmlkLCBvMi5pbnB1dHNbMF0uc3ZnT2JqLmlkKTtcbiAgICAqL1xufSk7IiwiaW1wb3J0IExvZ2ljIGZyb20gJy4vbG9naWMuanMnXG5cbmNsYXNzIHN0YXRlQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0b3JJZCwgc3RhdGUsIHdob0NhdXNlZEl0KSB7XG4gICAgICAgIHRoaXMuY29ubmVjdG9ySWQgPSBjb25uZWN0b3JJZFxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGVcbiAgICAgICAgdGhpcy53aG9DYXVzZWRJdCA9IHdob0NhdXNlZEl0XG4gICAgfVxufVxuXG4vLyBhbGwgY29ubmVjdG9ycyBtZW50aW9uZWQgaGVyZSBhcmUgT1VUUFVUIENPTk5FQ1RPUlNcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNpbXVsYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFNWRykge1xuICAgICAgICB0aGlzLnBhcmVudFNWRyA9IHBhcmVudFNWR1xuXG4gICAgICAgIC8vIG1hcHMgZWFjaCBhZmZlY3RlZCBvdXRwdXQgY29ubmVjdG9yIHRvIGl0J3MgZGlyZWN0bHkgcHJlY2VlZGluZyBvdXRwdXQgY29ubmVjdG9yc1xuICAgICAgICB0aGlzLnByZWRlY2Vzc29ycyA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvLyBtYXBzIHdhdmVJZCAtPiBhcnJheSBvZiBvdXRwdXRDb25uZWN0b3JzIGFmZmVjdGVkXG4gICAgICAgIHRoaXMud2F2ZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMud2F2ZSA9IDBcblxuICAgICAgICB0aGlzLmN5Y2xlZENvbm5lY3RvcnMgPSBuZXcgTWFwKClcbiAgICAgICAgdGhpcy5yZXNvbHZlZEN5Y2xlZENvbm5lY3RvcnMgPSBuZXcgU2V0KClcblxuICAgIH1cblxuICAgIHJ1bigpIHtcbiAgICAgICAgdGhpcy53YXZlKys7XG4gICAgICAgIHdoaWxlKHRoaXMud2F2ZXMuaGFzKHRoaXMud2F2ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RlcCgpXG4gICAgICAgICAgICB0aGlzLndhdmVzLmRlbGV0ZSh0aGlzLndhdmUpIC8vIGNsZWFuIG9sZCB3YXZlcyBvbiB0aGUgZ29cbiAgICAgICAgICAgIHRoaXMud2F2ZSsrXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGVwKCkge1xuICAgICAgICBmb3IgKGxldCB7Y29ubmVjdG9ySWQsIHN0YXRlLCB3aG9DYXVzZWRJdH0gb2YgdGhpcy53YXZlcy5nZXQodGhpcy53YXZlKSkge1xuICAgICAgICAgICAgLy8gc2tpcCByZXNvbHZlZCBjeWNsZXNcbiAgICAgICAgICAgIGlmKHRoaXMucmVzb2x2ZWRDeWNsZWRDb25uZWN0b3JzLmhhcyhjb25uZWN0b3JJZCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBza2lwIGNvbm5lY3RvciB0aGF0IGFyZSBjeWNsZXNcbiAgICAgICAgICAgIGlmICh0aGlzLmN5Y2xlZENvbm5lY3RvcnMuaGFzKGNvbm5lY3RvcklkKSkge1xuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgc2V0IG9mIHN0YXRlcyB0aGF0IHRoaXMgY29ubmVjdG9yIGFwcGVhcmVkIGZyb20gdGhlIG1vbWVudCB0aGUgc2lnbmFsIGZpcnN0IGN5Y2xlZFxuICAgICAgICAgICAgICAgIGxldCBzdGF0ZXMgPSB0aGlzLmN5Y2xlZENvbm5lY3RvcnMuZ2V0KGNvbm5lY3RvcklkKVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIGNvbm5lY3RvciBhbHJlYWR5IGhhZCB0aGlzIHN0YXRlIGluIHRoaXMgY3ljbGUsIHJlc29sdmUgdGhlIGN5Y2xlXG4gICAgICAgICAgICAgICAgaWYoc3RhdGVzLmhhcyhzdGF0ZSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbW9yZSBzdGF0ZXMgaW4gdGhlIHNldCwgdGhlIGNvbm5lY3RvciBpcyBvc2NpbGxhdGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyAoZWxzZSBpdCBrZWVwcyBpdHMgc3RhdGUgYW5kIHdlIGp1c3QgYnJlYWsgdGhlIGN5Y2xlKVxuICAgICAgICAgICAgICAgICAgICBpZihzdGF0ZXMuc2l6ZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gTG9naWMuc3RhdGUub3NjaWxsYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmsgdGhpcyBjb25uZWN0b3IgYXMgcmVzb2x2ZWRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlZEN5Y2xlZENvbm5lY3RvcnMuYWRkKGNvbm5lY3RvcklkKVxuXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBhIG5ldywgdW5zZWVuIHN0YXRlLCBhZGQgaXQgdG8gdGhlIHNldCBhbmQgY29udGludWUgc2ltdWxhdGluZyB0aGUgY3ljbGVcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuYWRkKHN0YXRlKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIG1hcCB0aGUgbW9kaWZpZWQgc2V0IG9mIHN0YXRlcyB0byB0aGUgY29ubmVjdG9yXG4gICAgICAgICAgICAgICAgdGhpcy5jeWNsZWRDb25uZWN0b3JzLnNldChjb25uZWN0b3JJZCwgc3RhdGVzKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLndob0NhdXNlZEl0ID0gY29ubmVjdG9ySWRcbiAgICAgICAgICAgIC8qICBwcm9jZXNzIGFsbCBvdXRwdXRDb25uZWN0b3JzIGJ5IHNldHRpbmcgdGhlaXIgc3RhdGVcbiAgICAgICAgICAgICAgICB0aGlzIHdpbGwgdHJpZ2dlciBhIGZvbGxvd2luZyBldmVudCBjaGFpbjpcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0Q29ubmVjdG9yIGNoYW5nZXNcbiAgICAgICAgICAgICAgICAgICAgLT4gYWxsIGNvbm5lY3RlZCB3aXJlcyBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgLT4gYWxsIGlucHV0Q29ubmVjdG9ycyBjb25uZWN0ZWQgdG8gdGhlc2Ugd2lyZXMgY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgIC0+IGFsbCBlbGVtZW50cyB0aGF0IGNvbnRhaW4gdGhlc2UgaW5wdXRDb25uZWN0b3JzIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAtPiB0aGVzZSBlbGVtZW50cyBjb21wdXRlIHRoZSBuZXcgc3RhdGUgb2YgdGhlaXIgb3V0cHV0IGNvbm5lY3RvcnMgYW5kIGNhbGwgbm90aWZ5Q2hhbmdlKClcbiAgICAgICAgICAgICovXG5cblxuICAgICAgICAgICAgaWYod2hvQ2F1c2VkSXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFByZWRlY2Vzc29yKGNvbm5lY3RvcklkLCB3aG9DYXVzZWRJdClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLmN5Y2xlZENvbm5lY3RvcnMuaGFzKGNvbm5lY3RvcklkKSAmJiB0aGlzLmdldEFsbFByZWRlY2Vzc29ycyhjb25uZWN0b3JJZCkuaGFzKGNvbm5lY3RvcklkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3ljbGVkQ29ubmVjdG9ycy5zZXQoY29ubmVjdG9ySWQsIG5ldyBTZXQoW3N0YXRlXSkpXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy8gcmVmbGVjdCB0aGUgY2hhbmdlcyBpbiBTVkdcbiAgICAgICAgICAgIGxldCBjb25uZWN0b3IgPSB0aGlzLnBhcmVudFNWRy5nZXRDb25uZWN0b3JCeUlkKGNvbm5lY3RvcklkKVxuICAgICAgICAgICAgaWYoY29ubmVjdG9yKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdG9yLnNldFN0YXRlKHN0YXRlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMud2hvQ2F1c2VkSXQgPSB1bmRlZmluZWRcbiAgICB9XG5cbiAgICAvLyBtYXJrIGEgcHJlZGVjZXNzb3JDb25uZWN0b3JJZCBhcyBhIHByZWRlY2Vzc29yIG9mIGNvbm5lY3RvcklkXG4gICAgYWRkUHJlZGVjZXNzb3IoY29ubmVjdG9ySWQsIHByZWRlY2Vzc29yQ29ubmVjdG9ySWQpIHtcbiAgICAgICAgaWYoIXRoaXMucHJlZGVjZXNzb3JzLmhhcyhjb25uZWN0b3JJZCkpIHtcbiAgICAgICAgICAgIHRoaXMucHJlZGVjZXNzb3JzLnNldChjb25uZWN0b3JJZCwgbmV3IFNldCgpKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wcmVkZWNlc3NvcnMuZ2V0KGNvbm5lY3RvcklkKS5hZGQocHJlZGVjZXNzb3JDb25uZWN0b3JJZClcbiAgICB9XG5cbiAgICAvLyByZXR1cm5zIHNldCBvZiBhbGwgb3V0cHV0IGNvbm5lY3RvcnMsIHRoYXQgYXJlIGJlZm9yZSB0aGlzIG91dHB1dCBjb25uZWN0b3JcbiAgICBnZXRBbGxQcmVkZWNlc3NvcnMoY29ubmVjdG9ySWQpIHtcbiAgICAgICAgaWYoIXRoaXMucHJlZGVjZXNzb3JzLmhhcyhjb25uZWN0b3JJZCkpIHtcbiAgICAgICAgICAgIHRoaXMucHJlZGVjZXNzb3JzLnNldChjb25uZWN0b3JJZCwgbmV3IFNldCgpKVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGFsbCA9IG5ldyBTZXQoKVxuXG4gICAgICAgIHRoaXMucHJlZGVjZXNzb3JzLmdldChjb25uZWN0b3JJZCkuZm9yRWFjaChhbGwuYWRkLCBhbGwpO1xuXG4gICAgICAgIGxldCBwcmV2U2l6ZSA9IDBcbiAgICAgICAgbGV0IHNpemUgPSBhbGwuc2l6ZVxuICAgICAgICB3aGlsZShwcmV2U2l6ZSA8IHNpemUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNvbm5lY3RvciBvZiBhbGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmVkZWNlc3NvcnMuaGFzKGNvbm5lY3RvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVkZWNlc3NvcnMuZ2V0KGNvbm5lY3RvcikuZm9yRWFjaChhbGwuYWRkLCBhbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZTaXplID0gc2l6ZVxuICAgICAgICAgICAgc2l6ZSA9IGFsbC5zaXplXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWxsXG4gICAgfVxuXG4gICAgbm90aWZ5Q2hhbmdlKGNvbm5lY3RvcklkLCBzdGF0ZSkge1xuICAgICAgICBsZXQgd2F2ZUlkID0gdGhpcy53YXZlICsgMVxuXG4gICAgICAgIGlmKCF0aGlzLndhdmVzLmhhcyh3YXZlSWQpKSB7XG4gICAgICAgICAgICB0aGlzLndhdmVzLnNldCh3YXZlSWQsIFtdKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy53YXZlcy5nZXQod2F2ZUlkKS5wdXNoKG5ldyBzdGF0ZUNoYW5nZShjb25uZWN0b3JJZCwgc3RhdGUsIHRoaXMud2hvQ2F1c2VkSXQpKTtcbiAgICB9XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm4ge1xuICAgIHN0YXRpYyBkZWVwQ29weShhcnIpIHtcbiAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHRydWUsIFtdLCBhcnIpO1xuICAgIH1cblxuICAgIHN0YXRpYyBhZGRNb3VzZVNjcm9sbEV2ZW50TGlzdGVuZXIocXVlcnksIGZ1bmMpIHtcbiAgICAgICAgbGV0IE1vdXNlV2hlZWxIYW5kbGVyID0gZXZlbnQgPT4ge1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gd2luZG93LmV2ZW50IHx8IGV2ZW50OyAvLyBvbGQgSUUgc3VwcG9ydFxuICAgICAgICAgICAgZXZlbnQuZGVsdGEgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgKGV2ZW50LndoZWVsRGVsdGEgfHwgLWV2ZW50LmRldGFpbCkpKTtcblxuICAgICAgICAgICAgZnVuYyhldmVudClcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETyBhZGQgbW9yZSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBzb21laG93XG4gICAgICAgIGxldCBzdmdlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihxdWVyeSk7XG5cbiAgICAgICAgaWYgKHN2Z2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgLy8gSUU5LCBDaHJvbWUsIFNhZmFyaSwgT3BlcmFcbiAgICAgICAgICAgIHN2Z2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIiwgTW91c2VXaGVlbEhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIC8vIEZpcmVmb3hcbiAgICAgICAgICAgIHN2Z2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTU1vdXNlU2Nyb2xsXCIsIE1vdXNlV2hlZWxIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSAge1xuICAgICAgICAgICAgLy8gSUUgNi83LzhcbiAgICAgICAgICAgIHN2Z2VsZW1lbnQuYXR0YWNoRXZlbnQoXCJvbm1vdXNld2hlZWxcIiwgTW91c2VXaGVlbEhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIHN2Z2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdldmVudCcsIGUpXG4gICAgICAgIH0sIGZhbHNlKVxuICAgIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBzaW5nbGV0b24gdG8gZ2VuZXJhdGUgdW5pcXVlIGlkJ3NcbmxldCBleGlzdGluZ0lkSW5zdGFuY2UgPSBudWxsO1xuLy8gdXNhZ2U6IGxldCBpZCA9IG5ldyBJZCgpLnVuaXF1ZVxuZXhwb3J0IGNsYXNzIElkIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgaWYoIWV4aXN0aW5nSWRJbnN0YW5jZSl7XG4gICAgICAgICAgICBleGlzdGluZ0lkSW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wcmVmaXggPSBcImlkXCI7XG4gICAgICAgIHRoaXMubmV4dElkID0gMDtcblxuICAgICAgICByZXR1cm4gZXhpc3RpbmdJZEluc3RhbmNlO1xuICAgIH1cblxuICAgIGdldCB1bmlxdWUoKSB7XG4gICAgICAgIGxldCByZXRWYWwgPSB0aGlzLmdlbmVyYXRlKCk7XG5cbiAgICAgICAgLy8gZmluZCBuZXh0IHVudXNlZCBpZFhYWFggdG8gcHJldmVudCBpZCBjb2xsaXNpb24gdGhhdCBtaWdodCBiZSBjYXVzZWQgYnkgc29tZSBvdGhlciBjb21wb25lbnRcbiAgICAgICAgLy8gKGl0IHJlYWxseSBzaG91bGQgbm90IGhhcHBlbiwgYnV0IHRoaXMgaXMgYSBzaW1wbGUgbWV0aG9kIHRvIGVuc3VyZSBzYWZldHkpXG4gICAgICAgIHdoaWxlKCQoXCIjXCIrcmV0VmFsKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dElkKys7XG4gICAgICAgICAgICByZXRWYWwgPSB0aGlzLmdlbmVyYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0dXJuIHRoaXMgaWRcbiAgICAgICAgdGhpcy5uZXh0SWQrKztcblxuICAgICAgICByZXR1cm4gcmV0VmFsO1xuICAgIH1cblxuICAgIGdlbmVyYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVmaXggKyB0aGlzLm5leHRJZDtcbiAgICB9XG59XG5cbi8vIHRvIGVzNSBjb21waWxlciBmcmllbmRseSBpbXBsZW1lbnRhdGlvbiAoXCJjYWxsaW5nIGEgYnVpbHRpbiBNYXAgY29uc3RydWN0b3Igd2l0aG91dCBuZXcgaXMgZm9yYmlkZGVuXCIpXG5leHBvcnQgY2xhc3MgTWFwV2l0aERlZmF1bHRWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIHRoaXMubWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSBkZWZhdWx0VmFsdWU7XG5cblxuICAgIH1cblxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuc2l6ZTtcbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgZm9yRWFjaCguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5mb3JFYWNoKC4uLmFyZ3MpO1xuICAgIH1cblxuICAgIGdldChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmdldChrZXkpO1xuICAgIH1cblxuICAgIGRlbGV0ZShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmRlbGV0ZShrZXkpO1xuICAgIH1cblxuICAgIHNldChrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgaGFzKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuaGFzKGtleSk7XG4gICAgfVxuXG4gICAgZW50cmllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmVudHJpZXMoKTtcbiAgICB9XG5cbiAgICBrZXlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAua2V5cygpO1xuICAgIH1cblxuICAgIHZhbHVlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLnZhbHVlcygpO1xuICAgIH1cbn1cblxuLypcbi8vIGVzNiBpbXBsZW1lbnRhdGlvblxuZXhwb3J0IGNsYXNzIE1hcFdpdGhEZWZhdWx0VmFsdWUgZXh0ZW5kcyBNYXAge1xuICAgIGNvbnN0cnVjdG9yKGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IGRlZmF1bHRWYWx1ZTtcbiAgICB9XG5cbiAgICBnZXQoa2V5KSB7XG4gICAgICAgIGlmKHRoaXMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXQoa2V5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4qLyIsImltcG9ydCAqIGFzIFN0cnVjdHVyZXMgZnJvbSAnLi9zdHJ1Y3R1cmVzQW5kQ2xhc3Nlcy5qcydcblxuY2xhc3MgVGFnIHtcbiAgICBjb25zdHJ1Y3Rvcih0YWdOYW1lKSB7XG4gICAgICAgIHRoaXMudGFnTmFtZSA9IHRhZ05hbWU7XG5cbiAgICAgICAgdGhpcy4kZWwgPSAkKFwiPFwiK3RoaXMudGFnTmFtZStcIj5cIik7XG5cbiAgICAgICAgdGhpcy5pZCA9IG5ldyBTdHJ1Y3R1cmVzLklkKCkudW5pcXVlO1xuICAgIH1cblxuICAgIGFkZENsYXNzKG5hbWUpIHtcbiAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MobmFtZSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlQ2xhc3NlcyguLi5jbGFzc2VzKSB7XG4gICAgICAgIGZvcihsZXQgaXRlbSBvZiBjbGFzc2VzKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5yZW1vdmVDbGFzcyhpdGVtKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZEF0dHIoYXNzb2MpIHtcbiAgICAgICAgdGhpcy5jaGVja0lmRWxlbWVudEV4aXN0c0luRE9NKCk7XG5cbiAgICAgICAgLy8gYWRkIGF0dHJpYnV0ZXMgdG8gdGhlIGVsZW1lbnRcbiAgICAgICAgdGhpcy4kZWwuYXR0cihhc3NvYyk7XG4gICAgfVxuXG4gICAgZ2V0QXR0cihuYW1lKSB7XG4gICAgICAgIHRoaXMuY2hlY2tJZkVsZW1lbnRFeGlzdHNJbkRPTSgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLiRlbC5hdHRyKG5hbWUpO1xuICAgIH1cblxuICAgIHJlbW92ZUF0dHIobmFtZSkge1xuICAgICAgICB0aGlzLmNoZWNrSWZFbGVtZW50RXhpc3RzSW5ET00oKTtcblxuICAgICAgICB0aGlzLiRlbC5yZW1vdmVBdHRyKG5hbWUpO1xuICAgIH1cblxuICAgIHNldCBpZChpZCkge1xuICAgICAgICB0aGlzLmFkZEF0dHIoe1wiaWRcIjogaWR9KTtcbiAgICB9O1xuXG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyKFwiaWRcIik7XG4gICAgfTtcblxuICAgIGdldCgpIHtcbiAgICAgICAgdGhpcy5jaGVja0lmRWxlbWVudEV4aXN0c0luRE9NKCk7XG4gICAgICAgIHJldHVybiB0aGlzLiRlbDtcbiAgICB9XG5cbiAgICAvLyBpZiB0aGUgZWxlbWVudCBleGlzdHMgaW4gZG9tLCB3ZSBuZWVkIHRvIGZldGNoIGl0IHVzaW5nIGpRdWVyeVxuICAgIGNoZWNrSWZFbGVtZW50RXhpc3RzSW5ET00oKSB7XG4gICAgICAgIGxldCAkanFFbGVtZW50ID0gJChcIiNcIit0aGlzLiRlbC5hdHRyKCdpZCcpKTtcbiAgICAgICAgaWYoJGpxRWxlbWVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsID0gJGpxRWxlbWVudDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgRHJhZ2dhYmxlIGV4dGVuZHMgVGFnIHtcbiAgICBjb25zdHJ1Y3Rvcih0YWdOYW1lKSB7XG4gICAgICAgIHN1cGVyKHRhZ05hbWUpO1xuICAgIH1cblxuICAgIGRyYWdnYWJsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLmFkZEF0dHIoe1wiZHJhZ2dhYmxlXCI6IHZhbHVlfSk7XG4gICAgfVxufVxuXG5jbGFzcyBSb3RhdGFibGUgZXh0ZW5kcyBUYWcge1xuICAgIGNvbnN0cnVjdG9yKHRhZ05hbWUpIHtcbiAgICAgICAgc3VwZXIodGFnTmFtZSk7XG4gICAgfVxuXG4gICAgcm90YXRhYmxlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuYWRkQXR0cih7XCJyb3RhdGFibGVcIjogdmFsdWV9KTtcbiAgICB9XG59XG5cbi8vIHRoZXJlIGlzIG5vIG11bHRpcGxlIGluaGVyaXRhbmNlIGluIEVTNiwgc28gSSBoYXZlIHRvIGRvIHNvbWV0aGluZyB1Z2x5IGxpa2UgdGhpc1xuY2xhc3MgRHJhZ2dhYmxlUm90YXRhYmxlIGV4dGVuZHMgRHJhZ2dhYmxlIHtcbiAgICBjb25zdHJ1Y3Rvcih0YWdOYW1lKSB7XG4gICAgICAgIHN1cGVyKHRhZ05hbWUpO1xuICAgIH1cblxuICAgIHJvdGF0YWJsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLmFkZEF0dHIoe1wicm90YXRhYmxlXCI6IHZhbHVlfSk7XG4gICAgfVxufVxuXG5jbGFzcyBTdmdFbGVtZW50IGV4dGVuZHMgRHJhZ2dhYmxlUm90YXRhYmxlIHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCB3LCBoLCB0YWdOYW1lKSB7XG4gICAgICAgIHN1cGVyKHRhZ05hbWUpO1xuXG4gICAgICAgIHRoaXMuYWRkQXR0cih7XG4gICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgeTogeSxcbiAgICAgICAgICAgIHdpZHRoOiB3LFxuICAgICAgICAgICAgaGVpZ2h0OiBoXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlY3RhbmdsZSBleHRlbmRzIFN2Z0VsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHgsIHksIHcsIGgsIGZpbGwsIHN0cm9rZSkge1xuICAgICAgICBzdXBlcih4LCB5LCB3LCBoLCBcInJlY3RcIik7XG4gICAgICAgIHRoaXMuYWRkQXR0cih7XG4gICAgICAgICAgICBmaWxsOiBmaWxsLFxuICAgICAgICAgICAgc3Ryb2tlOiBzdHJva2UsXG4gICAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogMC41LFxuICAgICAgICAgICAgJ3BvaW50ZXItZXZlbnRzJzogJ2FsbCcgLy8gdG8gdHJpZ2dlciBob3ZlciBldmVuIHdpdGggdHJhbnNwYXJlbnQgYmFja2dyb3VuZFxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTdmdJbWFnZSBleHRlbmRzIFN2Z0VsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHgsIHksIHcsIGgsIHVybCkge1xuICAgICAgICBzdXBlcih4LCB5LCB3LCBoLCBcImltYWdlXCIpO1xuICAgICAgICB0aGlzLmFkZEF0dHIoe1xuICAgICAgICAgICAgXCJ4bGluazpocmVmXCI6IHVybFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjaGFuZ2VVcmwodXJsKSB7XG4gICAgICAgIHRoaXMuYWRkQXR0cih7XG4gICAgICAgICAgICBcInhsaW5rOmhyZWZcIjogdXJsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEdyb3VwIGV4dGVuZHMgRHJhZ2dhYmxlUm90YXRhYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoXCJnXCIpO1xuICAgIH1cblxuICAgIGFkZENoaWxkKGVsKSB7XG4gICAgICAgIHRoaXMuJGVsLmFwcGVuZChlbC4kZWwpO1xuICAgICAgICByZXR1cm4gZWw7IC8vIHBybyBqZWRub2R1c3NpIFwibGV0IHJlY3QgPSBnLmFkZENoaWxkKG5ldyBSZWN0YW5nbGUoLi4uXCJcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQb2x5bGluZVBvaW50IHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5KSB7XG4gICAgICAgIHRoaXMueCA9IDA7XG4gICAgICAgIHRoaXMueSA9IDA7XG4gICAgICAgIGlmKHggIT09IHVuZGVmaW5lZCAmJiB5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0KHgsIHkpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICB9XG5cbiAgICBzdGF0aWMgcGFyc2VGcm9tU3RyaW5nKHN0cmluZykge1xuICAgICAgICBsZXQgYXJyID0gc3RyaW5nLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5bGluZVBvaW50KGFyclswXSwgYXJyWzFdKTtcbiAgICB9XG5cbiAgICBnZXQgc3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy54ICsgXCIsXCIgKyB0aGlzLnk7XG4gICAgfVxuXG4gICAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgICAgIHJldHVybiBhLnggPT09IGIueCAmJiBhLnkgPT09IGIueTtcbiAgICB9XG59XG5cbmNsYXNzIFNtYXJ0QXJyYXkge1xuICAgIGNvbnN0cnVjdG9yKGFycikge1xuICAgICAgICBpZihhcnIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5hcnIgPSBhcnI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFyciA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29weSgpIHtcbiAgICAgICAgcmV0dXJuIFNtYXJ0QXJyYXkoJC5leHRlbmQodHJ1ZSwgW10sIHRoaXMuYXJyKSk7XG4gICAgfVxuXG4gICAgYXBwZW5kKHBvaW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZFdpdGhJbmRleChwb2ludCwgdGhpcy5hcnIubGVuZ3RoKTtcbiAgICB9XG5cbiAgICBwcmVwZW5kKHBvaW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZFdpdGhJbmRleChwb2ludCwgMCk7XG4gICAgfVxuXG4gICAgLy8gYWRkIGEgcG9pbnQgYXQgdGhlIHNwZWNpZmllZCBpbmRleCwgbW92ZSBhbGwgZm9sbG93aW5nIGl0ZW1zXG4gICAgYWRkV2l0aEluZGV4KHBvaW50LCBpbmRleCkge1xuICAgICAgICBmb3IobGV0IGkgPSB0aGlzLmFyci5sZW5ndGggOyBpID4gaW5kZXggOyAtLWkpIHtcbiAgICAgICAgICAgIHRoaXMuYXJyW2ldID0gdGhpcy5hcnJbaS0xXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFycltpbmRleF0gPSBwb2ludDtcbiAgICAgICAgcmV0dXJuIHRoaXM7IC8vIHRvIGVuYWJsZSBjaGFpbmluZyBvZiBhcHBlbmQgLyBwcmVwcGVuZCAvIGFkZFdpdGhJbmRleCBjb21tYW5kc1xuICAgIH1cblxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFyci5sZW5ndGg7XG4gICAgfVxuXG4gICAgZ2V0SXRlbShpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcnJbaW5kZXhdO1xuICAgIH1cblxuICAgIGdldCBsYXN0KCkge1xuICAgICAgICBpZih0aGlzLmxlbmd0aCE9PTApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFyclt0aGlzLmxlbmd0aCAtIDFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGZpcnN0KCkge1xuICAgICAgICBpZih0aGlzLmxlbmd0aCE9PTApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFyclswXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGluZGV4QXJyYXkgbXVzdCBiZSBzb3J0ZWQgKEFTQywgZWcuIFsxLCAzLCA0LCA4XSlcbiAgICByZW1vdmUoaW5kZXgpIHtcbiAgICAgICAgbGV0IGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuXG4gICAgICAgIGZvcihsZXQgaSA9IGluZGV4IDsgaSA8IGxlbmd0aCA7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5hcnJbaV0gPSB0aGlzLmFycltpICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcnIucG9wKCk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUG9seWxpbmVQb2ludHMgZXh0ZW5kcyBTbWFydEFycmF5IHtcbiAgICBjb25zdHJ1Y3RvcihhcnIpIHtcbiAgICAgICAgc3VwZXIoYXJyKTtcbiAgICB9XG5cbiAgICBjb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IFBvbHlsaW5lUG9pbnRzKCQuZXh0ZW5kKHRydWUsIFtdLCB0aGlzLmFycikpO1xuICAgIH1cblxuICAgIGFwcGVuZChwb2ludCkge1xuICAgICAgICAvLyBjYWxsIGluaGVyaXRlZCBmdW5jdGlvbiB0byBoYW5kbGUgdGhlIGFwcGVuZGluZ1xuICAgICAgICBzdXBlci5hcHBlbmQocG9pbnQpO1xuXG4gICAgICAgIC8vIGlmIHRoZSBzZWNvbmQgdG8gbGFzdCBwb2ludCBpcyB1bm5lY2Vzc2FyeSwgcmVtb3ZlIGl0XG4gICAgICAgIGxldCBsZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgaWYgKCBsZW5ndGggPj0gM1xuICAgICAgICAgICAgICAgICYmICggICAgKCB0aGlzLmdldEl0ZW0obGVuZ3RoIC0gMykueCA9PT0gdGhpcy5nZXRJdGVtKGxlbmd0aCAtIDIpLnggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJdGVtKGxlbmd0aCAtIDIpLnggPT09IHRoaXMuZ2V0SXRlbShsZW5ndGggLSAxKS54IClcbiAgICAgICAgICAgICAgICAgICAgIHx8ICggdGhpcy5nZXRJdGVtKGxlbmd0aCAtIDMpLnkgPT09IHRoaXMuZ2V0SXRlbShsZW5ndGggLSAyKS55ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SXRlbShsZW5ndGggLSAyKS55ID09PSB0aGlzLmdldEl0ZW0obGVuZ3RoIC0gMSkueSApXG4gICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKGxlbmd0aCAtIDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmV0dXJuIHRoaXMgZWxlbWVudCAodG8gYWxsb3cgY2hhaW5pbmcpXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuXG4gICAgc3RhdGljIHBhcnNlRnJvbVN0cmluZyhzdHJpbmcpIHtcbiAgICAgICAgbGV0IHBvaW50U3RyaW5ncyA9IHN0cmluZy5zcGxpdChcIiBcIik7XG4gICAgICAgIGxldCBwb2ludHMgPSBuZXcgUG9seWxpbmVQb2ludHMoKTtcblxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHBvaW50U3RyaW5ncy5sZW5ndGggOyArK2kpIHtcbiAgICAgICAgICAgIHBvaW50cy5hcHBlbmQoUG9seWxpbmVQb2ludC5wYXJzZUZyb21TdHJpbmcocG9pbnRTdHJpbmdzW2ldKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcG9pbnRzO1xuICAgIH1cblxuICAgIGdldCBzdHJpbmcoKSB7XG4gICAgICAgIGxldCBzdHJpbmcgPSBcIlwiO1xuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMubGVuZ3RoIDsgKytpKSB7XG4gICAgICAgICAgICBpZihpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgc3RyaW5nICs9IFwiIFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RyaW5nICs9IHRoaXMuYXJyW2ldLnN0cmluZztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgIH1cblxuICAgIGZvckVhY2goZnVuYykge1xuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuYXJyLmxlbmd0aCA7ICsraSkge1xuICAgICAgICAgICAgZnVuYyh0aGlzLmFycltpXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQb2x5TGluZSBleHRlbmRzIFRhZyB7XG4gICAgY29uc3RydWN0b3IocG9pbnRzLCBjb2xvciwgc3Ryb2tlV2lkdGgpIHtcbiAgICAgICAgc3VwZXIoXCJwb2x5bGluZVwiKTtcblxuICAgICAgICB0aGlzLmFkZEF0dHIoe1xuICAgICAgICAgICAgcG9pbnRzOiBwb2ludHMuc3RyaW5nLFxuICAgICAgICAgICAgc3Ryb2tlOiBjb2xvcixcbiAgICAgICAgICAgIGZpbGw6IFwibm9uZVwiLFxuICAgICAgICAgICAgXCJzdHJva2Utd2lkdGhcIjogc3Ryb2tlV2lkdGhcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdXBkYXRlUG9pbnRzKHBvaW50cykge1xuICAgICAgICB0aGlzLmFkZEF0dHIoe1xuICAgICAgICAgICAgcG9pbnRzOiBwb2ludHMuc3RyaW5nXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBhdHRlcm4gZXh0ZW5kcyBUYWcge1xuICAgIGNvbnN0cnVjdG9yKGlkLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHN1cGVyKFwicGF0dGVyblwiKTtcblxuICAgICAgICB0aGlzLmFkZEF0dHIoe1xuICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICAgIHBhdHRlcm5Vbml0czogXCJ1c2VyU3BhY2VPblVzZVwiLFxuICAgICAgICAgICAgdmlld0JveDogXCIwIDAgXCIrd2lkdGgrXCIgXCIraGVpZ2h0XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFkZENoaWxkKGVsKSB7XG4gICAgICAgIHRoaXMuJGVsLmFwcGVuZChlbC4kZWwpO1xuICAgICAgICByZXR1cm4gZWw7IC8vIHBybyBqZWRub2R1c3NpIFwibGV0IHJlY3QgPSBnLmFkZENoaWxkKG5ldyBSZWN0YW5nbGUoLi4uXCJcbiAgICB9XG59Il19"}