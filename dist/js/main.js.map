{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/es6/canvas.js","src/es6/contextMenu.js","src/es6/editorElements.js","src/es6/floatingMenu.js","src/es6/fn.js","src/es6/importExport.js","src/es6/logic.js","src/es6/main.js","src/es6/networkLibrary.js","src/es6/simulation.js","src/es6/structuresAndClasses.js","src/es6/svgObjects.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","\"use strict\";\n\nimport * as svgObj from './svgObjects.js'\nimport * as editorElements from './editorElements.js'\nimport Logic from './logic.js'\nimport ContextMenu from './contextMenu.js'\nimport FloatingMenu from './floatingMenu.js'\nimport Simulation from './simulation.js'\nimport Fn from './fn.js'\n\n/**\n * ViewBox provides an api for oprerating with the viewBox argument of the <svg> DOM element.\n */\nclass ViewBox {\n    /**\n     * Initialize viewBox\n     * @param {number} left   distance of the left edge of the viewbox from document's y axis in SVG pixels\n     * @param {number} top    distance of the top edge of the viewbox from the document's x axis in SVG pixels\n     * @param {number} width  width of the viewbox in SVG pixels\n     * @param {number} height height of the viewbox in SVG pixels\n     */\n    constructor(left, top, width, height) {\n        /**\n         * ViewBox attributes before applying zoom and shift\n         * @type {object}\n         */\n        this.real = { left, top, width, height }\n\n        /**\n         * The maximum amount of zoom on the viewbox\n         * @type {number}\n         */\n        this.maxZoom = 8;\n        /**\n         * The minimum amount of zoom on the viewbox\n         * @type {number}\n         */\n        this.minZoom = 0.1;\n\n        /**\n         * Amount of zoom on the viewbox, always between this.minZoom and this.maxZoom\n         * @type {number}\n         */\n        this.realZoom = 1\n\n        /**\n         * amount of horizontal shift of the document\n         * @type {number}\n         */\n        this.leftShift = 0\n        /**\n         * amount of vertical shift of the document\n         * @type {number}\n         */\n        this.topShift = 0\n    }\n\n    /**\n     * get the amount of zoom on the viewbox\n     * @return {number}\n     */\n    get zoom() {\n        return this.realZoom;\n    }\n\n    /**\n     * set the amount of zoom on the viewbox\n     * @param {number} value the new amount of zoom\n     */\n    set zoom(value) {\n        // fit this.realZoom to fit between this.minZoom and this.maxZoom\n        this.realZoom = Math.max(Math.min(value, this.maxZoom), this.minZoom);\n    }\n\n    /**\n     * get the width of the viewbox with the current zoom applied\n     * @return {number} the final width of the viewbox\n     */\n    get width() {\n        return this.real.width / this.zoom\n    }\n\n    /**\n     * get the height of the viewbox with the current zoom applied\n     * @return {number} the final height of the viewbox\n     */\n    get height() {\n        return this.real.height / this.zoom\n    }\n\n    /**\n     * get the horizontal distance from the y axis of the document with zoom and shift value applied\n     * @return {number}\n     */\n    get left() {\n        return this.real.left - (this.leftShift / this.zoom) + ((this.real.width - this.width) / 2)\n    }\n\n    /**\n     * get the vertical distance from the x axis of the document with zoom and shift value applied\n     * @return {number}\n     */\n    get top() {\n        return this.real.top - (this.topShift / this.zoom) + ((this.real.height - this.height) / 2)\n    }\n\n    /**\n     * get the computed viewbox values as a string in the correct format that can be used in the viewBox attribute of the SVG element\n     * @return {string} string in format \"left top width height\"\n     */\n    get str() {\n        return `${this.left} ${this.top} ${this.width} ${this.height}`\n    }\n\n    /**\n     * transform horizontal units to the scale and shift of the editor\n     * @param  {number} x original horizontal value\n     * @return {number}   transformed horizontal value\n     */\n    transformX(x) {\n        return this.left + (x / this.zoom)\n    }\n\n    /**\n     * transform vertical units to the scale and shift of the editor\n     * @param  {number} y original vertical value\n     * @return {number}   transformed vertical value\n     */\n    transformY(y) {\n        return this.top + (y / this.zoom)\n    }\n\n    /**\n     * transform pageX and pageY parameters of the jquery event to match the zoom and shift of the viewbox\n     * @param  {jquery.MouseEvent} event original event\n     * @return {jquery.MouseEvent}       the same event but with transformed pageX and pageY members\n     */\n    transformEvent(event) {\n        event.pageX = this.transformX(event.pageX)\n        event.pageY = this.transformY(event.pageY)\n\n        return event\n    }\n}\n\nconst\n    ctrlKey = 17,\n    cmdKey = 91;\n\n/** @module Canvas */\n/**\n * Main class of the application. It represents an instance of the whole editor and holds\n * references to all its elements.\n */\nexport default class Canvas {\n    /**\n     * Initialize the Svg class\n     * @param {string} canvas   query selector of the SVG element, that will contain all SVG content of the application\n     * @param {number} gridSize initial size of the grid in SVG pixels\n     */\n    constructor(canvas, gridSize) {\n        /**\n         * jQuery element for the SVG document\n         */\n        this.$svg = $(canvas);\n\n        /**\n         * space between grid lines in SVG pixels\n         * @type {number}\n         */\n        this.gridSize = gridSize;\n\n        /**\n         * Array of all boxes (instances of objects derived from editorElements.Box) used on Canvas\n         * @type {Array}\n         */\n        this.boxes = []; // stores all boxes\n\n        /**\n         * Array of all wires (instances of editorElements.Wire) used on Canvas\n         * @type {Array}\n         */\n        this.wires = []; // stores all wires\n\n        this.simulationEnabled = true\n        this.simulation = new Simulation(this); // dummy, will be overwritten on startNewSimulation\n\n        // create the defs element, used for patterns\n        this.$defs = $(\"<defs>\");\n        this.$svg.prepend(this.$defs);\n\n        // BACKGROUND PATTERN\n        let pattern = new svgObj.Pattern(\"grid\", this.gridSize, this.gridSize);\n\n        let patternPoints = new svgObj.PolylinePoints()\n            .append(new svgObj.PolylinePoint(0, 0))\n            .append(new svgObj.PolylinePoint(this.gridSize, 0))\n            .append(new svgObj.PolylinePoint(this.gridSize, this.gridSize));\n\n        pattern.addChild(new svgObj.PolyLine(patternPoints, \"#a3a4d2\", 2));\n        this.addPattern(pattern.get());\n\n        this.background = new svgObj.Rectangle(0, 0, this.width, this.height, \"url(#grid)\", \"none\");\n        this.appendJQueryObject(this.background.get());\n        this.refresh();\n\n        // set the viewbox for future zooming and moving of the canvas\n        this.$svg.attr('preserveAspectRatio', 'xMinYMin slice')\n        this.viewbox = new ViewBox(0, 0, this.width, this.height)\n        this.applyViewbox()\n\n        // CONSTRUCT CONTEXT MENU\n        this.contextMenu = new ContextMenu(this);\n\n        // CONSTRUCT FLOATING MENU\n        this.floatingMenu = new FloatingMenu(this);\n\n        // ALL EVENT CALLBACKS\n        let target;\n        this.$svg.on('mousedown', event => {\n            target = this.getRealTarget(event.target);\n            if(target!==undefined) {\n                // propagate mousedown to the real target\n                target.onMouseDown(event);\n            } else {\n                // mousedown happened directly on the svg\n                this.onMouseDown(event)\n            }\n\n            this.hideContextMenu();\n            event.preventDefault();\n        }).on('mousemove', event => {\n            if(target!==undefined) {\n                target.onMouseMove(event);\n            } else {\n                // mousemove happened directly on the svg\n                this.onMouseMove(event)\n            }\n\n            event.preventDefault();\n        }).on('mouseup', (event) => {\n            if(target!==undefined) {\n                target.onMouseUp(event);\n            } else {\n                // mouseup happened directly on the svg\n                this.onMouseUp(event)\n            }\n\n            target = undefined;\n\n            event.preventDefault();\n        }).on(\"contextmenu\", event => {\n            this.displayContextMenu(event.pageX, event.pageY, this.getRealJQueryTarget(event.target));\n            event.preventDefault();\n        })\n\n        $(document).on('keydown', event => {\n            this.onKeyDown(event);\n        }).on(\"keyup\", event => {\n            this.onKeyUp(event);\n        });\n\n        Fn.addMouseScrollEventListener(canvas, event => {\n            // zoom only if the ctrl key is pressed\n            if(event.ctrlKey) {\n                switch (event.delta) {\n                    case 1:\n                        this.zoom += 0.1\n                        break\n                    case -1:\n                        this.zoom -= 0.1\n                        break\n                }\n            }\n\n            event.preventDefault()\n        })\n    }\n\n    /**\n     * Get the width of the main SVG element\n     * @return {number} width of the SVG element in pixels\n     */\n    get width() {\n        return this.$svg.width()\n    }\n\n    /**\n     * Get the height of the main SVG element\n     * @return {number} height of the SVG element in pixels\n     */\n    get height() {\n        return this.$svg.height()\n    }\n\n    /**\n     * Process all keydown events that are connected to Canvas\n     * @param  {jquery.KeyboardEvent} event KeyboardEvent generated by a listener\n     */\n    onKeyDown(event) {\n        if(event.keyCode === ctrlKey || event.keyCode === cmdKey) {\n            this.$svg.addClass('grabbable');\n        }\n    }\n\n    /**\n     * Process all keyup events that are connected to Canvas\n     * @param  {jquery.KeyboardEvent} event KeyboardEvent generated by a listener\n     */\n    onKeyUp(event) {\n        if(event.keyCode === ctrlKey || event.keyCode === cmdKey) {\n            this.$svg.removeClass('grabbable');\n        }\n    }\n\n    /**\n     * Process all mousedown events that are happening directly on the Canvas\n     * @param  {jquery.MouseEvent} event MouseEvent generated by a listener\n     */\n    onMouseDown(event) {\n        // middle mouse or left mouse + ctrl moves the canvas\n        if(event.which === 2 || (event.which === 1 && event.ctrlKey)) {\n            this.$svg.addClass('grabbed');\n            this.moveCanvas = {\n                left: event.pageX,\n                top: event.pageY\n            }\n        }\n    }\n\n    /**\n     * Process all mousemove events that are happening directly on the Canvas\n     * @param  {jquery.MouseEvent} event MouseEvent generated by a listener\n     */\n    onMouseMove(event) {\n        if(this.moveCanvas) {\n            let left = event.pageX - this.moveCanvas.left\n            let top = event.pageY - this.moveCanvas.top\n\n            this.viewbox.leftShift += left\n            this.viewbox.topShift += top\n            this.applyViewbox()\n\n            this.moveCanvas = {\n                left: event.pageX,\n                top: event.pageY\n            }\n        }\n    }\n\n    /**\n     * Process all mouseup events that are happening directly on the Canvas\n     * @param  {jquery.MouseEvent} event MouseEvent generated by a listener\n     */\n    onMouseUp(event) {\n        if(this.moveCanvas) {\n            this.$svg.removeClass('grabbed');\n            this.moveCanvas = undefined\n        }\n    }\n\n    /**\n     * Set the viewBox attribute of the SVG element and size and position attributes\n     * of the rectangle with the background grid to match the values in this.viewbox\n     */\n    applyViewbox() {\n        // adjust background\n        this.background.addAttr({\n            x: this.viewbox.left,\n            y: this.viewbox.top,\n            width: this.viewbox.width,\n            height: this.viewbox.height\n        })\n\n        // set the viewBox attribute\n        this.$svg.attr('viewBox', this.viewbox.str)\n    }\n\n    /**\n     * Get the current zoom multiplier of the canvas\n     * @return {number}\n     */\n    get zoom() {\n        return this.viewbox.zoom\n    }\n\n    /**\n     * Set the zoom multiplier of the canvas.\n     * I sets the viewbox zoom and then applies the new value by calling this.applyViewbox()\n     * @param  {number} value set the zoom to this value\n     */\n    set zoom(value) {\n        this.viewbox.zoom = value\n        this.applyViewbox()\n    }\n\n    /**\n     * Generate an object containing export data for the Canvas and all elements.\n     * Data from this function should cover all important information needed to import the\n     * network in a different session.\n     * @return {object} object containing infomration about the network\n     */\n    get exportData() {\n        this.exportWireIdMap = new Map();\n        this.exportWireId = 0;\n\n        let data = {\n            // TODO implement gridSize scaling\n            // gridSize: this.gridSize,\n            boxes: []\n        };\n\n        for(let i = 0; i < this.boxes.length; ++i) {\n            data.boxes[i] = this.boxes[i].exportData;\n        }\n\n        return data;\n    }\n\n    /**\n     * Recreate a logic network from the data provided\n     * @param  {object} data object containing information about the imported network\n     */\n    importData(data) {\n        return new Promise((resolve, reject) => {\n            this.simulationEnabled = false\n\n            // TODO implement gridSize scaling\n\n            // list of wires to be added\n            let newWires = new Map();\n\n            for(let i = 0 ; i < data.boxes.length; ++i) {\n                // add box\n                let box;\n                switch (data.boxes[i].category) {\n                    case \"gate\":\n                        // add new gate (without reloading the SVG, we will reload it once after the import)\n                        box = this.newGate(data.boxes[i].name, 0, 0, false);\n                        break;\n                    case \"io\":\n                        switch (data.boxes[i].name) {\n                            case \"input\":\n                                // add new input (without reloading the SVG, we will reload it once after the import)\n                                box = this.newInput(0, 0, data.boxes[i].isOn, false);\n                                break;\n                            case \"output\":\n                                // add new output (without reloading the SVG, we will reload it once after the import)\n                                box = this.newOutput(0, 0, false);\n                                break;\n                            default:\n                                console.error(\"Unknown io box name '\"+data.boxes[i].name+\"'.\");\n                                break;\n                        }\n                        break;\n                    default:\n                        console.error(\"Unknown box category '\"+data.boxes[i].category+\"'.\");\n                }\n\n                if (box) {\n                    // proccess box transforms (translation and rotation)\n                    let transform = new editorElements.Transform();\n                    for(let j = 0 ; j < data.boxes[i].transform.items.length ; ++j) {\n                        switch (data.boxes[i].transform.items[j].name) {\n                            case \"translate\":\n                                transform.setTranslate(\n                                    data.boxes[i].transform.items[j].args[0],\n                                    data.boxes[i].transform.items[j].args[1]\n                                );\n                                break;\n                            case \"rotate\":\n                                transform.setRotate(\n                                    data.boxes[i].transform.items[j].args[0],\n                                    data.boxes[i].transform.items[j].args[1],\n                                    data.boxes[i].transform.items[j].args[2]\n                                );\n                                break;\n                            default:\n                                console.error(\"Unknown transform property '\"+data.boxes[i].transform.items[j].name+\"'.\");\n                                break;\n                        }\n                    }\n\n                    box.setTransform(transform);\n\n                    // add all wires to the list of wires to be added\n                    for(let j = 0 ; j < data.boxes[i].connections.length ; ++j) {\n                        // get the artificial wire id\n                        let wireId = data.boxes[i].connections[j].wireId;\n\n                        // pass the values got from json into a variable that will be added into the map\n                        let value = {\n                            index: data.boxes[i].connections[j].index,\n                            type: data.boxes[i].connections[j].type,\n                            boxId: box.id\n                        };\n\n                        // add the value to the map\n                        if(newWires.has(wireId)) {\n                            // if there already is a wire with this id in the map,\n                            // add the value to the end of the array of values\n                            let mapValue = newWires.get(wireId);\n                            mapValue[mapValue.length] = value;\n                            newWires.set(wireId, mapValue);\n                        } else {\n                            // if there is no wire with this id in the map\n                            // add the wire and set the value to be the first element in the array\n                            newWires.set(wireId, [value]);\n                        }\n                    }\n                }\n            }\n\n            // refresh the SVG document (needed for wiring)\n            this.refresh();\n\n            // with all boxes added, we can now connect them with wires\n            newWires.forEach(item => {\n                let connectorIds = [];\n                if(item[0] && item[1]) {\n                    for (const i of [0, 1]) {\n                        let box = this.getBoxById(item[i].boxId);\n\n                        connectorIds[i] = box.connectors[item[i].index].id;\n                    }\n                }\n                this.newWire(connectorIds[0], connectorIds[1], true);\n            });\n\n            // refresh the SVG document\n            this.refresh();\n\n            this.simulationEnabled = true;\n            for (let box of this.boxes) {\n                if (box instanceof editorElements.InputBox) {\n                    // switch the input box state to the oposit and back, for some reason calling box.refreshState()\n                    // results in weird unfinished simulation\n                    // this causes update of the output connector and a start of a new simulation\n\n                    // TODO find better solution instead of this workaround\n                    box.on = !box.on\n                    box.on = !box.on\n                }\n            }\n\n            resolve()\n        })\n    }\n\n    /**\n     * When user clicks on a connector, remember it until they click on some other connector.\n     * Than call newWire with the last two connectors ids as arguments.\n     * @param  {string} connectorId id of the connector that the user clicked on\n     */\n    wireCreationHelper(connectorId) {\n        if(!this.firstConnectorId) {\n            this.firstConnectorId = connectorId;\n        } else {\n            this.newWire(this.firstConnectorId, connectorId);\n            this.firstConnectorId = undefined;\n        }\n    }\n\n    /**\n     * Run a logic simulation from the startingConnector.\n     * This refreshes the states of all elements in the network whose inputs are\n     * directly (or by transition) connected to startingConnector's output\n     * @param  {OutputConnector} startingConnector run simulation from this output connector\n     * @param  {Logic.state} state new state of the startingConnector\n     */\n    startNewSimulation(startingConnector, state) {\n        if(this.simulationEnabled) {\n            this.simulation = new Simulation(this)\n            this.simulation.notifyChange(startingConnector.id, state)\n            this.simulation.run()\n        }\n    }\n\n    /**\n     * Create a new gate on the specified position\n     * @param  {string}  name           type of the gate (and, or ...)\n     * @param  {number}  x              horizontal position of the gate in SVG pixels\n     * @param  {number}  y              vertical position of the gate in SVG pixels\n     * @param  {boolean} [refresh=true] if true, this.refresh() will be called after adding the gate\n     * @return {editorElements.Gate}    instance of Gate that has been newly added\n     */\n    newGate(name, x, y, refresh = true) {\n        return this.newBox(x, y, new editorElements.Gate(this, name, x, y), refresh);\n    }\n\n    /**\n     * Create an input box on the specified position\n     * @param  {number}  x              horizontal position of the gate in SVG pixels\n     * @param  {number}  y              vertical position of the gate in SVG pixels\n     * @param  {boolean} [isOn=false]   state of the input box (default is false (off))\n     * @param  {boolean} [refresh=true] if true, this.refresh() will be called after adding the input box\n     * @return {editorElements.InputBox}    instance of the InputBox that has been newly added\n     */\n    newInput(x, y, isOn = false, refresh = true) {\n        return this.newBox(x, y, new editorElements.InputBox(this, isOn), refresh);\n    }\n\n    /**\n     * Create an output box on the specified position\n     * @param  {number}  x              horizontal position of the gate in SVG pixels\n     * @param  {number}  y              vertical position of the gate in SVG pixels\n     * @param  {boolean} [refresh=true] if true, this.refresh() will be called after adding the output box\n     * @return {editorElements.InputBox}    instance of the OutputBox that has been newly added\n     */\n    newOutput(x, y, refresh = true) {\n        return this.newBox(x, y, new editorElements.OutputBox(this), refresh);\n    }\n\n    /**\n     * Add a new Box to the Canvas\n     * @param  {number}  x              horizontal position of the box in SVG pixels\n     * @param  {number}  y              vertical position of the box in SVG pixels\n     * @param  {editorElements.Box}  object         instance of an object derived from the editorElements.Box class\n     * @param  {Boolean} [refresh=true] if true, this.refresh() will be called after adding the box\n     * @return {editorElements.Box}                 return the instance of the newly added object\n     */\n    newBox(x, y, object, refresh = true) {\n        let index = this.boxes.length;\n\n        this.boxes[index] = object;\n\n        // translate the gate if x and y has been specified\n        if(x && y) {\n            let tr = new editorElements.Transform();\n            tr.setTranslate(x, y);\n\n            this.boxes[index].svgObj.addAttr({\"transform\": tr.get()});\n        }\n\n        this.appendElement(this.boxes[index], refresh);\n\n        return this.boxes[index];\n    }\n\n    /**\n     * Remove a box from Canvas based on the provided ID\n     * @param {string} boxId id of the box that should be removed\n     */\n    removeBox(boxId) {\n        let $gate = $(\"#\"+boxId);\n\n        // find the gate in svg's list of gates\n        let gateIndex = -1;\n        for(let i = 0 ; i < this.boxes.length ; i++) {\n            if(this.boxes[i].svgObj.id===boxId) {\n                gateIndex = i;\n                break;\n            }\n        }\n\n        if(gateIndex > -1) {\n            // remove all wires connected to this gate\n            for(let i = 0; i < this.boxes[gateIndex].connectors.length; i++) {\n                this.removeWiresByConnectorId(this.boxes[gateIndex].connectors[i].svgObj.id);\n            }\n\n            // remove the gate\n            this.boxes.splice(gateIndex, 1);\n            $gate.remove();\n        } else {\n            console.error(\"Trying to remove an nonexisting box. Box id:\", boxId);\n        }\n    }\n\n    /**\n     * Create a new wire connecting the provided connectors\n     * @param  {string}  fromId         id of the connector that the wire is attached to\n     * @param  {string}  toId           id of the connector that the wire is attached to\n     * @param  {Boolean} [refresh=true] if refresh is set to true, the SVG document will be reloaded after adding the wire\n     * @return {editorElements.Wire}    instance of editorElements.Wire that has been added to the Canvas\n     */\n    newWire(fromId, toId, refresh = true) {\n        // wire must connect two distinct connectors\n        if (fromId===toId)\n            return false\n\n        let connectors = [this.getConnectorById(fromId), this.getConnectorById(toId)]\n\n        // input connectors can be connected to one wire max\n        connectors.forEach(conn => {\n            if(conn.isInputConnector)\n                this.removeWiresByConnectorId(conn.id)\n        })\n        let index = this.wires.length;\n        this.wires[index] = new editorElements.Wire(this, fromId, toId, this.gridSize, refresh);\n\n        connectors.forEach(conn => {\n            conn.addWireId(this.wires[index].svgObj.id);\n        })\n\n        this.appendElement(this.wires[index], refresh);\n        this.moveToBackById(this.wires[index].svgObj.id);\n\n        if(refresh)\n            this.wires[index].updateWireState()\n\n        return this.wires[index];\n    }\n\n    /**\n     * Find the correct instance of editorElements.Wire in the Canvas' wires by the provided id\n     * @param  {string} wireId id of the wire\n     * @return {editorElements.Wire} instance of the wire\n     */\n    getWireById(wireId) {\n        for (const wire of this.wires) {\n            if(wire.svgObj.id === wireId) {\n                return wire\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Find all wires that are connected to the specified connector\n     * @param  {string} connectorId id of the connector\n     * @return {Set} set of ID's of the wires connected to this connector\n     */\n    getWiresByConnectorId(connectorId) {\n        let connector = this.getConnectorById(connectorId);\n        return connector.wireIds;\n    }\n\n    /**\n     * Remove wire that has the provided ID\n     * @param  {string} wireId ID of the wire that should be removed\n     */\n    removeWireById(wireId) {\n        for(let i = 0 ; i < this.wires.length ; ++i) {\n            if (this.wires[i].svgObj.id === wireId) {\n\n                let connector1 = this.wires[i].startConnector;\n                let connector2 = this.wires[i].endConnector;\n\n                connector1.removeWireIdAndUpdate(wireId);\n                connector2.removeWireIdAndUpdate(wireId);\n\n                this.wires[i].svgObj.$el.remove();\n                this.wires.splice(i, 1);\n\n                break;\n            }\n        }\n    }\n\n    /**\n     * Remove all wires that are connected to the connector provided by its ID\n     * @param  {string} connectorId ID of the connector\n     */\n    removeWiresByConnectorId(connectorId) {\n        let connector = this.getConnectorById(connectorId);\n\n        connector.wireIds.forEach(wireId => {\n            let wire = this.getWireById(wireId);\n\n            // get the other connector that is the wire connected to\n            let otherConnector = this.getConnectorById(wire.fromId, wire);\n            if(otherConnector.svgObj.id===connectorId) {\n                otherConnector = this.getConnectorById(wire.toId, wire);\n            }\n\n            // delete the wire record from the other connector\n            otherConnector.wireIds.delete(wireId);\n\n            // remove the wire representation using jQuery\n            $(\"#\" + wireId).remove();\n\n            // if otherConnector is an input connector, set its state to unknown\n            if(otherConnector.isInputConnector) {\n                this.startNewSimulation(otherConnector, Logic.state.unknown)\n            }\n        });\n\n        // clear the list of wire Ids\n        connector.wireIds.clear();\n        // if connector is an input connector, set its state to unknown\n        if(connector.isInputConnector) {\n            connector.setState(Logic.state.unknown);\n        }\n    }\n\n    /**\n     * Find the correct instance of editorElements.Box in the Canvas' boxes by the provided id\n     * @param  {string} boxId id of the box\n     * @return {editorElements.Box} instance of the box\n     */\n    getBoxById(boxId) {\n        for(let i = 0 ; i < this.boxes.length ; i++) {\n            if(this.boxes[i].svgObj.id===boxId) {\n                return this.boxes[i];\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Find the correct instance of editorElements.Box in the Canvas' boxes by ID of a connector that belongs to this box\n     * @param  {string} boxId id of the connector\n     * @return {editorElements.Box} instance of the box\n     */\n    getBoxByConnectorId(connectorId) {\n        for(let i = 0 ; i < this.boxes.length ; i++) {\n            if (this.boxes[i].getConnectorById(connectorId) !== undefined) {\n                return this.boxes[i];\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Get instance of a connector based on it's ID (and also on an instance of editorElements.Wire if provided)\n     *\n     * The wire variable is used as heuristic: When we know the wire, we have to check only\n     * two gates instead of all of them\n     * @param  {string} connectorId id of the connector\n     * @param  {editorElements.Wire} [wire]      instance of the Wire that is connected to this connector\n     * @return {editorElements.Connector}        instance of the connector\n     */\n    getConnectorById(connectorId, wire=undefined) {\n\n        if(wire!==undefined) {\n            // we know the wire -- we can check only gates at the ends of this wire\n            let connector = wire.startBox.getConnectorById(connectorId)\n            if (!connector) {\n                connector = wire.endBox.getConnectorById(connectorId)\n            }\n            return connector\n\n        } else {\n            // we do not know the wire -- we have to check all gates\n            for (const box of this.boxes) {\n                const connector = box.getConnectorById(connectorId)\n                if(connector) {\n                    return connector\n                }\n            }\n        }\n\n        return false\n    }\n\n    /**\n     * Get the logical jQuery target based on the factual jQuery target.\n     *\n     * If the object, that user interacted with, is not a connector and is in a group,\n     * return the group jQuery object instead of the original jQuery object.\n     * @param  {target} target jQuery target of the object user interacted with\n     * @return {target}        jQuery target of the object user wanted to interact with\n     */\n    getRealJQueryTarget(target) {\n        let $target = $(target);\n        if(!$target.hasClass(\"connector\") && $target.parents('g').length > 0) {\n            $target = $target.parent();\n            while ($target.prop(\"tagName\") !== \"G\" && $target.prop(\"tagName\") !== \"g\") {\n                $target = $target.parent();\n            }\n        }\n        return $target;\n    }\n\n    // returns the editorElement that user interacted with, the \"target\" argument is a jQuery element\n    /**\n     * Get instance of some object from editorElement based on the jQuery target\n     * @param  {target} target jQuery target that user interacted with\n     * @return {editorElements.NetworkElement} instance of an object derived from editorElements.NetworkElement that the user interacted with\n     */\n    getRealTarget(target) {\n        // eventy se museji zpracovat tady, protoze v SVG se eventy nepropaguji\n        let $target = $(target);\n\n        if($target.hasClass(\"connector\")) {\n            // this is a connector, don't traverse groups\n            return this.getConnectorById($target.attr('id'));\n        } else if($target.parents('g').length > 0) {\n            // this element is in a group and it is not a connector\n\n            // traversing up the DOM tree until we find the closest group\n            let $parentGroup = $target.parent();\n            while ($parentGroup.prop(\"tagName\") !== \"G\" && $parentGroup.prop(\"tagName\") !== \"g\") {\n                $parentGroup = $parentGroup.parent();\n            }\n\n            return this.getBoxById($parentGroup.attr('id'));\n        } else if ($target.hasClass(\"wire\")) {\n            return this.getWireById($target.attr('id'));\n        } else {\n            return undefined;\n        }\n    }\n\n    /**\n     * Add an element to the Canvas\n     * @param  {editorElements.NetworkElement}  element Element that will be added on the Canvas\n     * @param  {Boolean} [refresh=true] if true, the SVG document will be reloaded after adding this element\n     */\n    appendElement(element, refresh = true) {\n        this.appendJQueryObject(element.get(), refresh);\n    }\n\n    /**\n     * Append a jQuery element to the SVG document (helper for this.appendElement)\n     * @param  {object}  object         jQuery element that will be added to the SVG document\n     * @param  {Boolean} [refresh=true] if true, the SVG document will be reloaded after adding this element\n     */\n    appendJQueryObject(object, refresh = true) {\n        this.$svg.append(object);\n        if(refresh)\n            this.refresh();\n    }\n\n    /**\n     * Add a new pattern to the definitions element in the SVG document\n     * @param {svgObj.Pattern} pattern pattern that will be added to the <devs> element in the SVG document\n     */\n    addPattern(pattern) {\n        this.$defs.append(pattern);\n        this.refresh();\n    }\n\n    /**\n     * Reload the SVG document (needed to display a newly appended jQuery object)\n     */\n    refresh() {\n        this.$svg.html(this.$svg.html());\n        console.log(\"SVG document has been reloaded.\")\n    }\n\n    /**\n     * Display the context menu on the specified position\n     * @param  {number} x       horizontal position in CSS pixels\n     * @param  {number} y       vertical position in CSS pixels\n     * @param  {jQuery.element} $target the item user clicked on (used to display \"remove this element\"-type items in the menu)\n     */\n    displayContextMenu(x, y, $target) {\n        this.contextMenu.display(x, y, $target);\n    }\n\n    /**\n     * hide the context menu\n     */\n    hideContextMenu() {\n        this.contextMenu.hide();\n    }\n\n    /**\n     * snap a value to a grid\n     * @param  {number} value value in SVG pixels\n     * @return {number}       the value rounded to the closest number divisible by the grid size\n     */\n    snapToGrid(value) {\n        return Math.round(value / this.gridSize) * this.gridSize;\n    }\n\n    /**\n     * static function for snapping a value to a grid\n     * @param  {number} value value in SVG pixels\n     * @param  {number} gridSize size of the grid in SVG pixels\n     * @return {number}       the value rounded to the closest number divisible by the grid size\n     */\n    static snapToGrid(value, gridSize) {\n        return Math.round(value / gridSize) * gridSize;\n    }\n\n    /**\n     * move an element to the front in the canvas\n     * @param  {string} objId id of the element\n     */\n    moveToFrontById(objId) {\n        this.$svg.append($(\"#\" + objId));\n    }\n\n    /**\n     * move an element to the back in the canvas\n     * @param  {string} objId id of the element\n     */\n    moveToBackById(objId) {\n        $(\"#\" + this.background.id)\n            .after($(\"#\" + objId));\n    }\n\n    /**\n     * get set of nodes, that cannot be used for wiring at any circumstances\n     * @return {Set} set of nodes (objects containing x and y coordinates) that are not suitable for wiring\n     */\n    getNonRoutableNodes() {\n        let blockedNodes = new Set();\n        // for each box\n        for(let i = 0 ; i < this.boxes.length ; ++i) {\n            // get the jQuery child with class .rect (\"hitbox\")\n            let rect = $('#' + this.boxes[i].svgObj.id).children(\".rect\")[0];\n            // get the position of the rectangle\n            let position = $(rect).position();\n\n            // snap the position to the grid\n            position.left = this.snapToGrid(position.left);\n            position.top = this.snapToGrid(position.top);\n\n            // for each item in blockedNodes (set of blocked nodes with coordinates relative\n            // to the left upper corner of rect; unit used is \"one gridSize\") convert the coordinates\n            // to absolute (multiple with gridSize and add position of rect) and add the result to the set\n            for(let item of this.boxes[i].blockedNodes) {\n                let absoluteX = position.left + item.x * this.gridSize;\n                let absoluteY = position.top + item.y * this.gridSize;\n\n                blockedNodes.add({\n                    x: absoluteX,\n                    y: absoluteY\n                });\n            }\n        }\n        // TODO ensure that this.refresh() is really unnecessary\n        // this.refresh();\n        // return the set\n        return blockedNodes;\n    }\n\n    /**\n     * get set of nodes, that are inconvenient for wiring, but can be used, just are not preferred\n     * @return {Set} set of nodes (objects containing x and y coordinates) that are not preferred for wiring\n     */\n    getInconvenientNodes(ignoreWireId) {\n\n        let inconvenientNodes = new Set();\n        // for each wire\n        for(let i = 0 ; i < this.wires.length ; ++i) {\n            // (ignore the wire that is specified in the ignoreWireId argument (if any))\n            if(ignoreWireId===undefined || ignoreWireId!==this.wires[i].svgObj.id) {\n                // cycle through points, for each neigbours add all points that are in between them\n                // i.e.: (0,0) and (0,30) are blocking these nodes: (0,0), (0,10), (0,20), (0,30)\n                let prevPoint;\n                this.wires[i].points.forEach(point => {\n                    if (prevPoint === undefined) {\n                        // if the prevPoint is undefined, add the first point\n                        inconvenientNodes.add({x: point.x, y: point.y});\n                    } else {\n                        // else add all the point between the prevPoint (excluded) and point (included)\n\n                        if(prevPoint.x===point.x) {\n                            // if the line is horizontal\n                            let from = Math.min(prevPoint.y, point.y);\n                            let to = Math.max(prevPoint.y, point.y);\n\n                            while(from <= to) {\n                                inconvenientNodes.add({x: point.x, y: from});\n                                from += this.gridSize;\n                            }\n                        } else if(prevPoint.y===point.y) {\n                            // if the line is vertical\n                            let from = Math.min(prevPoint.x, point.x);\n                            let to = Math.max(prevPoint.x, point.x);\n\n                            while(from <= to) {\n                                inconvenientNodes.add({x: from, y: point.y});\n                                from += this.gridSize;\n                            }\n                        } else {\n                            // line is neither horizontal nor vertical, throw an error for better future debugging\n                            console.error(\"getInconvenientNodes: line between two points is neither horizontal nor vertical\");\n                        }\n                    }\n\n                    // set new prevPoint\n                    prevPoint = {\n                        x: point.x,\n                        y: point.y\n                    };\n                });\n\n\n            }\n        }\n        // return the set\n        return inconvenientNodes;\n    }\n}\n","\"use strict\";\n\n/**\n * Item in the [ContextMenu](./module-ContextMenu.html). ContextMenuItems can be nested using the appendItem function.\n */\nclass ContextMenuItem {\n    /**\n     * @param {string} text          text on the button\n     * @param {ContextMenu} contextMenu instance of the [ContextMenu](./module-ContextMenu.html) this item belongs to\n     * @param {Canvas} parentSVG     instance of [Canvas](./module-Canvas.html) this menu belongs to\n     * @param {Function} clickFunction callback function that will be called when user clicks this item\n     */\n    constructor(text, contextMenu, parentSVG, clickFunction) {\n        /**\n         * text on the button\n         * @type {string}\n         */\n        this.text = text;\n\n        /**\n         * instance of the [ContextMenu](./module-ContextMenu.html) this item belongs to\n         * @type {ContextMenu}\n         */\n        this.contextMenu = contextMenu;\n\n        /**\n         * instance of [Canvas](./module-Canvas.html) this menu belongs to\n         * @type {Canvas}\n         */\n        this.parentSVG = parentSVG;\n\n        /**\n         * jQuery element representing DOM content of this menu item\n         * @type {jQuery.element}\n         */\n        this.$el = $(\"<li>\").text(text);\n\n        // set up click callback if clickFunction is defined\n        if(clickFunction) {\n            $(this.$el).click(\n                event => {\n                    clickFunction(event);\n                    contextMenu.hide();\n                }\n            );\n        }\n    }\n\n    /**\n     * add a CSS class to this item\n     * @param {string} cls [description]\n     */\n    addClass(cls) {\n        this.$el.addClass(cls);\n        return this;\n    }\n\n    /**\n     * append a nested {@link ContextMenuItem} to this item\n     * @param  {ContextMenuItem} item item that will be appended\n     */\n    appendItem(item) {\n        if(!this.subList) {\n            this.subList = $(\"<ul>\");\n            this.$el.append(this.subList);\n        }\n\n        this.subList.append(item.jQuery);\n\n        return item;\n    }\n\n    /**\n     * get jQuery element of this menu item\n     * @return {jQuery.element} jQuery element containing all DOM content for this menu item\n     */\n    get jQuery() {\n        return this.$el;\n    }\n}\n\n/**\n * Menu item that has a custom click callback function that adds a {@link Gate} of the specified type to the [Canvas](./module-Canvas.html)\n * @extends ContextMenuItem\n */\nclass GateMenuItem extends ContextMenuItem {\n    /**\n     * @param {string} type        type of the gate {@link Gate} (and, or, ...)\n     * @param {ContextMenu} contextMenu instance of the [ContextMenu](./module-ContextMenu.html) that this item belongs to\n     * @param {Canvas} parentSVG   instance of [Canvas](./module-Canvas.html) this menu belongs to\n     */\n    constructor(type, contextMenu, parentSVG) {\n        super(\n            `${type} gate`,\n            contextMenu,\n            parentSVG,\n            event => {\n                let position = {\n                    left: parentSVG.snapToGrid(parentSVG.viewbox.transformX(contextMenu.position.x)),\n                    top: parentSVG.snapToGrid(parentSVG.viewbox.transformY(contextMenu.position.y))\n                };\n\n                parentSVG.newGate(\n                    type,\n                    position.left, // x coordinate\n                    position.top // y coordinate\n                );\n            }\n        );\n    }\n}\n\n/** @module ContextMenu */\n/**\n * ContextMenu represents the menu that is displayed to the user when they right click on a canvas.\n * This menu allows user to add elements to the Canvas and in the case that user rightclicked\n * on a specific element, this menu allows them to remove this element.\n */\nexport default class ContextMenu {\n    /**\n     * @param {Canvas} parentSVG instance of [Canvas](./module-Canvas.html) this menu belongs to\n     */\n    constructor(parentSVG) {\n        /**\n         * instance of [Canvas](./module-Canvas.html) this menu belongs to\n         * @type {Canvas}\n         */\n        this.parentSVG = parentSVG;\n\n        // list of gates that can be added\n        const gates = [\"not\", \"and\", \"or\", \"nand\", \"nor\", \"xor\", \"xnor\"];\n\n        /**\n         * Position of the context menu. It is used to add the new elements to the correct position on the Canvas.\n         * @type {Object}\n         */\n        this.position = {\n            x: 0, y: 0\n        };\n\n        /**\n         * jQuery element containing the context menu\n         * @type {jQuery.element}\n         */\n        this.$el = $(\"<ul>\");\n        this.$el.attr('id', 'contextMenu');\n\n        // add all gates\n        let gateList = new ContextMenuItem(\"New gate\", this, parentSVG);\n        for (let i = 0 ; i < gates.length ; ++i) {\n            gateList.appendItem(\n                new GateMenuItem(gates[i], this, parentSVG)\n            );\n        }\n        this.appendItem(gateList);\n\n        // add input box\n        this.appendItem(\n            new ContextMenuItem(\"Input box\", this, parentSVG,\n                () => {\n                    let position = {\n                        left: this.parentSVG.snapToGrid(parentSVG.viewbox.transformX(this.position.x)),\n                        top: this.parentSVG.snapToGrid(parentSVG.viewbox.transformY(this.position.y))\n                    };\n\n                    parentSVG.newInput(position.left, position.top);\n                }\n            )\n        );\n\n        // add output box\n        this.appendItem(new ContextMenuItem(\"Output box\", this, parentSVG, () => {\n            let position = {\n                left: this.parentSVG.snapToGrid(parentSVG.viewbox.transformX(this.position.x)),\n                top: this.parentSVG.snapToGrid(parentSVG.viewbox.transformY(this.position.y))\n            };\n\n            parentSVG.newOutput(position.left, position.top);\n        }));\n\n        // add conditional items for box and wire removal\n        this.appendConditionalItem('box', 'Remove this item', id => {this.parentSVG.removeBox(id)});\n        this.appendConditionalItem('wire', 'Remove this wire', id => {this.parentSVG.removeWireById(id)});\n\n        // add the context menu to the DOM\n        parentSVG.$svg.before(this.$el);\n    }\n\n    /**\n     * append a context menu item to the context menu\n     * @param  {ContextMenuItem} item instance of {@link ContextMenuItem} that will be added to this menu\n     */\n    appendItem(item) {\n        this.$el.append(item.jQuery);\n        return item;\n    }\n\n    /**\n     * appends an connditional item (that is shown only if the target has the class itemClass)\n     * @param  {string} itemClass     show the item only if the target has this class\n     * @param  {string} text          text of this menu item\n     * @param  {Function} clickFunction function with one argument (ID of the target) that will be called on click\n     */\n    appendConditionalItem(itemClass, text, clickFunction) {\n        if(!this.conditionalItems) {\n            this.conditionalItems = [];\n        }\n\n        this.conditionalItems[this.conditionalItems.length] = {\n            itemClass: itemClass,\n            text: text,\n            clickFunction: clickFunction\n        }\n    }\n\n    /**\n     * decide whether or not to display specific conditional items\n     * @param  {jQuery.element} $target jQuery target of a MouseEvent (element that user clicked on)\n     */\n    resolveConditionalItems($target) {\n        for(let i = 0; i < this.conditionalItems.length; ++i) {\n            if($target.hasClass(this.conditionalItems[i].itemClass)) {\n                this.appendItem(\n                    new ContextMenuItem(\n                        this.conditionalItems[i].text, this, this.parentSVG,\n                        () => {\n                            this.conditionalItems[i].clickFunction($target.attr('id'));\n                        }\n                    )\n                ).addClass('conditional');\n            }\n        }\n    }\n\n    /**\n     * hide all conditional items\n     */\n    hideAllConditionalItems() {\n        this.$el.children('.conditional').remove();\n    }\n\n    /**\n     * displays the context menu with the right set of conditional items\n     * @param  {number} x       horizontal position of the context menu in CSS pixels\n     * @param  {number} y       vertical position of the context menu in CSS pixels\n     * @param  {jQuery.element} $target jQuery target of a MouseEvent (element that user clicked on)\n     */\n    display(x, y, $target) {\n        this.position = {\n            x: x,\n            y: y\n        };\n\n        this.$el.css({\n            display: 'block',\n            top: y + \"px\",\n            left: x + \"px\"\n        });\n\n        this.resolveConditionalItems($target);\n    }\n\n    /**\n     * hide the context menu\n     */\n    hide() {\n        this.$el.css({display: 'none'});\n        this.hideAllConditionalItems();\n    }\n}\n","import * as svgObj from './svgObjects.js'\nimport * as Structures from './structuresAndClasses.js'\nimport Logic from './logic.js'\n\n/**\n * mapping of logical states to css classes\n * @type {Object}\n */\nconst stateClasses = {\n    on: \"stateOn\",\n    off: \"stateOff\",\n    unknown: \"stateUnknown\",\n    oscillating: \"stateOscillating\"\n};\n\n/**\n * Helper class used by {@link Transform}.\n *\n * Represents one single property of the transform argument, for example `translate(360 150)`\n * that may be a part of longer transform argument like `transform=\"translate(360 150) rotate(90 30 20)\"`\n */\nclass Property {\n    /**\n     * Initialize the Property object\n     * @param {string} [string] string in the property format `propertyname(list of space separated values)`\n     */\n    constructor(string) {\n        if(string!==undefined) {\n            this.name = string.replace(/^[ ]*([^(]+).*/, \"$1\");\n            this.args = string.replace(/^[^(]+\\((.*)\\)/, \"$1\").split(' ');\n        }\n    }\n\n    /**\n     * set or replace the name of this property\n     * @param {string} name new name for this property\n     */\n    setName(name) {\n        this.name = name;\n    }\n\n    /**\n     * set arguments of this property\n     * @param {array} args array of arguments\n     */\n    setArguments(args) {\n        this.args = args;\n    }\n\n    /**\n     * get string representation of the property\n     * @return {string} property in the property format `name(arg1 arg2)`\n     */\n    get() {\n        return this.name + \"(\" + this.args.join(\" \") + \")\";\n    }\n}\n\n/**\n * API for manipulating the transform argument used in SVG\n */\nexport class Transform {\n    /**\n     * Initialize the Transform object\n     * @param {string} [string] string in the format of the `transform` argument in SVG, for example `translate(360 150) rotate(90 30 20)`\n     */\n    constructor(string) {\n        /**\n         * array of {@link Property} instances\n         * @type {Array}\n         */\n        this.items = [];\n\n        if(string!==undefined) {\n            let splitItems = string.split(\")\");\n\n            for (let i = 0 ; i < splitItems.length ; i++) {\n                if(splitItems[i]) { // if not empty\n                    this.items.push(new Property(splitItems[i] + \")\"));\n                }\n            }\n        }\n    }\n\n    /**\n     * find a transform property by name and get its index in the [items](#items) array\n     * @param  {string} name name of the property\n     * @return {number}      index of the property in the array of properties or `-1` if not found\n     */\n    getIndex(name) {\n        for(let i = 0 ; i < this.items.length; i++) {\n            if(name === this.items[i].name) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * get the translate property\n     * @return {Object} object containing parameters of the translate attribute\n     */\n    getTranslate() {\n        let args = this.getArguments(this.getIndex(\"translate\"));\n\n        return {\n            x: args[0],\n            y: args[1]\n        }\n    }\n\n    /**\n     * get the rotate property\n     * @return {Object} object containing parameters of the rotate attribute\n     */\n    getRotate() {\n        let args = this.getArguments(this.getIndex(\"rotate\"));\n\n        return {\n            deg: args[0],\n            centreX: args[1],\n            centreY: args[2]\n        }\n    }\n\n    /**\n     * set translate to the specified values\n     * @param {number} x horizontal translation\n     * @param {number} y vertical translation\n     */\n    setTranslate(x, y) {\n        this.setParameter(\"translate\", [x, y]);\n    }\n\n    /**\n     * set rotate to the specified values\n     * @param {number} deg     angle of the rotation in degrees\n     * @param {number} centreX horizontal position of the centre of the rotation\n     * @param {number} centreY vertical position of the centre of the rotation\n     */\n    setRotate(deg, centreX, centreY) {\n        this.setParameter(\"rotate\", [deg, centreX, centreY]);\n    }\n\n    /**\n     * rotate by 90 degrees to the right\n     * @param  {number} centreX horizontal position of the centre of the rotation\n     * @param  {number} centreY vertical position of the centre of the rotation\n     */\n    rotateRight(centreX, centreY) {\n        if(this.getIndex(\"rotate\")===-1) {\n            this.setRotate(90, centreX, centreY);\n        } else {\n            let newRotation = (parseInt(this.getRotate().deg) + 90) % 360;\n\n            if(newRotation===180) {\n                // swap centre coordinates\n                // because rotate(c, x, y) is defined like transform(-x, -y) rotate(c) transform(x, y)\n                let a = centreX;\n                centreX = centreY;\n                centreY = a;\n            }\n\n            this.setRotate(\n                newRotation,\n                centreX,\n                centreY\n            );\n        }\n    }\n\n    /**\n     * get the transform values in a string\n     * @return {string} string that can be used as a value for the transform property of a SVG element\n     */\n    get() {\n        let retVal = \"\";\n        for(let i = 0 ; i < this.items.length ; i++) {\n            if(i!==0) {\n                retVal += \" \";\n            }\n            retVal += this.items[i].get();\n        }\n        return retVal;\n    }\n\n    /**\n     * get arguments of a property specified by index\n     * @param  {number} index index of the property\n     * @return {array}       array of arguments of the specified property\n     */\n    getArguments(index) {\n        return this.items[index].args;\n    }\n\n    /**\n     * set argumets of a property specified by name\n     * @param {string} name name of the property\n     * @param {array} args array of arguments of the specified property\n     */\n    setParameter(name, args) {\n        // determine index of the parameter (if set), else index == -1\n        let index = this.getIndex(name);\n\n        // if the property has been already set, change it (rewrite the array in the right index)\n        // else create a new one (set index to the length of an array --> ad an item to the end)\n        if(index===-1) {\n            index = this.items.length;\n            this.items[index] = new Property();\n            this.items[index].setName(name);\n        }\n\n        // save args under the right index\n        this.items[index].setArguments(args);\n    }\n}\n\n/**\n * parent class for all network elements\n */\nclass NetworkElement {\n    /**\n     * Basic constructor for NetworkElement\n     * @param {Canvas} parentSVG reference to the instance of {@link Canvas} that this element belongs to\n     */\n    constructor(parentSVG) {\n        if(!parentSVG) {\n            console.error(\"Parent SVG element has to be defined.\");\n        }\n        this.parentSVG = parentSVG;\n\n        // used to store the svjObject's instance of this element\n        this.svgObj = undefined;\n    }\n\n    /**\n     * Get the unique ID of the SVG element tied to this logical element\n     * @return {string} ID of the SVG element\n     */\n    get id() {\n        return this.svgObj.id;\n    }\n\n    /**\n     * empty callback function to prevent error messages, function is implemented later in the {@link Box} class\n     */\n    onMouseDown() {}\n\n    /**\n     * empty function to prevent error messages, function is implemented later in the {@link Box} and {@link Connector} classes\n     */\n    onMouseUp() {}\n\n    /**\n     * empty function to prevent error messages, function is implemented later in the {@link Box} class\n     */\n    onMouseMove() {}\n\n    /**\n     * \"virtual\" getter for json data, prints an error that it has to be redefined in the derived classes\n     */\n    get exportData() {\n        console.error(\"'json' getter has not been defined for this element\", this);\n        return undefined;\n    }\n}\n\n/**\n * parent class for input and output connectors\n * @extends NetworkElement\n */\nclass Connector extends NetworkElement {\n    /**\n     * @param {Canvas} parentSVG link to the {@link Canvas} instance that this connector will belong to\n     * @param {number} gridSize  size of the grid in SVG pixels\n     * @param {number} left      horizontal position defined in grid units (SVG pixels divided by the grid size)\n     * @param {number} top       vertical position defined in grid units (SVG pixels divided by the grid size)\n     */\n    constructor(parentSVG, gridSize, left, top) {\n        super(parentSVG);\n\n        /**\n         * size of the grid in SVG pixels\n         * @type {number}\n         */\n        this.gridSize = gridSize;\n        /**\n         * size of the connector in SVG pixels\n         * @type {number}\n         */\n        this.connectorSize = gridSize;\n        /**\n         * offset of the connector from the grid in SVG pixels\n         * @type {number}\n         */\n        this.connectorOffset = this.connectorSize / 2;\n\n        /**\n         * instance of {@link svgObjects.svgObj} that holds all SVG information about this connector\n         * @type {svgObj}\n         */\n        this.svgObj = new svgObj.Rectangle(\n            left * this.gridSize - this.connectorOffset,\n            top * this.gridSize - this.connectorOffset,\n            this.connectorSize,\n            this.connectorSize,\n            \"none\",\n            \"black\"\n        );\n\n        this.svgObj.$el.addClass(\"connector\");\n\n        /**\n         * this flag describes whether this connector is an input connector\n         * @type {Boolean}\n         */\n        this.isInputConnector = false;\n\n        /**\n         * current logical state of this connector\n         * @type {Logic.state}\n         */\n        this.elementState = Logic.state.unknown;\n        this.svgObj.addClass(stateClasses.unknown);\n\n        /**\n         * set of ids of all wires connected to this connector\n         * @type {Set}\n         */\n        this.wireIds = new Set();\n    }\n\n    /**\n     * whether this connector is an output connector\n     * @return {Boolean}\n     */\n    get isOutputConnector() {\n        return !this.isInputConnector;\n    }\n\n    /**\n     * whether this connector is an output connector\n     * @return {Boolean}\n     */\n    set isOutputConnector(value) {\n        this.isInputConnector = !value;\n    }\n\n    /**\n     * add a wire id to the list of wire ids\n     * @param {string} wireId\n     */\n    addWireId(wireId) {\n        this.wireIds.add(wireId);\n    }\n\n    /**\n     * remove a wire id from the list of wire ids\n     * @param {string} wireId\n     */\n    removeWireId(wireId) {\n        this.wireIds.delete(wireId);\n    }\n\n    /**\n     * remove a wire specified by ID and update the connector\n     * @param  {string} wireId ID of the wire to be removed\n     */\n    removeWireIdAndUpdate(wireId) {\n        this.removeWireId(wireId);\n    }\n\n    /**\n     * set logical state of the connector\n     * @param {Logic.state} state new state of the connector\n     */\n    setState(state) {\n        this.svgObj.removeClasses(stateClasses.on, stateClasses.off, stateClasses.unknown, stateClasses.oscillating);\n\n        switch (state) {\n            case Logic.state.unknown:\n                this.svgObj.addClass(stateClasses.unknown);\n                break;\n            case Logic.state.on:\n                this.svgObj.addClass(stateClasses.on);\n                break;\n            case Logic.state.off:\n                this.svgObj.addClass(stateClasses.off);\n                break;\n            case Logic.state.oscillating:\n                this.svgObj.addClass(stateClasses.oscillating);\n                break;\n        }\n\n        this.elementState = state;\n    }\n\n    /**\n     * get state of this connector\n     * @return {Logic.state}\n     */\n    get state() {\n        return this.elementState;\n    }\n\n    /**\n     * get svgObj instance content of this connector\n     * @return {svgObjects.Rectangle}\n     */\n    get() {\n        return this.svgObj;\n    }\n\n    /**\n     * call [wireCreationHelper](./module-Canvas.html#wireCreationHelper) on mouse up\n     */\n    onMouseUp() {\n        this.parentSVG.wireCreationHelper(this.svgObj.id);\n    }\n}\n\n/**\n * Connector that gets its state from a connected value and passes it through to the {@link Box} this connector belongs to.\n * @extends Connector\n */\nexport class InputConnector extends Connector {\n    constructor(parentSVG, gridSize, left, top) {\n        super(parentSVG, gridSize, left, top);\n\n        this.isInputConnector = true;\n    }\n\n    /**\n     * Call the setState method of {@link Connector} and than refresh the state of the connected {@link Box}\n     * @param {Logic.state} state new {@link Logic.state} of the connector\n     */\n    setState(state) {\n        super.setState(state);\n\n        let gate = this.parentSVG.getBoxByConnectorId(this.svgObj.id);\n        gate.refreshState();\n    }\n\n    /**\n     * remove the wire (by calling the removeWireIdAndUpdate of {@link Connector})\n     * and update state of this connector by setting it to undefined using the setState method\n     * @param  {string} wireId ID of the {@link Wire}\n     */\n    removeWireIdAndUpdate(wireId) {\n        super.removeWireIdAndUpdate(wireId);\n        this.setState(Logic.state.unknown);\n    }\n\n    get state() {\n        return super.state;\n    }\n}\n\n/**\n * Connector that takes a state defined by the {@link Box} it belongs to and passes it to all connected wire\n * @extends Connector\n */\nexport class OutputConnector extends Connector {\n    constructor(parentSVG, gridSize, left, top) {\n        super(parentSVG, gridSize, left, top);\n\n        this.isOutputConnector = true;\n    }\n\n    /**\n     * Call the setState method of {@link Connector} and than set the state of the connected {@link Wire}s\n     * @param {Logic.state} state new {@link Logic.state} of the connector\n     */\n    setState(state) {\n        super.setState(state);\n\n        for (const wireId of this.wireIds) {\n            this.parentSVG.getWireById(wireId).setState(state);\n        }\n    }\n\n    get state() {\n        return super.state;\n    }\n}\n\n/**\n * Parent class for gates and input and output boxes. Defines all the factors\n * that the boxes have in common (svgObj structure, draggability and rotatability...)\n * @extends NetworkElement\n */\nclass Box extends NetworkElement {\n    constructor(parentSVG, name, category, gridWidth, gridHeight) {\n        super(parentSVG);\n\n        this.name = name;\n        this.category = category;\n        this.gridSize = this.parentSVG.gridSize;\n\n        this.url = \"img/\" + this.category + \"/\" + this.name + \".svg\";\n\n        this.connectors = [];\n\n        this.svgObj = new svgObj.Group();\n\n        this.width = gridWidth * this.gridSize;\n        this.height = gridHeight * this.gridSize;\n\n        this.gridWidth = gridWidth;\n        this.gridHeight = gridHeight;\n\n        // transparent background rectangle\n        let rectangle = new svgObj.Rectangle(0, 0, this.width, this.height, \"none\", \"none\");\n        rectangle.$el.addClass('rect');\n\n        this.svgObj.addChild(rectangle);\n        // image of the element\n        this.image = new svgObj.SvgImage(0, 0, this.width, this.height, this.url);\n        this.svgObj.addChild(this.image);\n\n        // add draggability and rotatability\n        this.svgObj.draggable(true);\n        this.svgObj.rotatable(true);\n\n        // add type=\"gate\", used in special callbacks in contextmenu\n        this.svgObj.addAttr({\"type\": category});\n\n        this.svgObj.$el.addClass(\"box\");\n        this.svgObj.$el.addClass(category);\n\n        this.generateBlockNodes();\n    }\n\n    get inputConnectors() {\n        return this.connectors.filter(conn => conn.isInputConnector)\n    }\n\n    get outputConnectors() {\n        return this.connectors.filter(conn => conn.isOutputConnector)\n    }\n\n    get exportData() {\n        let connections = [];\n\n        // go through all connectors\n        let counter = 0\n        for (const conn of this.connectors) {\n            // go through each its wire id\n            for (const item of conn.wireIds) {\n                let thisWireId;\n                if(!this.parentSVG.exportWireIdMap.has(item)) {\n                    // if the wire id is not in the map, add it and assign new arbitrary id\n                    this.parentSVG.exportWireIdMap.set(item, this.parentSVG.exportWireId);\n                    thisWireId = this.parentSVG.exportWireId;\n                    this.parentSVG.exportWireId++;\n                } else {\n                    // else get id from the map\n                    thisWireId = this.parentSVG.exportWireIdMap.get(item);\n                }\n\n\n                // add this connection to the list\n                connections[connections.length] = {\n                    index: counter,\n                    type: conn.type,\n                    wireId: thisWireId\n                };\n            }\n            counter++\n        }\n\n        return {\n            name: this.name,\n            // id: this.svgObj.id,\n            category: this.category,\n            transform: this.getTransform(),\n            connections: connections\n        };\n    }\n\n    generateBlockNodes(marginTop = 0, marginRight = 0, marginBottom = 0, marginLeft = 0, ...specialNodes) {\n        this.blockedNodes = new Set();\n        for(let x = marginLeft ; x <= this.gridWidth - marginRight ; x++) {\n            for(let y = marginTop ; y <= this.gridHeight - marginBottom ; y++) {\n                this.blockedNodes.add({\n                    x: x,\n                    y: y\n                });\n            }\n        }\n\n        for (let node of specialNodes) {\n            this.blockedNodes.add(node);\n        }\n    }\n\n    refreshState() {\n        // empty function, redefined in inherited elements\n        // refreshState takes input connector values and sets output values accordingly\n        console.warn(\"Calling the virtual function refreshState has no effect.\");\n    }\n\n    // usage: changeImage(\"abc\") changes image url to image-abc.svg\n    //        changeImage() changes image url to the default one (image.svg)\n    changeImage(suffix) {\n        if(suffix === undefined || suffix === \"\") {\n            suffix = \"\";\n        } else {\n            suffix = \"-\" + suffix;\n        }\n        this.url = \"img/\" + this.category + \"/\" + this.name + suffix + \".svg\";\n\n        this.image.changeUrl(this.url);\n    }\n\n    // returns a jQuery object\n    get() {\n        return this.svgObj.get();\n    }\n\n    removeBlockedNode(x, y) {\n        for(let item of this.blockedNodes) {\n            if(item.x===x && item.y===y) {\n                this.blockedNodes.delete(item);\n                break;\n            }\n        }\n    }\n\n    rotateBlockedNodesRight() {\n        if(this.rotation===undefined || this.rotation===4) {\n            this.rotation = 0;\n        }\n        this.rotation++;\n\n        if(this.rotation === 1 || this.rotation === 3) {\n            let newBlockedNodes = new Set();\n            this.blockedNodes.forEach(item => {\n                newBlockedNodes.add({\n                    x: Math.abs(item.y - this.gridHeight),\n                    y: item.x\n                });\n            });\n            this.blockedNodes = newBlockedNodes;\n        } else if(this.rotation === 2 || this.rotation === 4) {\n            let newBlockedNodes = new Set();\n            this.blockedNodes.forEach(item => {\n                newBlockedNodes.add({\n                    x: Math.abs(item.y - this.gridWidth),\n                    y: item.x\n                });\n            });\n            this.blockedNodes = newBlockedNodes;\n        }\n    }\n\n    addConnector(left, top, isInputConnector) {\n        let index = this.connectors.length;\n        if(isInputConnector) {\n            this.connectors[index] = new InputConnector(this.parentSVG, this.gridSize, left, top);\n        } else {\n            this.connectors[index] = new OutputConnector(this.parentSVG, this.gridSize, left, top);\n        }\n        this.svgObj.addChild(this.connectors[index].get());\n\n        this.removeBlockedNode(left, top);\n    }\n\n    addInputConnector(left, top) {\n        return this.addConnector(left, top, true)\n    }\n\n    addOutputConnector(left, top) {\n        return this.addConnector(left, top, false)\n    }\n\n    // returns the connector object based on its id\n    getConnectorById(connectorId) {\n        for(let i = 0 ; i < this.connectors.length ; i++) {\n            if(this.connectors[i].id===connectorId) {\n                return this.connectors[i];\n            }\n        }\n        // if connector not found, return undefined\n        return undefined;\n    }\n\n    getTransform() {\n        let transform;\n        if (!this.svgObj.$el.attr(\"transform\")) {\n            // the element does not have a \"transform\" property --> create it\n            transform = new Transform();\n            transform.setTranslate(0, 0);\n            this.svgObj.addAttr({\"transform\": transform.get()});\n        } else {\n            // the element does have a \"transform\" property --> change it\n            transform = new Transform(this.svgObj.$el.attr(\"transform\"));\n        }\n        return transform;\n    }\n\n    setTransform(transform) {\n        this.svgObj.addAttr({\"transform\": transform.get()});\n    }\n\n    onMouseDown(event) {\n        this.mouseLeft = false;\n        if(event.which === 1) {\n            this.mouseLeft = true;\n            this.onMouseDownLeft(event);\n\n            // move the DOM element to front\n            this.parentSVG.moveToFrontById(this.svgObj.id);\n        }\n    }\n\n    onMouseDownLeft(event) {\n        this.mouseMoved = false;\n\n        let transform = this.getTransform();\n\n        // save the current item position into a variable\n        let currentPosition = transform.getTranslate();\n\n        let {pageX, pageY} = this.parentSVG.viewbox.transformEvent(event)\n\n        // calculate mouse offset from the object origin\n        this.offset = {\n            x: pageX - currentPosition.x,\n            y: pageY - currentPosition.y\n        };\n    }\n\n    onMouseMove(event) {\n        if(this.mouseLeft) {\n            this.svgObj.$el.addClass('grabbed');\n\n            this.mouseMoved = true;\n\n            let {pageX, pageY} = this.parentSVG.viewbox.transformEvent(event)\n\n            const left = pageX - this.offset.x;\n            const top = pageY - this.offset.y;\n\n            let transform = this.getTransform();\n            transform.setTranslate(left, top);\n\n            this.setTransform(transform);\n\n            this.updateWires(true);\n        }\n    }\n\n    onMouseUp(event) {\n        if(event.which === 1) {\n            if(this.mouseMoved) {\n                this.onDrop(event);\n            } else {\n                this.onClick();\n            }\n        } else if (event.which === 2 ) {\n            this.onClickMiddle();\n        }\n\n        this.svgObj.$el.removeClass('grabbed');\n    }\n\n    onDrop(event) {\n        let {pageX, pageY} = this.parentSVG.viewbox.transformEvent(event)\n\n        let left = pageX - this.offset.x;\n        let top = pageY - this.offset.y;\n\n        left = this.parentSVG.snapToGrid(left);\n        top = this.parentSVG.snapToGrid(top);\n\n        let transform = this.getTransform();\n        transform.setTranslate(left, top);\n\n        this.setTransform(transform);\n\n        this.updateWires();\n    }\n\n    onClick() {\n        // empty function, will be redefined in InputBox\n    }\n\n    onClickMiddle() {\n        let transform = this.getTransform();\n\n        let rect = this.svgObj.$el[0].getBoundingClientRect();\n\n        let centreX = Math.round(rect.width / 2);\n        let centreY = Math.round(rect.height / 2);\n\n        centreX -= centreX % this.gridSize;\n        centreY -= centreY % this.gridSize;\n\n        transform.rotateRight(\n            centreX,\n            centreY\n        );\n\n        this.svgObj.addAttr({\"transform\": transform.get()});\n\n        this.rotateBlockedNodesRight();\n\n        this.updateWires();\n    }\n\n    // updates all wires connected to this box\n    updateWires(temporary = false) {\n        this.connectors.forEach(conn => {\n            conn.wireIds.forEach(wireId => {\n                let wire = this.parentSVG.getWireById(wireId);\n                if(temporary) {\n                    wire.temporaryWire();\n                } else {\n                    wire.routeWire();\n                }\n            })\n        })\n    }\n}\n\n/**\n * InputBox has only output connectors and is used to set the input states for the logic network.\n * @extends Box\n */\nexport class InputBox extends Box {\n    constructor(parentSVG, isOn = false) {\n        const width = 7;\n        const height = 4;\n\n        super(parentSVG, \"input\", \"io\", width, height);\n\n        this.addConnector(width, height / 2, false);\n\n        this.on = isOn;\n    }\n\n    get exportData() {\n        let data = super.exportData;\n        data.isOn = this.isOn;\n        return data;\n    }\n\n    generateBlockNodes() {\n        super.generateBlockNodes(0, 1, 1, 0);\n    }\n\n    refreshState() {\n        // start a new simulation from the output connector\n        this.parentSVG.startNewSimulation(this.connectors[0], this.connectors[0].state)\n    }\n\n    set on(isOn) {\n        if (isOn) {\n            // turn on\n            this.changeImage(\"on\");\n            this.connectors[0].setState(Logic.state.on);\n            this.refreshState()\n        } else {\n            // turn off\n            this.changeImage();\n            this.connectors[0].setState(Logic.state.off);\n            this.refreshState()\n        }\n\n        this.isOn = isOn;\n    }\n\n    get on() {\n        return this.isOn;\n    }\n\n    onClick() {\n        this.on = !this.on;\n    }\n}\n\n/**\n * OutputBox has only input connectors and is used to visualize the output states of the logic network.\n * @extends Box\n */\nexport class OutputBox extends Box {\n    constructor(parentSVG) {\n        const height = 4;\n        const width = 5;\n\n        super(parentSVG, \"output\", \"io\", width, height);\n\n        this.addConnector(0, height / 2, true);\n    }\n\n    refreshState() {\n        this.setState(this.connectors[0].state);\n    }\n\n    setState(state) {\n        switch (state) {\n            case Logic.state.on:\n                this.changeImage(\"on\");\n                break;\n            case Logic.state.off:\n                this.changeImage(\"off\");\n                break;\n            case Logic.state.unknown:\n                this.changeImage();\n                break;\n            case Logic.state.oscillating:\n                this.changeImage(\"osc\");\n                break;\n        }\n    }\n\n    generateBlockNodes() {\n        super.generateBlockNodes(0, 0, 0, 1);\n    }\n}\n\n/**\n * Gate is a box that processes the states of its input connectors and returns the result in its output connectors.\n * @extends Box\n */\nexport class Gate extends Box {\n    constructor(parentSVG, name) {\n        const width = 9;\n        const height = 4;\n\n        super(parentSVG, name, \"gate\", width, height);\n\n        // output\n        this.addConnector(width, height / 2, false);\n\n        if(this.name===\"not\") {\n            // input\n            this.addConnector(0, height / 2, true);\n        } else {\n            // input\n            this.addConnector(0, height / 4, true);\n            this.addConnector(0, height / (4/3), true);\n\n            // add one blockedNode between the inputs (for better looking wiring)\n            // and regenerate blocked nodes\n            this.generateBlockNodes({\n                x: 0,\n                y: height / 2\n            });\n        }\n\n        this.refreshState();\n    }\n\n    generateBlockNodes(specialNode) {\n        if(specialNode!==undefined) {\n            super.generateBlockNodes(0, 1, 0, 1, specialNode);\n        } else {\n            super.generateBlockNodes(0, 1, 0, 1);\n        }\n    }\n\n    refreshState() {\n        let state = Logic.state.unknown\n        switch (this.name) {\n            case \"and\":\n                state =  Logic.and(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"nand\":\n                state =  Logic.nand(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"nor\":\n                state =  Logic.nor(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"not\":\n                state =  Logic.not(this.connectors[1].state)\n                break;\n            case \"or\":\n                state =  Logic.or(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"xnor\":\n                state =  Logic.xnor(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"xor\":\n                state =  Logic.xor(this.connectors[1].state, this.connectors[2].state)\n                break;\n        }\n        // notify the simulator about this change\n        this.parentSVG.simulation.notifyChange(this.connectors[0].id, state)\n    }\n}\n\n/**\n * Wire represents connection of two {@link Connector}s.\n * @extends NetworkElement\n */\nexport class Wire extends NetworkElement {\n    constructor(parentSVG, fromId, toId, gridSize, refresh = true) {\n        // small TODO: rework start... end... to arrays? (not important)\n\n        super(parentSVG);\n\n        this.gridSize = gridSize;\n\n        this.fromId = fromId;\n        this.toId = toId;\n\n        this.startBox = this.parentSVG.getBoxByConnectorId(fromId);\n        this.endBox = this.parentSVG.getBoxByConnectorId(toId);\n\n        this.boxes = [this.startBox, this.endBox]\n\n        this.startConnector = this.parentSVG.getConnectorById(fromId);\n        this.endConnector = this.parentSVG.getConnectorById(toId);\n\n        this.connectors = [this.startConnector, this.endConnector]\n        this.routeWire(true, refresh);\n\n        this.elementState = Logic.state.unknown;\n\n        for (let connector of this.connectors) {\n            if(connector.isOutputConnector) {\n                this.setState(connector.state);\n            }\n        }\n\n        this.svgObj.$el.addClass(\"wire\");\n    }\n\n    get exportData() {\n        return {\n            fromId: this.fromId,\n            toId: this.toId\n        };\n    }\n\n    setState(state) {\n        this.svgObj.removeClasses(stateClasses.on, stateClasses.off, stateClasses.unknown, stateClasses.oscillating);\n\n        switch (state) {\n            case Logic.state.unknown:\n                this.svgObj.addClass(stateClasses.unknown);\n                break;\n            case Logic.state.on:\n                this.svgObj.addClass(stateClasses.on);\n                break;\n            case Logic.state.off:\n                this.svgObj.addClass(stateClasses.off);\n                break;\n            case Logic.state.oscillating:\n                this.svgObj.addClass(stateClasses.oscillating);\n                break;\n        }\n\n        if (this.startConnector.isInputConnector) {\n            this.startConnector.setState(state);\n        }\n        if(this.endConnector.isInputConnector) {\n            this.endConnector.setState(state);\n        }\n\n        this.elementState = state;\n    }\n\n    get state() {\n        return this.elementState;\n    }\n\n    updateWireState() {\n        for (const box of this.boxes) {\n            box.refreshState()\n        }\n    }\n\n    get() {\n        return this.svgObj.get();\n    }\n\n    getTemporaryWirePoints() {\n        let points = new svgObj.PolylinePoints();\n        points.append(new svgObj.PolylinePoint(this.wireStart.x, this.wireStart.y));\n        points.append(new svgObj.PolylinePoint(this.wireEnd.x, this.wireEnd.y));\n        return points;\n    }\n\n    temporaryWire() {\n        this.wireStart = this.getCoordinates(this.startConnector, false);\n        this.wireEnd = this.getCoordinates(this.endConnector, false);\n\n        this.setWirePath(this.getTemporaryWirePoints());\n\n        // this.svgObj.removeClasses(stateClasses.on, stateClasses.off, stateClasses.unknown, stateClasses.oscillating);\n        // this.svgObj.addClass(stateClasses.unknown);\n    }\n\n    routeWire(snapToGrid = true, refresh = true) {\n        this.wireStart = this.getCoordinates(this.startConnector, snapToGrid);\n        this.wireEnd = this.getCoordinates(this.endConnector, snapToGrid);\n\n        this.points = this.aStar(\n            {\n                x: this.wireStart.x / this.gridSize,\n                y: this.wireStart.y / this.gridSize\n            },\n            {\n                x: this.wireEnd.x / this.gridSize,\n                y: this.wireEnd.y / this.gridSize\n            });\n\n        this.setWirePath(this.points);\n\n        if (refresh)\n            this.updateWireState();\n    }\n\n    setWirePath(points) {\n        // set the line\n        if(this.svgObj!==undefined) {\n            this.svgObj.updatePoints(points);\n        } else {\n            this.svgObj = new svgObj.PolyLine(points, \"#8b8b8b\", 2);\n        }\n\n        this.svgObj.removeClasses(stateClasses.on, stateClasses.off, stateClasses.unknown, stateClasses.oscillating);\n        this.svgObj.addClass(stateClasses.unknown);\n\n        this.svgObj.addAttr({\n            fromId: this.fromId,\n            toId: this.toId\n        });\n    }\n\n\n\n    // implementation based on this pseudocode: https://en.wikipedia.org/wiki/A*_search_algorithm#Pseudocode\n    aStar(start, end) {\n        const wireCrossPunishment = 2;\n        const wireBendPunishment = 1;\n\n        // number of nodes, that can be opened at once\n        // once is this limit exceeded, aStar will fail and getTemporaryWirePoints will be used instead\n        const maxNodeLimit = 50000;\n\n        let closedNodes = new Set();\n        let openNodes = new Set();\n        openNodes.add(start);\n\n        let cameFrom = new Map();\n\n        // default value: infinity\n        let gScore = new Structures.MapWithDefaultValue(Infinity);\n        gScore.set(start, 0);\n\n        // default value: infinity\n        let fScore = new Structures.MapWithDefaultValue(Infinity);\n        fScore.set(start, Wire.manhattanDistance(start, end));\n\n        let nonRoutable = this.parentSVG.getNonRoutableNodes();\n        let punishedButRoutable;\n        if(this.svgObj===undefined) {\n            punishedButRoutable = this.parentSVG.getInconvenientNodes();\n        } else {\n            punishedButRoutable = this.parentSVG.getInconvenientNodes(this.svgObj.id);\n        }\n\n        while (openNodes.size > 0) {\n            let currentNode;\n            let currentNodeFScore;\n\n            // find the value from openNodes that has the lowest fScore\n            // (can be implemented effectively using min-heap data structure (maybe TODO sometime)?)\n            for (const node of openNodes) {\n                if(!currentNode || fScore.get(node) < currentNodeFScore) {\n                    currentNode = node;\n                    currentNodeFScore = fScore.get(currentNode)\n                }\n            }\n\n            if(svgObj.PolylinePoint.equals(currentNode, end)) {\n                return this.reconstructPath(cameFrom, currentNode);\n            }\n\n            openNodes.delete(currentNode);\n            closedNodes.add(currentNode);\n\n            // the farthest points accessible without avoiding obstacles in every direction\n            // (but max 50 in each direction)\n            for(let direction = 0 ; direction < 4 ; direction++) {\n                let newPoint = Wire.movePoint(currentNode, direction);\n                for(let i = 0 ; i < 50 ; i++) {\n                    // if newPoint is in the set of non routable points,\n                    // don't add it and stop proceeding in this direction\n                    if(Wire.setHasThisPoint(nonRoutable, this.scalePointToGrid(newPoint))) {\n                        break;\n                    }\n\n                    // skip this node, if it has been already closed\n                    // or if it is on the list of non routable nodes\n                    if (closedNodes.has(newPoint)) {\n                        continue;\n                    }\n\n                    if (!openNodes.has(newPoint)) {\n                        openNodes.add(newPoint);\n                    }\n\n                    // calculate possible GScore by adding 1 to the score of the node we came from\n                    // (we prioritize to minimize the number of nodes and not the distance,\n                    //  so we are adding 1 on all nodes, even if the euclidean / mannhatan distance may vary)\n                    let increment = wireBendPunishment;\n                    let possibleGScore = gScore.get(currentNode) + increment;\n\n                    if(Wire.setHasThisPoint(punishedButRoutable, this.scalePointToGrid(newPoint))) {\n                        // if the node is in the set of punished node, punish it by adding to the GScore\n                        possibleGScore += wireCrossPunishment;\n                    }\n\n                    // skip this node if it has worst estimage gscore than in the gscore table\n                    if (possibleGScore >= gScore.get(newPoint)) {\n                        continue;\n                    }\n\n                    cameFrom.set(newPoint, currentNode);\n                    gScore.set(newPoint, possibleGScore);\n                    fScore.set(newPoint, possibleGScore + Wire.manhattanDistance(newPoint, end));\n\n                    // if newPoint is in the set of punished but routable points,\n                    // add it but stop proceeding in this direction\n                    if(Wire.setHasThisPoint(punishedButRoutable, this.scalePointToGrid(newPoint))) {\n                        break;\n                    }\n\n                    // move to the next point in the direciton\n                    newPoint = Wire.movePoint(newPoint, direction);\n                }\n            }\n\n            if(openNodes.size > maxNodeLimit) {\n                break;\n            }\n        }\n        // if we got here, the path does not exist -> let's use temporary path ignoring all colisions\n        return this.getTemporaryWirePoints();\n    }\n    static movePoint(point, direction) {\n        switch (direction) {\n            case 0: // up\n                return {\n                    x: point.x,\n                    y: point.y - 1\n                };\n            case 1: // right\n                return {\n                    x: point.x + 1,\n                    y: point.y\n                };\n            case 2: // down\n                return {\n                    x: point.x,\n                    y: point.y + 1\n                };\n            case 3: // left\n                return {\n                    x: point.x - 1,\n                    y: point.y\n                };\n        }\n    }\n    scalePointToGrid(point) {\n        return {\n            x: point.x * this.gridSize,\n            y: point.y * this.gridSize\n        }\n    }\n\n    reconstructPath(cameFrom, currentNode) {\n        let totalPath = new svgObj.PolylinePoints();\n        totalPath.append(new svgObj.PolylinePoint(currentNode.x * this.gridSize, currentNode.y * this.gridSize));\n\n        while (cameFrom.has(currentNode)) {\n            currentNode = cameFrom.get(currentNode);\n            totalPath.append(new svgObj.PolylinePoint(currentNode.x * this.gridSize, currentNode.y * this.gridSize));\n        }\n\n        return totalPath;\n    }\n\n    static manhattanDistance(a, b) {\n        // Manhattan geometry\n        return Math.abs(a.x - b.x) + Math.abs(a.y - b.y);\n    }\n\n    static setHasThisPoint(set, point) {\n        for (let item of set) {\n            if(item.x === point.x && item.y === point.y) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    getCoordinates(connector, snapToGrid = true) {\n        // connector.svgObj.id has to be called, else the getCoordinates does not work on the first call in Firefox 55\n        let dummy = connector.svgObj.id;\n\n        let $connector = connector.svgObj.$el;\n\n        let position = $connector.position();\n\n        position.left = this.parentSVG.viewbox.transformX(position.left)\n        position.top = this.parentSVG.viewbox.transformY(position.top)\n\n        let width = $connector.attr(\"width\");\n        let height = $connector.attr(\"height\");\n\n        let x = position.left + width / 2;\n        let y = position.top + height / 2;\n        if(snapToGrid) {\n            x = this.parentSVG.snapToGrid(x);\n            y = this.parentSVG.snapToGrid(y);\n        }\n\n        return {\n            x: x,\n            y: y\n        };\n    }\n}\n","import { exportNetwork } from \"./importExport.js\";\n\nimport {\n    getLibrary,\n    getNetworkFromLibrary\n} from './networkLibrary.js';\n\n/**\n * FloatingButton represents a button that is used in the floating menu in the right bottom corner\n * of the application. It may have a custom tooltip and callback on the click event\n */\nclass FloatingButton {\n    /**\n     * @param {string} buttonClass Custom string that identifies the SVG icon used on this button. This string is also added as a CSS class to the button.\n     * @param {string} tooltip     tooltip for the button, that will be displayed on hover and also used as alternative title for the image\n     * @param {Function} clickEvent  custom callback when user clicks the button\n     * @param {Canvas} parentSVG   reference to the parent SVG element\n     */\n    constructor(buttonClass, tooltip, clickEvent, parentSVG) {\n        /**\n         * jQuery element representing the button\n         * @type {jQuery.element}\n         */\n        this.$el = $('<a>')\n\n        // add classes to the element\n        this.$el.addClass(\"button\");\n        this.$el.addClass(buttonClass);\n\n        // add the icon\n        this.$el.append(\n            $(\"<img>\")\n            .attr(\"src\", `img/gui/${buttonClass}.svg`)\n            .attr(\"alt\", tooltip)\n        );\n\n        // add the tooltip element and an event listener if tooltip is defined\n        if (tooltip) {\n            /**\n             * jQuery element representing the tooltip\n             * @type {jQuery.element}\n             */\n            this.$tooltip = $(\"<div>\");\n            this.$tooltip\n                .addClass(\"tooltip\")\n                .html(tooltip);\n\n            parentSVG.$svg.after(this.$tooltip);\n\n            this.$el.hover(() => {\n                this.$tooltip.fadeIn(200);\n            }, () => {\n                this.$tooltip.fadeOut(200);\n            });\n        }\n\n        // add an event listener on click, if the callback function is defined\n        if (clickEvent) {\n            this.$el.on(\"click\", clickEvent);\n        }\n    }\n}\n\n/** @module FloatingMenu */\n/**\n * Class to represent the floating menu in the right bottom corner of the page.\n * It instantiates all the buttons and their callbacks.\n */\nexport default class FloatingMenu {\n    /**\n     * @param {Canvas} parentSVG reference to the Canvas element this menu is associated with\n     */\n    constructor(parentSVG) {\n        /**\n         * the jQuery element containing all buttons\n         * @type {jQuery.element}\n         */\n        this.$el = $('<div>')\n\n        const id = 'floatingMenu';\n\n        this.$el.attr(\"id\", id);\n\n        const $loader = $(\"<div>\").addClass(\"loader\").addClass(\"hidden\");\n\n        /* IMPORT */\n\n        // here will be the instance of Lity stored\n        // (we need to store it, because the \"import\" button also closes Lity)\n        let lityInstance;\n\n        this.append(\n            new FloatingButton(\"import\", \"Import a network from a file\", () => {\n                let $popup = $(\"<div>\")\n                    .addClass(\"importExport\")\n                    .addClass(\"import\");\n\n                let textareaId = \"importJSON\";\n                let $textblock = $(\"<textarea>\").attr('id', textareaId);\n\n                $popup.append(\n                    $textblock\n                ).append(\n                    $(\"<a>\").attr({\n                        \"href\": \"#\",\n                        \"class\": \"upload\"\n                    })\n                    .append(\n                        $(\"<img>\").attr('src', \"img/gui/import.svg\")\n                    )\n                    .append(\" import from JSON\")\n                    .on('click', () => {\n                        $popup.children().addClass(\"hidden\");\n                        $loader.removeClass(\"hidden\");\n\n                        const data = JSON.parse($('#' + textareaId).val());\n\n                        // proccess the imported data\n                        parentSVG.importData(data).then(() => {\n                            // close Lity\n                            lityInstance.close();\n                        })\n                    })\n                ).append($loader);\n\n                lityInstance = lity($popup);\n\n                // focus on the textblock\n                $textblock.focus();\n            }, parentSVG)\n        );\n\n        /* LOAD FROM LIBRARY */\n        this.append(\n            new FloatingButton(\"library\", \"Load a network from the library\", () => {\n\n                let $popup = $(\"<div>\")\n                    .addClass(\"importExport\")\n                    .addClass(\"library\");\n\n                let $list = $(\"<ul>\")\n                $popup.append($list).append($loader);\n\n                getLibrary().then(networkList => {\n                    for (const networkInfo of networkList) {\n                        $list.append(\n                            $(\"<li>\")\n                            .append(\n                                $(\"<span class='name'>\")\n                                    .append(networkInfo.name)\n                            )\n                            .append(\n                                $(\"<a>\").append(\n                                    \"load as network\"\n                                ).attr(\"href\", \"#\").on(\"click\", () => {\n                                    $popup.children().addClass(\"hidden\");\n                                    $loader.removeClass(\"hidden\");\n\n                                    getNetworkFromLibrary(networkInfo.file).then(response => {\n                                        // proccess the imported data\n                                        parentSVG.importData(response).then(() => {\n                                            // close Lity\n                                            lityInstance.close();\n                                        })\n                                    })\n                                })\n                            )\n                        )\n                    }\n                })\n\n                $popup.append()\n\n                lityInstance = lity($popup);\n            }, parentSVG)\n        );\n\n        /* EXPORT */\n        this.append(\n            new FloatingButton(\"export\", \"Get code for this network\", () => {\n                const data = new exportNetwork(parentSVG);\n\n                // create the popup container holding all popup content (that will be passed to lity)\n                let $popup = $(\"<div>\")\n                    .addClass(\"importExport\")\n                    .addClass(\"export\");\n\n                // generate the block with code to be displayed and append it to the popup element\n                const $textblock = $(\"<textarea>\").text(data.json(exportNetwork.style.pretty))\n\n                $popup.append($textblock);\n\n                // generate the links\n                $popup.append(\n                    $(\"<a>\").attr({\n                        \"href\": data.json(exportNetwork.style.pretty, true),\n                        \"class\": \"download\",\n                        \"download\": \"network.json\"\n                    }).append(\n                        $(\"<img>\").attr('src', \"img/gui/export.svg\")\n                    ).append(\" expanded JSON\")\n                );\n                $popup.append(\n                    $(\"<a>\").attr({\n                        \"href\": data.json(exportNetwork.style.compact, true),\n                        \"class\": \"download\",\n                        \"download\": \"network.min.json\"\n                    }).append(\n                        $(\"<img>\").attr('src', \"img/gui/export.svg\")\n                    ).append(\" compact JSON\")\n                );\n\n                lity($popup);\n\n                // highlight the text in the textblock\n                $textblock.select();\n            }, parentSVG)\n        );\n\n        /* HELP */\n\n        let help = new FloatingButton(\"help\", \"Display a help page\", false, parentSVG);\n        help.$el.attr({\n            'href': './docs/user.html',\n            'data-lity': ''\n        });\n        this.append(help);\n\n        parentSVG.$svg.after(this.$el);\n    }\n\n    /**\n     * append a FloatingButton to this menu\n     * @param  {FloatingButton} menuItem append an instance of  {@link FloatingButton} to this menu\n     */\n    append(menuItem) {\n        this.$el.append(menuItem.$el);\n    }\n}\n","\"use strict\";\n\nexport default class Fn {\n    static deepCopy(arr) {\n        return $.extend(true, [], arr);\n    }\n\n    static addMouseScrollEventListener(query, func) {\n        let MouseWheelHandler = event => {\n            var event = window.event || event; // old IE support\n            event.delta = Math.max(-1, Math.min(1, (event.wheelDelta || -event.detail)));\n\n            func(event)\n\n            return false;\n        }\n\n        // TODO add more backwards compatibility somehow\n        let svgelement = document.querySelector(query);\n\n        if (svgelement.addEventListener) {\n            // IE9, Chrome, Safari, Opera\n            svgelement.addEventListener(\"mousewheel\", MouseWheelHandler, false);\n            // Firefox\n            svgelement.addEventListener(\"DOMMouseScroll\", MouseWheelHandler, false);\n        } else  {\n            // IE 6/7/8\n            svgelement.attachEvent(\"onmousewheel\", MouseWheelHandler);\n        }\n        svgelement.addEventListener('mousewheel', function(e) {\n            console.log('event', e)\n        }, false)\n    }\n}\n","\"use strict\";\n\nexport class exportNetwork {\n    constructor(parentSVG) {\n        this.parentSVG = parentSVG;\n    }\n\n    get exportData() {\n        return this.parentSVG.exportData;\n    }\n\n    json(style = exportNetwork.style.compact, dataUri = false) {\n        if(dataUri) {\n            return 'data:application/json;charset=utf-8,'\n                + encodeURIComponent(this.json(style));\n        } else {\n            switch (style) {\n                case exportNetwork.style.compact:\n                    return JSON.stringify(this.exportData);\n                case exportNetwork.style.pretty:\n                    return JSON.stringify(this.exportData, null, 2);\n            }\n        }\n    }\n\n    static get style() {\n        return {\n            pretty: 0,\n            compact: 1\n        }\n    };\n}\n","\"use strict\";\n\n// logic functions used in the gate evaluation\nexport default class Logic {\n    static and(a, b) {\n        return Logic.testLogicRulesSymmetric(a, b, [\n            [Logic.state.on, Logic.state.on, Logic.state.on],\n            [Logic.state.on, Logic.state.off, Logic.state.off],\n            [Logic.state.on, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.on, Logic.state.oscillating, Logic.state.oscillating],\n\n            [Logic.state.off, Logic.state.off, Logic.state.off],\n            [Logic.state.off, Logic.state.unknown, Logic.state.off],\n            [Logic.state.off, Logic.state.oscillating, Logic.state.off],\n\n            [Logic.state.unknown, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.unknown, Logic.state.oscillating, Logic.state.unknown],\n\n            [Logic.state.oscillating, Logic.state.oscillating, Logic.state.oscillating]\n        ]);\n    }\n    static nand(a, b) {\n        return Logic.not(Logic.and(a, b));\n    }\n    static nor(a, b) {\n        return Logic.not(Logic.or(a, b));\n    }\n    static not(a) {\n        if(a === Logic.state.on) {\n            return Logic.state.off;\n        } else if (a === Logic.state.off) {\n            return Logic.state.on;\n        } else {\n            return a;\n        }\n    }\n    static or(a, b) {\n        return Logic.testLogicRulesSymmetric(a, b, [\n            [Logic.state.on, Logic.state.on, Logic.state.on],\n            [Logic.state.on, Logic.state.off, Logic.state.on],\n            [Logic.state.on, Logic.state.unknown, Logic.state.on],\n            [Logic.state.on, Logic.state.oscillating, Logic.state.on],\n\n            [Logic.state.off, Logic.state.off, Logic.state.off],\n            [Logic.state.off, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.off, Logic.state.oscillating, Logic.state.oscillating],\n\n            [Logic.state.unknown, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.unknown, Logic.state.oscillating, Logic.state.unknown],\n\n            [Logic.state.oscillating, Logic.state.oscillating, Logic.state.oscillating]\n        ]);\n    }\n    static xnor(a, b) {\n        return Logic.not(Logic.xor(a, b));\n    }\n    static xor(a, b) {\n        return Logic.testLogicRulesSymmetric(a, b, [\n            [Logic.state.on, Logic.state.on, Logic.state.off],\n            [Logic.state.on, Logic.state.off, Logic.state.on],\n            [Logic.state.on, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.on, Logic.state.oscillating, Logic.state.oscillating],\n\n            [Logic.state.off, Logic.state.off, Logic.state.off],\n            [Logic.state.off, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.off, Logic.state.oscillating, Logic.state.oscillating],\n\n            [Logic.state.unknown, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.unknown, Logic.state.oscillating, Logic.state.unknown],\n\n            [Logic.state.oscillating, Logic.state.oscillating, Logic.state.oscillating]\n        ]);\n    }\n\n    static get state() {\n        return {\n            unknown: 0,\n            on: 1,\n            off: 2,\n            oscillating: 3\n        }\n    }\n\n    static testLogicRulesSymmetric(a, b, rules) {\n        for (let i = 0 ; i < rules.length ; i++) {\n            if((rules[i][0]===a && rules[i][1]===b) || (rules[i][0]===b && rules[i][1]===a)) {\n                return rules[i][2];\n            }\n        }\n    }\n}","import Canvas from './canvas.js';\n\n/**\n * When the document is ready, initialize the application\n */\n$(() => {\n    new Canvas(\"#canvas\", 10);\n});\n","\nconst libraryDir = './library/'\n\nexport function getLibrary() {\n    return new Promise((resolve, reject) => {\n        const libraryFile = libraryDir + 'networkList.json';\n\n        let request = new XMLHttpRequest();\n\n        request.addEventListener(\"load\", function() {\n            if(this.response) {\n                resolve(this.response.networks);\n            }\n        });\n\n        request.open('GET', libraryFile, true);\n        request.responseType = 'json';\n        request.send();\n    });\n}\n\nexport function getNetworkFromLibrary(networkName) {\n    return new Promise((resolve, reject) => {\n        let request = new XMLHttpRequest();\n\n        request.addEventListener(\"load\", function() {\n            if(this.response) {\n                resolve(this.response);\n            }\n        });\n\n        request.open('GET', libraryDir + networkName + '.json', true);\n        request.responseType = 'json';\n        request.send();\n    });\n}\n","import Logic from './logic.js'\n\nclass stateChange {\n    constructor(connectorId, state, whoCausedIt) {\n        this.connectorId = connectorId\n        this.state = state\n        this.whoCausedIt = whoCausedIt\n    }\n}\n\n// all connectors mentioned here are OUTPUT CONNECTORS\nexport default class Simulation {\n    constructor(parentSVG) {\n        this.parentSVG = parentSVG\n\n        // maps each affected output connector to it's directly preceeding output connectors\n        this.predecessors = new Map();\n\n        // maps waveId -> array of outputConnectors affected\n        this.waves = new Map();\n        this.wave = 0\n\n        this.cycledConnectors = new Map()\n        this.resolvedCycledConnectors = new Set()\n\n    }\n\n    run() {\n        this.wave++;\n        while(this.waves.has(this.wave)) {\n            this.step()\n            this.waves.delete(this.wave) // clean old waves on the go\n            this.wave++\n        }\n    }\n\n    step() {\n        for (let {connectorId, state, whoCausedIt} of this.waves.get(this.wave)) {\n            // skip resolved cycles\n            if(this.resolvedCycledConnectors.has(connectorId)) {\n                continue\n            }\n\n            // skip connector that are cycles\n            if (this.cycledConnectors.has(connectorId)) {\n                // get the set of states that this connector appeared from the moment the signal first cycled\n                let states = this.cycledConnectors.get(connectorId)\n\n                // if the connector already had this state in this cycle, resolve the cycle\n                if(states.has(state)) {\n\n                    // if there are more states in the set, the connector is oscillating\n                    // (else it keeps its state and we just break the cycle)\n                    if(states.size > 1) {\n                        state = Logic.state.oscillating\n                    }\n\n                    // mark this connector as resolved\n                    this.resolvedCycledConnectors.add(connectorId)\n\n                // this is a new, unseen state, add it to the set and continue simulating the cycle\n                } else {\n                    states.add(state)\n                }\n\n                // map the modified set of states to the connector\n                this.cycledConnectors.set(connectorId, states)\n            }\n\n            this.whoCausedIt = connectorId\n            /*  process all outputConnectors by setting their state\n                this will trigger a following event chain:\n                    outputConnector changes\n                    -> all connected wires change\n                    -> all inputConnectors connected to these wires change\n                    -> all elements that contain these inputConnectors change\n                    -> these elements compute the new state of their output connectors and call notifyChange()\n            */\n\n\n            if(whoCausedIt) {\n                this.addPredecessor(connectorId, whoCausedIt)\n            }\n\n            if (!this.cycledConnectors.has(connectorId) && this.getAllPredecessors(connectorId).has(connectorId)) {\n                this.cycledConnectors.set(connectorId, new Set([state]))\n            }\n\n\n            // reflect the changes in SVG\n            let connector = this.parentSVG.getConnectorById(connectorId)\n            if(connector) {\n                connector.setState(state)\n            }\n        }\n        this.whoCausedIt = undefined\n    }\n\n    // mark a predecessorConnectorId as a predecessor of connectorId\n    addPredecessor(connectorId, predecessorConnectorId) {\n        if(!this.predecessors.has(connectorId)) {\n            this.predecessors.set(connectorId, new Set())\n        }\n\n        this.predecessors.get(connectorId).add(predecessorConnectorId)\n    }\n\n    // returns set of all output connectors, that are before this output connector\n    getAllPredecessors(connectorId) {\n        if(!this.predecessors.has(connectorId)) {\n            this.predecessors.set(connectorId, new Set())\n        }\n\n        let all = new Set()\n\n        this.predecessors.get(connectorId).forEach(all.add, all);\n\n        let prevSize = 0\n        let size = all.size\n        while(prevSize < size) {\n            for (let connector of all) {\n                if (this.predecessors.has(connector)) {\n                    this.predecessors.get(connector).forEach(all.add, all);\n                }\n            }\n            prevSize = size\n            size = all.size\n        }\n\n        return all\n    }\n\n    notifyChange(connectorId, state) {\n        let waveId = this.wave + 1\n\n        if(!this.waves.has(waveId)) {\n            this.waves.set(waveId, [])\n        }\n\n        this.waves.get(waveId).push(new stateChange(connectorId, state, this.whoCausedIt));\n    }\n}\n","\"use strict\";\n\n// singleton to generate unique id's\nlet existingIdInstance = null;\n// usage: let id = new Id().unique\nexport class Id {\n    constructor() {\n        if(!existingIdInstance){\n            existingIdInstance = this;\n        }\n\n        this.prefix = \"id\";\n        this.nextId = 0;\n\n        return existingIdInstance;\n    }\n\n    get unique() {\n        let retVal = this.generate();\n\n        // find next unused idXXXX to prevent id collision that might be caused by some other component\n        // (it really should not happen, but this is a simple method to ensure safety)\n        while($(\"#\"+retVal).length) {\n            this.nextId++;\n            retVal = this.generate();\n        }\n        // return this id\n        this.nextId++;\n\n        return retVal;\n    }\n\n    generate() {\n        return this.prefix + this.nextId;\n    }\n}\n\n// to es5 compiler friendly implementation (\"calling a builtin Map constructor without new is forbidden\")\nexport class MapWithDefaultValue {\n    constructor(defaultValue) {\n        this.map = new Map();\n        this.default = defaultValue;\n\n\n    }\n\n    get size() {\n        return this.map.size;\n    }\n\n    clear() {\n        return this.map.clear();\n    }\n\n    forEach(...args) {\n        return this.map.forEach(...args);\n    }\n\n    get(key) {\n        return this.map.get(key);\n    }\n\n    delete(key) {\n        return this.map.delete(key);\n    }\n\n    set(key, value) {\n        return this.map.set(key, value);\n    }\n\n    has(key) {\n        return this.map.has(key);\n    }\n\n    entries() {\n        return this.map.entries();\n    }\n\n    keys() {\n        return this.map.keys();\n    }\n\n    values() {\n        return this.map.values();\n    }\n}\n\n/*\n// es6 implementation\nexport class MapWithDefaultValue extends Map {\n    constructor(defaultValue) {\n        super();\n\n        this.default = defaultValue;\n    }\n\n    get(key) {\n        if(this.has(key)) {\n            return super.get(key);\n        } else {\n            return this.default;\n        }\n    }\n}\n*/","import * as Structures from './structuresAndClasses.js'\n\nclass Tag {\n    constructor(tagName) {\n        this.tagName = tagName;\n\n        this.$el = $(\"<\"+this.tagName+\">\");\n\n        this.id = new Structures.Id().unique;\n    }\n\n    addClass(name) {\n        this.$el.addClass(name);\n    }\n\n    removeClasses(...classes) {\n        for(let item of classes) {\n            this.$el.removeClass(item);\n        }\n    }\n\n    addAttr(assoc) {\n        this.checkIfElementExistsInDOM();\n\n        // add attributes to the element\n        this.$el.attr(assoc);\n    }\n\n    getAttr(name) {\n        this.checkIfElementExistsInDOM();\n\n        return this.$el.attr(name);\n    }\n\n    removeAttr(name) {\n        this.checkIfElementExistsInDOM();\n\n        this.$el.removeAttr(name);\n    }\n\n    set id(id) {\n        this.addAttr({\"id\": id});\n    };\n\n    get id() {\n        return this.getAttr(\"id\");\n    };\n\n    get() {\n        this.checkIfElementExistsInDOM();\n        return this.$el;\n    }\n\n    // if the element exists in dom, we need to fetch it using jQuery\n    checkIfElementExistsInDOM() {\n        let $jqElement = $(\"#\"+this.$el.attr('id'));\n        if($jqElement.length) {\n            this.$el = $jqElement;\n        }\n    }\n}\n\nclass Draggable extends Tag {\n    constructor(tagName) {\n        super(tagName);\n    }\n\n    draggable(value) {\n        this.addAttr({\"draggable\": value});\n    }\n}\n\nclass Rotatable extends Tag {\n    constructor(tagName) {\n        super(tagName);\n    }\n\n    rotatable(value) {\n        this.addAttr({\"rotatable\": value});\n    }\n}\n\n// there is no multiple inheritance in ES6, so I have to do something ugly like this\nclass DraggableRotatable extends Draggable {\n    constructor(tagName) {\n        super(tagName);\n    }\n\n    rotatable(value) {\n        this.addAttr({\"rotatable\": value});\n    }\n}\n\nclass SvgElement extends DraggableRotatable {\n    constructor(x, y, w, h, tagName) {\n        super(tagName);\n\n        this.addAttr({\n            x: x,\n            y: y,\n            width: w,\n            height: h\n        });\n    }\n}\n\nexport class Rectangle extends SvgElement {\n    constructor(x, y, w, h, fill, stroke) {\n        super(x, y, w, h, \"rect\");\n        this.addAttr({\n            fill: fill,\n            stroke: stroke,\n            'stroke-width': 0.5,\n            'pointer-events': 'all' // to trigger hover even with transparent background\n        });\n    }\n}\n\nexport class SvgImage extends SvgElement {\n    constructor(x, y, w, h, url) {\n        super(x, y, w, h, \"image\");\n        this.addAttr({\n            \"xlink:href\": url\n        });\n    }\n\n    changeUrl(url) {\n        this.addAttr({\n            \"xlink:href\": url\n        });\n    }\n}\n\nexport class Group extends DraggableRotatable {\n    constructor() {\n        super(\"g\");\n    }\n\n    addChild(el) {\n        this.$el.append(el.$el);\n        return el; // pro jednodussi \"let rect = g.addChild(new Rectangle(...\"\n    }\n}\n\nexport class PolylinePoint {\n    constructor(x, y) {\n        this.x = 0;\n        this.y = 0;\n        if(x !== undefined && y !== undefined) {\n            this.x = x;\n            this.y = y;\n        }\n    }\n\n    set(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    static parseFromString(string) {\n        let arr = string.split(\",\");\n        return new PolylinePoint(arr[0], arr[1]);\n    }\n\n    get string() {\n        return this.x + \",\" + this.y;\n    }\n\n    static equals(a, b) {\n        return a.x === b.x && a.y === b.y;\n    }\n}\n\nclass SmartArray {\n    constructor(arr) {\n        if(arr !== undefined) {\n            this.arr = arr;\n        } else {\n            this.arr = [];\n        }\n    }\n\n    copy() {\n        return SmartArray($.extend(true, [], this.arr));\n    }\n\n    append(point) {\n        return this.addWithIndex(point, this.arr.length);\n    }\n\n    prepend(point) {\n        return this.addWithIndex(point, 0);\n    }\n\n    // add a point at the specified index, move all following items\n    addWithIndex(point, index) {\n        for(let i = this.arr.length ; i > index ; --i) {\n            this.arr[i] = this.arr[i-1];\n        }\n        this.arr[index] = point;\n        return this; // to enable chaining of append / preppend / addWithIndex commands\n    }\n\n    get length() {\n        return this.arr.length;\n    }\n\n    getItem(index) {\n        return this.arr[index];\n    }\n\n    get last() {\n        if(this.length!==0) {\n            return this.arr[this.length - 1];\n        } else {\n            return false;\n        }\n    }\n\n    get first() {\n        if(this.length!==0) {\n            return this.arr[0];\n        } else {\n            return false;\n        }\n    }\n\n    // indexArray must be sorted (ASC, eg. [1, 3, 4, 8])\n    remove(index) {\n        let length = this.length;\n\n        for(let i = index ; i < length ; ++i) {\n            this.arr[i] = this.arr[i + 1];\n        }\n        this.arr.pop();\n    }\n}\n\nexport class PolylinePoints extends SmartArray {\n    constructor(arr) {\n        super(arr);\n    }\n\n    copy() {\n        return new PolylinePoints($.extend(true, [], this.arr));\n    }\n\n    append(point) {\n        // call inherited function to handle the appending\n        super.append(point);\n\n        // if the second to last point is unnecessary, remove it\n        let length = this.length;\n        if ( length >= 3\n                && (    ( this.getItem(length - 3).x === this.getItem(length - 2).x &&\n                          this.getItem(length - 2).x === this.getItem(length - 1).x )\n                     || ( this.getItem(length - 3).y === this.getItem(length - 2).y &&\n                          this.getItem(length - 2).y === this.getItem(length - 1).y )\n                   )\n           )\n        {\n            this.remove(length - 2);\n        }\n\n        // return this element (to allow chaining)\n        return this;\n    }\n\n\n    static parseFromString(string) {\n        let pointStrings = string.split(\" \");\n        let points = new PolylinePoints();\n\n        for(let i = 0 ; i < pointStrings.length ; ++i) {\n            points.append(PolylinePoint.parseFromString(pointStrings[i]));\n        }\n\n        return points;\n    }\n\n    get string() {\n        let string = \"\";\n        for(let i = 0 ; i < this.length ; ++i) {\n            if(i !== 0) {\n                string += \" \";\n            }\n            string += this.arr[i].string;\n        }\n        return string;\n    }\n\n    forEach(func) {\n        for(let i = 0 ; i < this.arr.length ; ++i) {\n            func(this.arr[i]);\n        }\n    }\n}\n\nexport class PolyLine extends Tag {\n    constructor(points, color, strokeWidth) {\n        super(\"polyline\");\n\n        this.addAttr({\n            points: points.string,\n            stroke: color,\n            fill: \"none\",\n            \"stroke-width\": strokeWidth\n        });\n    }\n\n    updatePoints(points) {\n        this.addAttr({\n            points: points.string\n        });\n    }\n}\n\nexport class Pattern extends Tag {\n    constructor(id, width, height) {\n        super(\"pattern\");\n\n        this.addAttr({\n            id: id,\n            x: 0,\n            y: 0,\n            width: width,\n            height: height,\n            patternUnits: \"userSpaceOnUse\",\n            viewBox: \"0 0 \"+width+\" \"+height\n        });\n    }\n\n    addChild(el) {\n        this.$el.append(el.$el);\n        return el; // pro jednodussi \"let rect = g.addChild(new Rectangle(...\"\n    }\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZXM2L2NhbnZhcy5qcyIsInNyYy9lczYvY29udGV4dE1lbnUuanMiLCJzcmMvZXM2L2VkaXRvckVsZW1lbnRzLmpzIiwic3JjL2VzNi9mbG9hdGluZ01lbnUuanMiLCJzcmMvZXM2L2ZuLmpzIiwic3JjL2VzNi9pbXBvcnRFeHBvcnQuanMiLCJzcmMvZXM2L2xvZ2ljLmpzIiwic3JjL2VzNi9tYWluLmpzIiwic3JjL2VzNi9uZXR3b3JrTGlicmFyeS5qcyIsInNyYy9lczYvc2ltdWxhdGlvbi5qcyIsInNyYy9lczYvc3RydWN0dXJlc0FuZENsYXNzZXMuanMiLCJzcmMvZXM2L3N2Z09iamVjdHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTs7Ozs7Ozs7QUFFQTs7SUFBWSxNOztBQUNaOztJQUFZLGM7O0FBQ1o7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7OztBQUVBOzs7SUFHTSxPO0FBQ0Y7Ozs7Ozs7QUFPQSxxQkFBWSxJQUFaLEVBQWtCLEdBQWxCLEVBQXVCLEtBQXZCLEVBQThCLE1BQTlCLEVBQXNDO0FBQUE7O0FBQ2xDOzs7O0FBSUEsYUFBSyxJQUFMLEdBQVksRUFBRSxVQUFGLEVBQVEsUUFBUixFQUFhLFlBQWIsRUFBb0I7O0FBRWhDOzs7O0FBRlksU0FBWixDQU1BLEtBQUssT0FBTCxHQUFlLENBQWY7QUFDQTs7OztBQUlBLGFBQUssT0FBTCxHQUFlLEdBQWY7O0FBRUE7Ozs7QUFJQSxhQUFLLFFBQUwsR0FBZ0IsQ0FBaEI7O0FBRUE7Ozs7QUFJQSxhQUFLLFNBQUwsR0FBaUIsQ0FBakI7QUFDQTs7OztBQUlBLGFBQUssUUFBTCxHQUFnQixDQUFoQjtBQUNIOztBQUVEOzs7Ozs7Ozs7O0FBeURBOzs7OzttQ0FLVyxDLEVBQUc7QUFDVixtQkFBTyxLQUFLLElBQUwsR0FBYSxJQUFJLEtBQUssSUFBN0I7QUFDSDs7QUFF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QUFQO0FBQ0g7Ozs7RUF4QytCLFU7O0lBNER2QixRLFdBQUEsUTs7O0FBQ1Qsc0JBQVksTUFBWixFQUFvQixLQUFwQixFQUEyQixXQUEzQixFQUF3QztBQUFBOztBQUFBLHlIQUM5QixVQUQ4Qjs7QUFHcEMsZUFBSyxPQUFMLENBQWE7QUFDVCxvQkFBUSxPQUFPLE1BRE47QUFFVCxvQkFBUSxLQUZDO0FBR1Qsa0JBQU0sTUFIRztBQUlULDRCQUFnQjtBQUpQLFNBQWI7QUFIb0M7QUFTdkM7Ozs7cUNBRVksTSxFQUFRO0FBQ2pCLGlCQUFLLE9BQUwsQ0FBYTtBQUNULHdCQUFRLE9BQU87QUFETixhQUFiO0FBR0g7Ozs7RUFoQnlCLEc7O0lBbUJqQixPLFdBQUEsTzs7O0FBQ1QscUJBQVksRUFBWixFQUFnQixLQUFoQixFQUF1QixNQUF2QixFQUErQjtBQUFBOztBQUFBLHdIQUNyQixTQURxQjs7QUFHM0IsZ0JBQUssT0FBTCxDQUFhO0FBQ1QsZ0JBQUksRUFESztBQUVULGVBQUcsQ0FGTTtBQUdULGVBQUcsQ0FITTtBQUlULG1CQUFPLEtBSkU7QUFLVCxvQkFBUSxNQUxDO0FBTVQsMEJBQWMsZ0JBTkw7QUFPVCxxQkFBUyxTQUFPLEtBQVAsR0FBYSxHQUFiLEdBQWlCO0FBUGpCLFNBQWI7QUFIMkI7QUFZOUI7Ozs7aUNBRVEsRSxFQUFJO0FBQ1QsaUJBQUssR0FBTCxDQUFTLE1BQVQsQ0FBZ0IsR0FBRyxHQUFuQjtBQUNBLG1CQUFPLEVBQVAsQ0FGUyxDQUVFO0FBQ2Q7Ozs7RUFsQndCLEciLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfXJldHVybiBlfSkoKSIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgKiBhcyBzdmdPYmogZnJvbSAnLi9zdmdPYmplY3RzLmpzJ1xuaW1wb3J0ICogYXMgZWRpdG9yRWxlbWVudHMgZnJvbSAnLi9lZGl0b3JFbGVtZW50cy5qcydcbmltcG9ydCBMb2dpYyBmcm9tICcuL2xvZ2ljLmpzJ1xuaW1wb3J0IENvbnRleHRNZW51IGZyb20gJy4vY29udGV4dE1lbnUuanMnXG5pbXBvcnQgRmxvYXRpbmdNZW51IGZyb20gJy4vZmxvYXRpbmdNZW51LmpzJ1xuaW1wb3J0IFNpbXVsYXRpb24gZnJvbSAnLi9zaW11bGF0aW9uLmpzJ1xuaW1wb3J0IEZuIGZyb20gJy4vZm4uanMnXG5cbi8qKlxuICogVmlld0JveCBwcm92aWRlcyBhbiBhcGkgZm9yIG9wcmVyYXRpbmcgd2l0aCB0aGUgdmlld0JveCBhcmd1bWVudCBvZiB0aGUgPHN2Zz4gRE9NIGVsZW1lbnQuXG4gKi9cbmNsYXNzIFZpZXdCb3gge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdmlld0JveFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0ICAgZGlzdGFuY2Ugb2YgdGhlIGxlZnQgZWRnZSBvZiB0aGUgdmlld2JveCBmcm9tIGRvY3VtZW50J3MgeSBheGlzIGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9wICAgIGRpc3RhbmNlIG9mIHRoZSB0b3AgZWRnZSBvZiB0aGUgdmlld2JveCBmcm9tIHRoZSBkb2N1bWVudCdzIHggYXhpcyBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoICB3aWR0aCBvZiB0aGUgdmlld2JveCBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBoZWlnaHQgb2YgdGhlIHZpZXdib3ggaW4gU1ZHIHBpeGVsc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVmlld0JveCBhdHRyaWJ1dGVzIGJlZm9yZSBhcHBseWluZyB6b29tIGFuZCBzaGlmdFxuICAgICAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWFsID0geyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWF4aW11bSBhbW91bnQgb2Ygem9vbSBvbiB0aGUgdmlld2JveFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhab29tID0gODtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtaW5pbXVtIGFtb3VudCBvZiB6b29tIG9uIHRoZSB2aWV3Ym94XG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblpvb20gPSAwLjE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFtb3VudCBvZiB6b29tIG9uIHRoZSB2aWV3Ym94LCBhbHdheXMgYmV0d2VlbiB0aGlzLm1pblpvb20gYW5kIHRoaXMubWF4Wm9vbVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWFsWm9vbSA9IDFcblxuICAgICAgICAvKipcbiAgICAgICAgICogYW1vdW50IG9mIGhvcml6b250YWwgc2hpZnQgb2YgdGhlIGRvY3VtZW50XG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxlZnRTaGlmdCA9IDBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFtb3VudCBvZiB2ZXJ0aWNhbCBzaGlmdCBvZiB0aGUgZG9jdW1lbnRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudG9wU2hpZnQgPSAwXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IHRoZSBhbW91bnQgb2Ygem9vbSBvbiB0aGUgdmlld2JveFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgem9vbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbFpvb207XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IHRoZSBhbW91bnQgb2Ygem9vbSBvbiB0aGUgdmlld2JveFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSB0aGUgbmV3IGFtb3VudCBvZiB6b29tXG4gICAgICovXG4gICAgc2V0IHpvb20odmFsdWUpIHtcbiAgICAgICAgLy8gZml0IHRoaXMucmVhbFpvb20gdG8gZml0IGJldHdlZW4gdGhpcy5taW5ab29tIGFuZCB0aGlzLm1heFpvb21cbiAgICAgICAgdGhpcy5yZWFsWm9vbSA9IE1hdGgubWF4KE1hdGgubWluKHZhbHVlLCB0aGlzLm1heFpvb20pLCB0aGlzLm1pblpvb20pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCB0aGUgd2lkdGggb2YgdGhlIHZpZXdib3ggd2l0aCB0aGUgY3VycmVudCB6b29tIGFwcGxpZWRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBmaW5hbCB3aWR0aCBvZiB0aGUgdmlld2JveFxuICAgICAqL1xuICAgIGdldCB3aWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbC53aWR0aCAvIHRoaXMuem9vbVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCB0aGUgaGVpZ2h0IG9mIHRoZSB2aWV3Ym94IHdpdGggdGhlIGN1cnJlbnQgem9vbSBhcHBsaWVkXG4gICAgICogQHJldHVybiB7bnVtYmVyfSB0aGUgZmluYWwgaGVpZ2h0IG9mIHRoZSB2aWV3Ym94XG4gICAgICovXG4gICAgZ2V0IGhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbC5oZWlnaHQgLyB0aGlzLnpvb21cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIGhvcml6b250YWwgZGlzdGFuY2UgZnJvbSB0aGUgeSBheGlzIG9mIHRoZSBkb2N1bWVudCB3aXRoIHpvb20gYW5kIHNoaWZ0IHZhbHVlIGFwcGxpZWRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGxlZnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWwubGVmdCAtICh0aGlzLmxlZnRTaGlmdCAvIHRoaXMuem9vbSkgKyAoKHRoaXMucmVhbC53aWR0aCAtIHRoaXMud2lkdGgpIC8gMilcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIHZlcnRpY2FsIGRpc3RhbmNlIGZyb20gdGhlIHggYXhpcyBvZiB0aGUgZG9jdW1lbnQgd2l0aCB6b29tIGFuZCBzaGlmdCB2YWx1ZSBhcHBsaWVkXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCB0b3AoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWwudG9wIC0gKHRoaXMudG9wU2hpZnQgLyB0aGlzLnpvb20pICsgKCh0aGlzLnJlYWwuaGVpZ2h0IC0gdGhpcy5oZWlnaHQpIC8gMilcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIGNvbXB1dGVkIHZpZXdib3ggdmFsdWVzIGFzIGEgc3RyaW5nIGluIHRoZSBjb3JyZWN0IGZvcm1hdCB0aGF0IGNhbiBiZSB1c2VkIGluIHRoZSB2aWV3Qm94IGF0dHJpYnV0ZSBvZiB0aGUgU1ZHIGVsZW1lbnRcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IHN0cmluZyBpbiBmb3JtYXQgXCJsZWZ0IHRvcCB3aWR0aCBoZWlnaHRcIlxuICAgICAqL1xuICAgIGdldCBzdHIoKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmxlZnR9ICR7dGhpcy50b3B9ICR7dGhpcy53aWR0aH0gJHt0aGlzLmhlaWdodH1gXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdHJhbnNmb3JtIGhvcml6b250YWwgdW5pdHMgdG8gdGhlIHNjYWxlIGFuZCBzaGlmdCBvZiB0aGUgZWRpdG9yXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB4IG9yaWdpbmFsIGhvcml6b250YWwgdmFsdWVcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9ICAgdHJhbnNmb3JtZWQgaG9yaXpvbnRhbCB2YWx1ZVxuICAgICAqL1xuICAgIHRyYW5zZm9ybVgoeCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0ICsgKHggLyB0aGlzLnpvb20pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdHJhbnNmb3JtIHZlcnRpY2FsIHVuaXRzIHRvIHRoZSBzY2FsZSBhbmQgc2hpZnQgb2YgdGhlIGVkaXRvclxuICAgICAqIEBwYXJhbSAge251bWJlcn0geSBvcmlnaW5hbCB2ZXJ0aWNhbCB2YWx1ZVxuICAgICAqIEByZXR1cm4ge251bWJlcn0gICB0cmFuc2Zvcm1lZCB2ZXJ0aWNhbCB2YWx1ZVxuICAgICAqL1xuICAgIHRyYW5zZm9ybVkoeSkge1xuICAgICAgICByZXR1cm4gdGhpcy50b3AgKyAoeSAvIHRoaXMuem9vbSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB0cmFuc2Zvcm0gcGFnZVggYW5kIHBhZ2VZIHBhcmFtZXRlcnMgb2YgdGhlIGpxdWVyeSBldmVudCB0byBtYXRjaCB0aGUgem9vbSBhbmQgc2hpZnQgb2YgdGhlIHZpZXdib3hcbiAgICAgKiBAcGFyYW0gIHtqcXVlcnkuTW91c2VFdmVudH0gZXZlbnQgb3JpZ2luYWwgZXZlbnRcbiAgICAgKiBAcmV0dXJuIHtqcXVlcnkuTW91c2VFdmVudH0gICAgICAgdGhlIHNhbWUgZXZlbnQgYnV0IHdpdGggdHJhbnNmb3JtZWQgcGFnZVggYW5kIHBhZ2VZIG1lbWJlcnNcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1FdmVudChldmVudCkge1xuICAgICAgICBldmVudC5wYWdlWCA9IHRoaXMudHJhbnNmb3JtWChldmVudC5wYWdlWClcbiAgICAgICAgZXZlbnQucGFnZVkgPSB0aGlzLnRyYW5zZm9ybVkoZXZlbnQucGFnZVkpXG5cbiAgICAgICAgcmV0dXJuIGV2ZW50XG4gICAgfVxufVxuXG5jb25zdFxuICAgIGN0cmxLZXkgPSAxNyxcbiAgICBjbWRLZXkgPSA5MTtcblxuLyoqIEBtb2R1bGUgQ2FudmFzICovXG4vKipcbiAqIE1haW4gY2xhc3Mgb2YgdGhlIGFwcGxpY2F0aW9uLiBJdCByZXByZXNlbnRzIGFuIGluc3RhbmNlIG9mIHRoZSB3aG9sZSBlZGl0b3IgYW5kIGhvbGRzXG4gKiByZWZlcmVuY2VzIHRvIGFsbCBpdHMgZWxlbWVudHMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhcyB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgU3ZnIGNsYXNzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNhbnZhcyAgIHF1ZXJ5IHNlbGVjdG9yIG9mIHRoZSBTVkcgZWxlbWVudCwgdGhhdCB3aWxsIGNvbnRhaW4gYWxsIFNWRyBjb250ZW50IG9mIHRoZSBhcHBsaWNhdGlvblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBncmlkU2l6ZSBpbml0aWFsIHNpemUgb2YgdGhlIGdyaWQgaW4gU1ZHIHBpeGVsc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNhbnZhcywgZ3JpZFNpemUpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGpRdWVyeSBlbGVtZW50IGZvciB0aGUgU1ZHIGRvY3VtZW50XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLiRzdmcgPSAkKGNhbnZhcyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHNwYWNlIGJldHdlZW4gZ3JpZCBsaW5lcyBpbiBTVkcgcGl4ZWxzXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdyaWRTaXplID0gZ3JpZFNpemU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFycmF5IG9mIGFsbCBib3hlcyAoaW5zdGFuY2VzIG9mIG9iamVjdHMgZGVyaXZlZCBmcm9tIGVkaXRvckVsZW1lbnRzLkJveCkgdXNlZCBvbiBDYW52YXNcbiAgICAgICAgICogQHR5cGUge0FycmF5fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ib3hlcyA9IFtdOyAvLyBzdG9yZXMgYWxsIGJveGVzXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFycmF5IG9mIGFsbCB3aXJlcyAoaW5zdGFuY2VzIG9mIGVkaXRvckVsZW1lbnRzLldpcmUpIHVzZWQgb24gQ2FudmFzXG4gICAgICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2lyZXMgPSBbXTsgLy8gc3RvcmVzIGFsbCB3aXJlc1xuXG4gICAgICAgIHRoaXMuc2ltdWxhdGlvbkVuYWJsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuc2ltdWxhdGlvbiA9IG5ldyBTaW11bGF0aW9uKHRoaXMpOyAvLyBkdW1teSwgd2lsbCBiZSBvdmVyd3JpdHRlbiBvbiBzdGFydE5ld1NpbXVsYXRpb25cblxuICAgICAgICAvLyBjcmVhdGUgdGhlIGRlZnMgZWxlbWVudCwgdXNlZCBmb3IgcGF0dGVybnNcbiAgICAgICAgdGhpcy4kZGVmcyA9ICQoXCI8ZGVmcz5cIik7XG4gICAgICAgIHRoaXMuJHN2Zy5wcmVwZW5kKHRoaXMuJGRlZnMpO1xuXG4gICAgICAgIC8vIEJBQ0tHUk9VTkQgUEFUVEVSTlxuICAgICAgICBsZXQgcGF0dGVybiA9IG5ldyBzdmdPYmouUGF0dGVybihcImdyaWRcIiwgdGhpcy5ncmlkU2l6ZSwgdGhpcy5ncmlkU2l6ZSk7XG5cbiAgICAgICAgbGV0IHBhdHRlcm5Qb2ludHMgPSBuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnRzKClcbiAgICAgICAgICAgIC5hcHBlbmQobmV3IHN2Z09iai5Qb2x5bGluZVBvaW50KDAsIDApKVxuICAgICAgICAgICAgLmFwcGVuZChuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnQodGhpcy5ncmlkU2l6ZSwgMCkpXG4gICAgICAgICAgICAuYXBwZW5kKG5ldyBzdmdPYmouUG9seWxpbmVQb2ludCh0aGlzLmdyaWRTaXplLCB0aGlzLmdyaWRTaXplKSk7XG5cbiAgICAgICAgcGF0dGVybi5hZGRDaGlsZChuZXcgc3ZnT2JqLlBvbHlMaW5lKHBhdHRlcm5Qb2ludHMsIFwiI2EzYTRkMlwiLCAyKSk7XG4gICAgICAgIHRoaXMuYWRkUGF0dGVybihwYXR0ZXJuLmdldCgpKTtcblxuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSBuZXcgc3ZnT2JqLlJlY3RhbmdsZSgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgXCJ1cmwoI2dyaWQpXCIsIFwibm9uZVwiKTtcbiAgICAgICAgdGhpcy5hcHBlbmRKUXVlcnlPYmplY3QodGhpcy5iYWNrZ3JvdW5kLmdldCgpKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG5cbiAgICAgICAgLy8gc2V0IHRoZSB2aWV3Ym94IGZvciBmdXR1cmUgem9vbWluZyBhbmQgbW92aW5nIG9mIHRoZSBjYW52YXNcbiAgICAgICAgdGhpcy4kc3ZnLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pbllNaW4gc2xpY2UnKVxuICAgICAgICB0aGlzLnZpZXdib3ggPSBuZXcgVmlld0JveCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodClcbiAgICAgICAgdGhpcy5hcHBseVZpZXdib3goKVxuXG4gICAgICAgIC8vIENPTlNUUlVDVCBDT05URVhUIE1FTlVcbiAgICAgICAgdGhpcy5jb250ZXh0TWVudSA9IG5ldyBDb250ZXh0TWVudSh0aGlzKTtcblxuICAgICAgICAvLyBDT05TVFJVQ1QgRkxPQVRJTkcgTUVOVVxuICAgICAgICB0aGlzLmZsb2F0aW5nTWVudSA9IG5ldyBGbG9hdGluZ01lbnUodGhpcyk7XG5cbiAgICAgICAgLy8gQUxMIEVWRU5UIENBTExCQUNLU1xuICAgICAgICBsZXQgdGFyZ2V0O1xuICAgICAgICB0aGlzLiRzdmcub24oJ21vdXNlZG93bicsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIHRhcmdldCA9IHRoaXMuZ2V0UmVhbFRhcmdldChldmVudC50YXJnZXQpO1xuICAgICAgICAgICAgaWYodGFyZ2V0IT09dW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgLy8gcHJvcGFnYXRlIG1vdXNlZG93biB0byB0aGUgcmVhbCB0YXJnZXRcbiAgICAgICAgICAgICAgICB0YXJnZXQub25Nb3VzZURvd24oZXZlbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBtb3VzZWRvd24gaGFwcGVuZWQgZGlyZWN0bHkgb24gdGhlIHN2Z1xuICAgICAgICAgICAgICAgIHRoaXMub25Nb3VzZURvd24oZXZlbnQpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuaGlkZUNvbnRleHRNZW51KCk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KS5vbignbW91c2Vtb3ZlJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgaWYodGFyZ2V0IT09dW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Lm9uTW91c2VNb3ZlKGV2ZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbW91c2Vtb3ZlIGhhcHBlbmVkIGRpcmVjdGx5IG9uIHRoZSBzdmdcbiAgICAgICAgICAgICAgICB0aGlzLm9uTW91c2VNb3ZlKGV2ZW50KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KS5vbignbW91c2V1cCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYodGFyZ2V0IT09dW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Lm9uTW91c2VVcChldmVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG1vdXNldXAgaGFwcGVuZWQgZGlyZWN0bHkgb24gdGhlIHN2Z1xuICAgICAgICAgICAgICAgIHRoaXMub25Nb3VzZVVwKGV2ZW50KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0YXJnZXQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pLm9uKFwiY29udGV4dG1lbnVcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5Q29udGV4dE1lbnUoZXZlbnQucGFnZVgsIGV2ZW50LnBhZ2VZLCB0aGlzLmdldFJlYWxKUXVlcnlUYXJnZXQoZXZlbnQudGFyZ2V0KSk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KVxuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXlkb3duJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgdGhpcy5vbktleURvd24oZXZlbnQpO1xuICAgICAgICB9KS5vbihcImtleXVwXCIsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIHRoaXMub25LZXlVcChldmVudCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIEZuLmFkZE1vdXNlU2Nyb2xsRXZlbnRMaXN0ZW5lcihjYW52YXMsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIC8vIHpvb20gb25seSBpZiB0aGUgY3RybCBrZXkgaXMgcHJlc3NlZFxuICAgICAgICAgICAgaWYoZXZlbnQuY3RybEtleSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuZGVsdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tICs9IDAuMVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbSAtPSAwLjFcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB3aWR0aCBvZiB0aGUgbWFpbiBTVkcgZWxlbWVudFxuICAgICAqIEByZXR1cm4ge251bWJlcn0gd2lkdGggb2YgdGhlIFNWRyBlbGVtZW50IGluIHBpeGVsc1xuICAgICAqL1xuICAgIGdldCB3aWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHN2Zy53aWR0aCgpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBoZWlnaHQgb2YgdGhlIG1haW4gU1ZHIGVsZW1lbnRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IGhlaWdodCBvZiB0aGUgU1ZHIGVsZW1lbnQgaW4gcGl4ZWxzXG4gICAgICovXG4gICAgZ2V0IGhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHN2Zy5oZWlnaHQoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgYWxsIGtleWRvd24gZXZlbnRzIHRoYXQgYXJlIGNvbm5lY3RlZCB0byBDYW52YXNcbiAgICAgKiBAcGFyYW0gIHtqcXVlcnkuS2V5Ym9hcmRFdmVudH0gZXZlbnQgS2V5Ym9hcmRFdmVudCBnZW5lcmF0ZWQgYnkgYSBsaXN0ZW5lclxuICAgICAqL1xuICAgIG9uS2V5RG93bihldmVudCkge1xuICAgICAgICBpZihldmVudC5rZXlDb2RlID09PSBjdHJsS2V5IHx8IGV2ZW50LmtleUNvZGUgPT09IGNtZEtleSkge1xuICAgICAgICAgICAgdGhpcy4kc3ZnLmFkZENsYXNzKCdncmFiYmFibGUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgYWxsIGtleXVwIGV2ZW50cyB0aGF0IGFyZSBjb25uZWN0ZWQgdG8gQ2FudmFzXG4gICAgICogQHBhcmFtICB7anF1ZXJ5LktleWJvYXJkRXZlbnR9IGV2ZW50IEtleWJvYXJkRXZlbnQgZ2VuZXJhdGVkIGJ5IGEgbGlzdGVuZXJcbiAgICAgKi9cbiAgICBvbktleVVwKGV2ZW50KSB7XG4gICAgICAgIGlmKGV2ZW50LmtleUNvZGUgPT09IGN0cmxLZXkgfHwgZXZlbnQua2V5Q29kZSA9PT0gY21kS2V5KSB7XG4gICAgICAgICAgICB0aGlzLiRzdmcucmVtb3ZlQ2xhc3MoJ2dyYWJiYWJsZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2VzcyBhbGwgbW91c2Vkb3duIGV2ZW50cyB0aGF0IGFyZSBoYXBwZW5pbmcgZGlyZWN0bHkgb24gdGhlIENhbnZhc1xuICAgICAqIEBwYXJhbSAge2pxdWVyeS5Nb3VzZUV2ZW50fSBldmVudCBNb3VzZUV2ZW50IGdlbmVyYXRlZCBieSBhIGxpc3RlbmVyXG4gICAgICovXG4gICAgb25Nb3VzZURvd24oZXZlbnQpIHtcbiAgICAgICAgLy8gbWlkZGxlIG1vdXNlIG9yIGxlZnQgbW91c2UgKyBjdHJsIG1vdmVzIHRoZSBjYW52YXNcbiAgICAgICAgaWYoZXZlbnQud2hpY2ggPT09IDIgfHwgKGV2ZW50LndoaWNoID09PSAxICYmIGV2ZW50LmN0cmxLZXkpKSB7XG4gICAgICAgICAgICB0aGlzLiRzdmcuYWRkQ2xhc3MoJ2dyYWJiZWQnKTtcbiAgICAgICAgICAgIHRoaXMubW92ZUNhbnZhcyA9IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiBldmVudC5wYWdlWCxcbiAgICAgICAgICAgICAgICB0b3A6IGV2ZW50LnBhZ2VZXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIGFsbCBtb3VzZW1vdmUgZXZlbnRzIHRoYXQgYXJlIGhhcHBlbmluZyBkaXJlY3RseSBvbiB0aGUgQ2FudmFzXG4gICAgICogQHBhcmFtICB7anF1ZXJ5Lk1vdXNlRXZlbnR9IGV2ZW50IE1vdXNlRXZlbnQgZ2VuZXJhdGVkIGJ5IGEgbGlzdGVuZXJcbiAgICAgKi9cbiAgICBvbk1vdXNlTW92ZShldmVudCkge1xuICAgICAgICBpZih0aGlzLm1vdmVDYW52YXMpIHtcbiAgICAgICAgICAgIGxldCBsZWZ0ID0gZXZlbnQucGFnZVggLSB0aGlzLm1vdmVDYW52YXMubGVmdFxuICAgICAgICAgICAgbGV0IHRvcCA9IGV2ZW50LnBhZ2VZIC0gdGhpcy5tb3ZlQ2FudmFzLnRvcFxuXG4gICAgICAgICAgICB0aGlzLnZpZXdib3gubGVmdFNoaWZ0ICs9IGxlZnRcbiAgICAgICAgICAgIHRoaXMudmlld2JveC50b3BTaGlmdCArPSB0b3BcbiAgICAgICAgICAgIHRoaXMuYXBwbHlWaWV3Ym94KClcblxuICAgICAgICAgICAgdGhpcy5tb3ZlQ2FudmFzID0ge1xuICAgICAgICAgICAgICAgIGxlZnQ6IGV2ZW50LnBhZ2VYLFxuICAgICAgICAgICAgICAgIHRvcDogZXZlbnQucGFnZVlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgYWxsIG1vdXNldXAgZXZlbnRzIHRoYXQgYXJlIGhhcHBlbmluZyBkaXJlY3RseSBvbiB0aGUgQ2FudmFzXG4gICAgICogQHBhcmFtICB7anF1ZXJ5Lk1vdXNlRXZlbnR9IGV2ZW50IE1vdXNlRXZlbnQgZ2VuZXJhdGVkIGJ5IGEgbGlzdGVuZXJcbiAgICAgKi9cbiAgICBvbk1vdXNlVXAoZXZlbnQpIHtcbiAgICAgICAgaWYodGhpcy5tb3ZlQ2FudmFzKSB7XG4gICAgICAgICAgICB0aGlzLiRzdmcucmVtb3ZlQ2xhc3MoJ2dyYWJiZWQnKTtcbiAgICAgICAgICAgIHRoaXMubW92ZUNhbnZhcyA9IHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2aWV3Qm94IGF0dHJpYnV0ZSBvZiB0aGUgU1ZHIGVsZW1lbnQgYW5kIHNpemUgYW5kIHBvc2l0aW9uIGF0dHJpYnV0ZXNcbiAgICAgKiBvZiB0aGUgcmVjdGFuZ2xlIHdpdGggdGhlIGJhY2tncm91bmQgZ3JpZCB0byBtYXRjaCB0aGUgdmFsdWVzIGluIHRoaXMudmlld2JveFxuICAgICAqL1xuICAgIGFwcGx5Vmlld2JveCgpIHtcbiAgICAgICAgLy8gYWRqdXN0IGJhY2tncm91bmRcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLmFkZEF0dHIoe1xuICAgICAgICAgICAgeDogdGhpcy52aWV3Ym94LmxlZnQsXG4gICAgICAgICAgICB5OiB0aGlzLnZpZXdib3gudG9wLFxuICAgICAgICAgICAgd2lkdGg6IHRoaXMudmlld2JveC53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy52aWV3Ym94LmhlaWdodFxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIHNldCB0aGUgdmlld0JveCBhdHRyaWJ1dGVcbiAgICAgICAgdGhpcy4kc3ZnLmF0dHIoJ3ZpZXdCb3gnLCB0aGlzLnZpZXdib3guc3RyKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCB6b29tIG11bHRpcGxpZXIgb2YgdGhlIGNhbnZhc1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgem9vbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld2JveC56b29tXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB6b29tIG11bHRpcGxpZXIgb2YgdGhlIGNhbnZhcy5cbiAgICAgKiBJIHNldHMgdGhlIHZpZXdib3ggem9vbSBhbmQgdGhlbiBhcHBsaWVzIHRoZSBuZXcgdmFsdWUgYnkgY2FsbGluZyB0aGlzLmFwcGx5Vmlld2JveCgpXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB2YWx1ZSBzZXQgdGhlIHpvb20gdG8gdGhpcyB2YWx1ZVxuICAgICAqL1xuICAgIHNldCB6b29tKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmlld2JveC56b29tID0gdmFsdWVcbiAgICAgICAgdGhpcy5hcHBseVZpZXdib3goKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGFuIG9iamVjdCBjb250YWluaW5nIGV4cG9ydCBkYXRhIGZvciB0aGUgQ2FudmFzIGFuZCBhbGwgZWxlbWVudHMuXG4gICAgICogRGF0YSBmcm9tIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGNvdmVyIGFsbCBpbXBvcnRhbnQgaW5mb3JtYXRpb24gbmVlZGVkIHRvIGltcG9ydCB0aGVcbiAgICAgKiBuZXR3b3JrIGluIGEgZGlmZmVyZW50IHNlc3Npb24uXG4gICAgICogQHJldHVybiB7b2JqZWN0fSBvYmplY3QgY29udGFpbmluZyBpbmZvbXJhdGlvbiBhYm91dCB0aGUgbmV0d29ya1xuICAgICAqL1xuICAgIGdldCBleHBvcnREYXRhKCkge1xuICAgICAgICB0aGlzLmV4cG9ydFdpcmVJZE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5leHBvcnRXaXJlSWQgPSAwO1xuXG4gICAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAgICAgLy8gVE9ETyBpbXBsZW1lbnQgZ3JpZFNpemUgc2NhbGluZ1xuICAgICAgICAgICAgLy8gZ3JpZFNpemU6IHRoaXMuZ3JpZFNpemUsXG4gICAgICAgICAgICBib3hlczogW11cbiAgICAgICAgfTtcblxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5ib3hlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgZGF0YS5ib3hlc1tpXSA9IHRoaXMuYm94ZXNbaV0uZXhwb3J0RGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlY3JlYXRlIGEgbG9naWMgbmV0d29yayBmcm9tIHRoZSBkYXRhIHByb3ZpZGVkXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBkYXRhIG9iamVjdCBjb250YWluaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSBpbXBvcnRlZCBuZXR3b3JrXG4gICAgICovXG4gICAgaW1wb3J0RGF0YShkYXRhKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNpbXVsYXRpb25FbmFibGVkID0gZmFsc2VcblxuICAgICAgICAgICAgLy8gVE9ETyBpbXBsZW1lbnQgZ3JpZFNpemUgc2NhbGluZ1xuXG4gICAgICAgICAgICAvLyBsaXN0IG9mIHdpcmVzIHRvIGJlIGFkZGVkXG4gICAgICAgICAgICBsZXQgbmV3V2lyZXMgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgZGF0YS5ib3hlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIC8vIGFkZCBib3hcbiAgICAgICAgICAgICAgICBsZXQgYm94O1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZGF0YS5ib3hlc1tpXS5jYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ2F0ZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIG5ldyBnYXRlICh3aXRob3V0IHJlbG9hZGluZyB0aGUgU1ZHLCB3ZSB3aWxsIHJlbG9hZCBpdCBvbmNlIGFmdGVyIHRoZSBpbXBvcnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBib3ggPSB0aGlzLm5ld0dhdGUoZGF0YS5ib3hlc1tpXS5uYW1lLCAwLCAwLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImlvXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRhdGEuYm94ZXNbaV0ubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbnB1dFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgbmV3IGlucHV0ICh3aXRob3V0IHJlbG9hZGluZyB0aGUgU1ZHLCB3ZSB3aWxsIHJlbG9hZCBpdCBvbmNlIGFmdGVyIHRoZSBpbXBvcnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveCA9IHRoaXMubmV3SW5wdXQoMCwgMCwgZGF0YS5ib3hlc1tpXS5pc09uLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvdXRwdXRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIG5ldyBvdXRwdXQgKHdpdGhvdXQgcmVsb2FkaW5nIHRoZSBTVkcsIHdlIHdpbGwgcmVsb2FkIGl0IG9uY2UgYWZ0ZXIgdGhlIGltcG9ydClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94ID0gdGhpcy5uZXdPdXRwdXQoMCwgMCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVW5rbm93biBpbyBib3ggbmFtZSAnXCIrZGF0YS5ib3hlc1tpXS5uYW1lK1wiJy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVW5rbm93biBib3ggY2F0ZWdvcnkgJ1wiK2RhdGEuYm94ZXNbaV0uY2F0ZWdvcnkrXCInLlwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYm94KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHByb2NjZXNzIGJveCB0cmFuc2Zvcm1zICh0cmFuc2xhdGlvbiBhbmQgcm90YXRpb24pXG4gICAgICAgICAgICAgICAgICAgIGxldCB0cmFuc2Zvcm0gPSBuZXcgZWRpdG9yRWxlbWVudHMuVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDAgOyBqIDwgZGF0YS5ib3hlc1tpXS50cmFuc2Zvcm0uaXRlbXMubGVuZ3RoIDsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRhdGEuYm94ZXNbaV0udHJhbnNmb3JtLml0ZW1zW2pdLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybS5zZXRUcmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmJveGVzW2ldLnRyYW5zZm9ybS5pdGVtc1tqXS5hcmdzWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib3hlc1tpXS50cmFuc2Zvcm0uaXRlbXNbal0uYXJnc1sxXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicm90YXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybS5zZXRSb3RhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmJveGVzW2ldLnRyYW5zZm9ybS5pdGVtc1tqXS5hcmdzWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5ib3hlc1tpXS50cmFuc2Zvcm0uaXRlbXNbal0uYXJnc1sxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuYm94ZXNbaV0udHJhbnNmb3JtLml0ZW1zW2pdLmFyZ3NbMl1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlVua25vd24gdHJhbnNmb3JtIHByb3BlcnR5ICdcIitkYXRhLmJveGVzW2ldLnRyYW5zZm9ybS5pdGVtc1tqXS5uYW1lK1wiJy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYm94LnNldFRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhbGwgd2lyZXMgdG8gdGhlIGxpc3Qgb2Ygd2lyZXMgdG8gYmUgYWRkZWRcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMCA7IGogPCBkYXRhLmJveGVzW2ldLmNvbm5lY3Rpb25zLmxlbmd0aCA7ICsraikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBhcnRpZmljaWFsIHdpcmUgaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3aXJlSWQgPSBkYXRhLmJveGVzW2ldLmNvbm5lY3Rpb25zW2pdLndpcmVJZDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFzcyB0aGUgdmFsdWVzIGdvdCBmcm9tIGpzb24gaW50byBhIHZhcmlhYmxlIHRoYXQgd2lsbCBiZSBhZGRlZCBpbnRvIHRoZSBtYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogZGF0YS5ib3hlc1tpXS5jb25uZWN0aW9uc1tqXS5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBkYXRhLmJveGVzW2ldLmNvbm5lY3Rpb25zW2pdLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94SWQ6IGJveC5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSB2YWx1ZSB0byB0aGUgbWFwXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihuZXdXaXJlcy5oYXMod2lyZUlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFscmVhZHkgaXMgYSB3aXJlIHdpdGggdGhpcyBpZCBpbiB0aGUgbWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgdmFsdWUgdG8gdGhlIGVuZCBvZiB0aGUgYXJyYXkgb2YgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hcFZhbHVlID0gbmV3V2lyZXMuZ2V0KHdpcmVJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwVmFsdWVbbWFwVmFsdWUubGVuZ3RoXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1dpcmVzLnNldCh3aXJlSWQsIG1hcFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gd2lyZSB3aXRoIHRoaXMgaWQgaW4gdGhlIG1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgd2lyZSBhbmQgc2V0IHRoZSB2YWx1ZSB0byBiZSB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdXaXJlcy5zZXQod2lyZUlkLCBbdmFsdWVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVmcmVzaCB0aGUgU1ZHIGRvY3VtZW50IChuZWVkZWQgZm9yIHdpcmluZylcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuXG4gICAgICAgICAgICAvLyB3aXRoIGFsbCBib3hlcyBhZGRlZCwgd2UgY2FuIG5vdyBjb25uZWN0IHRoZW0gd2l0aCB3aXJlc1xuICAgICAgICAgICAgbmV3V2lyZXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgY29ubmVjdG9ySWRzID0gW107XG4gICAgICAgICAgICAgICAgaWYoaXRlbVswXSAmJiBpdGVtWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBbMCwgMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBib3ggPSB0aGlzLmdldEJveEJ5SWQoaXRlbVtpXS5ib3hJZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rvcklkc1tpXSA9IGJveC5jb25uZWN0b3JzW2l0ZW1baV0uaW5kZXhdLmlkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubmV3V2lyZShjb25uZWN0b3JJZHNbMF0sIGNvbm5lY3Rvcklkc1sxXSwgdHJ1ZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gcmVmcmVzaCB0aGUgU1ZHIGRvY3VtZW50XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcblxuICAgICAgICAgICAgdGhpcy5zaW11bGF0aW9uRW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGxldCBib3ggb2YgdGhpcy5ib3hlcykge1xuICAgICAgICAgICAgICAgIGlmIChib3ggaW5zdGFuY2VvZiBlZGl0b3JFbGVtZW50cy5JbnB1dEJveCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzd2l0Y2ggdGhlIGlucHV0IGJveCBzdGF0ZSB0byB0aGUgb3Bvc2l0IGFuZCBiYWNrLCBmb3Igc29tZSByZWFzb24gY2FsbGluZyBib3gucmVmcmVzaFN0YXRlKClcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0cyBpbiB3ZWlyZCB1bmZpbmlzaGVkIHNpbXVsYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBjYXVzZXMgdXBkYXRlIG9mIHRoZSBvdXRwdXQgY29ubmVjdG9yIGFuZCBhIHN0YXJ0IG9mIGEgbmV3IHNpbXVsYXRpb25cblxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGZpbmQgYmV0dGVyIHNvbHV0aW9uIGluc3RlYWQgb2YgdGhpcyB3b3JrYXJvdW5kXG4gICAgICAgICAgICAgICAgICAgIGJveC5vbiA9ICFib3gub25cbiAgICAgICAgICAgICAgICAgICAgYm94Lm9uID0gIWJveC5vblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hlbiB1c2VyIGNsaWNrcyBvbiBhIGNvbm5lY3RvciwgcmVtZW1iZXIgaXQgdW50aWwgdGhleSBjbGljayBvbiBzb21lIG90aGVyIGNvbm5lY3Rvci5cbiAgICAgKiBUaGFuIGNhbGwgbmV3V2lyZSB3aXRoIHRoZSBsYXN0IHR3byBjb25uZWN0b3JzIGlkcyBhcyBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBjb25uZWN0b3JJZCBpZCBvZiB0aGUgY29ubmVjdG9yIHRoYXQgdGhlIHVzZXIgY2xpY2tlZCBvblxuICAgICAqL1xuICAgIHdpcmVDcmVhdGlvbkhlbHBlcihjb25uZWN0b3JJZCkge1xuICAgICAgICBpZighdGhpcy5maXJzdENvbm5lY3RvcklkKSB7XG4gICAgICAgICAgICB0aGlzLmZpcnN0Q29ubmVjdG9ySWQgPSBjb25uZWN0b3JJZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubmV3V2lyZSh0aGlzLmZpcnN0Q29ubmVjdG9ySWQsIGNvbm5lY3RvcklkKTtcbiAgICAgICAgICAgIHRoaXMuZmlyc3RDb25uZWN0b3JJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJ1biBhIGxvZ2ljIHNpbXVsYXRpb24gZnJvbSB0aGUgc3RhcnRpbmdDb25uZWN0b3IuXG4gICAgICogVGhpcyByZWZyZXNoZXMgdGhlIHN0YXRlcyBvZiBhbGwgZWxlbWVudHMgaW4gdGhlIG5ldHdvcmsgd2hvc2UgaW5wdXRzIGFyZVxuICAgICAqIGRpcmVjdGx5IChvciBieSB0cmFuc2l0aW9uKSBjb25uZWN0ZWQgdG8gc3RhcnRpbmdDb25uZWN0b3IncyBvdXRwdXRcbiAgICAgKiBAcGFyYW0gIHtPdXRwdXRDb25uZWN0b3J9IHN0YXJ0aW5nQ29ubmVjdG9yIHJ1biBzaW11bGF0aW9uIGZyb20gdGhpcyBvdXRwdXQgY29ubmVjdG9yXG4gICAgICogQHBhcmFtICB7TG9naWMuc3RhdGV9IHN0YXRlIG5ldyBzdGF0ZSBvZiB0aGUgc3RhcnRpbmdDb25uZWN0b3JcbiAgICAgKi9cbiAgICBzdGFydE5ld1NpbXVsYXRpb24oc3RhcnRpbmdDb25uZWN0b3IsIHN0YXRlKSB7XG4gICAgICAgIGlmKHRoaXMuc2ltdWxhdGlvbkVuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2ltdWxhdGlvbiA9IG5ldyBTaW11bGF0aW9uKHRoaXMpXG4gICAgICAgICAgICB0aGlzLnNpbXVsYXRpb24ubm90aWZ5Q2hhbmdlKHN0YXJ0aW5nQ29ubmVjdG9yLmlkLCBzdGF0ZSlcbiAgICAgICAgICAgIHRoaXMuc2ltdWxhdGlvbi5ydW4oKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGdhdGUgb24gdGhlIHNwZWNpZmllZCBwb3NpdGlvblxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gIG5hbWUgICAgICAgICAgIHR5cGUgb2YgdGhlIGdhdGUgKGFuZCwgb3IgLi4uKVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHggICAgICAgICAgICAgIGhvcml6b250YWwgcG9zaXRpb24gb2YgdGhlIGdhdGUgaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHkgICAgICAgICAgICAgIHZlcnRpY2FsIHBvc2l0aW9uIG9mIHRoZSBnYXRlIGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBbcmVmcmVzaD10cnVlXSBpZiB0cnVlLCB0aGlzLnJlZnJlc2goKSB3aWxsIGJlIGNhbGxlZCBhZnRlciBhZGRpbmcgdGhlIGdhdGVcbiAgICAgKiBAcmV0dXJuIHtlZGl0b3JFbGVtZW50cy5HYXRlfSAgICBpbnN0YW5jZSBvZiBHYXRlIHRoYXQgaGFzIGJlZW4gbmV3bHkgYWRkZWRcbiAgICAgKi9cbiAgICBuZXdHYXRlKG5hbWUsIHgsIHksIHJlZnJlc2ggPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5ld0JveCh4LCB5LCBuZXcgZWRpdG9yRWxlbWVudHMuR2F0ZSh0aGlzLCBuYW1lLCB4LCB5KSwgcmVmcmVzaCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGlucHV0IGJveCBvbiB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgeCAgICAgICAgICAgICAgaG9yaXpvbnRhbCBwb3NpdGlvbiBvZiB0aGUgZ2F0ZSBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgeSAgICAgICAgICAgICAgdmVydGljYWwgcG9zaXRpb24gb2YgdGhlIGdhdGUgaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IFtpc09uPWZhbHNlXSAgIHN0YXRlIG9mIHRoZSBpbnB1dCBib3ggKGRlZmF1bHQgaXMgZmFsc2UgKG9mZikpXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gW3JlZnJlc2g9dHJ1ZV0gaWYgdHJ1ZSwgdGhpcy5yZWZyZXNoKCkgd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgYWRkaW5nIHRoZSBpbnB1dCBib3hcbiAgICAgKiBAcmV0dXJuIHtlZGl0b3JFbGVtZW50cy5JbnB1dEJveH0gICAgaW5zdGFuY2Ugb2YgdGhlIElucHV0Qm94IHRoYXQgaGFzIGJlZW4gbmV3bHkgYWRkZWRcbiAgICAgKi9cbiAgICBuZXdJbnB1dCh4LCB5LCBpc09uID0gZmFsc2UsIHJlZnJlc2ggPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5ld0JveCh4LCB5LCBuZXcgZWRpdG9yRWxlbWVudHMuSW5wdXRCb3godGhpcywgaXNPbiksIHJlZnJlc2gpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBvdXRwdXQgYm94IG9uIHRoZSBzcGVjaWZpZWQgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB4ICAgICAgICAgICAgICBob3Jpem9udGFsIHBvc2l0aW9uIG9mIHRoZSBnYXRlIGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB5ICAgICAgICAgICAgICB2ZXJ0aWNhbCBwb3NpdGlvbiBvZiB0aGUgZ2F0ZSBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gW3JlZnJlc2g9dHJ1ZV0gaWYgdHJ1ZSwgdGhpcy5yZWZyZXNoKCkgd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgYWRkaW5nIHRoZSBvdXRwdXQgYm94XG4gICAgICogQHJldHVybiB7ZWRpdG9yRWxlbWVudHMuSW5wdXRCb3h9ICAgIGluc3RhbmNlIG9mIHRoZSBPdXRwdXRCb3ggdGhhdCBoYXMgYmVlbiBuZXdseSBhZGRlZFxuICAgICAqL1xuICAgIG5ld091dHB1dCh4LCB5LCByZWZyZXNoID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXdCb3goeCwgeSwgbmV3IGVkaXRvckVsZW1lbnRzLk91dHB1dEJveCh0aGlzKSwgcmVmcmVzaCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgbmV3IEJveCB0byB0aGUgQ2FudmFzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgeCAgICAgICAgICAgICAgaG9yaXpvbnRhbCBwb3NpdGlvbiBvZiB0aGUgYm94IGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB5ICAgICAgICAgICAgICB2ZXJ0aWNhbCBwb3NpdGlvbiBvZiB0aGUgYm94IGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcGFyYW0gIHtlZGl0b3JFbGVtZW50cy5Cb3h9ICBvYmplY3QgICAgICAgICBpbnN0YW5jZSBvZiBhbiBvYmplY3QgZGVyaXZlZCBmcm9tIHRoZSBlZGl0b3JFbGVtZW50cy5Cb3ggY2xhc3NcbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbcmVmcmVzaD10cnVlXSBpZiB0cnVlLCB0aGlzLnJlZnJlc2goKSB3aWxsIGJlIGNhbGxlZCBhZnRlciBhZGRpbmcgdGhlIGJveFxuICAgICAqIEByZXR1cm4ge2VkaXRvckVsZW1lbnRzLkJveH0gICAgICAgICAgICAgICAgIHJldHVybiB0aGUgaW5zdGFuY2Ugb2YgdGhlIG5ld2x5IGFkZGVkIG9iamVjdFxuICAgICAqL1xuICAgIG5ld0JveCh4LCB5LCBvYmplY3QsIHJlZnJlc2ggPSB0cnVlKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuYm94ZXMubGVuZ3RoO1xuXG4gICAgICAgIHRoaXMuYm94ZXNbaW5kZXhdID0gb2JqZWN0O1xuXG4gICAgICAgIC8vIHRyYW5zbGF0ZSB0aGUgZ2F0ZSBpZiB4IGFuZCB5IGhhcyBiZWVuIHNwZWNpZmllZFxuICAgICAgICBpZih4ICYmIHkpIHtcbiAgICAgICAgICAgIGxldCB0ciA9IG5ldyBlZGl0b3JFbGVtZW50cy5UcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHRyLnNldFRyYW5zbGF0ZSh4LCB5KTtcblxuICAgICAgICAgICAgdGhpcy5ib3hlc1tpbmRleF0uc3ZnT2JqLmFkZEF0dHIoe1widHJhbnNmb3JtXCI6IHRyLmdldCgpfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFwcGVuZEVsZW1lbnQodGhpcy5ib3hlc1tpbmRleF0sIHJlZnJlc2gpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmJveGVzW2luZGV4XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBib3ggZnJvbSBDYW52YXMgYmFzZWQgb24gdGhlIHByb3ZpZGVkIElEXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGJveElkIGlkIG9mIHRoZSBib3ggdGhhdCBzaG91bGQgYmUgcmVtb3ZlZFxuICAgICAqL1xuICAgIHJlbW92ZUJveChib3hJZCkge1xuICAgICAgICBsZXQgJGdhdGUgPSAkKFwiI1wiK2JveElkKTtcblxuICAgICAgICAvLyBmaW5kIHRoZSBnYXRlIGluIHN2ZydzIGxpc3Qgb2YgZ2F0ZXNcbiAgICAgICAgbGV0IGdhdGVJbmRleCA9IC0xO1xuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuYm94ZXMubGVuZ3RoIDsgaSsrKSB7XG4gICAgICAgICAgICBpZih0aGlzLmJveGVzW2ldLnN2Z09iai5pZD09PWJveElkKSB7XG4gICAgICAgICAgICAgICAgZ2F0ZUluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGdhdGVJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgYWxsIHdpcmVzIGNvbm5lY3RlZCB0byB0aGlzIGdhdGVcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmJveGVzW2dhdGVJbmRleF0uY29ubmVjdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlV2lyZXNCeUNvbm5lY3RvcklkKHRoaXMuYm94ZXNbZ2F0ZUluZGV4XS5jb25uZWN0b3JzW2ldLnN2Z09iai5pZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgZ2F0ZVxuICAgICAgICAgICAgdGhpcy5ib3hlcy5zcGxpY2UoZ2F0ZUluZGV4LCAxKTtcbiAgICAgICAgICAgICRnYXRlLnJlbW92ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRyeWluZyB0byByZW1vdmUgYW4gbm9uZXhpc3RpbmcgYm94LiBCb3ggaWQ6XCIsIGJveElkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyB3aXJlIGNvbm5lY3RpbmcgdGhlIHByb3ZpZGVkIGNvbm5lY3RvcnNcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICBmcm9tSWQgICAgICAgICBpZCBvZiB0aGUgY29ubmVjdG9yIHRoYXQgdGhlIHdpcmUgaXMgYXR0YWNoZWQgdG9cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICB0b0lkICAgICAgICAgICBpZCBvZiB0aGUgY29ubmVjdG9yIHRoYXQgdGhlIHdpcmUgaXMgYXR0YWNoZWQgdG9cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbcmVmcmVzaD10cnVlXSBpZiByZWZyZXNoIGlzIHNldCB0byB0cnVlLCB0aGUgU1ZHIGRvY3VtZW50IHdpbGwgYmUgcmVsb2FkZWQgYWZ0ZXIgYWRkaW5nIHRoZSB3aXJlXG4gICAgICogQHJldHVybiB7ZWRpdG9yRWxlbWVudHMuV2lyZX0gICAgaW5zdGFuY2Ugb2YgZWRpdG9yRWxlbWVudHMuV2lyZSB0aGF0IGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBDYW52YXNcbiAgICAgKi9cbiAgICBuZXdXaXJlKGZyb21JZCwgdG9JZCwgcmVmcmVzaCA9IHRydWUpIHtcbiAgICAgICAgLy8gd2lyZSBtdXN0IGNvbm5lY3QgdHdvIGRpc3RpbmN0IGNvbm5lY3RvcnNcbiAgICAgICAgaWYgKGZyb21JZD09PXRvSWQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcblxuICAgICAgICBsZXQgY29ubmVjdG9ycyA9IFt0aGlzLmdldENvbm5lY3RvckJ5SWQoZnJvbUlkKSwgdGhpcy5nZXRDb25uZWN0b3JCeUlkKHRvSWQpXVxuXG4gICAgICAgIC8vIGlucHV0IGNvbm5lY3RvcnMgY2FuIGJlIGNvbm5lY3RlZCB0byBvbmUgd2lyZSBtYXhcbiAgICAgICAgY29ubmVjdG9ycy5mb3JFYWNoKGNvbm4gPT4ge1xuICAgICAgICAgICAgaWYoY29ubi5pc0lucHV0Q29ubmVjdG9yKVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlV2lyZXNCeUNvbm5lY3RvcklkKGNvbm4uaWQpXG4gICAgICAgIH0pXG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMud2lyZXMubGVuZ3RoO1xuICAgICAgICB0aGlzLndpcmVzW2luZGV4XSA9IG5ldyBlZGl0b3JFbGVtZW50cy5XaXJlKHRoaXMsIGZyb21JZCwgdG9JZCwgdGhpcy5ncmlkU2l6ZSwgcmVmcmVzaCk7XG5cbiAgICAgICAgY29ubmVjdG9ycy5mb3JFYWNoKGNvbm4gPT4ge1xuICAgICAgICAgICAgY29ubi5hZGRXaXJlSWQodGhpcy53aXJlc1tpbmRleF0uc3ZnT2JqLmlkKTtcbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLmFwcGVuZEVsZW1lbnQodGhpcy53aXJlc1tpbmRleF0sIHJlZnJlc2gpO1xuICAgICAgICB0aGlzLm1vdmVUb0JhY2tCeUlkKHRoaXMud2lyZXNbaW5kZXhdLnN2Z09iai5pZCk7XG5cbiAgICAgICAgaWYocmVmcmVzaClcbiAgICAgICAgICAgIHRoaXMud2lyZXNbaW5kZXhdLnVwZGF0ZVdpcmVTdGF0ZSgpXG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2lyZXNbaW5kZXhdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIGNvcnJlY3QgaW5zdGFuY2Ugb2YgZWRpdG9yRWxlbWVudHMuV2lyZSBpbiB0aGUgQ2FudmFzJyB3aXJlcyBieSB0aGUgcHJvdmlkZWQgaWRcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHdpcmVJZCBpZCBvZiB0aGUgd2lyZVxuICAgICAqIEByZXR1cm4ge2VkaXRvckVsZW1lbnRzLldpcmV9IGluc3RhbmNlIG9mIHRoZSB3aXJlXG4gICAgICovXG4gICAgZ2V0V2lyZUJ5SWQod2lyZUlkKSB7XG4gICAgICAgIGZvciAoY29uc3Qgd2lyZSBvZiB0aGlzLndpcmVzKSB7XG4gICAgICAgICAgICBpZih3aXJlLnN2Z09iai5pZCA9PT0gd2lyZUlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpcmVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kIGFsbCB3aXJlcyB0aGF0IGFyZSBjb25uZWN0ZWQgdG8gdGhlIHNwZWNpZmllZCBjb25uZWN0b3JcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGNvbm5lY3RvcklkIGlkIG9mIHRoZSBjb25uZWN0b3JcbiAgICAgKiBAcmV0dXJuIHtTZXR9IHNldCBvZiBJRCdzIG9mIHRoZSB3aXJlcyBjb25uZWN0ZWQgdG8gdGhpcyBjb25uZWN0b3JcbiAgICAgKi9cbiAgICBnZXRXaXJlc0J5Q29ubmVjdG9ySWQoY29ubmVjdG9ySWQpIHtcbiAgICAgICAgbGV0IGNvbm5lY3RvciA9IHRoaXMuZ2V0Q29ubmVjdG9yQnlJZChjb25uZWN0b3JJZCk7XG4gICAgICAgIHJldHVybiBjb25uZWN0b3Iud2lyZUlkcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgd2lyZSB0aGF0IGhhcyB0aGUgcHJvdmlkZWQgSURcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHdpcmVJZCBJRCBvZiB0aGUgd2lyZSB0aGF0IHNob3VsZCBiZSByZW1vdmVkXG4gICAgICovXG4gICAgcmVtb3ZlV2lyZUJ5SWQod2lyZUlkKSB7XG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy53aXJlcy5sZW5ndGggOyArK2kpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLndpcmVzW2ldLnN2Z09iai5pZCA9PT0gd2lyZUlkKSB7XG5cbiAgICAgICAgICAgICAgICBsZXQgY29ubmVjdG9yMSA9IHRoaXMud2lyZXNbaV0uc3RhcnRDb25uZWN0b3I7XG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3RvcjIgPSB0aGlzLndpcmVzW2ldLmVuZENvbm5lY3RvcjtcblxuICAgICAgICAgICAgICAgIGNvbm5lY3RvcjEucmVtb3ZlV2lyZUlkQW5kVXBkYXRlKHdpcmVJZCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdG9yMi5yZW1vdmVXaXJlSWRBbmRVcGRhdGUod2lyZUlkKTtcblxuICAgICAgICAgICAgICAgIHRoaXMud2lyZXNbaV0uc3ZnT2JqLiRlbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLndpcmVzLnNwbGljZShpLCAxKTtcblxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCB3aXJlcyB0aGF0IGFyZSBjb25uZWN0ZWQgdG8gdGhlIGNvbm5lY3RvciBwcm92aWRlZCBieSBpdHMgSURcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGNvbm5lY3RvcklkIElEIG9mIHRoZSBjb25uZWN0b3JcbiAgICAgKi9cbiAgICByZW1vdmVXaXJlc0J5Q29ubmVjdG9ySWQoY29ubmVjdG9ySWQpIHtcbiAgICAgICAgbGV0IGNvbm5lY3RvciA9IHRoaXMuZ2V0Q29ubmVjdG9yQnlJZChjb25uZWN0b3JJZCk7XG5cbiAgICAgICAgY29ubmVjdG9yLndpcmVJZHMuZm9yRWFjaCh3aXJlSWQgPT4ge1xuICAgICAgICAgICAgbGV0IHdpcmUgPSB0aGlzLmdldFdpcmVCeUlkKHdpcmVJZCk7XG5cbiAgICAgICAgICAgIC8vIGdldCB0aGUgb3RoZXIgY29ubmVjdG9yIHRoYXQgaXMgdGhlIHdpcmUgY29ubmVjdGVkIHRvXG4gICAgICAgICAgICBsZXQgb3RoZXJDb25uZWN0b3IgPSB0aGlzLmdldENvbm5lY3RvckJ5SWQod2lyZS5mcm9tSWQsIHdpcmUpO1xuICAgICAgICAgICAgaWYob3RoZXJDb25uZWN0b3Iuc3ZnT2JqLmlkPT09Y29ubmVjdG9ySWQpIHtcbiAgICAgICAgICAgICAgICBvdGhlckNvbm5lY3RvciA9IHRoaXMuZ2V0Q29ubmVjdG9yQnlJZCh3aXJlLnRvSWQsIHdpcmUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBkZWxldGUgdGhlIHdpcmUgcmVjb3JkIGZyb20gdGhlIG90aGVyIGNvbm5lY3RvclxuICAgICAgICAgICAgb3RoZXJDb25uZWN0b3Iud2lyZUlkcy5kZWxldGUod2lyZUlkKTtcblxuICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSB3aXJlIHJlcHJlc2VudGF0aW9uIHVzaW5nIGpRdWVyeVxuICAgICAgICAgICAgJChcIiNcIiArIHdpcmVJZCkucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgIC8vIGlmIG90aGVyQ29ubmVjdG9yIGlzIGFuIGlucHV0IGNvbm5lY3Rvciwgc2V0IGl0cyBzdGF0ZSB0byB1bmtub3duXG4gICAgICAgICAgICBpZihvdGhlckNvbm5lY3Rvci5pc0lucHV0Q29ubmVjdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydE5ld1NpbXVsYXRpb24ob3RoZXJDb25uZWN0b3IsIExvZ2ljLnN0YXRlLnVua25vd24pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNsZWFyIHRoZSBsaXN0IG9mIHdpcmUgSWRzXG4gICAgICAgIGNvbm5lY3Rvci53aXJlSWRzLmNsZWFyKCk7XG4gICAgICAgIC8vIGlmIGNvbm5lY3RvciBpcyBhbiBpbnB1dCBjb25uZWN0b3IsIHNldCBpdHMgc3RhdGUgdG8gdW5rbm93blxuICAgICAgICBpZihjb25uZWN0b3IuaXNJbnB1dENvbm5lY3Rvcikge1xuICAgICAgICAgICAgY29ubmVjdG9yLnNldFN0YXRlKExvZ2ljLnN0YXRlLnVua25vd24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZCB0aGUgY29ycmVjdCBpbnN0YW5jZSBvZiBlZGl0b3JFbGVtZW50cy5Cb3ggaW4gdGhlIENhbnZhcycgYm94ZXMgYnkgdGhlIHByb3ZpZGVkIGlkXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBib3hJZCBpZCBvZiB0aGUgYm94XG4gICAgICogQHJldHVybiB7ZWRpdG9yRWxlbWVudHMuQm94fSBpbnN0YW5jZSBvZiB0aGUgYm94XG4gICAgICovXG4gICAgZ2V0Qm94QnlJZChib3hJZCkge1xuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuYm94ZXMubGVuZ3RoIDsgaSsrKSB7XG4gICAgICAgICAgICBpZih0aGlzLmJveGVzW2ldLnN2Z09iai5pZD09PWJveElkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm94ZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIGNvcnJlY3QgaW5zdGFuY2Ugb2YgZWRpdG9yRWxlbWVudHMuQm94IGluIHRoZSBDYW52YXMnIGJveGVzIGJ5IElEIG9mIGEgY29ubmVjdG9yIHRoYXQgYmVsb25ncyB0byB0aGlzIGJveFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gYm94SWQgaWQgb2YgdGhlIGNvbm5lY3RvclxuICAgICAqIEByZXR1cm4ge2VkaXRvckVsZW1lbnRzLkJveH0gaW5zdGFuY2Ugb2YgdGhlIGJveFxuICAgICAqL1xuICAgIGdldEJveEJ5Q29ubmVjdG9ySWQoY29ubmVjdG9ySWQpIHtcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLmJveGVzLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuYm94ZXNbaV0uZ2V0Q29ubmVjdG9yQnlJZChjb25uZWN0b3JJZCkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJveGVzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgaW5zdGFuY2Ugb2YgYSBjb25uZWN0b3IgYmFzZWQgb24gaXQncyBJRCAoYW5kIGFsc28gb24gYW4gaW5zdGFuY2Ugb2YgZWRpdG9yRWxlbWVudHMuV2lyZSBpZiBwcm92aWRlZClcbiAgICAgKlxuICAgICAqIFRoZSB3aXJlIHZhcmlhYmxlIGlzIHVzZWQgYXMgaGV1cmlzdGljOiBXaGVuIHdlIGtub3cgdGhlIHdpcmUsIHdlIGhhdmUgdG8gY2hlY2sgb25seVxuICAgICAqIHR3byBnYXRlcyBpbnN0ZWFkIG9mIGFsbCBvZiB0aGVtXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBjb25uZWN0b3JJZCBpZCBvZiB0aGUgY29ubmVjdG9yXG4gICAgICogQHBhcmFtICB7ZWRpdG9yRWxlbWVudHMuV2lyZX0gW3dpcmVdICAgICAgaW5zdGFuY2Ugb2YgdGhlIFdpcmUgdGhhdCBpcyBjb25uZWN0ZWQgdG8gdGhpcyBjb25uZWN0b3JcbiAgICAgKiBAcmV0dXJuIHtlZGl0b3JFbGVtZW50cy5Db25uZWN0b3J9ICAgICAgICBpbnN0YW5jZSBvZiB0aGUgY29ubmVjdG9yXG4gICAgICovXG4gICAgZ2V0Q29ubmVjdG9yQnlJZChjb25uZWN0b3JJZCwgd2lyZT11bmRlZmluZWQpIHtcblxuICAgICAgICBpZih3aXJlIT09dW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyB3ZSBrbm93IHRoZSB3aXJlIC0tIHdlIGNhbiBjaGVjayBvbmx5IGdhdGVzIGF0IHRoZSBlbmRzIG9mIHRoaXMgd2lyZVxuICAgICAgICAgICAgbGV0IGNvbm5lY3RvciA9IHdpcmUuc3RhcnRCb3guZ2V0Q29ubmVjdG9yQnlJZChjb25uZWN0b3JJZClcbiAgICAgICAgICAgIGlmICghY29ubmVjdG9yKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdG9yID0gd2lyZS5lbmRCb3guZ2V0Q29ubmVjdG9yQnlJZChjb25uZWN0b3JJZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0b3JcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gd2UgZG8gbm90IGtub3cgdGhlIHdpcmUgLS0gd2UgaGF2ZSB0byBjaGVjayBhbGwgZ2F0ZXNcbiAgICAgICAgICAgIGZvciAoY29uc3QgYm94IG9mIHRoaXMuYm94ZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0b3IgPSBib3guZ2V0Q29ubmVjdG9yQnlJZChjb25uZWN0b3JJZClcbiAgICAgICAgICAgICAgICBpZihjb25uZWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3RvclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbG9naWNhbCBqUXVlcnkgdGFyZ2V0IGJhc2VkIG9uIHRoZSBmYWN0dWFsIGpRdWVyeSB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgb2JqZWN0LCB0aGF0IHVzZXIgaW50ZXJhY3RlZCB3aXRoLCBpcyBub3QgYSBjb25uZWN0b3IgYW5kIGlzIGluIGEgZ3JvdXAsXG4gICAgICogcmV0dXJuIHRoZSBncm91cCBqUXVlcnkgb2JqZWN0IGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIGpRdWVyeSBvYmplY3QuXG4gICAgICogQHBhcmFtICB7dGFyZ2V0fSB0YXJnZXQgalF1ZXJ5IHRhcmdldCBvZiB0aGUgb2JqZWN0IHVzZXIgaW50ZXJhY3RlZCB3aXRoXG4gICAgICogQHJldHVybiB7dGFyZ2V0fSAgICAgICAgalF1ZXJ5IHRhcmdldCBvZiB0aGUgb2JqZWN0IHVzZXIgd2FudGVkIHRvIGludGVyYWN0IHdpdGhcbiAgICAgKi9cbiAgICBnZXRSZWFsSlF1ZXJ5VGFyZ2V0KHRhcmdldCkge1xuICAgICAgICBsZXQgJHRhcmdldCA9ICQodGFyZ2V0KTtcbiAgICAgICAgaWYoISR0YXJnZXQuaGFzQ2xhc3MoXCJjb25uZWN0b3JcIikgJiYgJHRhcmdldC5wYXJlbnRzKCdnJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJHRhcmdldCA9ICR0YXJnZXQucGFyZW50KCk7XG4gICAgICAgICAgICB3aGlsZSAoJHRhcmdldC5wcm9wKFwidGFnTmFtZVwiKSAhPT0gXCJHXCIgJiYgJHRhcmdldC5wcm9wKFwidGFnTmFtZVwiKSAhPT0gXCJnXCIpIHtcbiAgICAgICAgICAgICAgICAkdGFyZ2V0ID0gJHRhcmdldC5wYXJlbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJHRhcmdldDtcbiAgICB9XG5cbiAgICAvLyByZXR1cm5zIHRoZSBlZGl0b3JFbGVtZW50IHRoYXQgdXNlciBpbnRlcmFjdGVkIHdpdGgsIHRoZSBcInRhcmdldFwiIGFyZ3VtZW50IGlzIGEgalF1ZXJ5IGVsZW1lbnRcbiAgICAvKipcbiAgICAgKiBHZXQgaW5zdGFuY2Ugb2Ygc29tZSBvYmplY3QgZnJvbSBlZGl0b3JFbGVtZW50IGJhc2VkIG9uIHRoZSBqUXVlcnkgdGFyZ2V0XG4gICAgICogQHBhcmFtICB7dGFyZ2V0fSB0YXJnZXQgalF1ZXJ5IHRhcmdldCB0aGF0IHVzZXIgaW50ZXJhY3RlZCB3aXRoXG4gICAgICogQHJldHVybiB7ZWRpdG9yRWxlbWVudHMuTmV0d29ya0VsZW1lbnR9IGluc3RhbmNlIG9mIGFuIG9iamVjdCBkZXJpdmVkIGZyb20gZWRpdG9yRWxlbWVudHMuTmV0d29ya0VsZW1lbnQgdGhhdCB0aGUgdXNlciBpbnRlcmFjdGVkIHdpdGhcbiAgICAgKi9cbiAgICBnZXRSZWFsVGFyZ2V0KHRhcmdldCkge1xuICAgICAgICAvLyBldmVudHkgc2UgbXVzZWppIHpwcmFjb3ZhdCB0YWR5LCBwcm90b3plIHYgU1ZHIHNlIGV2ZW50eSBuZXByb3BhZ3VqaVxuICAgICAgICBsZXQgJHRhcmdldCA9ICQodGFyZ2V0KTtcblxuICAgICAgICBpZigkdGFyZ2V0Lmhhc0NsYXNzKFwiY29ubmVjdG9yXCIpKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGlzIGEgY29ubmVjdG9yLCBkb24ndCB0cmF2ZXJzZSBncm91cHNcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENvbm5lY3RvckJ5SWQoJHRhcmdldC5hdHRyKCdpZCcpKTtcbiAgICAgICAgfSBlbHNlIGlmKCR0YXJnZXQucGFyZW50cygnZycpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIHRoaXMgZWxlbWVudCBpcyBpbiBhIGdyb3VwIGFuZCBpdCBpcyBub3QgYSBjb25uZWN0b3JcblxuICAgICAgICAgICAgLy8gdHJhdmVyc2luZyB1cCB0aGUgRE9NIHRyZWUgdW50aWwgd2UgZmluZCB0aGUgY2xvc2VzdCBncm91cFxuICAgICAgICAgICAgbGV0ICRwYXJlbnRHcm91cCA9ICR0YXJnZXQucGFyZW50KCk7XG4gICAgICAgICAgICB3aGlsZSAoJHBhcmVudEdyb3VwLnByb3AoXCJ0YWdOYW1lXCIpICE9PSBcIkdcIiAmJiAkcGFyZW50R3JvdXAucHJvcChcInRhZ05hbWVcIikgIT09IFwiZ1wiKSB7XG4gICAgICAgICAgICAgICAgJHBhcmVudEdyb3VwID0gJHBhcmVudEdyb3VwLnBhcmVudCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRCb3hCeUlkKCRwYXJlbnRHcm91cC5hdHRyKCdpZCcpKTtcbiAgICAgICAgfSBlbHNlIGlmICgkdGFyZ2V0Lmhhc0NsYXNzKFwid2lyZVwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0V2lyZUJ5SWQoJHRhcmdldC5hdHRyKCdpZCcpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gZWxlbWVudCB0byB0aGUgQ2FudmFzXG4gICAgICogQHBhcmFtICB7ZWRpdG9yRWxlbWVudHMuTmV0d29ya0VsZW1lbnR9ICBlbGVtZW50IEVsZW1lbnQgdGhhdCB3aWxsIGJlIGFkZGVkIG9uIHRoZSBDYW52YXNcbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbcmVmcmVzaD10cnVlXSBpZiB0cnVlLCB0aGUgU1ZHIGRvY3VtZW50IHdpbGwgYmUgcmVsb2FkZWQgYWZ0ZXIgYWRkaW5nIHRoaXMgZWxlbWVudFxuICAgICAqL1xuICAgIGFwcGVuZEVsZW1lbnQoZWxlbWVudCwgcmVmcmVzaCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmRKUXVlcnlPYmplY3QoZWxlbWVudC5nZXQoKSwgcmVmcmVzaCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwZW5kIGEgalF1ZXJ5IGVsZW1lbnQgdG8gdGhlIFNWRyBkb2N1bWVudCAoaGVscGVyIGZvciB0aGlzLmFwcGVuZEVsZW1lbnQpXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSAgb2JqZWN0ICAgICAgICAgalF1ZXJ5IGVsZW1lbnQgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHRoZSBTVkcgZG9jdW1lbnRcbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbcmVmcmVzaD10cnVlXSBpZiB0cnVlLCB0aGUgU1ZHIGRvY3VtZW50IHdpbGwgYmUgcmVsb2FkZWQgYWZ0ZXIgYWRkaW5nIHRoaXMgZWxlbWVudFxuICAgICAqL1xuICAgIGFwcGVuZEpRdWVyeU9iamVjdChvYmplY3QsIHJlZnJlc2ggPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuJHN2Zy5hcHBlbmQob2JqZWN0KTtcbiAgICAgICAgaWYocmVmcmVzaClcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIG5ldyBwYXR0ZXJuIHRvIHRoZSBkZWZpbml0aW9ucyBlbGVtZW50IGluIHRoZSBTVkcgZG9jdW1lbnRcbiAgICAgKiBAcGFyYW0ge3N2Z09iai5QYXR0ZXJufSBwYXR0ZXJuIHBhdHRlcm4gdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHRoZSA8ZGV2cz4gZWxlbWVudCBpbiB0aGUgU1ZHIGRvY3VtZW50XG4gICAgICovXG4gICAgYWRkUGF0dGVybihwYXR0ZXJuKSB7XG4gICAgICAgIHRoaXMuJGRlZnMuYXBwZW5kKHBhdHRlcm4pO1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWxvYWQgdGhlIFNWRyBkb2N1bWVudCAobmVlZGVkIHRvIGRpc3BsYXkgYSBuZXdseSBhcHBlbmRlZCBqUXVlcnkgb2JqZWN0KVxuICAgICAqL1xuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIHRoaXMuJHN2Zy5odG1sKHRoaXMuJHN2Zy5odG1sKCkpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlNWRyBkb2N1bWVudCBoYXMgYmVlbiByZWxvYWRlZC5cIilcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwbGF5IHRoZSBjb250ZXh0IG1lbnUgb24gdGhlIHNwZWNpZmllZCBwb3NpdGlvblxuICAgICAqIEBwYXJhbSAge251bWJlcn0geCAgICAgICBob3Jpem9udGFsIHBvc2l0aW9uIGluIENTUyBwaXhlbHNcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHkgICAgICAgdmVydGljYWwgcG9zaXRpb24gaW4gQ1NTIHBpeGVsc1xuICAgICAqIEBwYXJhbSAge2pRdWVyeS5lbGVtZW50fSAkdGFyZ2V0IHRoZSBpdGVtIHVzZXIgY2xpY2tlZCBvbiAodXNlZCB0byBkaXNwbGF5IFwicmVtb3ZlIHRoaXMgZWxlbWVudFwiLXR5cGUgaXRlbXMgaW4gdGhlIG1lbnUpXG4gICAgICovXG4gICAgZGlzcGxheUNvbnRleHRNZW51KHgsIHksICR0YXJnZXQpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0TWVudS5kaXNwbGF5KHgsIHksICR0YXJnZXQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhpZGUgdGhlIGNvbnRleHQgbWVudVxuICAgICAqL1xuICAgIGhpZGVDb250ZXh0TWVudSgpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0TWVudS5oaWRlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc25hcCBhIHZhbHVlIHRvIGEgZ3JpZFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gdmFsdWUgdmFsdWUgaW4gU1ZHIHBpeGVsc1xuICAgICAqIEByZXR1cm4ge251bWJlcn0gICAgICAgdGhlIHZhbHVlIHJvdW5kZWQgdG8gdGhlIGNsb3Nlc3QgbnVtYmVyIGRpdmlzaWJsZSBieSB0aGUgZ3JpZCBzaXplXG4gICAgICovXG4gICAgc25hcFRvR3JpZCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAvIHRoaXMuZ3JpZFNpemUpICogdGhpcy5ncmlkU2l6ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzdGF0aWMgZnVuY3Rpb24gZm9yIHNuYXBwaW5nIGEgdmFsdWUgdG8gYSBncmlkXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB2YWx1ZSB2YWx1ZSBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBncmlkU2l6ZSBzaXplIG9mIHRoZSBncmlkIGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9ICAgICAgIHRoZSB2YWx1ZSByb3VuZGVkIHRvIHRoZSBjbG9zZXN0IG51bWJlciBkaXZpc2libGUgYnkgdGhlIGdyaWQgc2l6ZVxuICAgICAqL1xuICAgIHN0YXRpYyBzbmFwVG9HcmlkKHZhbHVlLCBncmlkU2l6ZSkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAvIGdyaWRTaXplKSAqIGdyaWRTaXplO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIG1vdmUgYW4gZWxlbWVudCB0byB0aGUgZnJvbnQgaW4gdGhlIGNhbnZhc1xuICAgICAqIEBwYXJhbSAge3N0cmluZ30gb2JqSWQgaWQgb2YgdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBtb3ZlVG9Gcm9udEJ5SWQob2JqSWQpIHtcbiAgICAgICAgdGhpcy4kc3ZnLmFwcGVuZCgkKFwiI1wiICsgb2JqSWQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBtb3ZlIGFuIGVsZW1lbnQgdG8gdGhlIGJhY2sgaW4gdGhlIGNhbnZhc1xuICAgICAqIEBwYXJhbSAge3N0cmluZ30gb2JqSWQgaWQgb2YgdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBtb3ZlVG9CYWNrQnlJZChvYmpJZCkge1xuICAgICAgICAkKFwiI1wiICsgdGhpcy5iYWNrZ3JvdW5kLmlkKVxuICAgICAgICAgICAgLmFmdGVyKCQoXCIjXCIgKyBvYmpJZCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCBzZXQgb2Ygbm9kZXMsIHRoYXQgY2Fubm90IGJlIHVzZWQgZm9yIHdpcmluZyBhdCBhbnkgY2lyY3Vtc3RhbmNlc1xuICAgICAqIEByZXR1cm4ge1NldH0gc2V0IG9mIG5vZGVzIChvYmplY3RzIGNvbnRhaW5pbmcgeCBhbmQgeSBjb29yZGluYXRlcykgdGhhdCBhcmUgbm90IHN1aXRhYmxlIGZvciB3aXJpbmdcbiAgICAgKi9cbiAgICBnZXROb25Sb3V0YWJsZU5vZGVzKCkge1xuICAgICAgICBsZXQgYmxvY2tlZE5vZGVzID0gbmV3IFNldCgpO1xuICAgICAgICAvLyBmb3IgZWFjaCBib3hcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLmJveGVzLmxlbmd0aCA7ICsraSkge1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSBqUXVlcnkgY2hpbGQgd2l0aCBjbGFzcyAucmVjdCAoXCJoaXRib3hcIilcbiAgICAgICAgICAgIGxldCByZWN0ID0gJCgnIycgKyB0aGlzLmJveGVzW2ldLnN2Z09iai5pZCkuY2hpbGRyZW4oXCIucmVjdFwiKVswXTtcbiAgICAgICAgICAgIC8vIGdldCB0aGUgcG9zaXRpb24gb2YgdGhlIHJlY3RhbmdsZVxuICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gJChyZWN0KS5wb3NpdGlvbigpO1xuXG4gICAgICAgICAgICAvLyBzbmFwIHRoZSBwb3NpdGlvbiB0byB0aGUgZ3JpZFxuICAgICAgICAgICAgcG9zaXRpb24ubGVmdCA9IHRoaXMuc25hcFRvR3JpZChwb3NpdGlvbi5sZWZ0KTtcbiAgICAgICAgICAgIHBvc2l0aW9uLnRvcCA9IHRoaXMuc25hcFRvR3JpZChwb3NpdGlvbi50b3ApO1xuXG4gICAgICAgICAgICAvLyBmb3IgZWFjaCBpdGVtIGluIGJsb2NrZWROb2RlcyAoc2V0IG9mIGJsb2NrZWQgbm9kZXMgd2l0aCBjb29yZGluYXRlcyByZWxhdGl2ZVxuICAgICAgICAgICAgLy8gdG8gdGhlIGxlZnQgdXBwZXIgY29ybmVyIG9mIHJlY3Q7IHVuaXQgdXNlZCBpcyBcIm9uZSBncmlkU2l6ZVwiKSBjb252ZXJ0IHRoZSBjb29yZGluYXRlc1xuICAgICAgICAgICAgLy8gdG8gYWJzb2x1dGUgKG11bHRpcGxlIHdpdGggZ3JpZFNpemUgYW5kIGFkZCBwb3NpdGlvbiBvZiByZWN0KSBhbmQgYWRkIHRoZSByZXN1bHQgdG8gdGhlIHNldFxuICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHRoaXMuYm94ZXNbaV0uYmxvY2tlZE5vZGVzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGFic29sdXRlWCA9IHBvc2l0aW9uLmxlZnQgKyBpdGVtLnggKiB0aGlzLmdyaWRTaXplO1xuICAgICAgICAgICAgICAgIGxldCBhYnNvbHV0ZVkgPSBwb3NpdGlvbi50b3AgKyBpdGVtLnkgKiB0aGlzLmdyaWRTaXplO1xuXG4gICAgICAgICAgICAgICAgYmxvY2tlZE5vZGVzLmFkZCh7XG4gICAgICAgICAgICAgICAgICAgIHg6IGFic29sdXRlWCxcbiAgICAgICAgICAgICAgICAgICAgeTogYWJzb2x1dGVZXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETyBlbnN1cmUgdGhhdCB0aGlzLnJlZnJlc2goKSBpcyByZWFsbHkgdW5uZWNlc3NhcnlcbiAgICAgICAgLy8gdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIC8vIHJldHVybiB0aGUgc2V0XG4gICAgICAgIHJldHVybiBibG9ja2VkTm9kZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IHNldCBvZiBub2RlcywgdGhhdCBhcmUgaW5jb252ZW5pZW50IGZvciB3aXJpbmcsIGJ1dCBjYW4gYmUgdXNlZCwganVzdCBhcmUgbm90IHByZWZlcnJlZFxuICAgICAqIEByZXR1cm4ge1NldH0gc2V0IG9mIG5vZGVzIChvYmplY3RzIGNvbnRhaW5pbmcgeCBhbmQgeSBjb29yZGluYXRlcykgdGhhdCBhcmUgbm90IHByZWZlcnJlZCBmb3Igd2lyaW5nXG4gICAgICovXG4gICAgZ2V0SW5jb252ZW5pZW50Tm9kZXMoaWdub3JlV2lyZUlkKSB7XG5cbiAgICAgICAgbGV0IGluY29udmVuaWVudE5vZGVzID0gbmV3IFNldCgpO1xuICAgICAgICAvLyBmb3IgZWFjaCB3aXJlXG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy53aXJlcy5sZW5ndGggOyArK2kpIHtcbiAgICAgICAgICAgIC8vIChpZ25vcmUgdGhlIHdpcmUgdGhhdCBpcyBzcGVjaWZpZWQgaW4gdGhlIGlnbm9yZVdpcmVJZCBhcmd1bWVudCAoaWYgYW55KSlcbiAgICAgICAgICAgIGlmKGlnbm9yZVdpcmVJZD09PXVuZGVmaW5lZCB8fCBpZ25vcmVXaXJlSWQhPT10aGlzLndpcmVzW2ldLnN2Z09iai5pZCkge1xuICAgICAgICAgICAgICAgIC8vIGN5Y2xlIHRocm91Z2ggcG9pbnRzLCBmb3IgZWFjaCBuZWlnYm91cnMgYWRkIGFsbCBwb2ludHMgdGhhdCBhcmUgaW4gYmV0d2VlbiB0aGVtXG4gICAgICAgICAgICAgICAgLy8gaS5lLjogKDAsMCkgYW5kICgwLDMwKSBhcmUgYmxvY2tpbmcgdGhlc2Ugbm9kZXM6ICgwLDApLCAoMCwxMCksICgwLDIwKSwgKDAsMzApXG4gICAgICAgICAgICAgICAgbGV0IHByZXZQb2ludDtcbiAgICAgICAgICAgICAgICB0aGlzLndpcmVzW2ldLnBvaW50cy5mb3JFYWNoKHBvaW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZQb2ludCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgcHJldlBvaW50IGlzIHVuZGVmaW5lZCwgYWRkIHRoZSBmaXJzdCBwb2ludFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jb252ZW5pZW50Tm9kZXMuYWRkKHt4OiBwb2ludC54LCB5OiBwb2ludC55fSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIGFkZCBhbGwgdGhlIHBvaW50IGJldHdlZW4gdGhlIHByZXZQb2ludCAoZXhjbHVkZWQpIGFuZCBwb2ludCAoaW5jbHVkZWQpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHByZXZQb2ludC54PT09cG9pbnQueCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBsaW5lIGlzIGhvcml6b250YWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnJvbSA9IE1hdGgubWluKHByZXZQb2ludC55LCBwb2ludC55KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG8gPSBNYXRoLm1heChwcmV2UG9pbnQueSwgcG9pbnQueSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZShmcm9tIDw9IHRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY29udmVuaWVudE5vZGVzLmFkZCh7eDogcG9pbnQueCwgeTogZnJvbX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tICs9IHRoaXMuZ3JpZFNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHByZXZQb2ludC55PT09cG9pbnQueSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBsaW5lIGlzIHZlcnRpY2FsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZyb20gPSBNYXRoLm1pbihwcmV2UG9pbnQueCwgcG9pbnQueCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRvID0gTWF0aC5tYXgocHJldlBvaW50LngsIHBvaW50LngpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUoZnJvbSA8PSB0bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNvbnZlbmllbnROb2Rlcy5hZGQoe3g6IGZyb20sIHk6IHBvaW50Lnl9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSArPSB0aGlzLmdyaWRTaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGluZSBpcyBuZWl0aGVyIGhvcml6b250YWwgbm9yIHZlcnRpY2FsLCB0aHJvdyBhbiBlcnJvciBmb3IgYmV0dGVyIGZ1dHVyZSBkZWJ1Z2dpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiZ2V0SW5jb252ZW5pZW50Tm9kZXM6IGxpbmUgYmV0d2VlbiB0d28gcG9pbnRzIGlzIG5laXRoZXIgaG9yaXpvbnRhbCBub3IgdmVydGljYWxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgbmV3IHByZXZQb2ludFxuICAgICAgICAgICAgICAgICAgICBwcmV2UG9pbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBwb2ludC54LFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogcG9pbnQueVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyByZXR1cm4gdGhlIHNldFxuICAgICAgICByZXR1cm4gaW5jb252ZW5pZW50Tm9kZXM7XG4gICAgfVxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKlxuICogSXRlbSBpbiB0aGUgW0NvbnRleHRNZW51XSguL21vZHVsZS1Db250ZXh0TWVudS5odG1sKS4gQ29udGV4dE1lbnVJdGVtcyBjYW4gYmUgbmVzdGVkIHVzaW5nIHRoZSBhcHBlbmRJdGVtIGZ1bmN0aW9uLlxuICovXG5jbGFzcyBDb250ZXh0TWVudUl0ZW0ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0ICAgICAgICAgIHRleHQgb24gdGhlIGJ1dHRvblxuICAgICAqIEBwYXJhbSB7Q29udGV4dE1lbnV9IGNvbnRleHRNZW51IGluc3RhbmNlIG9mIHRoZSBbQ29udGV4dE1lbnVdKC4vbW9kdWxlLUNvbnRleHRNZW51Lmh0bWwpIHRoaXMgaXRlbSBiZWxvbmdzIHRvXG4gICAgICogQHBhcmFtIHtDYW52YXN9IHBhcmVudFNWRyAgICAgaW5zdGFuY2Ugb2YgW0NhbnZhc10oLi9tb2R1bGUtQ2FudmFzLmh0bWwpIHRoaXMgbWVudSBiZWxvbmdzIHRvXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2xpY2tGdW5jdGlvbiBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gdXNlciBjbGlja3MgdGhpcyBpdGVtXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodGV4dCwgY29udGV4dE1lbnUsIHBhcmVudFNWRywgY2xpY2tGdW5jdGlvbikge1xuICAgICAgICAvKipcbiAgICAgICAgICogdGV4dCBvbiB0aGUgYnV0dG9uXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBpbnN0YW5jZSBvZiB0aGUgW0NvbnRleHRNZW51XSguL21vZHVsZS1Db250ZXh0TWVudS5odG1sKSB0aGlzIGl0ZW0gYmVsb25ncyB0b1xuICAgICAgICAgKiBAdHlwZSB7Q29udGV4dE1lbnV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbnRleHRNZW51ID0gY29udGV4dE1lbnU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGluc3RhbmNlIG9mIFtDYW52YXNdKC4vbW9kdWxlLUNhbnZhcy5odG1sKSB0aGlzIG1lbnUgYmVsb25ncyB0b1xuICAgICAgICAgKiBAdHlwZSB7Q2FudmFzfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYXJlbnRTVkcgPSBwYXJlbnRTVkc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGpRdWVyeSBlbGVtZW50IHJlcHJlc2VudGluZyBET00gY29udGVudCBvZiB0aGlzIG1lbnUgaXRlbVxuICAgICAgICAgKiBAdHlwZSB7alF1ZXJ5LmVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLiRlbCA9ICQoXCI8bGk+XCIpLnRleHQodGV4dCk7XG5cbiAgICAgICAgLy8gc2V0IHVwIGNsaWNrIGNhbGxiYWNrIGlmIGNsaWNrRnVuY3Rpb24gaXMgZGVmaW5lZFxuICAgICAgICBpZihjbGlja0Z1bmN0aW9uKSB7XG4gICAgICAgICAgICAkKHRoaXMuJGVsKS5jbGljayhcbiAgICAgICAgICAgICAgICBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrRnVuY3Rpb24oZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0TWVudS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGFkZCBhIENTUyBjbGFzcyB0byB0aGlzIGl0ZW1cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xzIFtkZXNjcmlwdGlvbl1cbiAgICAgKi9cbiAgICBhZGRDbGFzcyhjbHMpIHtcbiAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoY2xzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYXBwZW5kIGEgbmVzdGVkIHtAbGluayBDb250ZXh0TWVudUl0ZW19IHRvIHRoaXMgaXRlbVxuICAgICAqIEBwYXJhbSAge0NvbnRleHRNZW51SXRlbX0gaXRlbSBpdGVtIHRoYXQgd2lsbCBiZSBhcHBlbmRlZFxuICAgICAqL1xuICAgIGFwcGVuZEl0ZW0oaXRlbSkge1xuICAgICAgICBpZighdGhpcy5zdWJMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLnN1Ykxpc3QgPSAkKFwiPHVsPlwiKTtcbiAgICAgICAgICAgIHRoaXMuJGVsLmFwcGVuZCh0aGlzLnN1Ykxpc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdWJMaXN0LmFwcGVuZChpdGVtLmpRdWVyeSk7XG5cbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IGpRdWVyeSBlbGVtZW50IG9mIHRoaXMgbWVudSBpdGVtXG4gICAgICogQHJldHVybiB7alF1ZXJ5LmVsZW1lbnR9IGpRdWVyeSBlbGVtZW50IGNvbnRhaW5pbmcgYWxsIERPTSBjb250ZW50IGZvciB0aGlzIG1lbnUgaXRlbVxuICAgICAqL1xuICAgIGdldCBqUXVlcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRlbDtcbiAgICB9XG59XG5cbi8qKlxuICogTWVudSBpdGVtIHRoYXQgaGFzIGEgY3VzdG9tIGNsaWNrIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgYWRkcyBhIHtAbGluayBHYXRlfSBvZiB0aGUgc3BlY2lmaWVkIHR5cGUgdG8gdGhlIFtDYW52YXNdKC4vbW9kdWxlLUNhbnZhcy5odG1sKVxuICogQGV4dGVuZHMgQ29udGV4dE1lbnVJdGVtXG4gKi9cbmNsYXNzIEdhdGVNZW51SXRlbSBleHRlbmRzIENvbnRleHRNZW51SXRlbSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgICAgICAgIHR5cGUgb2YgdGhlIGdhdGUge0BsaW5rIEdhdGV9IChhbmQsIG9yLCAuLi4pXG4gICAgICogQHBhcmFtIHtDb250ZXh0TWVudX0gY29udGV4dE1lbnUgaW5zdGFuY2Ugb2YgdGhlIFtDb250ZXh0TWVudV0oLi9tb2R1bGUtQ29udGV4dE1lbnUuaHRtbCkgdGhhdCB0aGlzIGl0ZW0gYmVsb25ncyB0b1xuICAgICAqIEBwYXJhbSB7Q2FudmFzfSBwYXJlbnRTVkcgICBpbnN0YW5jZSBvZiBbQ2FudmFzXSguL21vZHVsZS1DYW52YXMuaHRtbCkgdGhpcyBtZW51IGJlbG9uZ3MgdG9cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBjb250ZXh0TWVudSwgcGFyZW50U1ZHKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgYCR7dHlwZX0gZ2F0ZWAsXG4gICAgICAgICAgICBjb250ZXh0TWVudSxcbiAgICAgICAgICAgIHBhcmVudFNWRyxcbiAgICAgICAgICAgIGV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHBhcmVudFNWRy5zbmFwVG9HcmlkKHBhcmVudFNWRy52aWV3Ym94LnRyYW5zZm9ybVgoY29udGV4dE1lbnUucG9zaXRpb24ueCkpLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IHBhcmVudFNWRy5zbmFwVG9HcmlkKHBhcmVudFNWRy52aWV3Ym94LnRyYW5zZm9ybVkoY29udGV4dE1lbnUucG9zaXRpb24ueSkpXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHBhcmVudFNWRy5uZXdHYXRlKFxuICAgICAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5sZWZ0LCAvLyB4IGNvb3JkaW5hdGVcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24udG9wIC8vIHkgY29vcmRpbmF0ZVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxufVxuXG4vKiogQG1vZHVsZSBDb250ZXh0TWVudSAqL1xuLyoqXG4gKiBDb250ZXh0TWVudSByZXByZXNlbnRzIHRoZSBtZW51IHRoYXQgaXMgZGlzcGxheWVkIHRvIHRoZSB1c2VyIHdoZW4gdGhleSByaWdodCBjbGljayBvbiBhIGNhbnZhcy5cbiAqIFRoaXMgbWVudSBhbGxvd3MgdXNlciB0byBhZGQgZWxlbWVudHMgdG8gdGhlIENhbnZhcyBhbmQgaW4gdGhlIGNhc2UgdGhhdCB1c2VyIHJpZ2h0Y2xpY2tlZFxuICogb24gYSBzcGVjaWZpYyBlbGVtZW50LCB0aGlzIG1lbnUgYWxsb3dzIHRoZW0gdG8gcmVtb3ZlIHRoaXMgZWxlbWVudC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udGV4dE1lbnUge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzfSBwYXJlbnRTVkcgaW5zdGFuY2Ugb2YgW0NhbnZhc10oLi9tb2R1bGUtQ2FudmFzLmh0bWwpIHRoaXMgbWVudSBiZWxvbmdzIHRvXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBpbnN0YW5jZSBvZiBbQ2FudmFzXSguL21vZHVsZS1DYW52YXMuaHRtbCkgdGhpcyBtZW51IGJlbG9uZ3MgdG9cbiAgICAgICAgICogQHR5cGUge0NhbnZhc31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGFyZW50U1ZHID0gcGFyZW50U1ZHO1xuXG4gICAgICAgIC8vIGxpc3Qgb2YgZ2F0ZXMgdGhhdCBjYW4gYmUgYWRkZWRcbiAgICAgICAgY29uc3QgZ2F0ZXMgPSBbXCJub3RcIiwgXCJhbmRcIiwgXCJvclwiLCBcIm5hbmRcIiwgXCJub3JcIiwgXCJ4b3JcIiwgXCJ4bm9yXCJdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQb3NpdGlvbiBvZiB0aGUgY29udGV4dCBtZW51LiBJdCBpcyB1c2VkIHRvIGFkZCB0aGUgbmV3IGVsZW1lbnRzIHRvIHRoZSBjb3JyZWN0IHBvc2l0aW9uIG9uIHRoZSBDYW52YXMuXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xuICAgICAgICAgICAgeDogMCwgeTogMFxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBqUXVlcnkgZWxlbWVudCBjb250YWluaW5nIHRoZSBjb250ZXh0IG1lbnVcbiAgICAgICAgICogQHR5cGUge2pRdWVyeS5lbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy4kZWwgPSAkKFwiPHVsPlwiKTtcbiAgICAgICAgdGhpcy4kZWwuYXR0cignaWQnLCAnY29udGV4dE1lbnUnKTtcblxuICAgICAgICAvLyBhZGQgYWxsIGdhdGVzXG4gICAgICAgIGxldCBnYXRlTGlzdCA9IG5ldyBDb250ZXh0TWVudUl0ZW0oXCJOZXcgZ2F0ZVwiLCB0aGlzLCBwYXJlbnRTVkcpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCBnYXRlcy5sZW5ndGggOyArK2kpIHtcbiAgICAgICAgICAgIGdhdGVMaXN0LmFwcGVuZEl0ZW0oXG4gICAgICAgICAgICAgICAgbmV3IEdhdGVNZW51SXRlbShnYXRlc1tpXSwgdGhpcywgcGFyZW50U1ZHKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFwcGVuZEl0ZW0oZ2F0ZUxpc3QpO1xuXG4gICAgICAgIC8vIGFkZCBpbnB1dCBib3hcbiAgICAgICAgdGhpcy5hcHBlbmRJdGVtKFxuICAgICAgICAgICAgbmV3IENvbnRleHRNZW51SXRlbShcIklucHV0IGJveFwiLCB0aGlzLCBwYXJlbnRTVkcsXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLnBhcmVudFNWRy5zbmFwVG9HcmlkKHBhcmVudFNWRy52aWV3Ym94LnRyYW5zZm9ybVgodGhpcy5wb3NpdGlvbi54KSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHRoaXMucGFyZW50U1ZHLnNuYXBUb0dyaWQocGFyZW50U1ZHLnZpZXdib3gudHJhbnNmb3JtWSh0aGlzLnBvc2l0aW9uLnkpKVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFNWRy5uZXdJbnB1dChwb3NpdGlvbi5sZWZ0LCBwb3NpdGlvbi50b3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBhZGQgb3V0cHV0IGJveFxuICAgICAgICB0aGlzLmFwcGVuZEl0ZW0obmV3IENvbnRleHRNZW51SXRlbShcIk91dHB1dCBib3hcIiwgdGhpcywgcGFyZW50U1ZHLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgcG9zaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgbGVmdDogdGhpcy5wYXJlbnRTVkcuc25hcFRvR3JpZChwYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1YKHRoaXMucG9zaXRpb24ueCkpLFxuICAgICAgICAgICAgICAgIHRvcDogdGhpcy5wYXJlbnRTVkcuc25hcFRvR3JpZChwYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1ZKHRoaXMucG9zaXRpb24ueSkpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBwYXJlbnRTVkcubmV3T3V0cHV0KHBvc2l0aW9uLmxlZnQsIHBvc2l0aW9uLnRvcCk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICAvLyBhZGQgY29uZGl0aW9uYWwgaXRlbXMgZm9yIGJveCBhbmQgd2lyZSByZW1vdmFsXG4gICAgICAgIHRoaXMuYXBwZW5kQ29uZGl0aW9uYWxJdGVtKCdib3gnLCAnUmVtb3ZlIHRoaXMgaXRlbScsIGlkID0+IHt0aGlzLnBhcmVudFNWRy5yZW1vdmVCb3goaWQpfSk7XG4gICAgICAgIHRoaXMuYXBwZW5kQ29uZGl0aW9uYWxJdGVtKCd3aXJlJywgJ1JlbW92ZSB0aGlzIHdpcmUnLCBpZCA9PiB7dGhpcy5wYXJlbnRTVkcucmVtb3ZlV2lyZUJ5SWQoaWQpfSk7XG5cbiAgICAgICAgLy8gYWRkIHRoZSBjb250ZXh0IG1lbnUgdG8gdGhlIERPTVxuICAgICAgICBwYXJlbnRTVkcuJHN2Zy5iZWZvcmUodGhpcy4kZWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGFwcGVuZCBhIGNvbnRleHQgbWVudSBpdGVtIHRvIHRoZSBjb250ZXh0IG1lbnVcbiAgICAgKiBAcGFyYW0gIHtDb250ZXh0TWVudUl0ZW19IGl0ZW0gaW5zdGFuY2Ugb2Yge0BsaW5rIENvbnRleHRNZW51SXRlbX0gdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHRoaXMgbWVudVxuICAgICAqL1xuICAgIGFwcGVuZEl0ZW0oaXRlbSkge1xuICAgICAgICB0aGlzLiRlbC5hcHBlbmQoaXRlbS5qUXVlcnkpO1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhcHBlbmRzIGFuIGNvbm5kaXRpb25hbCBpdGVtICh0aGF0IGlzIHNob3duIG9ubHkgaWYgdGhlIHRhcmdldCBoYXMgdGhlIGNsYXNzIGl0ZW1DbGFzcylcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGl0ZW1DbGFzcyAgICAgc2hvdyB0aGUgaXRlbSBvbmx5IGlmIHRoZSB0YXJnZXQgaGFzIHRoaXMgY2xhc3NcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHRleHQgICAgICAgICAgdGV4dCBvZiB0aGlzIG1lbnUgaXRlbVxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjbGlja0Z1bmN0aW9uIGZ1bmN0aW9uIHdpdGggb25lIGFyZ3VtZW50IChJRCBvZiB0aGUgdGFyZ2V0KSB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGNsaWNrXG4gICAgICovXG4gICAgYXBwZW5kQ29uZGl0aW9uYWxJdGVtKGl0ZW1DbGFzcywgdGV4dCwgY2xpY2tGdW5jdGlvbikge1xuICAgICAgICBpZighdGhpcy5jb25kaXRpb25hbEl0ZW1zKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmRpdGlvbmFsSXRlbXMgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29uZGl0aW9uYWxJdGVtc1t0aGlzLmNvbmRpdGlvbmFsSXRlbXMubGVuZ3RoXSA9IHtcbiAgICAgICAgICAgIGl0ZW1DbGFzczogaXRlbUNsYXNzLFxuICAgICAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgICAgIGNsaWNrRnVuY3Rpb246IGNsaWNrRnVuY3Rpb25cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGRlY2lkZSB3aGV0aGVyIG9yIG5vdCB0byBkaXNwbGF5IHNwZWNpZmljIGNvbmRpdGlvbmFsIGl0ZW1zXG4gICAgICogQHBhcmFtICB7alF1ZXJ5LmVsZW1lbnR9ICR0YXJnZXQgalF1ZXJ5IHRhcmdldCBvZiBhIE1vdXNlRXZlbnQgKGVsZW1lbnQgdGhhdCB1c2VyIGNsaWNrZWQgb24pXG4gICAgICovXG4gICAgcmVzb2x2ZUNvbmRpdGlvbmFsSXRlbXMoJHRhcmdldCkge1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25kaXRpb25hbEl0ZW1zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZigkdGFyZ2V0Lmhhc0NsYXNzKHRoaXMuY29uZGl0aW9uYWxJdGVtc1tpXS5pdGVtQ2xhc3MpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRJdGVtKFxuICAgICAgICAgICAgICAgICAgICBuZXcgQ29udGV4dE1lbnVJdGVtKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25kaXRpb25hbEl0ZW1zW2ldLnRleHQsIHRoaXMsIHRoaXMucGFyZW50U1ZHLFxuICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uYWxJdGVtc1tpXS5jbGlja0Z1bmN0aW9uKCR0YXJnZXQuYXR0cignaWQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLmFkZENsYXNzKCdjb25kaXRpb25hbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGlkZSBhbGwgY29uZGl0aW9uYWwgaXRlbXNcbiAgICAgKi9cbiAgICBoaWRlQWxsQ29uZGl0aW9uYWxJdGVtcygpIHtcbiAgICAgICAgdGhpcy4kZWwuY2hpbGRyZW4oJy5jb25kaXRpb25hbCcpLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGRpc3BsYXlzIHRoZSBjb250ZXh0IG1lbnUgd2l0aCB0aGUgcmlnaHQgc2V0IG9mIGNvbmRpdGlvbmFsIGl0ZW1zXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB4ICAgICAgIGhvcml6b250YWwgcG9zaXRpb24gb2YgdGhlIGNvbnRleHQgbWVudSBpbiBDU1MgcGl4ZWxzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB5ICAgICAgIHZlcnRpY2FsIHBvc2l0aW9uIG9mIHRoZSBjb250ZXh0IG1lbnUgaW4gQ1NTIHBpeGVsc1xuICAgICAqIEBwYXJhbSAge2pRdWVyeS5lbGVtZW50fSAkdGFyZ2V0IGpRdWVyeSB0YXJnZXQgb2YgYSBNb3VzZUV2ZW50IChlbGVtZW50IHRoYXQgdXNlciBjbGlja2VkIG9uKVxuICAgICAqL1xuICAgIGRpc3BsYXkoeCwgeSwgJHRhcmdldCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHlcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLiRlbC5jc3Moe1xuICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgICAgIHRvcDogeSArIFwicHhcIixcbiAgICAgICAgICAgIGxlZnQ6IHggKyBcInB4XCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZXNvbHZlQ29uZGl0aW9uYWxJdGVtcygkdGFyZ2V0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoaWRlIHRoZSBjb250ZXh0IG1lbnVcbiAgICAgKi9cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLiRlbC5jc3Moe2Rpc3BsYXk6ICdub25lJ30pO1xuICAgICAgICB0aGlzLmhpZGVBbGxDb25kaXRpb25hbEl0ZW1zKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0ICogYXMgc3ZnT2JqIGZyb20gJy4vc3ZnT2JqZWN0cy5qcydcbmltcG9ydCAqIGFzIFN0cnVjdHVyZXMgZnJvbSAnLi9zdHJ1Y3R1cmVzQW5kQ2xhc3Nlcy5qcydcbmltcG9ydCBMb2dpYyBmcm9tICcuL2xvZ2ljLmpzJ1xuXG4vKipcbiAqIG1hcHBpbmcgb2YgbG9naWNhbCBzdGF0ZXMgdG8gY3NzIGNsYXNzZXNcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbmNvbnN0IHN0YXRlQ2xhc3NlcyA9IHtcbiAgICBvbjogXCJzdGF0ZU9uXCIsXG4gICAgb2ZmOiBcInN0YXRlT2ZmXCIsXG4gICAgdW5rbm93bjogXCJzdGF0ZVVua25vd25cIixcbiAgICBvc2NpbGxhdGluZzogXCJzdGF0ZU9zY2lsbGF0aW5nXCJcbn07XG5cbi8qKlxuICogSGVscGVyIGNsYXNzIHVzZWQgYnkge0BsaW5rIFRyYW5zZm9ybX0uXG4gKlxuICogUmVwcmVzZW50cyBvbmUgc2luZ2xlIHByb3BlcnR5IG9mIHRoZSB0cmFuc2Zvcm0gYXJndW1lbnQsIGZvciBleGFtcGxlIGB0cmFuc2xhdGUoMzYwIDE1MClgXG4gKiB0aGF0IG1heSBiZSBhIHBhcnQgb2YgbG9uZ2VyIHRyYW5zZm9ybSBhcmd1bWVudCBsaWtlIGB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMzYwIDE1MCkgcm90YXRlKDkwIDMwIDIwKVwiYFxuICovXG5jbGFzcyBQcm9wZXJ0eSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgUHJvcGVydHkgb2JqZWN0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmddIHN0cmluZyBpbiB0aGUgcHJvcGVydHkgZm9ybWF0IGBwcm9wZXJ0eW5hbWUobGlzdCBvZiBzcGFjZSBzZXBhcmF0ZWQgdmFsdWVzKWBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzdHJpbmcpIHtcbiAgICAgICAgaWYoc3RyaW5nIT09dW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBzdHJpbmcucmVwbGFjZSgvXlsgXSooW14oXSspLiovLCBcIiQxXCIpO1xuICAgICAgICAgICAgdGhpcy5hcmdzID0gc3RyaW5nLnJlcGxhY2UoL15bXihdK1xcKCguKilcXCkvLCBcIiQxXCIpLnNwbGl0KCcgJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgb3IgcmVwbGFjZSB0aGUgbmFtZSBvZiB0aGlzIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgbmV3IG5hbWUgZm9yIHRoaXMgcHJvcGVydHlcbiAgICAgKi9cbiAgICBzZXROYW1lKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgYXJndW1lbnRzIG9mIHRoaXMgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0ge2FycmF5fSBhcmdzIGFycmF5IG9mIGFyZ3VtZW50c1xuICAgICAqL1xuICAgIHNldEFyZ3VtZW50cyhhcmdzKSB7XG4gICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IHByb3BlcnR5IGluIHRoZSBwcm9wZXJ0eSBmb3JtYXQgYG5hbWUoYXJnMSBhcmcyKWBcbiAgICAgKi9cbiAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWUgKyBcIihcIiArIHRoaXMuYXJncy5qb2luKFwiIFwiKSArIFwiKVwiO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBUEkgZm9yIG1hbmlwdWxhdGluZyB0aGUgdHJhbnNmb3JtIGFyZ3VtZW50IHVzZWQgaW4gU1ZHXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2Zvcm0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIFRyYW5zZm9ybSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZ10gc3RyaW5nIGluIHRoZSBmb3JtYXQgb2YgdGhlIGB0cmFuc2Zvcm1gIGFyZ3VtZW50IGluIFNWRywgZm9yIGV4YW1wbGUgYHRyYW5zbGF0ZSgzNjAgMTUwKSByb3RhdGUoOTAgMzAgMjApYFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHN0cmluZykge1xuICAgICAgICAvKipcbiAgICAgICAgICogYXJyYXkgb2Yge0BsaW5rIFByb3BlcnR5fSBpbnN0YW5jZXNcbiAgICAgICAgICogQHR5cGUge0FycmF5fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuXG4gICAgICAgIGlmKHN0cmluZyE9PXVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGV0IHNwbGl0SXRlbXMgPSBzdHJpbmcuc3BsaXQoXCIpXCIpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCBzcGxpdEl0ZW1zLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmKHNwbGl0SXRlbXNbaV0pIHsgLy8gaWYgbm90IGVtcHR5XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMucHVzaChuZXcgUHJvcGVydHkoc3BsaXRJdGVtc1tpXSArIFwiKVwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmluZCBhIHRyYW5zZm9ybSBwcm9wZXJ0eSBieSBuYW1lIGFuZCBnZXQgaXRzIGluZGV4IGluIHRoZSBbaXRlbXNdKCNpdGVtcykgYXJyYXlcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWUgbmFtZSBvZiB0aGUgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9ICAgICAgaW5kZXggb2YgdGhlIHByb3BlcnR5IGluIHRoZSBhcnJheSBvZiBwcm9wZXJ0aWVzIG9yIGAtMWAgaWYgbm90IGZvdW5kXG4gICAgICovXG4gICAgZ2V0SW5kZXgobmFtZSkge1xuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmKG5hbWUgPT09IHRoaXMuaXRlbXNbaV0ubmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCB0aGUgdHJhbnNsYXRlIHByb3BlcnR5XG4gICAgICogQHJldHVybiB7T2JqZWN0fSBvYmplY3QgY29udGFpbmluZyBwYXJhbWV0ZXJzIG9mIHRoZSB0cmFuc2xhdGUgYXR0cmlidXRlXG4gICAgICovXG4gICAgZ2V0VHJhbnNsYXRlKCkge1xuICAgICAgICBsZXQgYXJncyA9IHRoaXMuZ2V0QXJndW1lbnRzKHRoaXMuZ2V0SW5kZXgoXCJ0cmFuc2xhdGVcIikpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiBhcmdzWzBdLFxuICAgICAgICAgICAgeTogYXJnc1sxXVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IHRoZSByb3RhdGUgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IG9iamVjdCBjb250YWluaW5nIHBhcmFtZXRlcnMgb2YgdGhlIHJvdGF0ZSBhdHRyaWJ1dGVcbiAgICAgKi9cbiAgICBnZXRSb3RhdGUoKSB7XG4gICAgICAgIGxldCBhcmdzID0gdGhpcy5nZXRBcmd1bWVudHModGhpcy5nZXRJbmRleChcInJvdGF0ZVwiKSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRlZzogYXJnc1swXSxcbiAgICAgICAgICAgIGNlbnRyZVg6IGFyZ3NbMV0sXG4gICAgICAgICAgICBjZW50cmVZOiBhcmdzWzJdXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgdHJhbnNsYXRlIHRvIHRoZSBzcGVjaWZpZWQgdmFsdWVzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggaG9yaXpvbnRhbCB0cmFuc2xhdGlvblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IHZlcnRpY2FsIHRyYW5zbGF0aW9uXG4gICAgICovXG4gICAgc2V0VHJhbnNsYXRlKHgsIHkpIHtcbiAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXIoXCJ0cmFuc2xhdGVcIiwgW3gsIHldKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgcm90YXRlIHRvIHRoZSBzcGVjaWZpZWQgdmFsdWVzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlZyAgICAgYW5nbGUgb2YgdGhlIHJvdGF0aW9uIGluIGRlZ3JlZXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY2VudHJlWCBob3Jpem9udGFsIHBvc2l0aW9uIG9mIHRoZSBjZW50cmUgb2YgdGhlIHJvdGF0aW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNlbnRyZVkgdmVydGljYWwgcG9zaXRpb24gb2YgdGhlIGNlbnRyZSBvZiB0aGUgcm90YXRpb25cbiAgICAgKi9cbiAgICBzZXRSb3RhdGUoZGVnLCBjZW50cmVYLCBjZW50cmVZKSB7XG4gICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyKFwicm90YXRlXCIsIFtkZWcsIGNlbnRyZVgsIGNlbnRyZVldKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByb3RhdGUgYnkgOTAgZGVncmVlcyB0byB0aGUgcmlnaHRcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGNlbnRyZVggaG9yaXpvbnRhbCBwb3NpdGlvbiBvZiB0aGUgY2VudHJlIG9mIHRoZSByb3RhdGlvblxuICAgICAqIEBwYXJhbSAge251bWJlcn0gY2VudHJlWSB2ZXJ0aWNhbCBwb3NpdGlvbiBvZiB0aGUgY2VudHJlIG9mIHRoZSByb3RhdGlvblxuICAgICAqL1xuICAgIHJvdGF0ZVJpZ2h0KGNlbnRyZVgsIGNlbnRyZVkpIHtcbiAgICAgICAgaWYodGhpcy5nZXRJbmRleChcInJvdGF0ZVwiKT09PS0xKSB7XG4gICAgICAgICAgICB0aGlzLnNldFJvdGF0ZSg5MCwgY2VudHJlWCwgY2VudHJlWSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmV3Um90YXRpb24gPSAocGFyc2VJbnQodGhpcy5nZXRSb3RhdGUoKS5kZWcpICsgOTApICUgMzYwO1xuXG4gICAgICAgICAgICBpZihuZXdSb3RhdGlvbj09PTE4MCkge1xuICAgICAgICAgICAgICAgIC8vIHN3YXAgY2VudHJlIGNvb3JkaW5hdGVzXG4gICAgICAgICAgICAgICAgLy8gYmVjYXVzZSByb3RhdGUoYywgeCwgeSkgaXMgZGVmaW5lZCBsaWtlIHRyYW5zZm9ybSgteCwgLXkpIHJvdGF0ZShjKSB0cmFuc2Zvcm0oeCwgeSlcbiAgICAgICAgICAgICAgICBsZXQgYSA9IGNlbnRyZVg7XG4gICAgICAgICAgICAgICAgY2VudHJlWCA9IGNlbnRyZVk7XG4gICAgICAgICAgICAgICAgY2VudHJlWSA9IGE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0Um90YXRlKFxuICAgICAgICAgICAgICAgIG5ld1JvdGF0aW9uLFxuICAgICAgICAgICAgICAgIGNlbnRyZVgsXG4gICAgICAgICAgICAgICAgY2VudHJlWVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCB0aGUgdHJhbnNmb3JtIHZhbHVlcyBpbiBhIHN0cmluZ1xuICAgICAqIEByZXR1cm4ge3N0cmluZ30gc3RyaW5nIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSB2YWx1ZSBmb3IgdGhlIHRyYW5zZm9ybSBwcm9wZXJ0eSBvZiBhIFNWRyBlbGVtZW50XG4gICAgICovXG4gICAgZ2V0KCkge1xuICAgICAgICBsZXQgcmV0VmFsID0gXCJcIjtcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgaWYoaSE9PTApIHtcbiAgICAgICAgICAgICAgICByZXRWYWwgKz0gXCIgXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXRWYWwgKz0gdGhpcy5pdGVtc1tpXS5nZXQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0VmFsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCBhcmd1bWVudHMgb2YgYSBwcm9wZXJ0eSBzcGVjaWZpZWQgYnkgaW5kZXhcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGluZGV4IGluZGV4IG9mIHRoZSBwcm9wZXJ0eVxuICAgICAqIEByZXR1cm4ge2FycmF5fSAgICAgICBhcnJheSBvZiBhcmd1bWVudHMgb2YgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eVxuICAgICAqL1xuICAgIGdldEFyZ3VtZW50cyhpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtc1tpbmRleF0uYXJncztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgYXJndW1ldHMgb2YgYSBwcm9wZXJ0eSBzcGVjaWZpZWQgYnkgbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHthcnJheX0gYXJncyBhcnJheSBvZiBhcmd1bWVudHMgb2YgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eVxuICAgICAqL1xuICAgIHNldFBhcmFtZXRlcihuYW1lLCBhcmdzKSB7XG4gICAgICAgIC8vIGRldGVybWluZSBpbmRleCBvZiB0aGUgcGFyYW1ldGVyIChpZiBzZXQpLCBlbHNlIGluZGV4ID09IC0xXG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuZ2V0SW5kZXgobmFtZSk7XG5cbiAgICAgICAgLy8gaWYgdGhlIHByb3BlcnR5IGhhcyBiZWVuIGFscmVhZHkgc2V0LCBjaGFuZ2UgaXQgKHJld3JpdGUgdGhlIGFycmF5IGluIHRoZSByaWdodCBpbmRleClcbiAgICAgICAgLy8gZWxzZSBjcmVhdGUgYSBuZXcgb25lIChzZXQgaW5kZXggdG8gdGhlIGxlbmd0aCBvZiBhbiBhcnJheSAtLT4gYWQgYW4gaXRlbSB0byB0aGUgZW5kKVxuICAgICAgICBpZihpbmRleD09PS0xKSB7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5pdGVtc1tpbmRleF0gPSBuZXcgUHJvcGVydHkoKTtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNbaW5kZXhdLnNldE5hbWUobmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzYXZlIGFyZ3MgdW5kZXIgdGhlIHJpZ2h0IGluZGV4XG4gICAgICAgIHRoaXMuaXRlbXNbaW5kZXhdLnNldEFyZ3VtZW50cyhhcmdzKTtcbiAgICB9XG59XG5cbi8qKlxuICogcGFyZW50IGNsYXNzIGZvciBhbGwgbmV0d29yayBlbGVtZW50c1xuICovXG5jbGFzcyBOZXR3b3JrRWxlbWVudCB7XG4gICAgLyoqXG4gICAgICogQmFzaWMgY29uc3RydWN0b3IgZm9yIE5ldHdvcmtFbGVtZW50XG4gICAgICogQHBhcmFtIHtDYW52YXN9IHBhcmVudFNWRyByZWZlcmVuY2UgdG8gdGhlIGluc3RhbmNlIG9mIHtAbGluayBDYW52YXN9IHRoYXQgdGhpcyBlbGVtZW50IGJlbG9uZ3MgdG9cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTVkcpIHtcbiAgICAgICAgaWYoIXBhcmVudFNWRykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlBhcmVudCBTVkcgZWxlbWVudCBoYXMgdG8gYmUgZGVmaW5lZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJlbnRTVkcgPSBwYXJlbnRTVkc7XG5cbiAgICAgICAgLy8gdXNlZCB0byBzdG9yZSB0aGUgc3ZqT2JqZWN0J3MgaW5zdGFuY2Ugb2YgdGhpcyBlbGVtZW50XG4gICAgICAgIHRoaXMuc3ZnT2JqID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdW5pcXVlIElEIG9mIHRoZSBTVkcgZWxlbWVudCB0aWVkIHRvIHRoaXMgbG9naWNhbCBlbGVtZW50XG4gICAgICogQHJldHVybiB7c3RyaW5nfSBJRCBvZiB0aGUgU1ZHIGVsZW1lbnRcbiAgICAgKi9cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN2Z09iai5pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBlbXB0eSBjYWxsYmFjayBmdW5jdGlvbiB0byBwcmV2ZW50IGVycm9yIG1lc3NhZ2VzLCBmdW5jdGlvbiBpcyBpbXBsZW1lbnRlZCBsYXRlciBpbiB0aGUge0BsaW5rIEJveH0gY2xhc3NcbiAgICAgKi9cbiAgICBvbk1vdXNlRG93bigpIHt9XG5cbiAgICAvKipcbiAgICAgKiBlbXB0eSBmdW5jdGlvbiB0byBwcmV2ZW50IGVycm9yIG1lc3NhZ2VzLCBmdW5jdGlvbiBpcyBpbXBsZW1lbnRlZCBsYXRlciBpbiB0aGUge0BsaW5rIEJveH0gYW5kIHtAbGluayBDb25uZWN0b3J9IGNsYXNzZXNcbiAgICAgKi9cbiAgICBvbk1vdXNlVXAoKSB7fVxuXG4gICAgLyoqXG4gICAgICogZW1wdHkgZnVuY3Rpb24gdG8gcHJldmVudCBlcnJvciBtZXNzYWdlcywgZnVuY3Rpb24gaXMgaW1wbGVtZW50ZWQgbGF0ZXIgaW4gdGhlIHtAbGluayBCb3h9IGNsYXNzXG4gICAgICovXG4gICAgb25Nb3VzZU1vdmUoKSB7fVxuXG4gICAgLyoqXG4gICAgICogXCJ2aXJ0dWFsXCIgZ2V0dGVyIGZvciBqc29uIGRhdGEsIHByaW50cyBhbiBlcnJvciB0aGF0IGl0IGhhcyB0byBiZSByZWRlZmluZWQgaW4gdGhlIGRlcml2ZWQgY2xhc3Nlc1xuICAgICAqL1xuICAgIGdldCBleHBvcnREYXRhKCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiJ2pzb24nIGdldHRlciBoYXMgbm90IGJlZW4gZGVmaW5lZCBmb3IgdGhpcyBlbGVtZW50XCIsIHRoaXMpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuLyoqXG4gKiBwYXJlbnQgY2xhc3MgZm9yIGlucHV0IGFuZCBvdXRwdXQgY29ubmVjdG9yc1xuICogQGV4dGVuZHMgTmV0d29ya0VsZW1lbnRcbiAqL1xuY2xhc3MgQ29ubmVjdG9yIGV4dGVuZHMgTmV0d29ya0VsZW1lbnQge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzfSBwYXJlbnRTVkcgbGluayB0byB0aGUge0BsaW5rIENhbnZhc30gaW5zdGFuY2UgdGhhdCB0aGlzIGNvbm5lY3RvciB3aWxsIGJlbG9uZyB0b1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBncmlkU2l6ZSAgc2l6ZSBvZiB0aGUgZ3JpZCBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxlZnQgICAgICBob3Jpem9udGFsIHBvc2l0aW9uIGRlZmluZWQgaW4gZ3JpZCB1bml0cyAoU1ZHIHBpeGVscyBkaXZpZGVkIGJ5IHRoZSBncmlkIHNpemUpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRvcCAgICAgICB2ZXJ0aWNhbCBwb3NpdGlvbiBkZWZpbmVkIGluIGdyaWQgdW5pdHMgKFNWRyBwaXhlbHMgZGl2aWRlZCBieSB0aGUgZ3JpZCBzaXplKVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFNWRywgZ3JpZFNpemUsIGxlZnQsIHRvcCkge1xuICAgICAgICBzdXBlcihwYXJlbnRTVkcpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzaXplIG9mIHRoZSBncmlkIGluIFNWRyBwaXhlbHNcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ3JpZFNpemUgPSBncmlkU2l6ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHNpemUgb2YgdGhlIGNvbm5lY3RvciBpbiBTVkcgcGl4ZWxzXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbm5lY3RvclNpemUgPSBncmlkU2l6ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIG9mZnNldCBvZiB0aGUgY29ubmVjdG9yIGZyb20gdGhlIGdyaWQgaW4gU1ZHIHBpeGVsc1xuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb25uZWN0b3JPZmZzZXQgPSB0aGlzLmNvbm5lY3RvclNpemUgLyAyO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBpbnN0YW5jZSBvZiB7QGxpbmsgc3ZnT2JqZWN0cy5zdmdPYmp9IHRoYXQgaG9sZHMgYWxsIFNWRyBpbmZvcm1hdGlvbiBhYm91dCB0aGlzIGNvbm5lY3RvclxuICAgICAgICAgKiBAdHlwZSB7c3ZnT2JqfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdmdPYmogPSBuZXcgc3ZnT2JqLlJlY3RhbmdsZShcbiAgICAgICAgICAgIGxlZnQgKiB0aGlzLmdyaWRTaXplIC0gdGhpcy5jb25uZWN0b3JPZmZzZXQsXG4gICAgICAgICAgICB0b3AgKiB0aGlzLmdyaWRTaXplIC0gdGhpcy5jb25uZWN0b3JPZmZzZXQsXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RvclNpemUsXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RvclNpemUsXG4gICAgICAgICAgICBcIm5vbmVcIixcbiAgICAgICAgICAgIFwiYmxhY2tcIlxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuc3ZnT2JqLiRlbC5hZGRDbGFzcyhcImNvbm5lY3RvclwiKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogdGhpcyBmbGFnIGRlc2NyaWJlcyB3aGV0aGVyIHRoaXMgY29ubmVjdG9yIGlzIGFuIGlucHV0IGNvbm5lY3RvclxuICAgICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXNJbnB1dENvbm5lY3RvciA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjdXJyZW50IGxvZ2ljYWwgc3RhdGUgb2YgdGhpcyBjb25uZWN0b3JcbiAgICAgICAgICogQHR5cGUge0xvZ2ljLnN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbGVtZW50U3RhdGUgPSBMb2dpYy5zdGF0ZS51bmtub3duO1xuICAgICAgICB0aGlzLnN2Z09iai5hZGRDbGFzcyhzdGF0ZUNsYXNzZXMudW5rbm93bik7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHNldCBvZiBpZHMgb2YgYWxsIHdpcmVzIGNvbm5lY3RlZCB0byB0aGlzIGNvbm5lY3RvclxuICAgICAgICAgKiBAdHlwZSB7U2V0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53aXJlSWRzID0gbmV3IFNldCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHdoZXRoZXIgdGhpcyBjb25uZWN0b3IgaXMgYW4gb3V0cHV0IGNvbm5lY3RvclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IGlzT3V0cHV0Q29ubmVjdG9yKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuaXNJbnB1dENvbm5lY3RvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB3aGV0aGVyIHRoaXMgY29ubmVjdG9yIGlzIGFuIG91dHB1dCBjb25uZWN0b3JcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIHNldCBpc091dHB1dENvbm5lY3Rvcih2YWx1ZSkge1xuICAgICAgICB0aGlzLmlzSW5wdXRDb25uZWN0b3IgPSAhdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYWRkIGEgd2lyZSBpZCB0byB0aGUgbGlzdCBvZiB3aXJlIGlkc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB3aXJlSWRcbiAgICAgKi9cbiAgICBhZGRXaXJlSWQod2lyZUlkKSB7XG4gICAgICAgIHRoaXMud2lyZUlkcy5hZGQod2lyZUlkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgYSB3aXJlIGlkIGZyb20gdGhlIGxpc3Qgb2Ygd2lyZSBpZHNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gd2lyZUlkXG4gICAgICovXG4gICAgcmVtb3ZlV2lyZUlkKHdpcmVJZCkge1xuICAgICAgICB0aGlzLndpcmVJZHMuZGVsZXRlKHdpcmVJZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIGEgd2lyZSBzcGVjaWZpZWQgYnkgSUQgYW5kIHVwZGF0ZSB0aGUgY29ubmVjdG9yXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSB3aXJlSWQgSUQgb2YgdGhlIHdpcmUgdG8gYmUgcmVtb3ZlZFxuICAgICAqL1xuICAgIHJlbW92ZVdpcmVJZEFuZFVwZGF0ZSh3aXJlSWQpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVXaXJlSWQod2lyZUlkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgbG9naWNhbCBzdGF0ZSBvZiB0aGUgY29ubmVjdG9yXG4gICAgICogQHBhcmFtIHtMb2dpYy5zdGF0ZX0gc3RhdGUgbmV3IHN0YXRlIG9mIHRoZSBjb25uZWN0b3JcbiAgICAgKi9cbiAgICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICB0aGlzLnN2Z09iai5yZW1vdmVDbGFzc2VzKHN0YXRlQ2xhc3Nlcy5vbiwgc3RhdGVDbGFzc2VzLm9mZiwgc3RhdGVDbGFzc2VzLnVua25vd24sIHN0YXRlQ2xhc3Nlcy5vc2NpbGxhdGluZyk7XG5cbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBMb2dpYy5zdGF0ZS51bmtub3duOlxuICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqLmFkZENsYXNzKHN0YXRlQ2xhc3Nlcy51bmtub3duKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUub246XG4gICAgICAgICAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2xhc3Moc3RhdGVDbGFzc2VzLm9uKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUub2ZmOlxuICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqLmFkZENsYXNzKHN0YXRlQ2xhc3Nlcy5vZmYpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZzpcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iai5hZGRDbGFzcyhzdGF0ZUNsYXNzZXMub3NjaWxsYXRpbmcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbGVtZW50U3RhdGUgPSBzdGF0ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgc3RhdGUgb2YgdGhpcyBjb25uZWN0b3JcbiAgICAgKiBAcmV0dXJuIHtMb2dpYy5zdGF0ZX1cbiAgICAgKi9cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRTdGF0ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgc3ZnT2JqIGluc3RhbmNlIGNvbnRlbnQgb2YgdGhpcyBjb25uZWN0b3JcbiAgICAgKiBAcmV0dXJuIHtzdmdPYmplY3RzLlJlY3RhbmdsZX1cbiAgICAgKi9cbiAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN2Z09iajtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjYWxsIFt3aXJlQ3JlYXRpb25IZWxwZXJdKC4vbW9kdWxlLUNhbnZhcy5odG1sI3dpcmVDcmVhdGlvbkhlbHBlcikgb24gbW91c2UgdXBcbiAgICAgKi9cbiAgICBvbk1vdXNlVXAoKSB7XG4gICAgICAgIHRoaXMucGFyZW50U1ZHLndpcmVDcmVhdGlvbkhlbHBlcih0aGlzLnN2Z09iai5pZCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbm5lY3RvciB0aGF0IGdldHMgaXRzIHN0YXRlIGZyb20gYSBjb25uZWN0ZWQgdmFsdWUgYW5kIHBhc3NlcyBpdCB0aHJvdWdoIHRvIHRoZSB7QGxpbmsgQm94fSB0aGlzIGNvbm5lY3RvciBiZWxvbmdzIHRvLlxuICogQGV4dGVuZHMgQ29ubmVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dENvbm5lY3RvciBleHRlbmRzIENvbm5lY3RvciB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHLCBncmlkU2l6ZSwgbGVmdCwgdG9wKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudFNWRywgZ3JpZFNpemUsIGxlZnQsIHRvcCk7XG5cbiAgICAgICAgdGhpcy5pc0lucHV0Q29ubmVjdG9yID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsIHRoZSBzZXRTdGF0ZSBtZXRob2Qgb2Yge0BsaW5rIENvbm5lY3Rvcn0gYW5kIHRoYW4gcmVmcmVzaCB0aGUgc3RhdGUgb2YgdGhlIGNvbm5lY3RlZCB7QGxpbmsgQm94fVxuICAgICAqIEBwYXJhbSB7TG9naWMuc3RhdGV9IHN0YXRlIG5ldyB7QGxpbmsgTG9naWMuc3RhdGV9IG9mIHRoZSBjb25uZWN0b3JcbiAgICAgKi9cbiAgICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICBzdXBlci5zZXRTdGF0ZShzdGF0ZSk7XG5cbiAgICAgICAgbGV0IGdhdGUgPSB0aGlzLnBhcmVudFNWRy5nZXRCb3hCeUNvbm5lY3RvcklkKHRoaXMuc3ZnT2JqLmlkKTtcbiAgICAgICAgZ2F0ZS5yZWZyZXNoU3RhdGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgdGhlIHdpcmUgKGJ5IGNhbGxpbmcgdGhlIHJlbW92ZVdpcmVJZEFuZFVwZGF0ZSBvZiB7QGxpbmsgQ29ubmVjdG9yfSlcbiAgICAgKiBhbmQgdXBkYXRlIHN0YXRlIG9mIHRoaXMgY29ubmVjdG9yIGJ5IHNldHRpbmcgaXQgdG8gdW5kZWZpbmVkIHVzaW5nIHRoZSBzZXRTdGF0ZSBtZXRob2RcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHdpcmVJZCBJRCBvZiB0aGUge0BsaW5rIFdpcmV9XG4gICAgICovXG4gICAgcmVtb3ZlV2lyZUlkQW5kVXBkYXRlKHdpcmVJZCkge1xuICAgICAgICBzdXBlci5yZW1vdmVXaXJlSWRBbmRVcGRhdGUod2lyZUlkKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShMb2dpYy5zdGF0ZS51bmtub3duKTtcbiAgICB9XG5cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5zdGF0ZTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29ubmVjdG9yIHRoYXQgdGFrZXMgYSBzdGF0ZSBkZWZpbmVkIGJ5IHRoZSB7QGxpbmsgQm94fSBpdCBiZWxvbmdzIHRvIGFuZCBwYXNzZXMgaXQgdG8gYWxsIGNvbm5lY3RlZCB3aXJlXG4gKiBAZXh0ZW5kcyBDb25uZWN0b3JcbiAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dENvbm5lY3RvciBleHRlbmRzIENvbm5lY3RvciB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHLCBncmlkU2l6ZSwgbGVmdCwgdG9wKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudFNWRywgZ3JpZFNpemUsIGxlZnQsIHRvcCk7XG5cbiAgICAgICAgdGhpcy5pc091dHB1dENvbm5lY3RvciA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbCB0aGUgc2V0U3RhdGUgbWV0aG9kIG9mIHtAbGluayBDb25uZWN0b3J9IGFuZCB0aGFuIHNldCB0aGUgc3RhdGUgb2YgdGhlIGNvbm5lY3RlZCB7QGxpbmsgV2lyZX1zXG4gICAgICogQHBhcmFtIHtMb2dpYy5zdGF0ZX0gc3RhdGUgbmV3IHtAbGluayBMb2dpYy5zdGF0ZX0gb2YgdGhlIGNvbm5lY3RvclxuICAgICAqL1xuICAgIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgICAgIHN1cGVyLnNldFN0YXRlKHN0YXRlKTtcblxuICAgICAgICBmb3IgKGNvbnN0IHdpcmVJZCBvZiB0aGlzLndpcmVJZHMpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50U1ZHLmdldFdpcmVCeUlkKHdpcmVJZCkuc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuc3RhdGU7XG4gICAgfVxufVxuXG4vKipcbiAqIFBhcmVudCBjbGFzcyBmb3IgZ2F0ZXMgYW5kIGlucHV0IGFuZCBvdXRwdXQgYm94ZXMuIERlZmluZXMgYWxsIHRoZSBmYWN0b3JzXG4gKiB0aGF0IHRoZSBib3hlcyBoYXZlIGluIGNvbW1vbiAoc3ZnT2JqIHN0cnVjdHVyZSwgZHJhZ2dhYmlsaXR5IGFuZCByb3RhdGFiaWxpdHkuLi4pXG4gKiBAZXh0ZW5kcyBOZXR3b3JrRWxlbWVudFxuICovXG5jbGFzcyBCb3ggZXh0ZW5kcyBOZXR3b3JrRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHLCBuYW1lLCBjYXRlZ29yeSwgZ3JpZFdpZHRoLCBncmlkSGVpZ2h0KSB7XG4gICAgICAgIHN1cGVyKHBhcmVudFNWRyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICB0aGlzLmdyaWRTaXplID0gdGhpcy5wYXJlbnRTVkcuZ3JpZFNpemU7XG5cbiAgICAgICAgdGhpcy51cmwgPSBcImltZy9cIiArIHRoaXMuY2F0ZWdvcnkgKyBcIi9cIiArIHRoaXMubmFtZSArIFwiLnN2Z1wiO1xuXG4gICAgICAgIHRoaXMuY29ubmVjdG9ycyA9IFtdO1xuXG4gICAgICAgIHRoaXMuc3ZnT2JqID0gbmV3IHN2Z09iai5Hcm91cCgpO1xuXG4gICAgICAgIHRoaXMud2lkdGggPSBncmlkV2lkdGggKiB0aGlzLmdyaWRTaXplO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGdyaWRIZWlnaHQgKiB0aGlzLmdyaWRTaXplO1xuXG4gICAgICAgIHRoaXMuZ3JpZFdpZHRoID0gZ3JpZFdpZHRoO1xuICAgICAgICB0aGlzLmdyaWRIZWlnaHQgPSBncmlkSGVpZ2h0O1xuXG4gICAgICAgIC8vIHRyYW5zcGFyZW50IGJhY2tncm91bmQgcmVjdGFuZ2xlXG4gICAgICAgIGxldCByZWN0YW5nbGUgPSBuZXcgc3ZnT2JqLlJlY3RhbmdsZSgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgXCJub25lXCIsIFwibm9uZVwiKTtcbiAgICAgICAgcmVjdGFuZ2xlLiRlbC5hZGRDbGFzcygncmVjdCcpO1xuXG4gICAgICAgIHRoaXMuc3ZnT2JqLmFkZENoaWxkKHJlY3RhbmdsZSk7XG4gICAgICAgIC8vIGltYWdlIG9mIHRoZSBlbGVtZW50XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgc3ZnT2JqLlN2Z0ltYWdlKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnVybCk7XG4gICAgICAgIHRoaXMuc3ZnT2JqLmFkZENoaWxkKHRoaXMuaW1hZ2UpO1xuXG4gICAgICAgIC8vIGFkZCBkcmFnZ2FiaWxpdHkgYW5kIHJvdGF0YWJpbGl0eVxuICAgICAgICB0aGlzLnN2Z09iai5kcmFnZ2FibGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuc3ZnT2JqLnJvdGF0YWJsZSh0cnVlKTtcblxuICAgICAgICAvLyBhZGQgdHlwZT1cImdhdGVcIiwgdXNlZCBpbiBzcGVjaWFsIGNhbGxiYWNrcyBpbiBjb250ZXh0bWVudVxuICAgICAgICB0aGlzLnN2Z09iai5hZGRBdHRyKHtcInR5cGVcIjogY2F0ZWdvcnl9KTtcblxuICAgICAgICB0aGlzLnN2Z09iai4kZWwuYWRkQ2xhc3MoXCJib3hcIik7XG4gICAgICAgIHRoaXMuc3ZnT2JqLiRlbC5hZGRDbGFzcyhjYXRlZ29yeSk7XG5cbiAgICAgICAgdGhpcy5nZW5lcmF0ZUJsb2NrTm9kZXMoKTtcbiAgICB9XG5cbiAgICBnZXQgaW5wdXRDb25uZWN0b3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0b3JzLmZpbHRlcihjb25uID0+IGNvbm4uaXNJbnB1dENvbm5lY3RvcilcbiAgICB9XG5cbiAgICBnZXQgb3V0cHV0Q29ubmVjdG9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdG9ycy5maWx0ZXIoY29ubiA9PiBjb25uLmlzT3V0cHV0Q29ubmVjdG9yKVxuICAgIH1cblxuICAgIGdldCBleHBvcnREYXRhKCkge1xuICAgICAgICBsZXQgY29ubmVjdGlvbnMgPSBbXTtcblxuICAgICAgICAvLyBnbyB0aHJvdWdoIGFsbCBjb25uZWN0b3JzXG4gICAgICAgIGxldCBjb3VudGVyID0gMFxuICAgICAgICBmb3IgKGNvbnN0IGNvbm4gb2YgdGhpcy5jb25uZWN0b3JzKSB7XG4gICAgICAgICAgICAvLyBnbyB0aHJvdWdoIGVhY2ggaXRzIHdpcmUgaWRcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb25uLndpcmVJZHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGhpc1dpcmVJZDtcbiAgICAgICAgICAgICAgICBpZighdGhpcy5wYXJlbnRTVkcuZXhwb3J0V2lyZUlkTWFwLmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgd2lyZSBpZCBpcyBub3QgaW4gdGhlIG1hcCwgYWRkIGl0IGFuZCBhc3NpZ24gbmV3IGFyYml0cmFyeSBpZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudFNWRy5leHBvcnRXaXJlSWRNYXAuc2V0KGl0ZW0sIHRoaXMucGFyZW50U1ZHLmV4cG9ydFdpcmVJZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNXaXJlSWQgPSB0aGlzLnBhcmVudFNWRy5leHBvcnRXaXJlSWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50U1ZHLmV4cG9ydFdpcmVJZCsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVsc2UgZ2V0IGlkIGZyb20gdGhlIG1hcFxuICAgICAgICAgICAgICAgICAgICB0aGlzV2lyZUlkID0gdGhpcy5wYXJlbnRTVkcuZXhwb3J0V2lyZUlkTWFwLmdldChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIC8vIGFkZCB0aGlzIGNvbm5lY3Rpb24gdG8gdGhlIGxpc3RcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uc1tjb25uZWN0aW9ucy5sZW5ndGhdID0ge1xuICAgICAgICAgICAgICAgICAgICBpbmRleDogY291bnRlcixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogY29ubi50eXBlLFxuICAgICAgICAgICAgICAgICAgICB3aXJlSWQ6IHRoaXNXaXJlSWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY291bnRlcisrXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgLy8gaWQ6IHRoaXMuc3ZnT2JqLmlkLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcnksXG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRoaXMuZ2V0VHJhbnNmb3JtKCksXG4gICAgICAgICAgICBjb25uZWN0aW9uczogY29ubmVjdGlvbnNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUJsb2NrTm9kZXMobWFyZ2luVG9wID0gMCwgbWFyZ2luUmlnaHQgPSAwLCBtYXJnaW5Cb3R0b20gPSAwLCBtYXJnaW5MZWZ0ID0gMCwgLi4uc3BlY2lhbE5vZGVzKSB7XG4gICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IobGV0IHggPSBtYXJnaW5MZWZ0IDsgeCA8PSB0aGlzLmdyaWRXaWR0aCAtIG1hcmdpblJpZ2h0IDsgeCsrKSB7XG4gICAgICAgICAgICBmb3IobGV0IHkgPSBtYXJnaW5Ub3AgOyB5IDw9IHRoaXMuZ3JpZEhlaWdodCAtIG1hcmdpbkJvdHRvbSA7IHkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzLmFkZCh7XG4gICAgICAgICAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICAgICAgICAgIHk6IHlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IG5vZGUgb2Ygc3BlY2lhbE5vZGVzKSB7XG4gICAgICAgICAgICB0aGlzLmJsb2NrZWROb2Rlcy5hZGQobm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZWZyZXNoU3RhdGUoKSB7XG4gICAgICAgIC8vIGVtcHR5IGZ1bmN0aW9uLCByZWRlZmluZWQgaW4gaW5oZXJpdGVkIGVsZW1lbnRzXG4gICAgICAgIC8vIHJlZnJlc2hTdGF0ZSB0YWtlcyBpbnB1dCBjb25uZWN0b3IgdmFsdWVzIGFuZCBzZXRzIG91dHB1dCB2YWx1ZXMgYWNjb3JkaW5nbHlcbiAgICAgICAgY29uc29sZS53YXJuKFwiQ2FsbGluZyB0aGUgdmlydHVhbCBmdW5jdGlvbiByZWZyZXNoU3RhdGUgaGFzIG5vIGVmZmVjdC5cIik7XG4gICAgfVxuXG4gICAgLy8gdXNhZ2U6IGNoYW5nZUltYWdlKFwiYWJjXCIpIGNoYW5nZXMgaW1hZ2UgdXJsIHRvIGltYWdlLWFiYy5zdmdcbiAgICAvLyAgICAgICAgY2hhbmdlSW1hZ2UoKSBjaGFuZ2VzIGltYWdlIHVybCB0byB0aGUgZGVmYXVsdCBvbmUgKGltYWdlLnN2ZylcbiAgICBjaGFuZ2VJbWFnZShzdWZmaXgpIHtcbiAgICAgICAgaWYoc3VmZml4ID09PSB1bmRlZmluZWQgfHwgc3VmZml4ID09PSBcIlwiKSB7XG4gICAgICAgICAgICBzdWZmaXggPSBcIlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VmZml4ID0gXCItXCIgKyBzdWZmaXg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cmwgPSBcImltZy9cIiArIHRoaXMuY2F0ZWdvcnkgKyBcIi9cIiArIHRoaXMubmFtZSArIHN1ZmZpeCArIFwiLnN2Z1wiO1xuXG4gICAgICAgIHRoaXMuaW1hZ2UuY2hhbmdlVXJsKHRoaXMudXJsKTtcbiAgICB9XG5cbiAgICAvLyByZXR1cm5zIGEgalF1ZXJ5IG9iamVjdFxuICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ZnT2JqLmdldCgpO1xuICAgIH1cblxuICAgIHJlbW92ZUJsb2NrZWROb2RlKHgsIHkpIHtcbiAgICAgICAgZm9yKGxldCBpdGVtIG9mIHRoaXMuYmxvY2tlZE5vZGVzKSB7XG4gICAgICAgICAgICBpZihpdGVtLng9PT14ICYmIGl0ZW0ueT09PXkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrZWROb2Rlcy5kZWxldGUoaXRlbSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByb3RhdGVCbG9ja2VkTm9kZXNSaWdodCgpIHtcbiAgICAgICAgaWYodGhpcy5yb3RhdGlvbj09PXVuZGVmaW5lZCB8fCB0aGlzLnJvdGF0aW9uPT09NCkge1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb3RhdGlvbisrO1xuXG4gICAgICAgIGlmKHRoaXMucm90YXRpb24gPT09IDEgfHwgdGhpcy5yb3RhdGlvbiA9PT0gMykge1xuICAgICAgICAgICAgbGV0IG5ld0Jsb2NrZWROb2RlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3QmxvY2tlZE5vZGVzLmFkZCh7XG4gICAgICAgICAgICAgICAgICAgIHg6IE1hdGguYWJzKGl0ZW0ueSAtIHRoaXMuZ3JpZEhlaWdodCksXG4gICAgICAgICAgICAgICAgICAgIHk6IGl0ZW0ueFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmJsb2NrZWROb2RlcyA9IG5ld0Jsb2NrZWROb2RlcztcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMucm90YXRpb24gPT09IDIgfHwgdGhpcy5yb3RhdGlvbiA9PT0gNCkge1xuICAgICAgICAgICAgbGV0IG5ld0Jsb2NrZWROb2RlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3QmxvY2tlZE5vZGVzLmFkZCh7XG4gICAgICAgICAgICAgICAgICAgIHg6IE1hdGguYWJzKGl0ZW0ueSAtIHRoaXMuZ3JpZFdpZHRoKSxcbiAgICAgICAgICAgICAgICAgICAgeTogaXRlbS54XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzID0gbmV3QmxvY2tlZE5vZGVzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkQ29ubmVjdG9yKGxlZnQsIHRvcCwgaXNJbnB1dENvbm5lY3Rvcikge1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmNvbm5lY3RvcnMubGVuZ3RoO1xuICAgICAgICBpZihpc0lucHV0Q29ubmVjdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RvcnNbaW5kZXhdID0gbmV3IElucHV0Q29ubmVjdG9yKHRoaXMucGFyZW50U1ZHLCB0aGlzLmdyaWRTaXplLCBsZWZ0LCB0b3ApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0b3JzW2luZGV4XSA9IG5ldyBPdXRwdXRDb25uZWN0b3IodGhpcy5wYXJlbnRTVkcsIHRoaXMuZ3JpZFNpemUsIGxlZnQsIHRvcCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2hpbGQodGhpcy5jb25uZWN0b3JzW2luZGV4XS5nZXQoKSk7XG5cbiAgICAgICAgdGhpcy5yZW1vdmVCbG9ja2VkTm9kZShsZWZ0LCB0b3ApO1xuICAgIH1cblxuICAgIGFkZElucHV0Q29ubmVjdG9yKGxlZnQsIHRvcCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRDb25uZWN0b3IobGVmdCwgdG9wLCB0cnVlKVxuICAgIH1cblxuICAgIGFkZE91dHB1dENvbm5lY3RvcihsZWZ0LCB0b3ApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkQ29ubmVjdG9yKGxlZnQsIHRvcCwgZmFsc2UpXG4gICAgfVxuXG4gICAgLy8gcmV0dXJucyB0aGUgY29ubmVjdG9yIG9iamVjdCBiYXNlZCBvbiBpdHMgaWRcbiAgICBnZXRDb25uZWN0b3JCeUlkKGNvbm5lY3RvcklkKSB7XG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy5jb25uZWN0b3JzLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgaWYodGhpcy5jb25uZWN0b3JzW2ldLmlkPT09Y29ubmVjdG9ySWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0b3JzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlmIGNvbm5lY3RvciBub3QgZm91bmQsIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBnZXRUcmFuc2Zvcm0oKSB7XG4gICAgICAgIGxldCB0cmFuc2Zvcm07XG4gICAgICAgIGlmICghdGhpcy5zdmdPYmouJGVsLmF0dHIoXCJ0cmFuc2Zvcm1cIikpIHtcbiAgICAgICAgICAgIC8vIHRoZSBlbGVtZW50IGRvZXMgbm90IGhhdmUgYSBcInRyYW5zZm9ybVwiIHByb3BlcnR5IC0tPiBjcmVhdGUgaXRcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybS5zZXRUcmFuc2xhdGUoMCwgMCk7XG4gICAgICAgICAgICB0aGlzLnN2Z09iai5hZGRBdHRyKHtcInRyYW5zZm9ybVwiOiB0cmFuc2Zvcm0uZ2V0KCl9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHRoZSBlbGVtZW50IGRvZXMgaGF2ZSBhIFwidHJhbnNmb3JtXCIgcHJvcGVydHkgLS0+IGNoYW5nZSBpdFxuICAgICAgICAgICAgdHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSh0aGlzLnN2Z09iai4kZWwuYXR0cihcInRyYW5zZm9ybVwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybTtcbiAgICB9XG5cbiAgICBzZXRUcmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHRoaXMuc3ZnT2JqLmFkZEF0dHIoe1widHJhbnNmb3JtXCI6IHRyYW5zZm9ybS5nZXQoKX0pO1xuICAgIH1cblxuICAgIG9uTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgIHRoaXMubW91c2VMZWZ0ID0gZmFsc2U7XG4gICAgICAgIGlmKGV2ZW50LndoaWNoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLm1vdXNlTGVmdCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm9uTW91c2VEb3duTGVmdChldmVudCk7XG5cbiAgICAgICAgICAgIC8vIG1vdmUgdGhlIERPTSBlbGVtZW50IHRvIGZyb250XG4gICAgICAgICAgICB0aGlzLnBhcmVudFNWRy5tb3ZlVG9Gcm9udEJ5SWQodGhpcy5zdmdPYmouaWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Nb3VzZURvd25MZWZ0KGV2ZW50KSB7XG4gICAgICAgIHRoaXMubW91c2VNb3ZlZCA9IGZhbHNlO1xuXG4gICAgICAgIGxldCB0cmFuc2Zvcm0gPSB0aGlzLmdldFRyYW5zZm9ybSgpO1xuXG4gICAgICAgIC8vIHNhdmUgdGhlIGN1cnJlbnQgaXRlbSBwb3NpdGlvbiBpbnRvIGEgdmFyaWFibGVcbiAgICAgICAgbGV0IGN1cnJlbnRQb3NpdGlvbiA9IHRyYW5zZm9ybS5nZXRUcmFuc2xhdGUoKTtcblxuICAgICAgICBsZXQge3BhZ2VYLCBwYWdlWX0gPSB0aGlzLnBhcmVudFNWRy52aWV3Ym94LnRyYW5zZm9ybUV2ZW50KGV2ZW50KVxuXG4gICAgICAgIC8vIGNhbGN1bGF0ZSBtb3VzZSBvZmZzZXQgZnJvbSB0aGUgb2JqZWN0IG9yaWdpblxuICAgICAgICB0aGlzLm9mZnNldCA9IHtcbiAgICAgICAgICAgIHg6IHBhZ2VYIC0gY3VycmVudFBvc2l0aW9uLngsXG4gICAgICAgICAgICB5OiBwYWdlWSAtIGN1cnJlbnRQb3NpdGlvbi55XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgb25Nb3VzZU1vdmUoZXZlbnQpIHtcbiAgICAgICAgaWYodGhpcy5tb3VzZUxlZnQpIHtcbiAgICAgICAgICAgIHRoaXMuc3ZnT2JqLiRlbC5hZGRDbGFzcygnZ3JhYmJlZCcpO1xuXG4gICAgICAgICAgICB0aGlzLm1vdXNlTW92ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBsZXQge3BhZ2VYLCBwYWdlWX0gPSB0aGlzLnBhcmVudFNWRy52aWV3Ym94LnRyYW5zZm9ybUV2ZW50KGV2ZW50KVxuXG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gcGFnZVggLSB0aGlzLm9mZnNldC54O1xuICAgICAgICAgICAgY29uc3QgdG9wID0gcGFnZVkgLSB0aGlzLm9mZnNldC55O1xuXG4gICAgICAgICAgICBsZXQgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybS5zZXRUcmFuc2xhdGUobGVmdCwgdG9wKTtcblxuICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtKTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVXaXJlcyh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTW91c2VVcChldmVudCkge1xuICAgICAgICBpZihldmVudC53aGljaCA9PT0gMSkge1xuICAgICAgICAgICAgaWYodGhpcy5tb3VzZU1vdmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRyb3AoZXZlbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChldmVudC53aGljaCA9PT0gMiApIHtcbiAgICAgICAgICAgIHRoaXMub25DbGlja01pZGRsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdmdPYmouJGVsLnJlbW92ZUNsYXNzKCdncmFiYmVkJyk7XG4gICAgfVxuXG4gICAgb25Ecm9wKGV2ZW50KSB7XG4gICAgICAgIGxldCB7cGFnZVgsIHBhZ2VZfSA9IHRoaXMucGFyZW50U1ZHLnZpZXdib3gudHJhbnNmb3JtRXZlbnQoZXZlbnQpXG5cbiAgICAgICAgbGV0IGxlZnQgPSBwYWdlWCAtIHRoaXMub2Zmc2V0Lng7XG4gICAgICAgIGxldCB0b3AgPSBwYWdlWSAtIHRoaXMub2Zmc2V0Lnk7XG5cbiAgICAgICAgbGVmdCA9IHRoaXMucGFyZW50U1ZHLnNuYXBUb0dyaWQobGVmdCk7XG4gICAgICAgIHRvcCA9IHRoaXMucGFyZW50U1ZHLnNuYXBUb0dyaWQodG9wKTtcblxuICAgICAgICBsZXQgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgdHJhbnNmb3JtLnNldFRyYW5zbGF0ZShsZWZ0LCB0b3ApO1xuXG4gICAgICAgIHRoaXMuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVXaXJlcygpO1xuICAgIH1cblxuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIC8vIGVtcHR5IGZ1bmN0aW9uLCB3aWxsIGJlIHJlZGVmaW5lZCBpbiBJbnB1dEJveFxuICAgIH1cblxuICAgIG9uQ2xpY2tNaWRkbGUoKSB7XG4gICAgICAgIGxldCB0cmFuc2Zvcm0gPSB0aGlzLmdldFRyYW5zZm9ybSgpO1xuXG4gICAgICAgIGxldCByZWN0ID0gdGhpcy5zdmdPYmouJGVsWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIGxldCBjZW50cmVYID0gTWF0aC5yb3VuZChyZWN0LndpZHRoIC8gMik7XG4gICAgICAgIGxldCBjZW50cmVZID0gTWF0aC5yb3VuZChyZWN0LmhlaWdodCAvIDIpO1xuXG4gICAgICAgIGNlbnRyZVggLT0gY2VudHJlWCAlIHRoaXMuZ3JpZFNpemU7XG4gICAgICAgIGNlbnRyZVkgLT0gY2VudHJlWSAlIHRoaXMuZ3JpZFNpemU7XG5cbiAgICAgICAgdHJhbnNmb3JtLnJvdGF0ZVJpZ2h0KFxuICAgICAgICAgICAgY2VudHJlWCxcbiAgICAgICAgICAgIGNlbnRyZVlcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnN2Z09iai5hZGRBdHRyKHtcInRyYW5zZm9ybVwiOiB0cmFuc2Zvcm0uZ2V0KCl9KTtcblxuICAgICAgICB0aGlzLnJvdGF0ZUJsb2NrZWROb2Rlc1JpZ2h0KCk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVXaXJlcygpO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZXMgYWxsIHdpcmVzIGNvbm5lY3RlZCB0byB0aGlzIGJveFxuICAgIHVwZGF0ZVdpcmVzKHRlbXBvcmFyeSA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdG9ycy5mb3JFYWNoKGNvbm4gPT4ge1xuICAgICAgICAgICAgY29ubi53aXJlSWRzLmZvckVhY2god2lyZUlkID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgd2lyZSA9IHRoaXMucGFyZW50U1ZHLmdldFdpcmVCeUlkKHdpcmVJZCk7XG4gICAgICAgICAgICAgICAgaWYodGVtcG9yYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHdpcmUudGVtcG9yYXJ5V2lyZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHdpcmUucm91dGVXaXJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbi8qKlxuICogSW5wdXRCb3ggaGFzIG9ubHkgb3V0cHV0IGNvbm5lY3RvcnMgYW5kIGlzIHVzZWQgdG8gc2V0IHRoZSBpbnB1dCBzdGF0ZXMgZm9yIHRoZSBsb2dpYyBuZXR3b3JrLlxuICogQGV4dGVuZHMgQm94XG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEJveCBleHRlbmRzIEJveCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHLCBpc09uID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSA3O1xuICAgICAgICBjb25zdCBoZWlnaHQgPSA0O1xuXG4gICAgICAgIHN1cGVyKHBhcmVudFNWRywgXCJpbnB1dFwiLCBcImlvXCIsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIHRoaXMuYWRkQ29ubmVjdG9yKHdpZHRoLCBoZWlnaHQgLyAyLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5vbiA9IGlzT247XG4gICAgfVxuXG4gICAgZ2V0IGV4cG9ydERhdGEoKSB7XG4gICAgICAgIGxldCBkYXRhID0gc3VwZXIuZXhwb3J0RGF0YTtcbiAgICAgICAgZGF0YS5pc09uID0gdGhpcy5pc09uO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUJsb2NrTm9kZXMoKSB7XG4gICAgICAgIHN1cGVyLmdlbmVyYXRlQmxvY2tOb2RlcygwLCAxLCAxLCAwKTtcbiAgICB9XG5cbiAgICByZWZyZXNoU3RhdGUoKSB7XG4gICAgICAgIC8vIHN0YXJ0IGEgbmV3IHNpbXVsYXRpb24gZnJvbSB0aGUgb3V0cHV0IGNvbm5lY3RvclxuICAgICAgICB0aGlzLnBhcmVudFNWRy5zdGFydE5ld1NpbXVsYXRpb24odGhpcy5jb25uZWN0b3JzWzBdLCB0aGlzLmNvbm5lY3RvcnNbMF0uc3RhdGUpXG4gICAgfVxuXG4gICAgc2V0IG9uKGlzT24pIHtcbiAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIC8vIHR1cm4gb25cbiAgICAgICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UoXCJvblwiKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yc1swXS5zZXRTdGF0ZShMb2dpYy5zdGF0ZS5vbik7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hTdGF0ZSgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyB0dXJuIG9mZlxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZSgpO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0b3JzWzBdLnNldFN0YXRlKExvZ2ljLnN0YXRlLm9mZik7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hTdGF0ZSgpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzT24gPSBpc09uO1xuICAgIH1cblxuICAgIGdldCBvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNPbjtcbiAgICB9XG5cbiAgICBvbkNsaWNrKCkge1xuICAgICAgICB0aGlzLm9uID0gIXRoaXMub247XG4gICAgfVxufVxuXG4vKipcbiAqIE91dHB1dEJveCBoYXMgb25seSBpbnB1dCBjb25uZWN0b3JzIGFuZCBpcyB1c2VkIHRvIHZpc3VhbGl6ZSB0aGUgb3V0cHV0IHN0YXRlcyBvZiB0aGUgbG9naWMgbmV0d29yay5cbiAqIEBleHRlbmRzIEJveFxuICovXG5leHBvcnQgY2xhc3MgT3V0cHV0Qm94IGV4dGVuZHMgQm94IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTVkcpIHtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gNDtcbiAgICAgICAgY29uc3Qgd2lkdGggPSA1O1xuXG4gICAgICAgIHN1cGVyKHBhcmVudFNWRywgXCJvdXRwdXRcIiwgXCJpb1wiLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICB0aGlzLmFkZENvbm5lY3RvcigwLCBoZWlnaHQgLyAyLCB0cnVlKTtcbiAgICB9XG5cbiAgICByZWZyZXNoU3RhdGUoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5jb25uZWN0b3JzWzBdLnN0YXRlKTtcbiAgICB9XG5cbiAgICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlIExvZ2ljLnN0YXRlLm9uOlxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UoXCJvblwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUub2ZmOlxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UoXCJvZmZcIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExvZ2ljLnN0YXRlLnVua25vd246XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZzpcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUltYWdlKFwib3NjXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVCbG9ja05vZGVzKCkge1xuICAgICAgICBzdXBlci5nZW5lcmF0ZUJsb2NrTm9kZXMoMCwgMCwgMCwgMSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEdhdGUgaXMgYSBib3ggdGhhdCBwcm9jZXNzZXMgdGhlIHN0YXRlcyBvZiBpdHMgaW5wdXQgY29ubmVjdG9ycyBhbmQgcmV0dXJucyB0aGUgcmVzdWx0IGluIGl0cyBvdXRwdXQgY29ubmVjdG9ycy5cbiAqIEBleHRlbmRzIEJveFxuICovXG5leHBvcnQgY2xhc3MgR2F0ZSBleHRlbmRzIEJveCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gOTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gNDtcblxuICAgICAgICBzdXBlcihwYXJlbnRTVkcsIG5hbWUsIFwiZ2F0ZVwiLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICAvLyBvdXRwdXRcbiAgICAgICAgdGhpcy5hZGRDb25uZWN0b3Iod2lkdGgsIGhlaWdodCAvIDIsIGZhbHNlKTtcblxuICAgICAgICBpZih0aGlzLm5hbWU9PT1cIm5vdFwiKSB7XG4gICAgICAgICAgICAvLyBpbnB1dFxuICAgICAgICAgICAgdGhpcy5hZGRDb25uZWN0b3IoMCwgaGVpZ2h0IC8gMiwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBpbnB1dFxuICAgICAgICAgICAgdGhpcy5hZGRDb25uZWN0b3IoMCwgaGVpZ2h0IC8gNCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmFkZENvbm5lY3RvcigwLCBoZWlnaHQgLyAoNC8zKSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIGFkZCBvbmUgYmxvY2tlZE5vZGUgYmV0d2VlbiB0aGUgaW5wdXRzIChmb3IgYmV0dGVyIGxvb2tpbmcgd2lyaW5nKVxuICAgICAgICAgICAgLy8gYW5kIHJlZ2VuZXJhdGUgYmxvY2tlZCBub2Rlc1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUJsb2NrTm9kZXMoe1xuICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICAgICAgeTogaGVpZ2h0IC8gMlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlZnJlc2hTdGF0ZSgpO1xuICAgIH1cblxuICAgIGdlbmVyYXRlQmxvY2tOb2RlcyhzcGVjaWFsTm9kZSkge1xuICAgICAgICBpZihzcGVjaWFsTm9kZSE9PXVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3VwZXIuZ2VuZXJhdGVCbG9ja05vZGVzKDAsIDEsIDAsIDEsIHNwZWNpYWxOb2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1cGVyLmdlbmVyYXRlQmxvY2tOb2RlcygwLCAxLCAwLCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlZnJlc2hTdGF0ZSgpIHtcbiAgICAgICAgbGV0IHN0YXRlID0gTG9naWMuc3RhdGUudW5rbm93blxuICAgICAgICBzd2l0Y2ggKHRoaXMubmFtZSkge1xuICAgICAgICAgICAgY2FzZSBcImFuZFwiOlxuICAgICAgICAgICAgICAgIHN0YXRlID0gIExvZ2ljLmFuZCh0aGlzLmNvbm5lY3RvcnNbMV0uc3RhdGUsIHRoaXMuY29ubmVjdG9yc1syXS5zdGF0ZSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJuYW5kXCI6XG4gICAgICAgICAgICAgICAgc3RhdGUgPSAgTG9naWMubmFuZCh0aGlzLmNvbm5lY3RvcnNbMV0uc3RhdGUsIHRoaXMuY29ubmVjdG9yc1syXS5zdGF0ZSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJub3JcIjpcbiAgICAgICAgICAgICAgICBzdGF0ZSA9ICBMb2dpYy5ub3IodGhpcy5jb25uZWN0b3JzWzFdLnN0YXRlLCB0aGlzLmNvbm5lY3RvcnNbMl0uc3RhdGUpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibm90XCI6XG4gICAgICAgICAgICAgICAgc3RhdGUgPSAgTG9naWMubm90KHRoaXMuY29ubmVjdG9yc1sxXS5zdGF0ZSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJvclwiOlxuICAgICAgICAgICAgICAgIHN0YXRlID0gIExvZ2ljLm9yKHRoaXMuY29ubmVjdG9yc1sxXS5zdGF0ZSwgdGhpcy5jb25uZWN0b3JzWzJdLnN0YXRlKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInhub3JcIjpcbiAgICAgICAgICAgICAgICBzdGF0ZSA9ICBMb2dpYy54bm9yKHRoaXMuY29ubmVjdG9yc1sxXS5zdGF0ZSwgdGhpcy5jb25uZWN0b3JzWzJdLnN0YXRlKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInhvclwiOlxuICAgICAgICAgICAgICAgIHN0YXRlID0gIExvZ2ljLnhvcih0aGlzLmNvbm5lY3RvcnNbMV0uc3RhdGUsIHRoaXMuY29ubmVjdG9yc1syXS5zdGF0ZSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBub3RpZnkgdGhlIHNpbXVsYXRvciBhYm91dCB0aGlzIGNoYW5nZVxuICAgICAgICB0aGlzLnBhcmVudFNWRy5zaW11bGF0aW9uLm5vdGlmeUNoYW5nZSh0aGlzLmNvbm5lY3RvcnNbMF0uaWQsIHN0YXRlKVxuICAgIH1cbn1cblxuLyoqXG4gKiBXaXJlIHJlcHJlc2VudHMgY29ubmVjdGlvbiBvZiB0d28ge0BsaW5rIENvbm5lY3Rvcn1zLlxuICogQGV4dGVuZHMgTmV0d29ya0VsZW1lbnRcbiAqL1xuZXhwb3J0IGNsYXNzIFdpcmUgZXh0ZW5kcyBOZXR3b3JrRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHLCBmcm9tSWQsIHRvSWQsIGdyaWRTaXplLCByZWZyZXNoID0gdHJ1ZSkge1xuICAgICAgICAvLyBzbWFsbCBUT0RPOiByZXdvcmsgc3RhcnQuLi4gZW5kLi4uIHRvIGFycmF5cz8gKG5vdCBpbXBvcnRhbnQpXG5cbiAgICAgICAgc3VwZXIocGFyZW50U1ZHKTtcblxuICAgICAgICB0aGlzLmdyaWRTaXplID0gZ3JpZFNpemU7XG5cbiAgICAgICAgdGhpcy5mcm9tSWQgPSBmcm9tSWQ7XG4gICAgICAgIHRoaXMudG9JZCA9IHRvSWQ7XG5cbiAgICAgICAgdGhpcy5zdGFydEJveCA9IHRoaXMucGFyZW50U1ZHLmdldEJveEJ5Q29ubmVjdG9ySWQoZnJvbUlkKTtcbiAgICAgICAgdGhpcy5lbmRCb3ggPSB0aGlzLnBhcmVudFNWRy5nZXRCb3hCeUNvbm5lY3RvcklkKHRvSWQpO1xuXG4gICAgICAgIHRoaXMuYm94ZXMgPSBbdGhpcy5zdGFydEJveCwgdGhpcy5lbmRCb3hdXG5cbiAgICAgICAgdGhpcy5zdGFydENvbm5lY3RvciA9IHRoaXMucGFyZW50U1ZHLmdldENvbm5lY3RvckJ5SWQoZnJvbUlkKTtcbiAgICAgICAgdGhpcy5lbmRDb25uZWN0b3IgPSB0aGlzLnBhcmVudFNWRy5nZXRDb25uZWN0b3JCeUlkKHRvSWQpO1xuXG4gICAgICAgIHRoaXMuY29ubmVjdG9ycyA9IFt0aGlzLnN0YXJ0Q29ubmVjdG9yLCB0aGlzLmVuZENvbm5lY3Rvcl1cbiAgICAgICAgdGhpcy5yb3V0ZVdpcmUodHJ1ZSwgcmVmcmVzaCk7XG5cbiAgICAgICAgdGhpcy5lbGVtZW50U3RhdGUgPSBMb2dpYy5zdGF0ZS51bmtub3duO1xuXG4gICAgICAgIGZvciAobGV0IGNvbm5lY3RvciBvZiB0aGlzLmNvbm5lY3RvcnMpIHtcbiAgICAgICAgICAgIGlmKGNvbm5lY3Rvci5pc091dHB1dENvbm5lY3Rvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoY29ubmVjdG9yLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3ZnT2JqLiRlbC5hZGRDbGFzcyhcIndpcmVcIik7XG4gICAgfVxuXG4gICAgZ2V0IGV4cG9ydERhdGEoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmcm9tSWQ6IHRoaXMuZnJvbUlkLFxuICAgICAgICAgICAgdG9JZDogdGhpcy50b0lkXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2V0U3RhdGUoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdmdPYmoucmVtb3ZlQ2xhc3NlcyhzdGF0ZUNsYXNzZXMub24sIHN0YXRlQ2xhc3Nlcy5vZmYsIHN0YXRlQ2xhc3Nlcy51bmtub3duLCBzdGF0ZUNsYXNzZXMub3NjaWxsYXRpbmcpO1xuXG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUudW5rbm93bjpcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iai5hZGRDbGFzcyhzdGF0ZUNsYXNzZXMudW5rbm93bik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExvZ2ljLnN0YXRlLm9uOlxuICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqLmFkZENsYXNzKHN0YXRlQ2xhc3Nlcy5vbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExvZ2ljLnN0YXRlLm9mZjpcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iai5hZGRDbGFzcyhzdGF0ZUNsYXNzZXMub2ZmKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUub3NjaWxsYXRpbmc6XG4gICAgICAgICAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2xhc3Moc3RhdGVDbGFzc2VzLm9zY2lsbGF0aW5nKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0Q29ubmVjdG9yLmlzSW5wdXRDb25uZWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRDb25uZWN0b3Iuc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuZW5kQ29ubmVjdG9yLmlzSW5wdXRDb25uZWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuZW5kQ29ubmVjdG9yLnNldFN0YXRlKHN0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWxlbWVudFN0YXRlID0gc3RhdGU7XG4gICAgfVxuXG4gICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50U3RhdGU7XG4gICAgfVxuXG4gICAgdXBkYXRlV2lyZVN0YXRlKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGJveCBvZiB0aGlzLmJveGVzKSB7XG4gICAgICAgICAgICBib3gucmVmcmVzaFN0YXRlKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ZnT2JqLmdldCgpO1xuICAgIH1cblxuICAgIGdldFRlbXBvcmFyeVdpcmVQb2ludHMoKSB7XG4gICAgICAgIGxldCBwb2ludHMgPSBuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnRzKCk7XG4gICAgICAgIHBvaW50cy5hcHBlbmQobmV3IHN2Z09iai5Qb2x5bGluZVBvaW50KHRoaXMud2lyZVN0YXJ0LngsIHRoaXMud2lyZVN0YXJ0LnkpKTtcbiAgICAgICAgcG9pbnRzLmFwcGVuZChuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnQodGhpcy53aXJlRW5kLngsIHRoaXMud2lyZUVuZC55KSk7XG4gICAgICAgIHJldHVybiBwb2ludHM7XG4gICAgfVxuXG4gICAgdGVtcG9yYXJ5V2lyZSgpIHtcbiAgICAgICAgdGhpcy53aXJlU3RhcnQgPSB0aGlzLmdldENvb3JkaW5hdGVzKHRoaXMuc3RhcnRDb25uZWN0b3IsIGZhbHNlKTtcbiAgICAgICAgdGhpcy53aXJlRW5kID0gdGhpcy5nZXRDb29yZGluYXRlcyh0aGlzLmVuZENvbm5lY3RvciwgZmFsc2UpO1xuXG4gICAgICAgIHRoaXMuc2V0V2lyZVBhdGgodGhpcy5nZXRUZW1wb3JhcnlXaXJlUG9pbnRzKCkpO1xuXG4gICAgICAgIC8vIHRoaXMuc3ZnT2JqLnJlbW92ZUNsYXNzZXMoc3RhdGVDbGFzc2VzLm9uLCBzdGF0ZUNsYXNzZXMub2ZmLCBzdGF0ZUNsYXNzZXMudW5rbm93biwgc3RhdGVDbGFzc2VzLm9zY2lsbGF0aW5nKTtcbiAgICAgICAgLy8gdGhpcy5zdmdPYmouYWRkQ2xhc3Moc3RhdGVDbGFzc2VzLnVua25vd24pO1xuICAgIH1cblxuICAgIHJvdXRlV2lyZShzbmFwVG9HcmlkID0gdHJ1ZSwgcmVmcmVzaCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy53aXJlU3RhcnQgPSB0aGlzLmdldENvb3JkaW5hdGVzKHRoaXMuc3RhcnRDb25uZWN0b3IsIHNuYXBUb0dyaWQpO1xuICAgICAgICB0aGlzLndpcmVFbmQgPSB0aGlzLmdldENvb3JkaW5hdGVzKHRoaXMuZW5kQ29ubmVjdG9yLCBzbmFwVG9HcmlkKTtcblxuICAgICAgICB0aGlzLnBvaW50cyA9IHRoaXMuYVN0YXIoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgeDogdGhpcy53aXJlU3RhcnQueCAvIHRoaXMuZ3JpZFNpemUsXG4gICAgICAgICAgICAgICAgeTogdGhpcy53aXJlU3RhcnQueSAvIHRoaXMuZ3JpZFNpemVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgeDogdGhpcy53aXJlRW5kLnggLyB0aGlzLmdyaWRTaXplLFxuICAgICAgICAgICAgICAgIHk6IHRoaXMud2lyZUVuZC55IC8gdGhpcy5ncmlkU2l6ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zZXRXaXJlUGF0aCh0aGlzLnBvaW50cyk7XG5cbiAgICAgICAgaWYgKHJlZnJlc2gpXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVdpcmVTdGF0ZSgpO1xuICAgIH1cblxuICAgIHNldFdpcmVQYXRoKHBvaW50cykge1xuICAgICAgICAvLyBzZXQgdGhlIGxpbmVcbiAgICAgICAgaWYodGhpcy5zdmdPYmohPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3ZnT2JqLnVwZGF0ZVBvaW50cyhwb2ludHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdmdPYmogPSBuZXcgc3ZnT2JqLlBvbHlMaW5lKHBvaW50cywgXCIjOGI4YjhiXCIsIDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdmdPYmoucmVtb3ZlQ2xhc3NlcyhzdGF0ZUNsYXNzZXMub24sIHN0YXRlQ2xhc3Nlcy5vZmYsIHN0YXRlQ2xhc3Nlcy51bmtub3duLCBzdGF0ZUNsYXNzZXMub3NjaWxsYXRpbmcpO1xuICAgICAgICB0aGlzLnN2Z09iai5hZGRDbGFzcyhzdGF0ZUNsYXNzZXMudW5rbm93bik7XG5cbiAgICAgICAgdGhpcy5zdmdPYmouYWRkQXR0cih7XG4gICAgICAgICAgICBmcm9tSWQ6IHRoaXMuZnJvbUlkLFxuICAgICAgICAgICAgdG9JZDogdGhpcy50b0lkXG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgICAvLyBpbXBsZW1lbnRhdGlvbiBiYXNlZCBvbiB0aGlzIHBzZXVkb2NvZGU6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0EqX3NlYXJjaF9hbGdvcml0aG0jUHNldWRvY29kZVxuICAgIGFTdGFyKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgY29uc3Qgd2lyZUNyb3NzUHVuaXNobWVudCA9IDI7XG4gICAgICAgIGNvbnN0IHdpcmVCZW5kUHVuaXNobWVudCA9IDE7XG5cbiAgICAgICAgLy8gbnVtYmVyIG9mIG5vZGVzLCB0aGF0IGNhbiBiZSBvcGVuZWQgYXQgb25jZVxuICAgICAgICAvLyBvbmNlIGlzIHRoaXMgbGltaXQgZXhjZWVkZWQsIGFTdGFyIHdpbGwgZmFpbCBhbmQgZ2V0VGVtcG9yYXJ5V2lyZVBvaW50cyB3aWxsIGJlIHVzZWQgaW5zdGVhZFxuICAgICAgICBjb25zdCBtYXhOb2RlTGltaXQgPSA1MDAwMDtcblxuICAgICAgICBsZXQgY2xvc2VkTm9kZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGxldCBvcGVuTm9kZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIG9wZW5Ob2Rlcy5hZGQoc3RhcnQpO1xuXG4gICAgICAgIGxldCBjYW1lRnJvbSA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvLyBkZWZhdWx0IHZhbHVlOiBpbmZpbml0eVxuICAgICAgICBsZXQgZ1Njb3JlID0gbmV3IFN0cnVjdHVyZXMuTWFwV2l0aERlZmF1bHRWYWx1ZShJbmZpbml0eSk7XG4gICAgICAgIGdTY29yZS5zZXQoc3RhcnQsIDApO1xuXG4gICAgICAgIC8vIGRlZmF1bHQgdmFsdWU6IGluZmluaXR5XG4gICAgICAgIGxldCBmU2NvcmUgPSBuZXcgU3RydWN0dXJlcy5NYXBXaXRoRGVmYXVsdFZhbHVlKEluZmluaXR5KTtcbiAgICAgICAgZlNjb3JlLnNldChzdGFydCwgV2lyZS5tYW5oYXR0YW5EaXN0YW5jZShzdGFydCwgZW5kKSk7XG5cbiAgICAgICAgbGV0IG5vblJvdXRhYmxlID0gdGhpcy5wYXJlbnRTVkcuZ2V0Tm9uUm91dGFibGVOb2RlcygpO1xuICAgICAgICBsZXQgcHVuaXNoZWRCdXRSb3V0YWJsZTtcbiAgICAgICAgaWYodGhpcy5zdmdPYmo9PT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHB1bmlzaGVkQnV0Um91dGFibGUgPSB0aGlzLnBhcmVudFNWRy5nZXRJbmNvbnZlbmllbnROb2RlcygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHVuaXNoZWRCdXRSb3V0YWJsZSA9IHRoaXMucGFyZW50U1ZHLmdldEluY29udmVuaWVudE5vZGVzKHRoaXMuc3ZnT2JqLmlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChvcGVuTm9kZXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50Tm9kZTtcbiAgICAgICAgICAgIGxldCBjdXJyZW50Tm9kZUZTY29yZTtcblxuICAgICAgICAgICAgLy8gZmluZCB0aGUgdmFsdWUgZnJvbSBvcGVuTm9kZXMgdGhhdCBoYXMgdGhlIGxvd2VzdCBmU2NvcmVcbiAgICAgICAgICAgIC8vIChjYW4gYmUgaW1wbGVtZW50ZWQgZWZmZWN0aXZlbHkgdXNpbmcgbWluLWhlYXAgZGF0YSBzdHJ1Y3R1cmUgKG1heWJlIFRPRE8gc29tZXRpbWUpPylcbiAgICAgICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBvcGVuTm9kZXMpIHtcbiAgICAgICAgICAgICAgICBpZighY3VycmVudE5vZGUgfHwgZlNjb3JlLmdldChub2RlKSA8IGN1cnJlbnROb2RlRlNjb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlID0gbm9kZTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGVGU2NvcmUgPSBmU2NvcmUuZ2V0KGN1cnJlbnROb2RlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoc3ZnT2JqLlBvbHlsaW5lUG9pbnQuZXF1YWxzKGN1cnJlbnROb2RlLCBlbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVjb25zdHJ1Y3RQYXRoKGNhbWVGcm9tLCBjdXJyZW50Tm9kZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9wZW5Ob2Rlcy5kZWxldGUoY3VycmVudE5vZGUpO1xuICAgICAgICAgICAgY2xvc2VkTm9kZXMuYWRkKGN1cnJlbnROb2RlKTtcblxuICAgICAgICAgICAgLy8gdGhlIGZhcnRoZXN0IHBvaW50cyBhY2Nlc3NpYmxlIHdpdGhvdXQgYXZvaWRpbmcgb2JzdGFjbGVzIGluIGV2ZXJ5IGRpcmVjdGlvblxuICAgICAgICAgICAgLy8gKGJ1dCBtYXggNTAgaW4gZWFjaCBkaXJlY3Rpb24pXG4gICAgICAgICAgICBmb3IobGV0IGRpcmVjdGlvbiA9IDAgOyBkaXJlY3Rpb24gPCA0IDsgZGlyZWN0aW9uKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3UG9pbnQgPSBXaXJlLm1vdmVQb2ludChjdXJyZW50Tm9kZSwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IDUwIDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIG5ld1BvaW50IGlzIGluIHRoZSBzZXQgb2Ygbm9uIHJvdXRhYmxlIHBvaW50cyxcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3QgYWRkIGl0IGFuZCBzdG9wIHByb2NlZWRpbmcgaW4gdGhpcyBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgaWYoV2lyZS5zZXRIYXNUaGlzUG9pbnQobm9uUm91dGFibGUsIHRoaXMuc2NhbGVQb2ludFRvR3JpZChuZXdQb2ludCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNraXAgdGhpcyBub2RlLCBpZiBpdCBoYXMgYmVlbiBhbHJlYWR5IGNsb3NlZFxuICAgICAgICAgICAgICAgICAgICAvLyBvciBpZiBpdCBpcyBvbiB0aGUgbGlzdCBvZiBub24gcm91dGFibGUgbm9kZXNcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlZE5vZGVzLmhhcyhuZXdQb2ludCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcGVuTm9kZXMuaGFzKG5ld1BvaW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3Blbk5vZGVzLmFkZChuZXdQb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgcG9zc2libGUgR1Njb3JlIGJ5IGFkZGluZyAxIHRvIHRoZSBzY29yZSBvZiB0aGUgbm9kZSB3ZSBjYW1lIGZyb21cbiAgICAgICAgICAgICAgICAgICAgLy8gKHdlIHByaW9yaXRpemUgdG8gbWluaW1pemUgdGhlIG51bWJlciBvZiBub2RlcyBhbmQgbm90IHRoZSBkaXN0YW5jZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gIHNvIHdlIGFyZSBhZGRpbmcgMSBvbiBhbGwgbm9kZXMsIGV2ZW4gaWYgdGhlIGV1Y2xpZGVhbiAvIG1hbm5oYXRhbiBkaXN0YW5jZSBtYXkgdmFyeSlcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluY3JlbWVudCA9IHdpcmVCZW5kUHVuaXNobWVudDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBvc3NpYmxlR1Njb3JlID0gZ1Njb3JlLmdldChjdXJyZW50Tm9kZSkgKyBpbmNyZW1lbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoV2lyZS5zZXRIYXNUaGlzUG9pbnQocHVuaXNoZWRCdXRSb3V0YWJsZSwgdGhpcy5zY2FsZVBvaW50VG9HcmlkKG5ld1BvaW50KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBub2RlIGlzIGluIHRoZSBzZXQgb2YgcHVuaXNoZWQgbm9kZSwgcHVuaXNoIGl0IGJ5IGFkZGluZyB0byB0aGUgR1Njb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUdTY29yZSArPSB3aXJlQ3Jvc3NQdW5pc2htZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2tpcCB0aGlzIG5vZGUgaWYgaXQgaGFzIHdvcnN0IGVzdGltYWdlIGdzY29yZSB0aGFuIGluIHRoZSBnc2NvcmUgdGFibGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3NpYmxlR1Njb3JlID49IGdTY29yZS5nZXQobmV3UG9pbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNhbWVGcm9tLnNldChuZXdQb2ludCwgY3VycmVudE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBnU2NvcmUuc2V0KG5ld1BvaW50LCBwb3NzaWJsZUdTY29yZSk7XG4gICAgICAgICAgICAgICAgICAgIGZTY29yZS5zZXQobmV3UG9pbnQsIHBvc3NpYmxlR1Njb3JlICsgV2lyZS5tYW5oYXR0YW5EaXN0YW5jZShuZXdQb2ludCwgZW5kKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgbmV3UG9pbnQgaXMgaW4gdGhlIHNldCBvZiBwdW5pc2hlZCBidXQgcm91dGFibGUgcG9pbnRzLFxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXQgYnV0IHN0b3AgcHJvY2VlZGluZyBpbiB0aGlzIGRpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICBpZihXaXJlLnNldEhhc1RoaXNQb2ludChwdW5pc2hlZEJ1dFJvdXRhYmxlLCB0aGlzLnNjYWxlUG9pbnRUb0dyaWQobmV3UG9pbnQpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIHRvIHRoZSBuZXh0IHBvaW50IGluIHRoZSBkaXJlY2l0b25cbiAgICAgICAgICAgICAgICAgICAgbmV3UG9pbnQgPSBXaXJlLm1vdmVQb2ludChuZXdQb2ludCwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKG9wZW5Ob2Rlcy5zaXplID4gbWF4Tm9kZUxpbWl0KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgd2UgZ290IGhlcmUsIHRoZSBwYXRoIGRvZXMgbm90IGV4aXN0IC0+IGxldCdzIHVzZSB0ZW1wb3JhcnkgcGF0aCBpZ25vcmluZyBhbGwgY29saXNpb25zXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRlbXBvcmFyeVdpcmVQb2ludHMoKTtcbiAgICB9XG4gICAgc3RhdGljIG1vdmVQb2ludChwb2ludCwgZGlyZWN0aW9uKSB7XG4gICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIDA6IC8vIHVwXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgeDogcG9pbnQueCxcbiAgICAgICAgICAgICAgICAgICAgeTogcG9pbnQueSAtIDFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSAxOiAvLyByaWdodFxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHg6IHBvaW50LnggKyAxLFxuICAgICAgICAgICAgICAgICAgICB5OiBwb2ludC55XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgMjogLy8gZG93blxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHg6IHBvaW50LngsXG4gICAgICAgICAgICAgICAgICAgIHk6IHBvaW50LnkgKyAxXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgMzogLy8gbGVmdFxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHg6IHBvaW50LnggLSAxLFxuICAgICAgICAgICAgICAgICAgICB5OiBwb2ludC55XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzY2FsZVBvaW50VG9HcmlkKHBvaW50KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiBwb2ludC54ICogdGhpcy5ncmlkU2l6ZSxcbiAgICAgICAgICAgIHk6IHBvaW50LnkgKiB0aGlzLmdyaWRTaXplXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZWNvbnN0cnVjdFBhdGgoY2FtZUZyb20sIGN1cnJlbnROb2RlKSB7XG4gICAgICAgIGxldCB0b3RhbFBhdGggPSBuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnRzKCk7XG4gICAgICAgIHRvdGFsUGF0aC5hcHBlbmQobmV3IHN2Z09iai5Qb2x5bGluZVBvaW50KGN1cnJlbnROb2RlLnggKiB0aGlzLmdyaWRTaXplLCBjdXJyZW50Tm9kZS55ICogdGhpcy5ncmlkU2l6ZSkpO1xuXG4gICAgICAgIHdoaWxlIChjYW1lRnJvbS5oYXMoY3VycmVudE5vZGUpKSB7XG4gICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGNhbWVGcm9tLmdldChjdXJyZW50Tm9kZSk7XG4gICAgICAgICAgICB0b3RhbFBhdGguYXBwZW5kKG5ldyBzdmdPYmouUG9seWxpbmVQb2ludChjdXJyZW50Tm9kZS54ICogdGhpcy5ncmlkU2l6ZSwgY3VycmVudE5vZGUueSAqIHRoaXMuZ3JpZFNpemUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0b3RhbFBhdGg7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hbmhhdHRhbkRpc3RhbmNlKGEsIGIpIHtcbiAgICAgICAgLy8gTWFuaGF0dGFuIGdlb21ldHJ5XG4gICAgICAgIHJldHVybiBNYXRoLmFicyhhLnggLSBiLngpICsgTWF0aC5hYnMoYS55IC0gYi55KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgc2V0SGFzVGhpc1BvaW50KHNldCwgcG9pbnQpIHtcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBzZXQpIHtcbiAgICAgICAgICAgIGlmKGl0ZW0ueCA9PT0gcG9pbnQueCAmJiBpdGVtLnkgPT09IHBvaW50LnkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZ2V0Q29vcmRpbmF0ZXMoY29ubmVjdG9yLCBzbmFwVG9HcmlkID0gdHJ1ZSkge1xuICAgICAgICAvLyBjb25uZWN0b3Iuc3ZnT2JqLmlkIGhhcyB0byBiZSBjYWxsZWQsIGVsc2UgdGhlIGdldENvb3JkaW5hdGVzIGRvZXMgbm90IHdvcmsgb24gdGhlIGZpcnN0IGNhbGwgaW4gRmlyZWZveCA1NVxuICAgICAgICBsZXQgZHVtbXkgPSBjb25uZWN0b3Iuc3ZnT2JqLmlkO1xuXG4gICAgICAgIGxldCAkY29ubmVjdG9yID0gY29ubmVjdG9yLnN2Z09iai4kZWw7XG5cbiAgICAgICAgbGV0IHBvc2l0aW9uID0gJGNvbm5lY3Rvci5wb3NpdGlvbigpO1xuXG4gICAgICAgIHBvc2l0aW9uLmxlZnQgPSB0aGlzLnBhcmVudFNWRy52aWV3Ym94LnRyYW5zZm9ybVgocG9zaXRpb24ubGVmdClcbiAgICAgICAgcG9zaXRpb24udG9wID0gdGhpcy5wYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1ZKHBvc2l0aW9uLnRvcClcblxuICAgICAgICBsZXQgd2lkdGggPSAkY29ubmVjdG9yLmF0dHIoXCJ3aWR0aFwiKTtcbiAgICAgICAgbGV0IGhlaWdodCA9ICRjb25uZWN0b3IuYXR0cihcImhlaWdodFwiKTtcblxuICAgICAgICBsZXQgeCA9IHBvc2l0aW9uLmxlZnQgKyB3aWR0aCAvIDI7XG4gICAgICAgIGxldCB5ID0gcG9zaXRpb24udG9wICsgaGVpZ2h0IC8gMjtcbiAgICAgICAgaWYoc25hcFRvR3JpZCkge1xuICAgICAgICAgICAgeCA9IHRoaXMucGFyZW50U1ZHLnNuYXBUb0dyaWQoeCk7XG4gICAgICAgICAgICB5ID0gdGhpcy5wYXJlbnRTVkcuc25hcFRvR3JpZCh5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgeTogeVxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGV4cG9ydE5ldHdvcmsgfSBmcm9tIFwiLi9pbXBvcnRFeHBvcnQuanNcIjtcblxuaW1wb3J0IHtcbiAgICBnZXRMaWJyYXJ5LFxuICAgIGdldE5ldHdvcmtGcm9tTGlicmFyeVxufSBmcm9tICcuL25ldHdvcmtMaWJyYXJ5LmpzJztcblxuLyoqXG4gKiBGbG9hdGluZ0J1dHRvbiByZXByZXNlbnRzIGEgYnV0dG9uIHRoYXQgaXMgdXNlZCBpbiB0aGUgZmxvYXRpbmcgbWVudSBpbiB0aGUgcmlnaHQgYm90dG9tIGNvcm5lclxuICogb2YgdGhlIGFwcGxpY2F0aW9uLiBJdCBtYXkgaGF2ZSBhIGN1c3RvbSB0b29sdGlwIGFuZCBjYWxsYmFjayBvbiB0aGUgY2xpY2sgZXZlbnRcbiAqL1xuY2xhc3MgRmxvYXRpbmdCdXR0b24ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBidXR0b25DbGFzcyBDdXN0b20gc3RyaW5nIHRoYXQgaWRlbnRpZmllcyB0aGUgU1ZHIGljb24gdXNlZCBvbiB0aGlzIGJ1dHRvbi4gVGhpcyBzdHJpbmcgaXMgYWxzbyBhZGRlZCBhcyBhIENTUyBjbGFzcyB0byB0aGUgYnV0dG9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0b29sdGlwICAgICB0b29sdGlwIGZvciB0aGUgYnV0dG9uLCB0aGF0IHdpbGwgYmUgZGlzcGxheWVkIG9uIGhvdmVyIGFuZCBhbHNvIHVzZWQgYXMgYWx0ZXJuYXRpdmUgdGl0bGUgZm9yIHRoZSBpbWFnZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNsaWNrRXZlbnQgIGN1c3RvbSBjYWxsYmFjayB3aGVuIHVzZXIgY2xpY2tzIHRoZSBidXR0b25cbiAgICAgKiBAcGFyYW0ge0NhbnZhc30gcGFyZW50U1ZHICAgcmVmZXJlbmNlIHRvIHRoZSBwYXJlbnQgU1ZHIGVsZW1lbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihidXR0b25DbGFzcywgdG9vbHRpcCwgY2xpY2tFdmVudCwgcGFyZW50U1ZHKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBqUXVlcnkgZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIGJ1dHRvblxuICAgICAgICAgKiBAdHlwZSB7alF1ZXJ5LmVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLiRlbCA9ICQoJzxhPicpXG5cbiAgICAgICAgLy8gYWRkIGNsYXNzZXMgdG8gdGhlIGVsZW1lbnRcbiAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoXCJidXR0b25cIik7XG4gICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKGJ1dHRvbkNsYXNzKTtcblxuICAgICAgICAvLyBhZGQgdGhlIGljb25cbiAgICAgICAgdGhpcy4kZWwuYXBwZW5kKFxuICAgICAgICAgICAgJChcIjxpbWc+XCIpXG4gICAgICAgICAgICAuYXR0cihcInNyY1wiLCBgaW1nL2d1aS8ke2J1dHRvbkNsYXNzfS5zdmdgKVxuICAgICAgICAgICAgLmF0dHIoXCJhbHRcIiwgdG9vbHRpcClcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBhZGQgdGhlIHRvb2x0aXAgZWxlbWVudCBhbmQgYW4gZXZlbnQgbGlzdGVuZXIgaWYgdG9vbHRpcCBpcyBkZWZpbmVkXG4gICAgICAgIGlmICh0b29sdGlwKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIGpRdWVyeSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgdG9vbHRpcFxuICAgICAgICAgICAgICogQHR5cGUge2pRdWVyeS5lbGVtZW50fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLiR0b29sdGlwID0gJChcIjxkaXY+XCIpO1xuICAgICAgICAgICAgdGhpcy4kdG9vbHRpcFxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcInRvb2x0aXBcIilcbiAgICAgICAgICAgICAgICAuaHRtbCh0b29sdGlwKTtcblxuICAgICAgICAgICAgcGFyZW50U1ZHLiRzdmcuYWZ0ZXIodGhpcy4kdG9vbHRpcCk7XG5cbiAgICAgICAgICAgIHRoaXMuJGVsLmhvdmVyKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiR0b29sdGlwLmZhZGVJbigyMDApO1xuICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuJHRvb2x0aXAuZmFkZU91dCgyMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgYW4gZXZlbnQgbGlzdGVuZXIgb24gY2xpY2ssIGlmIHRoZSBjYWxsYmFjayBmdW5jdGlvbiBpcyBkZWZpbmVkXG4gICAgICAgIGlmIChjbGlja0V2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5vbihcImNsaWNrXCIsIGNsaWNrRXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKiogQG1vZHVsZSBGbG9hdGluZ01lbnUgKi9cbi8qKlxuICogQ2xhc3MgdG8gcmVwcmVzZW50IHRoZSBmbG9hdGluZyBtZW51IGluIHRoZSByaWdodCBib3R0b20gY29ybmVyIG9mIHRoZSBwYWdlLlxuICogSXQgaW5zdGFudGlhdGVzIGFsbCB0aGUgYnV0dG9ucyBhbmQgdGhlaXIgY2FsbGJhY2tzLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbG9hdGluZ01lbnUge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzfSBwYXJlbnRTVkcgcmVmZXJlbmNlIHRvIHRoZSBDYW52YXMgZWxlbWVudCB0aGlzIG1lbnUgaXMgYXNzb2NpYXRlZCB3aXRoXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0aGUgalF1ZXJ5IGVsZW1lbnQgY29udGFpbmluZyBhbGwgYnV0dG9uc1xuICAgICAgICAgKiBAdHlwZSB7alF1ZXJ5LmVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLiRlbCA9ICQoJzxkaXY+JylcblxuICAgICAgICBjb25zdCBpZCA9ICdmbG9hdGluZ01lbnUnO1xuXG4gICAgICAgIHRoaXMuJGVsLmF0dHIoXCJpZFwiLCBpZCk7XG5cbiAgICAgICAgY29uc3QgJGxvYWRlciA9ICQoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcImxvYWRlclwiKS5hZGRDbGFzcyhcImhpZGRlblwiKTtcblxuICAgICAgICAvKiBJTVBPUlQgKi9cblxuICAgICAgICAvLyBoZXJlIHdpbGwgYmUgdGhlIGluc3RhbmNlIG9mIExpdHkgc3RvcmVkXG4gICAgICAgIC8vICh3ZSBuZWVkIHRvIHN0b3JlIGl0LCBiZWNhdXNlIHRoZSBcImltcG9ydFwiIGJ1dHRvbiBhbHNvIGNsb3NlcyBMaXR5KVxuICAgICAgICBsZXQgbGl0eUluc3RhbmNlO1xuXG4gICAgICAgIHRoaXMuYXBwZW5kKFxuICAgICAgICAgICAgbmV3IEZsb2F0aW5nQnV0dG9uKFwiaW1wb3J0XCIsIFwiSW1wb3J0IGEgbmV0d29yayBmcm9tIGEgZmlsZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0ICRwb3B1cCA9ICQoXCI8ZGl2PlwiKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJpbXBvcnRFeHBvcnRcIilcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiaW1wb3J0XCIpO1xuXG4gICAgICAgICAgICAgICAgbGV0IHRleHRhcmVhSWQgPSBcImltcG9ydEpTT05cIjtcbiAgICAgICAgICAgICAgICBsZXQgJHRleHRibG9jayA9ICQoXCI8dGV4dGFyZWE+XCIpLmF0dHIoJ2lkJywgdGV4dGFyZWFJZCk7XG5cbiAgICAgICAgICAgICAgICAkcG9wdXAuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAkdGV4dGJsb2NrXG4gICAgICAgICAgICAgICAgKS5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICQoXCI8YT5cIikuYXR0cih7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImhyZWZcIjogXCIjXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNsYXNzXCI6IFwidXBsb2FkXCJcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCI8aW1nPlwiKS5hdHRyKCdzcmMnLCBcImltZy9ndWkvaW1wb3J0LnN2Z1wiKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoXCIgaW1wb3J0IGZyb20gSlNPTlwiKVxuICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHBvcHVwLmNoaWxkcmVuKCkuYWRkQ2xhc3MoXCJoaWRkZW5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9hZGVyLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgkKCcjJyArIHRleHRhcmVhSWQpLnZhbCgpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJvY2Nlc3MgdGhlIGltcG9ydGVkIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFNWRy5pbXBvcnREYXRhKGRhdGEpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb3NlIExpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXR5SW5zdGFuY2UuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKS5hcHBlbmQoJGxvYWRlcik7XG5cbiAgICAgICAgICAgICAgICBsaXR5SW5zdGFuY2UgPSBsaXR5KCRwb3B1cCk7XG5cbiAgICAgICAgICAgICAgICAvLyBmb2N1cyBvbiB0aGUgdGV4dGJsb2NrXG4gICAgICAgICAgICAgICAgJHRleHRibG9jay5mb2N1cygpO1xuICAgICAgICAgICAgfSwgcGFyZW50U1ZHKVxuICAgICAgICApO1xuXG4gICAgICAgIC8qIExPQUQgRlJPTSBMSUJSQVJZICovXG4gICAgICAgIHRoaXMuYXBwZW5kKFxuICAgICAgICAgICAgbmV3IEZsb2F0aW5nQnV0dG9uKFwibGlicmFyeVwiLCBcIkxvYWQgYSBuZXR3b3JrIGZyb20gdGhlIGxpYnJhcnlcIiwgKCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgbGV0ICRwb3B1cCA9ICQoXCI8ZGl2PlwiKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJpbXBvcnRFeHBvcnRcIilcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwibGlicmFyeVwiKTtcblxuICAgICAgICAgICAgICAgIGxldCAkbGlzdCA9ICQoXCI8dWw+XCIpXG4gICAgICAgICAgICAgICAgJHBvcHVwLmFwcGVuZCgkbGlzdCkuYXBwZW5kKCRsb2FkZXIpO1xuXG4gICAgICAgICAgICAgICAgZ2V0TGlicmFyeSgpLnRoZW4obmV0d29ya0xpc3QgPT4ge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG5ldHdvcmtJbmZvIG9mIG5ldHdvcmtMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbGlzdC5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIjxsaT5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiPHNwYW4gY2xhc3M9J25hbWUnPlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChuZXR3b3JrSW5mby5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiPGE+XCIpLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibG9hZCBhcyBuZXR3b3JrXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5hdHRyKFwiaHJlZlwiLCBcIiNcIikub24oXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcG9wdXAuY2hpbGRyZW4oKS5hZGRDbGFzcyhcImhpZGRlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsb2FkZXIucmVtb3ZlQ2xhc3MoXCJoaWRkZW5cIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldE5ldHdvcmtGcm9tTGlicmFyeShuZXR3b3JrSW5mby5maWxlKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcm9jY2VzcyB0aGUgaW1wb3J0ZWQgZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFNWRy5pbXBvcnREYXRhKHJlc3BvbnNlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xvc2UgTGl0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXR5SW5zdGFuY2UuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgJHBvcHVwLmFwcGVuZCgpXG5cbiAgICAgICAgICAgICAgICBsaXR5SW5zdGFuY2UgPSBsaXR5KCRwb3B1cCk7XG4gICAgICAgICAgICB9LCBwYXJlbnRTVkcpXG4gICAgICAgICk7XG5cbiAgICAgICAgLyogRVhQT1JUICovXG4gICAgICAgIHRoaXMuYXBwZW5kKFxuICAgICAgICAgICAgbmV3IEZsb2F0aW5nQnV0dG9uKFwiZXhwb3J0XCIsIFwiR2V0IGNvZGUgZm9yIHRoaXMgbmV0d29ya1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBleHBvcnROZXR3b3JrKHBhcmVudFNWRyk7XG5cbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgdGhlIHBvcHVwIGNvbnRhaW5lciBob2xkaW5nIGFsbCBwb3B1cCBjb250ZW50ICh0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIGxpdHkpXG4gICAgICAgICAgICAgICAgbGV0ICRwb3B1cCA9ICQoXCI8ZGl2PlwiKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJpbXBvcnRFeHBvcnRcIilcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiZXhwb3J0XCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgdGhlIGJsb2NrIHdpdGggY29kZSB0byBiZSBkaXNwbGF5ZWQgYW5kIGFwcGVuZCBpdCB0byB0aGUgcG9wdXAgZWxlbWVudFxuICAgICAgICAgICAgICAgIGNvbnN0ICR0ZXh0YmxvY2sgPSAkKFwiPHRleHRhcmVhPlwiKS50ZXh0KGRhdGEuanNvbihleHBvcnROZXR3b3JrLnN0eWxlLnByZXR0eSkpXG5cbiAgICAgICAgICAgICAgICAkcG9wdXAuYXBwZW5kKCR0ZXh0YmxvY2spO1xuXG4gICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgdGhlIGxpbmtzXG4gICAgICAgICAgICAgICAgJHBvcHVwLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgJChcIjxhPlwiKS5hdHRyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaHJlZlwiOiBkYXRhLmpzb24oZXhwb3J0TmV0d29yay5zdHlsZS5wcmV0dHksIHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcImRvd25sb2FkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRvd25sb2FkXCI6IFwibmV0d29yay5qc29uXCJcbiAgICAgICAgICAgICAgICAgICAgfSkuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIjxpbWc+XCIpLmF0dHIoJ3NyYycsIFwiaW1nL2d1aS9leHBvcnQuc3ZnXCIpXG4gICAgICAgICAgICAgICAgICAgICkuYXBwZW5kKFwiIGV4cGFuZGVkIEpTT05cIilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICRwb3B1cC5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICQoXCI8YT5cIikuYXR0cih7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImhyZWZcIjogZGF0YS5qc29uKGV4cG9ydE5ldHdvcmsuc3R5bGUuY29tcGFjdCwgdHJ1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNsYXNzXCI6IFwiZG93bmxvYWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZG93bmxvYWRcIjogXCJuZXR3b3JrLm1pbi5qc29uXCJcbiAgICAgICAgICAgICAgICAgICAgfSkuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIjxpbWc+XCIpLmF0dHIoJ3NyYycsIFwiaW1nL2d1aS9leHBvcnQuc3ZnXCIpXG4gICAgICAgICAgICAgICAgICAgICkuYXBwZW5kKFwiIGNvbXBhY3QgSlNPTlwiKVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBsaXR5KCRwb3B1cCk7XG5cbiAgICAgICAgICAgICAgICAvLyBoaWdobGlnaHQgdGhlIHRleHQgaW4gdGhlIHRleHRibG9ja1xuICAgICAgICAgICAgICAgICR0ZXh0YmxvY2suc2VsZWN0KCk7XG4gICAgICAgICAgICB9LCBwYXJlbnRTVkcpXG4gICAgICAgICk7XG5cbiAgICAgICAgLyogSEVMUCAqL1xuXG4gICAgICAgIGxldCBoZWxwID0gbmV3IEZsb2F0aW5nQnV0dG9uKFwiaGVscFwiLCBcIkRpc3BsYXkgYSBoZWxwIHBhZ2VcIiwgZmFsc2UsIHBhcmVudFNWRyk7XG4gICAgICAgIGhlbHAuJGVsLmF0dHIoe1xuICAgICAgICAgICAgJ2hyZWYnOiAnLi9kb2NzL3VzZXIuaHRtbCcsXG4gICAgICAgICAgICAnZGF0YS1saXR5JzogJydcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXBwZW5kKGhlbHApO1xuXG4gICAgICAgIHBhcmVudFNWRy4kc3ZnLmFmdGVyKHRoaXMuJGVsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhcHBlbmQgYSBGbG9hdGluZ0J1dHRvbiB0byB0aGlzIG1lbnVcbiAgICAgKiBAcGFyYW0gIHtGbG9hdGluZ0J1dHRvbn0gbWVudUl0ZW0gYXBwZW5kIGFuIGluc3RhbmNlIG9mICB7QGxpbmsgRmxvYXRpbmdCdXR0b259IHRvIHRoaXMgbWVudVxuICAgICAqL1xuICAgIGFwcGVuZChtZW51SXRlbSkge1xuICAgICAgICB0aGlzLiRlbC5hcHBlbmQobWVudUl0ZW0uJGVsKTtcbiAgICB9XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm4ge1xuICAgIHN0YXRpYyBkZWVwQ29weShhcnIpIHtcbiAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHRydWUsIFtdLCBhcnIpO1xuICAgIH1cblxuICAgIHN0YXRpYyBhZGRNb3VzZVNjcm9sbEV2ZW50TGlzdGVuZXIocXVlcnksIGZ1bmMpIHtcbiAgICAgICAgbGV0IE1vdXNlV2hlZWxIYW5kbGVyID0gZXZlbnQgPT4ge1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gd2luZG93LmV2ZW50IHx8IGV2ZW50OyAvLyBvbGQgSUUgc3VwcG9ydFxuICAgICAgICAgICAgZXZlbnQuZGVsdGEgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgKGV2ZW50LndoZWVsRGVsdGEgfHwgLWV2ZW50LmRldGFpbCkpKTtcblxuICAgICAgICAgICAgZnVuYyhldmVudClcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETyBhZGQgbW9yZSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBzb21laG93XG4gICAgICAgIGxldCBzdmdlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihxdWVyeSk7XG5cbiAgICAgICAgaWYgKHN2Z2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgLy8gSUU5LCBDaHJvbWUsIFNhZmFyaSwgT3BlcmFcbiAgICAgICAgICAgIHN2Z2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIiwgTW91c2VXaGVlbEhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIC8vIEZpcmVmb3hcbiAgICAgICAgICAgIHN2Z2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTU1vdXNlU2Nyb2xsXCIsIE1vdXNlV2hlZWxIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSAge1xuICAgICAgICAgICAgLy8gSUUgNi83LzhcbiAgICAgICAgICAgIHN2Z2VsZW1lbnQuYXR0YWNoRXZlbnQoXCJvbm1vdXNld2hlZWxcIiwgTW91c2VXaGVlbEhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIHN2Z2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdldmVudCcsIGUpXG4gICAgICAgIH0sIGZhbHNlKVxuICAgIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnQgY2xhc3MgZXhwb3J0TmV0d29yayB7XG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHKSB7XG4gICAgICAgIHRoaXMucGFyZW50U1ZHID0gcGFyZW50U1ZHO1xuICAgIH1cblxuICAgIGdldCBleHBvcnREYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnRTVkcuZXhwb3J0RGF0YTtcbiAgICB9XG5cbiAgICBqc29uKHN0eWxlID0gZXhwb3J0TmV0d29yay5zdHlsZS5jb21wYWN0LCBkYXRhVXJpID0gZmFsc2UpIHtcbiAgICAgICAgaWYoZGF0YVVyaSkge1xuICAgICAgICAgICAgcmV0dXJuICdkYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCwnXG4gICAgICAgICAgICAgICAgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5qc29uKHN0eWxlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHN0eWxlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBleHBvcnROZXR3b3JrLnN0eWxlLmNvbXBhY3Q6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmV4cG9ydERhdGEpO1xuICAgICAgICAgICAgICAgIGNhc2UgZXhwb3J0TmV0d29yay5zdHlsZS5wcmV0dHk6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmV4cG9ydERhdGEsIG51bGwsIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBzdHlsZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByZXR0eTogMCxcbiAgICAgICAgICAgIGNvbXBhY3Q6IDFcbiAgICAgICAgfVxuICAgIH07XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gbG9naWMgZnVuY3Rpb25zIHVzZWQgaW4gdGhlIGdhdGUgZXZhbHVhdGlvblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9naWMge1xuICAgIHN0YXRpYyBhbmQoYSwgYikge1xuICAgICAgICByZXR1cm4gTG9naWMudGVzdExvZ2ljUnVsZXNTeW1tZXRyaWMoYSwgYiwgW1xuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9uLCBMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub25dLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9uLCBMb2dpYy5zdGF0ZS5vZmYsIExvZ2ljLnN0YXRlLm9mZl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLnVua25vd24sIExvZ2ljLnN0YXRlLnVua25vd25dLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9uLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZywgTG9naWMuc3RhdGUub3NjaWxsYXRpbmddLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vZmYsIExvZ2ljLnN0YXRlLm9mZl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS51bmtub3duLCBMb2dpYy5zdGF0ZS5vZmZdLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9mZl0sXG5cbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS51bmtub3duLCBMb2dpYy5zdGF0ZS51bmtub3duLCBMb2dpYy5zdGF0ZS51bmtub3duXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS51bmtub3duLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZywgTG9naWMuc3RhdGUudW5rbm93bl0sXG5cbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZywgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nXVxuICAgICAgICBdKTtcbiAgICB9XG4gICAgc3RhdGljIG5hbmQoYSwgYikge1xuICAgICAgICByZXR1cm4gTG9naWMubm90KExvZ2ljLmFuZChhLCBiKSk7XG4gICAgfVxuICAgIHN0YXRpYyBub3IoYSwgYikge1xuICAgICAgICByZXR1cm4gTG9naWMubm90KExvZ2ljLm9yKGEsIGIpKTtcbiAgICB9XG4gICAgc3RhdGljIG5vdChhKSB7XG4gICAgICAgIGlmKGEgPT09IExvZ2ljLnN0YXRlLm9uKSB7XG4gICAgICAgICAgICByZXR1cm4gTG9naWMuc3RhdGUub2ZmO1xuICAgICAgICB9IGVsc2UgaWYgKGEgPT09IExvZ2ljLnN0YXRlLm9mZikge1xuICAgICAgICAgICAgcmV0dXJuIExvZ2ljLnN0YXRlLm9uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIG9yKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIExvZ2ljLnRlc3RMb2dpY1J1bGVzU3ltbWV0cmljKGEsIGIsIFtcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9uXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vbl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLnVua25vd24sIExvZ2ljLnN0YXRlLm9uXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9uXSxcblxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vZmZdLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93bl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZywgTG9naWMuc3RhdGUub3NjaWxsYXRpbmddLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93bl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLnVua25vd25dLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZ11cbiAgICAgICAgXSk7XG4gICAgfVxuICAgIHN0YXRpYyB4bm9yKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIExvZ2ljLm5vdChMb2dpYy54b3IoYSwgYikpO1xuICAgIH1cbiAgICBzdGF0aWMgeG9yKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIExvZ2ljLnRlc3RMb2dpY1J1bGVzU3ltbWV0cmljKGEsIGIsIFtcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9mZl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub25dLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9uLCBMb2dpYy5zdGF0ZS51bmtub3duLCBMb2dpYy5zdGF0ZS51bmtub3duXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nXSxcblxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vZmZdLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93bl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZywgTG9naWMuc3RhdGUub3NjaWxsYXRpbmddLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93bl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLnVua25vd25dLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZ11cbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVua25vd246IDAsXG4gICAgICAgICAgICBvbjogMSxcbiAgICAgICAgICAgIG9mZjogMixcbiAgICAgICAgICAgIG9zY2lsbGF0aW5nOiAzXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgdGVzdExvZ2ljUnVsZXNTeW1tZXRyaWMoYSwgYiwgcnVsZXMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgcnVsZXMubGVuZ3RoIDsgaSsrKSB7XG4gICAgICAgICAgICBpZigocnVsZXNbaV1bMF09PT1hICYmIHJ1bGVzW2ldWzFdPT09YikgfHwgKHJ1bGVzW2ldWzBdPT09YiAmJiBydWxlc1tpXVsxXT09PWEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGVzW2ldWzJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBDYW52YXMgZnJvbSAnLi9jYW52YXMuanMnO1xuXG4vKipcbiAqIFdoZW4gdGhlIGRvY3VtZW50IGlzIHJlYWR5LCBpbml0aWFsaXplIHRoZSBhcHBsaWNhdGlvblxuICovXG4kKCgpID0+IHtcbiAgICBuZXcgQ2FudmFzKFwiI2NhbnZhc1wiLCAxMCk7XG59KTtcbiIsIlxuY29uc3QgbGlicmFyeURpciA9ICcuL2xpYnJhcnkvJ1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGlicmFyeSgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBsaWJyYXJ5RmlsZSA9IGxpYnJhcnlEaXIgKyAnbmV0d29ya0xpc3QuanNvbic7XG5cbiAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYodGhpcy5yZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZS5uZXR3b3Jrcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgbGlicmFyeUZpbGUsIHRydWUpO1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgICAgcmVxdWVzdC5zZW5kKCk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXR3b3JrRnJvbUxpYnJhcnkobmV0d29ya05hbWUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZih0aGlzLnJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCBsaWJyYXJ5RGlyICsgbmV0d29ya05hbWUgKyAnLmpzb24nLCB0cnVlKTtcbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICAgIHJlcXVlc3Quc2VuZCgpO1xuICAgIH0pO1xufVxuIiwiaW1wb3J0IExvZ2ljIGZyb20gJy4vbG9naWMuanMnXG5cbmNsYXNzIHN0YXRlQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0b3JJZCwgc3RhdGUsIHdob0NhdXNlZEl0KSB7XG4gICAgICAgIHRoaXMuY29ubmVjdG9ySWQgPSBjb25uZWN0b3JJZFxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGVcbiAgICAgICAgdGhpcy53aG9DYXVzZWRJdCA9IHdob0NhdXNlZEl0XG4gICAgfVxufVxuXG4vLyBhbGwgY29ubmVjdG9ycyBtZW50aW9uZWQgaGVyZSBhcmUgT1VUUFVUIENPTk5FQ1RPUlNcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNpbXVsYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFNWRykge1xuICAgICAgICB0aGlzLnBhcmVudFNWRyA9IHBhcmVudFNWR1xuXG4gICAgICAgIC8vIG1hcHMgZWFjaCBhZmZlY3RlZCBvdXRwdXQgY29ubmVjdG9yIHRvIGl0J3MgZGlyZWN0bHkgcHJlY2VlZGluZyBvdXRwdXQgY29ubmVjdG9yc1xuICAgICAgICB0aGlzLnByZWRlY2Vzc29ycyA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvLyBtYXBzIHdhdmVJZCAtPiBhcnJheSBvZiBvdXRwdXRDb25uZWN0b3JzIGFmZmVjdGVkXG4gICAgICAgIHRoaXMud2F2ZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMud2F2ZSA9IDBcblxuICAgICAgICB0aGlzLmN5Y2xlZENvbm5lY3RvcnMgPSBuZXcgTWFwKClcbiAgICAgICAgdGhpcy5yZXNvbHZlZEN5Y2xlZENvbm5lY3RvcnMgPSBuZXcgU2V0KClcblxuICAgIH1cblxuICAgIHJ1bigpIHtcbiAgICAgICAgdGhpcy53YXZlKys7XG4gICAgICAgIHdoaWxlKHRoaXMud2F2ZXMuaGFzKHRoaXMud2F2ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RlcCgpXG4gICAgICAgICAgICB0aGlzLndhdmVzLmRlbGV0ZSh0aGlzLndhdmUpIC8vIGNsZWFuIG9sZCB3YXZlcyBvbiB0aGUgZ29cbiAgICAgICAgICAgIHRoaXMud2F2ZSsrXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGVwKCkge1xuICAgICAgICBmb3IgKGxldCB7Y29ubmVjdG9ySWQsIHN0YXRlLCB3aG9DYXVzZWRJdH0gb2YgdGhpcy53YXZlcy5nZXQodGhpcy53YXZlKSkge1xuICAgICAgICAgICAgLy8gc2tpcCByZXNvbHZlZCBjeWNsZXNcbiAgICAgICAgICAgIGlmKHRoaXMucmVzb2x2ZWRDeWNsZWRDb25uZWN0b3JzLmhhcyhjb25uZWN0b3JJZCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBza2lwIGNvbm5lY3RvciB0aGF0IGFyZSBjeWNsZXNcbiAgICAgICAgICAgIGlmICh0aGlzLmN5Y2xlZENvbm5lY3RvcnMuaGFzKGNvbm5lY3RvcklkKSkge1xuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgc2V0IG9mIHN0YXRlcyB0aGF0IHRoaXMgY29ubmVjdG9yIGFwcGVhcmVkIGZyb20gdGhlIG1vbWVudCB0aGUgc2lnbmFsIGZpcnN0IGN5Y2xlZFxuICAgICAgICAgICAgICAgIGxldCBzdGF0ZXMgPSB0aGlzLmN5Y2xlZENvbm5lY3RvcnMuZ2V0KGNvbm5lY3RvcklkKVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIGNvbm5lY3RvciBhbHJlYWR5IGhhZCB0aGlzIHN0YXRlIGluIHRoaXMgY3ljbGUsIHJlc29sdmUgdGhlIGN5Y2xlXG4gICAgICAgICAgICAgICAgaWYoc3RhdGVzLmhhcyhzdGF0ZSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbW9yZSBzdGF0ZXMgaW4gdGhlIHNldCwgdGhlIGNvbm5lY3RvciBpcyBvc2NpbGxhdGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyAoZWxzZSBpdCBrZWVwcyBpdHMgc3RhdGUgYW5kIHdlIGp1c3QgYnJlYWsgdGhlIGN5Y2xlKVxuICAgICAgICAgICAgICAgICAgICBpZihzdGF0ZXMuc2l6ZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gTG9naWMuc3RhdGUub3NjaWxsYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmsgdGhpcyBjb25uZWN0b3IgYXMgcmVzb2x2ZWRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlZEN5Y2xlZENvbm5lY3RvcnMuYWRkKGNvbm5lY3RvcklkKVxuXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBhIG5ldywgdW5zZWVuIHN0YXRlLCBhZGQgaXQgdG8gdGhlIHNldCBhbmQgY29udGludWUgc2ltdWxhdGluZyB0aGUgY3ljbGVcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuYWRkKHN0YXRlKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIG1hcCB0aGUgbW9kaWZpZWQgc2V0IG9mIHN0YXRlcyB0byB0aGUgY29ubmVjdG9yXG4gICAgICAgICAgICAgICAgdGhpcy5jeWNsZWRDb25uZWN0b3JzLnNldChjb25uZWN0b3JJZCwgc3RhdGVzKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLndob0NhdXNlZEl0ID0gY29ubmVjdG9ySWRcbiAgICAgICAgICAgIC8qICBwcm9jZXNzIGFsbCBvdXRwdXRDb25uZWN0b3JzIGJ5IHNldHRpbmcgdGhlaXIgc3RhdGVcbiAgICAgICAgICAgICAgICB0aGlzIHdpbGwgdHJpZ2dlciBhIGZvbGxvd2luZyBldmVudCBjaGFpbjpcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0Q29ubmVjdG9yIGNoYW5nZXNcbiAgICAgICAgICAgICAgICAgICAgLT4gYWxsIGNvbm5lY3RlZCB3aXJlcyBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgLT4gYWxsIGlucHV0Q29ubmVjdG9ycyBjb25uZWN0ZWQgdG8gdGhlc2Ugd2lyZXMgY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgIC0+IGFsbCBlbGVtZW50cyB0aGF0IGNvbnRhaW4gdGhlc2UgaW5wdXRDb25uZWN0b3JzIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAtPiB0aGVzZSBlbGVtZW50cyBjb21wdXRlIHRoZSBuZXcgc3RhdGUgb2YgdGhlaXIgb3V0cHV0IGNvbm5lY3RvcnMgYW5kIGNhbGwgbm90aWZ5Q2hhbmdlKClcbiAgICAgICAgICAgICovXG5cblxuICAgICAgICAgICAgaWYod2hvQ2F1c2VkSXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFByZWRlY2Vzc29yKGNvbm5lY3RvcklkLCB3aG9DYXVzZWRJdClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLmN5Y2xlZENvbm5lY3RvcnMuaGFzKGNvbm5lY3RvcklkKSAmJiB0aGlzLmdldEFsbFByZWRlY2Vzc29ycyhjb25uZWN0b3JJZCkuaGFzKGNvbm5lY3RvcklkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3ljbGVkQ29ubmVjdG9ycy5zZXQoY29ubmVjdG9ySWQsIG5ldyBTZXQoW3N0YXRlXSkpXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy8gcmVmbGVjdCB0aGUgY2hhbmdlcyBpbiBTVkdcbiAgICAgICAgICAgIGxldCBjb25uZWN0b3IgPSB0aGlzLnBhcmVudFNWRy5nZXRDb25uZWN0b3JCeUlkKGNvbm5lY3RvcklkKVxuICAgICAgICAgICAgaWYoY29ubmVjdG9yKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdG9yLnNldFN0YXRlKHN0YXRlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMud2hvQ2F1c2VkSXQgPSB1bmRlZmluZWRcbiAgICB9XG5cbiAgICAvLyBtYXJrIGEgcHJlZGVjZXNzb3JDb25uZWN0b3JJZCBhcyBhIHByZWRlY2Vzc29yIG9mIGNvbm5lY3RvcklkXG4gICAgYWRkUHJlZGVjZXNzb3IoY29ubmVjdG9ySWQsIHByZWRlY2Vzc29yQ29ubmVjdG9ySWQpIHtcbiAgICAgICAgaWYoIXRoaXMucHJlZGVjZXNzb3JzLmhhcyhjb25uZWN0b3JJZCkpIHtcbiAgICAgICAgICAgIHRoaXMucHJlZGVjZXNzb3JzLnNldChjb25uZWN0b3JJZCwgbmV3IFNldCgpKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wcmVkZWNlc3NvcnMuZ2V0KGNvbm5lY3RvcklkKS5hZGQocHJlZGVjZXNzb3JDb25uZWN0b3JJZClcbiAgICB9XG5cbiAgICAvLyByZXR1cm5zIHNldCBvZiBhbGwgb3V0cHV0IGNvbm5lY3RvcnMsIHRoYXQgYXJlIGJlZm9yZSB0aGlzIG91dHB1dCBjb25uZWN0b3JcbiAgICBnZXRBbGxQcmVkZWNlc3NvcnMoY29ubmVjdG9ySWQpIHtcbiAgICAgICAgaWYoIXRoaXMucHJlZGVjZXNzb3JzLmhhcyhjb25uZWN0b3JJZCkpIHtcbiAgICAgICAgICAgIHRoaXMucHJlZGVjZXNzb3JzLnNldChjb25uZWN0b3JJZCwgbmV3IFNldCgpKVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGFsbCA9IG5ldyBTZXQoKVxuXG4gICAgICAgIHRoaXMucHJlZGVjZXNzb3JzLmdldChjb25uZWN0b3JJZCkuZm9yRWFjaChhbGwuYWRkLCBhbGwpO1xuXG4gICAgICAgIGxldCBwcmV2U2l6ZSA9IDBcbiAgICAgICAgbGV0IHNpemUgPSBhbGwuc2l6ZVxuICAgICAgICB3aGlsZShwcmV2U2l6ZSA8IHNpemUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNvbm5lY3RvciBvZiBhbGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmVkZWNlc3NvcnMuaGFzKGNvbm5lY3RvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVkZWNlc3NvcnMuZ2V0KGNvbm5lY3RvcikuZm9yRWFjaChhbGwuYWRkLCBhbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZTaXplID0gc2l6ZVxuICAgICAgICAgICAgc2l6ZSA9IGFsbC5zaXplXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWxsXG4gICAgfVxuXG4gICAgbm90aWZ5Q2hhbmdlKGNvbm5lY3RvcklkLCBzdGF0ZSkge1xuICAgICAgICBsZXQgd2F2ZUlkID0gdGhpcy53YXZlICsgMVxuXG4gICAgICAgIGlmKCF0aGlzLndhdmVzLmhhcyh3YXZlSWQpKSB7XG4gICAgICAgICAgICB0aGlzLndhdmVzLnNldCh3YXZlSWQsIFtdKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy53YXZlcy5nZXQod2F2ZUlkKS5wdXNoKG5ldyBzdGF0ZUNoYW5nZShjb25uZWN0b3JJZCwgc3RhdGUsIHRoaXMud2hvQ2F1c2VkSXQpKTtcbiAgICB9XG59XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gc2luZ2xldG9uIHRvIGdlbmVyYXRlIHVuaXF1ZSBpZCdzXG5sZXQgZXhpc3RpbmdJZEluc3RhbmNlID0gbnVsbDtcbi8vIHVzYWdlOiBsZXQgaWQgPSBuZXcgSWQoKS51bmlxdWVcbmV4cG9ydCBjbGFzcyBJZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGlmKCFleGlzdGluZ0lkSW5zdGFuY2Upe1xuICAgICAgICAgICAgZXhpc3RpbmdJZEluc3RhbmNlID0gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJlZml4ID0gXCJpZFwiO1xuICAgICAgICB0aGlzLm5leHRJZCA9IDA7XG5cbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nSWRJbnN0YW5jZTtcbiAgICB9XG5cbiAgICBnZXQgdW5pcXVlKCkge1xuICAgICAgICBsZXQgcmV0VmFsID0gdGhpcy5nZW5lcmF0ZSgpO1xuXG4gICAgICAgIC8vIGZpbmQgbmV4dCB1bnVzZWQgaWRYWFhYIHRvIHByZXZlbnQgaWQgY29sbGlzaW9uIHRoYXQgbWlnaHQgYmUgY2F1c2VkIGJ5IHNvbWUgb3RoZXIgY29tcG9uZW50XG4gICAgICAgIC8vIChpdCByZWFsbHkgc2hvdWxkIG5vdCBoYXBwZW4sIGJ1dCB0aGlzIGlzIGEgc2ltcGxlIG1ldGhvZCB0byBlbnN1cmUgc2FmZXR5KVxuICAgICAgICB3aGlsZSgkKFwiI1wiK3JldFZhbCkubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRJZCsrO1xuICAgICAgICAgICAgcmV0VmFsID0gdGhpcy5nZW5lcmF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldHVybiB0aGlzIGlkXG4gICAgICAgIHRoaXMubmV4dElkKys7XG5cbiAgICAgICAgcmV0dXJuIHJldFZhbDtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJlZml4ICsgdGhpcy5uZXh0SWQ7XG4gICAgfVxufVxuXG4vLyB0byBlczUgY29tcGlsZXIgZnJpZW5kbHkgaW1wbGVtZW50YXRpb24gKFwiY2FsbGluZyBhIGJ1aWx0aW4gTWFwIGNvbnN0cnVjdG9yIHdpdGhvdXQgbmV3IGlzIGZvcmJpZGRlblwiKVxuZXhwb3J0IGNsYXNzIE1hcFdpdGhEZWZhdWx0VmFsdWUge1xuICAgIGNvbnN0cnVjdG9yKGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICB0aGlzLm1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gZGVmYXVsdFZhbHVlO1xuXG5cbiAgICB9XG5cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLnNpemU7XG4gICAgfVxuXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5jbGVhcigpO1xuICAgIH1cblxuICAgIGZvckVhY2goLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuZm9yRWFjaCguLi5hcmdzKTtcbiAgICB9XG5cbiAgICBnZXQoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5nZXQoa2V5KTtcbiAgICB9XG5cbiAgICBkZWxldGUoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5kZWxldGUoa2V5KTtcbiAgICB9XG5cbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cblxuICAgIGhhcyhrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmhhcyhrZXkpO1xuICAgIH1cblxuICAgIGVudHJpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5lbnRyaWVzKCk7XG4gICAgfVxuXG4gICAga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmtleXMoKTtcbiAgICB9XG5cbiAgICB2YWx1ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC52YWx1ZXMoKTtcbiAgICB9XG59XG5cbi8qXG4vLyBlczYgaW1wbGVtZW50YXRpb25cbmV4cG9ydCBjbGFzcyBNYXBXaXRoRGVmYXVsdFZhbHVlIGV4dGVuZHMgTWFwIHtcbiAgICBjb25zdHJ1Y3RvcihkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLmRlZmF1bHQgPSBkZWZhdWx0VmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0KGtleSkge1xuICAgICAgICBpZih0aGlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuZ2V0KGtleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xuICAgICAgICB9XG4gICAgfVxufVxuKi8iLCJpbXBvcnQgKiBhcyBTdHJ1Y3R1cmVzIGZyb20gJy4vc3RydWN0dXJlc0FuZENsYXNzZXMuanMnXG5cbmNsYXNzIFRhZyB7XG4gICAgY29uc3RydWN0b3IodGFnTmFtZSkge1xuICAgICAgICB0aGlzLnRhZ05hbWUgPSB0YWdOYW1lO1xuXG4gICAgICAgIHRoaXMuJGVsID0gJChcIjxcIit0aGlzLnRhZ05hbWUrXCI+XCIpO1xuXG4gICAgICAgIHRoaXMuaWQgPSBuZXcgU3RydWN0dXJlcy5JZCgpLnVuaXF1ZTtcbiAgICB9XG5cbiAgICBhZGRDbGFzcyhuYW1lKSB7XG4gICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKG5hbWUpO1xuICAgIH1cblxuICAgIHJlbW92ZUNsYXNzZXMoLi4uY2xhc3Nlcykge1xuICAgICAgICBmb3IobGV0IGl0ZW0gb2YgY2xhc3Nlcykge1xuICAgICAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2xhc3MoaXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGRBdHRyKGFzc29jKSB7XG4gICAgICAgIHRoaXMuY2hlY2tJZkVsZW1lbnRFeGlzdHNJbkRPTSgpO1xuXG4gICAgICAgIC8vIGFkZCBhdHRyaWJ1dGVzIHRvIHRoZSBlbGVtZW50XG4gICAgICAgIHRoaXMuJGVsLmF0dHIoYXNzb2MpO1xuICAgIH1cblxuICAgIGdldEF0dHIobmFtZSkge1xuICAgICAgICB0aGlzLmNoZWNrSWZFbGVtZW50RXhpc3RzSW5ET00oKTtcblxuICAgICAgICByZXR1cm4gdGhpcy4kZWwuYXR0cihuYW1lKTtcbiAgICB9XG5cbiAgICByZW1vdmVBdHRyKG5hbWUpIHtcbiAgICAgICAgdGhpcy5jaGVja0lmRWxlbWVudEV4aXN0c0luRE9NKCk7XG5cbiAgICAgICAgdGhpcy4kZWwucmVtb3ZlQXR0cihuYW1lKTtcbiAgICB9XG5cbiAgICBzZXQgaWQoaWQpIHtcbiAgICAgICAgdGhpcy5hZGRBdHRyKHtcImlkXCI6IGlkfSk7XG4gICAgfTtcblxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cihcImlkXCIpO1xuICAgIH07XG5cbiAgICBnZXQoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tJZkVsZW1lbnRFeGlzdHNJbkRPTSgpO1xuICAgICAgICByZXR1cm4gdGhpcy4kZWw7XG4gICAgfVxuXG4gICAgLy8gaWYgdGhlIGVsZW1lbnQgZXhpc3RzIGluIGRvbSwgd2UgbmVlZCB0byBmZXRjaCBpdCB1c2luZyBqUXVlcnlcbiAgICBjaGVja0lmRWxlbWVudEV4aXN0c0luRE9NKCkge1xuICAgICAgICBsZXQgJGpxRWxlbWVudCA9ICQoXCIjXCIrdGhpcy4kZWwuYXR0cignaWQnKSk7XG4gICAgICAgIGlmKCRqcUVsZW1lbnQubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLiRlbCA9ICRqcUVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIERyYWdnYWJsZSBleHRlbmRzIFRhZyB7XG4gICAgY29uc3RydWN0b3IodGFnTmFtZSkge1xuICAgICAgICBzdXBlcih0YWdOYW1lKTtcbiAgICB9XG5cbiAgICBkcmFnZ2FibGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5hZGRBdHRyKHtcImRyYWdnYWJsZVwiOiB2YWx1ZX0pO1xuICAgIH1cbn1cblxuY2xhc3MgUm90YXRhYmxlIGV4dGVuZHMgVGFnIHtcbiAgICBjb25zdHJ1Y3Rvcih0YWdOYW1lKSB7XG4gICAgICAgIHN1cGVyKHRhZ05hbWUpO1xuICAgIH1cblxuICAgIHJvdGF0YWJsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLmFkZEF0dHIoe1wicm90YXRhYmxlXCI6IHZhbHVlfSk7XG4gICAgfVxufVxuXG4vLyB0aGVyZSBpcyBubyBtdWx0aXBsZSBpbmhlcml0YW5jZSBpbiBFUzYsIHNvIEkgaGF2ZSB0byBkbyBzb21ldGhpbmcgdWdseSBsaWtlIHRoaXNcbmNsYXNzIERyYWdnYWJsZVJvdGF0YWJsZSBleHRlbmRzIERyYWdnYWJsZSB7XG4gICAgY29uc3RydWN0b3IodGFnTmFtZSkge1xuICAgICAgICBzdXBlcih0YWdOYW1lKTtcbiAgICB9XG5cbiAgICByb3RhdGFibGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5hZGRBdHRyKHtcInJvdGF0YWJsZVwiOiB2YWx1ZX0pO1xuICAgIH1cbn1cblxuY2xhc3MgU3ZnRWxlbWVudCBleHRlbmRzIERyYWdnYWJsZVJvdGF0YWJsZSB7XG4gICAgY29uc3RydWN0b3IoeCwgeSwgdywgaCwgdGFnTmFtZSkge1xuICAgICAgICBzdXBlcih0YWdOYW1lKTtcblxuICAgICAgICB0aGlzLmFkZEF0dHIoe1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHksXG4gICAgICAgICAgICB3aWR0aDogdyxcbiAgICAgICAgICAgIGhlaWdodDogaFxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSZWN0YW5nbGUgZXh0ZW5kcyBTdmdFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCB3LCBoLCBmaWxsLCBzdHJva2UpIHtcbiAgICAgICAgc3VwZXIoeCwgeSwgdywgaCwgXCJyZWN0XCIpO1xuICAgICAgICB0aGlzLmFkZEF0dHIoe1xuICAgICAgICAgICAgZmlsbDogZmlsbCxcbiAgICAgICAgICAgIHN0cm9rZTogc3Ryb2tlLFxuICAgICAgICAgICAgJ3N0cm9rZS13aWR0aCc6IDAuNSxcbiAgICAgICAgICAgICdwb2ludGVyLWV2ZW50cyc6ICdhbGwnIC8vIHRvIHRyaWdnZXIgaG92ZXIgZXZlbiB3aXRoIHRyYW5zcGFyZW50IGJhY2tncm91bmRcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3ZnSW1hZ2UgZXh0ZW5kcyBTdmdFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCB3LCBoLCB1cmwpIHtcbiAgICAgICAgc3VwZXIoeCwgeSwgdywgaCwgXCJpbWFnZVwiKTtcbiAgICAgICAgdGhpcy5hZGRBdHRyKHtcbiAgICAgICAgICAgIFwieGxpbms6aHJlZlwiOiB1cmxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2hhbmdlVXJsKHVybCkge1xuICAgICAgICB0aGlzLmFkZEF0dHIoe1xuICAgICAgICAgICAgXCJ4bGluazpocmVmXCI6IHVybFxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHcm91cCBleHRlbmRzIERyYWdnYWJsZVJvdGF0YWJsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKFwiZ1wiKTtcbiAgICB9XG5cbiAgICBhZGRDaGlsZChlbCkge1xuICAgICAgICB0aGlzLiRlbC5hcHBlbmQoZWwuJGVsKTtcbiAgICAgICAgcmV0dXJuIGVsOyAvLyBwcm8gamVkbm9kdXNzaSBcImxldCByZWN0ID0gZy5hZGRDaGlsZChuZXcgUmVjdGFuZ2xlKC4uLlwiXG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUG9seWxpbmVQb2ludCB7XG4gICAgY29uc3RydWN0b3IoeCwgeSkge1xuICAgICAgICB0aGlzLnggPSAwO1xuICAgICAgICB0aGlzLnkgPSAwO1xuICAgICAgICBpZih4ICE9PSB1bmRlZmluZWQgJiYgeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldCh4LCB5KSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgfVxuXG4gICAgc3RhdGljIHBhcnNlRnJvbVN0cmluZyhzdHJpbmcpIHtcbiAgICAgICAgbGV0IGFyciA9IHN0cmluZy5zcGxpdChcIixcIik7XG4gICAgICAgIHJldHVybiBuZXcgUG9seWxpbmVQb2ludChhcnJbMF0sIGFyclsxXSk7XG4gICAgfVxuXG4gICAgZ2V0IHN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueCArIFwiLFwiICsgdGhpcy55O1xuICAgIH1cblxuICAgIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgICAgICByZXR1cm4gYS54ID09PSBiLnggJiYgYS55ID09PSBiLnk7XG4gICAgfVxufVxuXG5jbGFzcyBTbWFydEFycmF5IHtcbiAgICBjb25zdHJ1Y3RvcihhcnIpIHtcbiAgICAgICAgaWYoYXJyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYXJyID0gYXJyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hcnIgPSBbXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvcHkoKSB7XG4gICAgICAgIHJldHVybiBTbWFydEFycmF5KCQuZXh0ZW5kKHRydWUsIFtdLCB0aGlzLmFycikpO1xuICAgIH1cblxuICAgIGFwcGVuZChwb2ludCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRXaXRoSW5kZXgocG9pbnQsIHRoaXMuYXJyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgcHJlcGVuZChwb2ludCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRXaXRoSW5kZXgocG9pbnQsIDApO1xuICAgIH1cblxuICAgIC8vIGFkZCBhIHBvaW50IGF0IHRoZSBzcGVjaWZpZWQgaW5kZXgsIG1vdmUgYWxsIGZvbGxvd2luZyBpdGVtc1xuICAgIGFkZFdpdGhJbmRleChwb2ludCwgaW5kZXgpIHtcbiAgICAgICAgZm9yKGxldCBpID0gdGhpcy5hcnIubGVuZ3RoIDsgaSA+IGluZGV4IDsgLS1pKSB7XG4gICAgICAgICAgICB0aGlzLmFycltpXSA9IHRoaXMuYXJyW2ktMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcnJbaW5kZXhdID0gcG9pbnQ7XG4gICAgICAgIHJldHVybiB0aGlzOyAvLyB0byBlbmFibGUgY2hhaW5pbmcgb2YgYXBwZW5kIC8gcHJlcHBlbmQgLyBhZGRXaXRoSW5kZXggY29tbWFuZHNcbiAgICB9XG5cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcnIubGVuZ3RoO1xuICAgIH1cblxuICAgIGdldEl0ZW0oaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJyW2luZGV4XTtcbiAgICB9XG5cbiAgICBnZXQgbGFzdCgpIHtcbiAgICAgICAgaWYodGhpcy5sZW5ndGghPT0wKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcnJbdGhpcy5sZW5ndGggLSAxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBmaXJzdCgpIHtcbiAgICAgICAgaWYodGhpcy5sZW5ndGghPT0wKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcnJbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBpbmRleEFycmF5IG11c3QgYmUgc29ydGVkIChBU0MsIGVnLiBbMSwgMywgNCwgOF0pXG4gICAgcmVtb3ZlKGluZGV4KSB7XG4gICAgICAgIGxldCBsZW5ndGggPSB0aGlzLmxlbmd0aDtcblxuICAgICAgICBmb3IobGV0IGkgPSBpbmRleCA7IGkgPCBsZW5ndGggOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuYXJyW2ldID0gdGhpcy5hcnJbaSArIDFdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXJyLnBvcCgpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBvbHlsaW5lUG9pbnRzIGV4dGVuZHMgU21hcnRBcnJheSB7XG4gICAgY29uc3RydWN0b3IoYXJyKSB7XG4gICAgICAgIHN1cGVyKGFycik7XG4gICAgfVxuXG4gICAgY29weSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5bGluZVBvaW50cygkLmV4dGVuZCh0cnVlLCBbXSwgdGhpcy5hcnIpKTtcbiAgICB9XG5cbiAgICBhcHBlbmQocG9pbnQpIHtcbiAgICAgICAgLy8gY2FsbCBpbmhlcml0ZWQgZnVuY3Rpb24gdG8gaGFuZGxlIHRoZSBhcHBlbmRpbmdcbiAgICAgICAgc3VwZXIuYXBwZW5kKHBvaW50KTtcblxuICAgICAgICAvLyBpZiB0aGUgc2Vjb25kIHRvIGxhc3QgcG9pbnQgaXMgdW5uZWNlc3NhcnksIHJlbW92ZSBpdFxuICAgICAgICBsZXQgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIGlmICggbGVuZ3RoID49IDNcbiAgICAgICAgICAgICAgICAmJiAoICAgICggdGhpcy5nZXRJdGVtKGxlbmd0aCAtIDMpLnggPT09IHRoaXMuZ2V0SXRlbShsZW5ndGggLSAyKS54ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SXRlbShsZW5ndGggLSAyKS54ID09PSB0aGlzLmdldEl0ZW0obGVuZ3RoIC0gMSkueCApXG4gICAgICAgICAgICAgICAgICAgICB8fCAoIHRoaXMuZ2V0SXRlbShsZW5ndGggLSAzKS55ID09PSB0aGlzLmdldEl0ZW0obGVuZ3RoIC0gMikueSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEl0ZW0obGVuZ3RoIC0gMikueSA9PT0gdGhpcy5nZXRJdGVtKGxlbmd0aCAtIDEpLnkgKVxuICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZShsZW5ndGggLSAyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJldHVybiB0aGlzIGVsZW1lbnQgKHRvIGFsbG93IGNoYWluaW5nKVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cblxuICAgIHN0YXRpYyBwYXJzZUZyb21TdHJpbmcoc3RyaW5nKSB7XG4gICAgICAgIGxldCBwb2ludFN0cmluZ3MgPSBzdHJpbmcuc3BsaXQoXCIgXCIpO1xuICAgICAgICBsZXQgcG9pbnRzID0gbmV3IFBvbHlsaW5lUG9pbnRzKCk7XG5cbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCBwb2ludFN0cmluZ3MubGVuZ3RoIDsgKytpKSB7XG4gICAgICAgICAgICBwb2ludHMuYXBwZW5kKFBvbHlsaW5lUG9pbnQucGFyc2VGcm9tU3RyaW5nKHBvaW50U3RyaW5nc1tpXSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBvaW50cztcbiAgICB9XG5cbiAgICBnZXQgc3RyaW5nKCkge1xuICAgICAgICBsZXQgc3RyaW5nID0gXCJcIjtcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLmxlbmd0aCA7ICsraSkge1xuICAgICAgICAgICAgaWYoaSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHN0cmluZyArPSBcIiBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cmluZyArPSB0aGlzLmFycltpXS5zdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9XG5cbiAgICBmb3JFYWNoKGZ1bmMpIHtcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLmFyci5sZW5ndGggOyArK2kpIHtcbiAgICAgICAgICAgIGZ1bmModGhpcy5hcnJbaV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgUG9seUxpbmUgZXh0ZW5kcyBUYWcge1xuICAgIGNvbnN0cnVjdG9yKHBvaW50cywgY29sb3IsIHN0cm9rZVdpZHRoKSB7XG4gICAgICAgIHN1cGVyKFwicG9seWxpbmVcIik7XG5cbiAgICAgICAgdGhpcy5hZGRBdHRyKHtcbiAgICAgICAgICAgIHBvaW50czogcG9pbnRzLnN0cmluZyxcbiAgICAgICAgICAgIHN0cm9rZTogY29sb3IsXG4gICAgICAgICAgICBmaWxsOiBcIm5vbmVcIixcbiAgICAgICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6IHN0cm9rZVdpZHRoXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHVwZGF0ZVBvaW50cyhwb2ludHMpIHtcbiAgICAgICAgdGhpcy5hZGRBdHRyKHtcbiAgICAgICAgICAgIHBvaW50czogcG9pbnRzLnN0cmluZ1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQYXR0ZXJuIGV4dGVuZHMgVGFnIHtcbiAgICBjb25zdHJ1Y3RvcihpZCwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICBzdXBlcihcInBhdHRlcm5cIik7XG5cbiAgICAgICAgdGhpcy5hZGRBdHRyKHtcbiAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgICBwYXR0ZXJuVW5pdHM6IFwidXNlclNwYWNlT25Vc2VcIixcbiAgICAgICAgICAgIHZpZXdCb3g6IFwiMCAwIFwiK3dpZHRoK1wiIFwiK2hlaWdodFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRDaGlsZChlbCkge1xuICAgICAgICB0aGlzLiRlbC5hcHBlbmQoZWwuJGVsKTtcbiAgICAgICAgcmV0dXJuIGVsOyAvLyBwcm8gamVkbm9kdXNzaSBcImxldCByZWN0ID0gZy5hZGRDaGlsZChuZXcgUmVjdGFuZ2xlKC4uLlwiXG4gICAgfVxufSJdfQ=="}