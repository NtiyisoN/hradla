{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/es6/canvas.js","src/es6/contextMenu.js","src/es6/editorElements.js","src/es6/floatingMenu.js","src/es6/helperFunctions.js","src/es6/id.js","src/es6/logic.js","src/es6/main.js","src/es6/mapWithDefaultValue.js","src/es6/networkLibrary.js","src/es6/simulation.js","src/es6/svgObjects.js","src/es6/tutorial.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","\"use strict\";\n\nimport * as svgObj from './svgObjects.js'\nimport * as editorElements from './editorElements.js'\nimport Logic from './logic.js'\nimport ContextMenu from './contextMenu.js'\nimport FloatingMenu from './floatingMenu.js'\nimport Simulation from './simulation.js'\nimport { addMouseScrollEventListener } from './helperFunctions.js'\nimport Tutorial from './tutorial.js';\n\n/**\n * ViewBox provides an api for oprerating with the viewBox argument of the <svg> DOM element.\n */\nclass ViewBox {\n    /**\n     * Initialize viewBox\n     * @param {number} left   distance of the left edge of the viewbox from document's y axis in SVG pixels\n     * @param {number} top    distance of the top edge of the viewbox from the document's x axis in SVG pixels\n     * @param {number} width  width of the viewbox in SVG pixels\n     * @param {number} height height of the viewbox in SVG pixels\n     */\n    constructor(left, top, width, height) {\n        /**\n         * ViewBox attributes before applying zoom and shift\n         * @type {object}\n         */\n        this.real = { left, top, width, height }\n\n        /**\n         * The maximum amount of zoom on the viewbox\n         * @type {number}\n         */\n        this.maxZoom = 8;\n        /**\n         * The minimum amount of zoom on the viewbox\n         * @type {number}\n         */\n        this.minZoom = 0.1;\n\n        /**\n         * Amount of zoom on the viewbox, always between this.minZoom and this.maxZoom\n         * @type {number}\n         */\n        this.realZoom = 1\n\n        /**\n         * amount of horizontal shift of the document\n         * @type {number}\n         */\n        this.leftShift = 0\n        /**\n         * amount of vertical shift of the document\n         * @type {number}\n         */\n        this.topShift = 0\n    }\n\n    /**\n     * get the amount of zoom on the viewbox\n     * @return {number}\n     */\n    get zoom() {\n        return this.realZoom;\n    }\n\n    /**\n     * set the amount of zoom on the viewbox\n     * @param {number} value the new amount of zoom\n     */\n    set zoom(value) {\n        // fit this.realZoom to fit between this.minZoom and this.maxZoom\n        this.realZoom = Math.max(Math.min(value, this.maxZoom), this.minZoom);\n    }\n\n    /**\n     * get the width of the viewbox with the current zoom applied\n     * @return {number} the final width of the viewbox\n     */\n    get width() {\n        return this.real.width / this.zoom\n    }\n\n    /**\n     * get the height of the viewbox with the current zoom applied\n     * @return {number} the final height of the viewbox\n     */\n    get height() {\n        return this.real.height / this.zoom\n    }\n\n    /**\n     * get the horizontal distance from the y axis of the document with zoom and shift value applied\n     * @return {number}\n     */\n    get left() {\n        return this.real.left - (this.leftShift / this.zoom) + ((this.real.width - this.width) / 2)\n    }\n\n    /**\n     * get the vertical distance from the x axis of the document with zoom and shift value applied\n     * @return {number}\n     */\n    get top() {\n        return this.real.top - (this.topShift / this.zoom) + ((this.real.height - this.height) / 2)\n    }\n\n    /**\n     * get the computed viewbox values as a string in the correct format that can be used in the viewBox attribute of the SVG element\n     * @return {string} string in format \"left top width height\"\n     */\n    get str() {\n        return `${this.left} ${this.top} ${this.width} ${this.height}`\n    }\n\n    /**\n     * transform horizontal units to the scale and shift of the editor\n     * @param  {number} x original horizontal value\n     * @return {number}   transformed horizontal value\n     */\n    transformX(x) {\n        return this.left + (x / this.zoom)\n    }\n\n    /**\n     * transform vertical units to the scale and shift of the editor\n     * @param  {number} y original vertical value\n     * @return {number}   transformed vertical value\n     */\n    transformY(y) {\n        return this.top + (y / this.zoom)\n    }\n\n    /**\n     * transform pageX and pageY parameters of the jquery event to match the zoom and shift of the viewbox\n     * @param  {jquery.MouseEvent} event original event\n     * @return {jquery.MouseEvent}       the same event but with transformed pageX and pageY members\n     */\n    transformEvent(event) {\n        event.pageX = this.transformX(event.pageX)\n        event.pageY = this.transformY(event.pageY)\n\n        return event\n    }\n}\n\nconst\n    ctrlKey = 17,\n    cmdKey = 91;\n\n/** @module Canvas */\n/**\n * Main class of the application. It represents an instance of the whole editor and holds\n * references to all its elements.\n */\nexport default class Canvas {\n    /**\n     * Initialize the Svg class\n     * @param {string} canvas   query selector of the SVG element, that will contain all SVG content of the application\n     * @param {number} gridSize initial size of the grid in SVG pixels\n     */\n    constructor(canvas, gridSize) {\n        /**\n         * jQuery element for the SVG document\n         */\n        this.$svg = $(canvas);\n\n        /**\n         * space between grid lines in SVG pixels\n         * @type {number}\n         */\n        this.gridSize = gridSize;\n\n        /**\n         * Array of all boxes (instances of objects derived from editorElements.Box) used on Canvas\n         * @type {Array}\n         */\n        this.boxes = []; // stores all boxes\n\n        /**\n         * Array of all wires (instances of editorElements.Wire) used on Canvas\n         * @type {Array}\n         */\n        this.wires = []; // stores all wires\n\n        this.simulationEnabled = true\n        this.simulation = new Simulation(this); // dummy, will be overwritten on startNewSimulation\n\n        /**\n         * distance from the left top corner to the first element in the imported network\n         * and distance from the left top corner to the imported black box _in grid pixels_\n         * @type {number}\n         */\n        this.leftTopPadding = 4;\n\n        // create the defs element, used for patterns\n        this.$defs = $(\"<defs>\");\n        this.$svg.prepend(this.$defs);\n\n        // BACKGROUND PATTERN\n        let pattern = new svgObj.Pattern(\"grid\", this.gridSize, this.gridSize);\n\n        let patternPoints = new svgObj.PolylinePoints()\n            .append(new svgObj.PolylinePoint(0, 0))\n            .append(new svgObj.PolylinePoint(this.gridSize, 0))\n            .append(new svgObj.PolylinePoint(this.gridSize, this.gridSize));\n\n        pattern.addChild(new svgObj.PolyLine(patternPoints, \"#a3a4d2\", 2));\n        this.addPattern(pattern.get());\n\n        this.background = new svgObj.Rectangle(0, 0, this.width, this.height, \"url(#grid)\", \"none\");\n        this.appendJQueryObject(this.background.get());\n        this.refresh();\n\n        // set the viewbox for future zooming and moving of the canvas\n        this.$svg.attr('preserveAspectRatio', 'xMinYMin slice')\n        this.viewbox = new ViewBox(0, 0, this.width, this.height)\n        this.applyViewbox()\n\n        // CONSTRUCT CONTEXT MENU\n        this.contextMenu = new ContextMenu(this);\n\n        // CONSTRUCT FLOATING MENU\n        this.floatingMenu = new FloatingMenu(this);\n\n        // ALL EVENT CALLBACKS\n        let target;\n        this.$svg.on('mousedown', event => {\n            target = this.getRealTarget(event.target);\n            if(target!==undefined) {\n                // propagate mousedown to the real target\n                target.onMouseDown(event);\n            } else {\n                // mousedown happened directly on the svg\n                this.onMouseDown(event)\n            }\n\n            this.hideContextMenu();\n            event.preventDefault();\n        }).on('mousemove', event => {\n            if(target!==undefined) {\n                target.onMouseMove(event);\n            } else {\n                // mousemove happened directly on the svg\n                this.onMouseMove(event)\n            }\n\n            event.preventDefault();\n        }).on('mouseup', (event) => {\n            if(target!==undefined) {\n                target.onMouseUp(event);\n            } else {\n                // mouseup happened directly on the svg\n                this.onMouseUp(event)\n            }\n\n            target = undefined;\n\n            event.preventDefault();\n        }).on(\"contextmenu\", event => {\n            this.displayContextMenu(event.pageX, event.pageY, this.getRealJQueryTarget(event.target));\n            event.preventDefault();\n        })\n\n        $(document).on('keydown', event => {\n            this.onKeyDown(event);\n        }).on(\"keyup\", event => {\n            this.onKeyUp(event);\n        });\n\n        addMouseScrollEventListener(canvas, event => {\n            // zoom only if the ctrl key is pressed\n            if(event.ctrlKey) {\n                switch (event.delta) {\n                    case 1:\n                        this.zoom += 0.1\n                        break\n                    case -1:\n                        this.zoom -= 0.1\n                        break\n                }\n            }\n\n            event.preventDefault()\n        })\n\n        // check if the user visits for the first time\n        try {\n            if(!localStorage.userHasVisited) {\n                this.tutorial = new Tutorial(this, () => {\n                    // set userHasVisited to true when user closes (or finishes) the tutorial\n                    localStorage.userHasVisited = true;\n                });\n                this.tutorial.start();\n            }\n        } catch (e) {\n            console.warn(e);\n        }\n    }\n\n    /**\n     * Get the width of the main SVG element\n     * @return {number} width of the SVG element in pixels\n     */\n    get width() {\n        return this.$svg.width()\n    }\n\n    /**\n     * Get the height of the main SVG element\n     * @return {number} height of the SVG element in pixels\n     */\n    get height() {\n        return this.$svg.height()\n    }\n\n    /**\n     * Process all keydown events that are connected to Canvas\n     * @param  {jquery.KeyboardEvent} event KeyboardEvent generated by a listener\n     */\n    onKeyDown(event) {\n        if(event.keyCode === ctrlKey || event.keyCode === cmdKey) {\n            this.$svg.addClass('grabbable');\n        }\n    }\n\n    /**\n     * Process all keyup events that are connected to Canvas\n     * @param  {jquery.KeyboardEvent} event KeyboardEvent generated by a listener\n     */\n    onKeyUp(event) {\n        if(event.keyCode === ctrlKey || event.keyCode === cmdKey) {\n            this.$svg.removeClass('grabbable');\n        }\n    }\n\n    /**\n     * Process all mousedown events that are happening directly on the Canvas\n     * @param  {jquery.MouseEvent} event MouseEvent generated by a listener\n     */\n    onMouseDown(event) {\n        // middle mouse or left mouse + ctrl moves the canvas\n        if(event.which === 2 || (event.which === 1 && event.ctrlKey)) {\n            this.$svg.addClass('grabbed');\n            this.moveCanvas = {\n                left: event.pageX,\n                top: event.pageY\n            }\n        }\n    }\n\n    /**\n     * Process all mousemove events that are happening directly on the Canvas\n     * @param  {jquery.MouseEvent} event MouseEvent generated by a listener\n     */\n    onMouseMove(event) {\n        if(this.moveCanvas) {\n            let left = event.pageX - this.moveCanvas.left\n            let top = event.pageY - this.moveCanvas.top\n\n            this.viewbox.leftShift += left\n            this.viewbox.topShift += top\n            this.applyViewbox()\n\n            this.moveCanvas = {\n                left: event.pageX,\n                top: event.pageY\n            }\n        }\n    }\n\n    /**\n     * Process all mouseup events that are happening directly on the Canvas\n     */\n    onMouseUp() {\n        if(this.moveCanvas) {\n            this.$svg.removeClass('grabbed');\n            this.moveCanvas = undefined\n\n            // if tutorial exists, call tutorial callback\n            if(this.tutorial) {\n                this.tutorial.onCanvasMoved();\n            }\n        }\n    }\n\n    /**\n     * Set the viewBox attribute of the SVG element and size and position attributes\n     * of the rectangle with the background grid to match the values in this.viewbox\n     */\n    applyViewbox() {\n        // adjust background\n        this.background.addAttr({\n            x: this.viewbox.left,\n            y: this.viewbox.top,\n            width: this.viewbox.width,\n            height: this.viewbox.height\n        })\n\n        // set the viewBox attribute\n        this.$svg.attr('viewBox', this.viewbox.str)\n    }\n\n    /**\n     * Get the current zoom multiplier of the canvas\n     * @return {number}\n     */\n    get zoom() {\n        return this.viewbox.zoom\n    }\n\n    /**\n     * Set the zoom multiplier of the canvas.\n     * I sets the viewbox zoom and then applies the new value by calling this.applyViewbox()\n     * @param  {number} value set the zoom to this value\n     */\n    set zoom(value) {\n        this.viewbox.zoom = value\n        this.applyViewbox()\n\n        // if tutorial exists, call tutorial callback\n        if(this.tutorial) {\n            this.tutorial.onCanvasZoomed();\n        }\n    }\n\n    /**\n     * Generate an object containing export data for the Canvas and all elements.\n     * Data from this function should cover all important information needed to import the\n     * network in a different session.\n     * @return {object} object containing infomration about the network\n     */\n    get exportData() {\n        this.exportWireIdMap = new Map();\n        this.exportWireId = 0;\n\n        let data = {\n            boxes: []\n        };\n\n        for (const box of this.boxes) {\n            data.boxes.push(box.exportData)\n        }\n\n        return data;\n    }\n\n    /**\n     * Recreate a logic network from the data provided\n     * @param  {object} data object containing information about the imported network\n     * @param  {number} [x]  horizontal position of the left top corner of the network in grid pixels\n     * @param  {number} [y]  vertical position of the left top corner of the network in grid pixels\n     */\n    importData(data, x, y) {\n        return new Promise((resolve, reject) => {\n            // if the x or y is undefined, set it to leftTopPadding instead\n            // (cannot use x || leftTopPadding because of 0)\n\n            x = x!==undefined ? x : this.leftTopPadding\n            y = y!==undefined ? y : this.leftTopPadding\n\n            this.simulationEnabled = false\n\n            // list of wires to be added\n            let newWires = new Map();\n\n            // find the leftmost and topmost coordinate of any box, save them to leftTopCorner\n            let leftTopCorner;\n\n            for (const boxData of data.boxes) {\n                for(const transformInfo of boxData.transform.items) {\n                    if(transformInfo.name === \"translate\") {\n                        if(leftTopCorner) {\n                            leftTopCorner = {\n                                x: Math.min(leftTopCorner.x, transformInfo.args[0]),\n                                y: Math.min(leftTopCorner.y, transformInfo.args[1])\n                            }\n                        } else {\n                            leftTopCorner = {\n                                x: transformInfo.args[0],\n                                y: transformInfo.args[1]\n                            }\n                        }\n                    }\n                }\n            }\n\n            for(let boxData of data.boxes) {\n                // add box\n                let box;\n                switch (boxData.category) {\n                    case \"gate\":\n                        // add new gate (without reloading the SVG, we will reload it once after the import)\n                        box = this.newGate(boxData.name, 0, 0, false);\n                        break;\n                    case \"io\":\n                        switch (boxData.name) {\n                            case \"input\":\n                                // add new input (without reloading the SVG, we will reload it once after the import)\n                                box = this.newInput(0, 0, boxData.isOn, false);\n                                break;\n                            case \"output\":\n                                // add new output (without reloading the SVG, we will reload it once after the import)\n                                box = this.newOutput(0, 0, false);\n                                break;\n                            default:\n                                reject(\"Unknown io box name '\"+boxData.name+\"'.\");\n                                break;\n                        }\n                        break;\n                    case \"blackbox\":\n                        box = this.newBlackbox(boxData.inputs, boxData.outputs, boxData.table, boxData.name, 0, 0, false)\n                        break;\n                    default:\n                        reject(\"Unknown box category '\"+boxData.category+\"'.\");\n                }\n\n                if (box) {\n                    // proccess box transforms (translation and rotation)\n                    let transform = new editorElements.Transform();\n\n                    for(let j = 0 ; j < boxData.transform.items.length ; ++j) {\n                        switch (boxData.transform.items[j].name) {\n                            case \"translate\":\n                                transform.setTranslate(\n                                    boxData.transform.items[j].args[0]\n                                        - leftTopCorner.x // make it the relative distance from the leftmost element\n                                        + x // apply the position\n                                        ,\n\n                                    boxData.transform.items[j].args[1]\n                                        - leftTopCorner.y // make it the relative distance from the topmost element\n                                        + y // apply the position\n                                );\n                                break;\n                            case \"rotate\":\n                                transform.setRotate(\n                                    boxData.transform.items[j].args[0],\n                                    boxData.transform.items[j].args[1],\n                                    boxData.transform.items[j].args[2]\n                                );\n                                break;\n                            default:\n                                reject(\"Unknown transform property '\"+boxData.transform.items[j].name+\"'.\");\n                                break;\n                        }\n                    }\n\n                    transform.toSVGPixels(this);\n                    box.setTransform(transform);\n\n                    // add all wires to the list of wires to be added\n                    for(let j = 0 ; j < boxData.connections.length ; ++j) {\n                        // get the artificial wire id\n                        let wireId = boxData.connections[j].wireId;\n\n                        // pass the values got from json into a variable that will be added into the map\n                        let value = {\n                            index: boxData.connections[j].index,\n                            type: boxData.connections[j].type,\n                            boxId: box.id\n                        };\n\n                        // add the value to the map\n                        if(newWires.has(wireId)) {\n                            // if there already is a wire with this id in the map,\n                            // add the value to the end of the array of values\n                            let mapValue = newWires.get(wireId);\n                            mapValue[mapValue.length] = value;\n                            newWires.set(wireId, mapValue);\n                        } else {\n                            // if there is no wire with this id in the map\n                            // add the wire and set the value to be the first element in the array\n                            newWires.set(wireId, [value]);\n                        }\n                    }\n                }\n            }\n\n            // refresh the SVG document (needed for wiring)\n            this.refresh();\n\n            // with all boxes added, we can now connect them with wires\n            newWires.forEach(item => {\n                let connectorIds = [];\n                if(item[0] && item[1]) {\n                    for (const i of [0, 1]) {\n                        let box = this.getBoxById(item[i].boxId);\n\n                        connectorIds[i] = box.connectors[item[i].index].id;\n                    }\n                }\n                this.newWire(connectorIds[0], connectorIds[1], true);\n            });\n\n            // refresh the SVG document\n            this.refresh();\n\n            this.simulationEnabled = true;\n            for (let box of this.boxes) {\n                if (box instanceof editorElements.InputBox) {\n                    // switch the input box state to the oposit and back, for some reason calling box.refreshState()\n                    // results in weird unfinished simulation\n                    // this causes update of the output connector and a start of a new simulation\n\n                    // TODO find better solution instead of this workaround\n                    box.on = !box.on\n                    box.on = !box.on\n                }\n            }\n\n            resolve()\n        })\n    }\n\n    /**\n     * When user clicks on a connector, remember it until they click on some other connector.\n     * Than call newWire with the last two connectors ids as arguments.\n     * @param  {string} connectorId id of the connector that the user clicked on\n     */\n    wireCreationHelper(connectorId) {\n        if(!this.firstConnectorId) {\n            this.firstConnectorId = connectorId;\n        } else {\n            this.newWire(this.firstConnectorId, connectorId);\n            this.firstConnectorId = undefined;\n        }\n    }\n\n    /**\n     * Run a logic simulation from the startingConnector.\n     * This refreshes the states of all elements in the network whose inputs are\n     * directly (or by transition) connected to startingConnector's output\n     * @param  {OutputConnector} startingConnector run simulation from this output connector\n     * @param  {Logic.state} state new state of the startingConnector\n     */\n    startNewSimulation(startingConnector, state) {\n        if(this.simulationEnabled) {\n            this.simulation = new Simulation(this)\n            this.simulation.notifyChange(startingConnector.id, state)\n            this.simulation.run()\n        }\n    }\n\n    /**\n     * Create a new gate on the specified position\n     * @param  {string}  name           type of the gate (and, or ...)\n     * @param  {number}  x              horizontal position of the gate in SVG pixels\n     * @param  {number}  y              vertical position of the gate in SVG pixels\n     * @param  {boolean} [refresh=true] if true, this.refresh() will be called after adding the gate\n     * @return {editorElements.Gate}    instance of Gate that has been newly added\n     */\n    newGate(name, x, y, refresh = true) {\n        return this.newBox(x, y, new editorElements.Gate(this, name, x, y), refresh);\n    }\n\n    /**\n     * Create an input box on the specified position\n     * @param  {number}  x              horizontal position of the gate in SVG pixels\n     * @param  {number}  y              vertical position of the gate in SVG pixels\n     * @param  {boolean} [isOn=false]   state of the input box (default is false (off))\n     * @param  {boolean} [refresh=true] if true, this.refresh() will be called after adding the input box\n     * @return {editorElements.InputBox}    instance of the InputBox that has been newly added\n     */\n    newInput(x, y, isOn = false, refresh = true) {\n        return this.newBox(x, y, new editorElements.InputBox(this, isOn), refresh);\n    }\n\n    /**\n     * Create an output box on the specified position\n     * @param  {number}  x              horizontal position of the gate in SVG pixels\n     * @param  {number}  y              vertical position of the gate in SVG pixels\n     * @param  {boolean} [refresh=true] if true, this.refresh() will be called after adding the output box\n     * @return {editorElements.InputBox}    instance of the OutputBox that has been newly added\n     */\n    newOutput(x, y, refresh = true) {\n        return this.newBox(x, y, new editorElements.OutputBox(this), refresh);\n    }\n\n    /**\n     * Add a new Box to the Canvas\n     * @param  {number}  x              horizontal position of the box in SVG pixels\n     * @param  {number}  y              vertical position of the box in SVG pixels\n     * @param  {editorElements.Box}  object         instance of an object derived from the editorElements.Box class\n     * @param  {Boolean} [refresh=true] if true, this.refresh() will be called after adding the box\n     * @return {editorElements.Box}                 return the instance of the newly added object\n     */\n    newBox(x, y, object, refresh = true) {\n        let index = this.boxes.length;\n\n        this.boxes[index] = object;\n\n        // translate the gate if x and y has been specified\n        if(x && y) {\n            let tr = new editorElements.Transform();\n            tr.setTranslate(x, y);\n\n            this.boxes[index].svgObj.addAttr({\"transform\": tr.get()});\n        }\n\n        this.appendElement(this.boxes[index], refresh);\n\n        // if tutorial exists, call tutorial callback\n        if(this.tutorial) {\n            this.tutorial.onElementAdded(this.boxes[index].name);\n        }\n\n        return this.boxes[index];\n    }\n\n    /**\n     * Remove a box from Canvas based on the provided ID\n     * @param {string} boxId id of the box that should be removed\n     */\n    removeBox(boxId) {\n        let $gate = $(\"#\"+boxId);\n\n        // find the gate in svg's list of gates\n        let gateIndex = -1;\n        for(let i = 0 ; i < this.boxes.length ; i++) {\n            if(this.boxes[i].svgObj.id===boxId) {\n                gateIndex = i;\n                break;\n            }\n        }\n\n        if(gateIndex > -1) {\n            // remove all wires connected to this gate\n            for(let i = 0; i < this.boxes[gateIndex].connectors.length; i++) {\n                this.removeWiresByConnectorId(this.boxes[gateIndex].connectors[i].svgObj.id);\n            }\n\n            // remove the gate\n            this.boxes.splice(gateIndex, 1);\n            $gate.remove();\n\n            // if tutorial exists, call tutorial callback\n            if(this.tutorial) {\n                this.tutorial.onElementRemoved();\n            }\n        } else {\n            console.error(\"Trying to remove an nonexisting box. Box id:\", boxId);\n        }\n    }\n\n    /**\n     * Remove all boxes from the canvas\n     * TODO fix: not all boxes are removed\n     */\n    cleanCanvas() {\n        for (let box of this.boxes) {\n            this.removeBox(box.id);\n        }\n    }\n\n    /**\n     * Create a new wire connecting the provided connectors\n     * @param  {string}  fromId         id of the connector that the wire is attached to\n     * @param  {string}  toId           id of the connector that the wire is attached to\n     * @param  {Boolean} [refresh=true] if refresh is set to true, the SVG document will be reloaded after adding the wire\n     * @return {editorElements.Wire}    instance of editorElements.Wire that has been added to the Canvas\n     */\n    newWire(fromId, toId, refresh = true) {\n        // wire must connect two distinct connectors\n        if (fromId===toId)\n            return false\n\n        let connectors = [this.getConnectorById(fromId), this.getConnectorById(toId)]\n\n        // input connectors can be connected to one wire max\n        connectors.forEach(conn => {\n            if(conn.isInputConnector)\n                this.removeWiresByConnectorId(conn.id)\n        })\n        let index = this.wires.length;\n        this.wires[index] = new editorElements.Wire(this, fromId, toId, this.gridSize, refresh);\n\n        connectors.forEach(conn => {\n            conn.addWireId(this.wires[index].svgObj.id);\n        })\n\n        this.appendElement(this.wires[index], refresh);\n        this.moveToBackById(this.wires[index].svgObj.id);\n\n        if(refresh)\n            this.wires[index].updateWireState()\n\n        return this.wires[index];\n    }\n\n    /**\n     * creates a new blackbox\n     * @param  {number} x       horizontal position of the blackbox in SVG pixels\n     * @param  {number} y       vertical position of the gate in SVG pixels\n     * @param  {number} inputs  number of input pins of this blackbox\n     * @param  {number} outputs number of output pins of this blackbox\n     * @param  {Array} table   Array of arrays, each inner array contains list of [Logic.state](./module-Logic.html#.state)s,\n     *                          that describe the combination of input pin and output pin states in the order from the top to bottom for both input and output connectors.\n     *                          If we had an AND array as a blackbox, one of the states could be `[Logic.state.on, Logic.state.off, Logic.state.off]`\n     *                          which means that if the first input connector is in the `on` state and the second connector is in the `off` state,\n     *                          the state of the output connector will be `off`.\n     *                          The array can be described as `[state for input conn 1, state for input conn 2, ..., state for output conn 1, state for output conn 2 ...]`.\n     * @param  {string}  name   a name that will be displayed on the blackbox\n     * @param  {boolean} [refresh=true] if true, this.refresh() will be called after adding the gate\n     *\n     * @return {editorElements.Blackbox} instance of {@link Blackbox} that has been added to the [Canvas](./module-Canvas.html)\n     */\n    newBlackbox(inputs, outputs, table, name, x, y, refresh=true) {\n        const index = this.boxes.length;\n\n        this.boxes[index] = new editorElements.Blackbox(\n            this,\n            inputs,\n            outputs,\n            (...inputStates) => {\n                for (const line of table) {\n                    const lineInputStates = line.slice(0, inputs);\n\n                    // if every input state matches the corresponding input state in this line of the truth table\n                    if(inputStates.every((value, index) => value === lineInputStates[index])) {\n                        // return the rest of the line as output\n                        return line.slice(inputs);\n                    }\n                }\n                // if nothing matches, set all outputs to undefined\n                return Array.from(new Array(outputs), () => Logic.state.unknown)\n            },\n            name\n        );\n\n        if(x && y) {\n            let tr = new editorElements.Transform();\n            tr.setTranslate(x, y);\n\n            this.boxes[index].svgObj.addAttr({\"transform\": tr.get()});\n        }\n\n        this.appendElement(this.boxes[index], refresh);\n\n        return this.boxes[index];\n    }\n\n    /**\n     * Find the correct instance of editorElements.Wire in the Canvas' wires by the provided id\n     * @param  {string} wireId id of the wire\n     * @return {editorElements.Wire} instance of the wire\n     */\n    getWireById(wireId) {\n        for (const wire of this.wires) {\n            if(wire.svgObj.id === wireId) {\n                return wire\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Find all wires that are connected to the specified connector\n     * @param  {string} connectorId id of the connector\n     * @return {Set} set of ID's of the wires connected to this connector\n     */\n    getWiresByConnectorId(connectorId) {\n        let connector = this.getConnectorById(connectorId);\n        return connector.wireIds;\n    }\n\n    /**\n     * Remove wire that has the provided ID\n     * @param  {string} wireId ID of the wire that should be removed\n     */\n    removeWireById(wireId) {\n        for(let i = 0 ; i < this.wires.length ; ++i) {\n            if (this.wires[i].svgObj.id === wireId) {\n\n                let connector1 = this.wires[i].startConnector;\n                let connector2 = this.wires[i].endConnector;\n\n                connector1.removeWireIdAndUpdate(wireId);\n                connector2.removeWireIdAndUpdate(wireId);\n\n                this.wires[i].svgObj.$el.remove();\n                this.wires.splice(i, 1);\n\n                break;\n            }\n        }\n    }\n\n    /**\n     * Remove all wires that are connected to the connector provided by its ID\n     * @param  {string} connectorId ID of the connector\n     */\n    removeWiresByConnectorId(connectorId) {\n        let connector = this.getConnectorById(connectorId);\n\n        connector.wireIds.forEach(wireId => {\n            let wire = this.getWireById(wireId);\n\n            // get the other connector that is the wire connected to\n            let otherConnector = this.getConnectorById(wire.fromId, wire);\n            if(otherConnector.svgObj.id===connectorId) {\n                otherConnector = this.getConnectorById(wire.toId, wire);\n            }\n\n            // delete the wire record from the other connector\n            otherConnector.wireIds.delete(wireId);\n\n            // remove the wire representation using jQuery\n            $(\"#\" + wireId).remove();\n\n            // if otherConnector is an input connector, set its state to unknown\n            if(otherConnector.isInputConnector) {\n                this.startNewSimulation(otherConnector, Logic.state.unknown)\n            }\n        });\n\n        // clear the list of wire Ids\n        connector.wireIds.clear();\n        // if connector is an input connector, set its state to unknown\n        if(connector.isInputConnector) {\n            connector.setState(Logic.state.unknown);\n        }\n    }\n\n    /**\n     * Find the correct instance of editorElements.Box in the Canvas' boxes by the provided id\n     * @param  {string} boxId id of the box\n     * @return {editorElements.Box} instance of the box\n     */\n    getBoxById(boxId) {\n        for(let i = 0 ; i < this.boxes.length ; i++) {\n            if(this.boxes[i].svgObj.id===boxId) {\n                return this.boxes[i];\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Find the correct instance of editorElements.Box in the Canvas' boxes by ID of a connector that belongs to this box\n     * @param  {string} boxId id of the connector\n     * @return {editorElements.Box} instance of the box\n     */\n    getBoxByConnectorId(connectorId) {\n        for(let i = 0 ; i < this.boxes.length ; i++) {\n            if (this.boxes[i].getConnectorById(connectorId) !== undefined) {\n                return this.boxes[i];\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Get instance of a connector based on it's ID (and also on an instance of editorElements.Wire if provided)\n     *\n     * The wire variable is used as heuristic: When we know the wire, we have to check only\n     * two gates instead of all of them\n     * @param  {string} connectorId id of the connector\n     * @param  {editorElements.Wire} [wire]      instance of the Wire that is connected to this connector\n     * @return {editorElements.Connector}        instance of the connector\n     */\n    getConnectorById(connectorId, wire=undefined) {\n\n        if(wire!==undefined) {\n            // we know the wire -- we can check only gates at the ends of this wire\n            let connector = wire.startBox.getConnectorById(connectorId)\n            if (!connector) {\n                connector = wire.endBox.getConnectorById(connectorId)\n            }\n            return connector\n\n        } else {\n            // we do not know the wire -- we have to check all gates\n            for (const box of this.boxes) {\n                const connector = box.getConnectorById(connectorId)\n                if(connector) {\n                    return connector\n                }\n            }\n        }\n\n        return false\n    }\n\n    /**\n     * Get the logical jQuery target based on the factual jQuery target.\n     *\n     * If the object, that user interacted with, is not a connector and is in a group,\n     * return the group jQuery object instead of the original jQuery object.\n     * @param  {target} target jQuery target of the object user interacted with\n     * @return {target}        jQuery target of the object user wanted to interact with\n     */\n    getRealJQueryTarget(target) {\n        let $target = $(target);\n        if(!$target.hasClass(\"connector\") && $target.parents('g').length > 0) {\n            $target = $target.parent();\n            while ($target.prop(\"tagName\") !== \"G\" && $target.prop(\"tagName\") !== \"g\") {\n                $target = $target.parent();\n            }\n        }\n        return $target;\n    }\n\n    // returns the editorElement that user interacted with, the \"target\" argument is a jQuery element\n    /**\n     * Get instance of some object from editorElement based on the jQuery target\n     * @param  {target} target jQuery target that user interacted with\n     * @return {editorElements.NetworkElement} instance of an object derived from editorElements.NetworkElement that the user interacted with\n     */\n    getRealTarget(target) {\n        // eventy se museji zpracovat tady, protoze v SVG se eventy nepropaguji\n        let $target = $(target);\n\n        if($target.hasClass(\"connector\")) {\n            // this is a connector, don't traverse groups\n            return this.getConnectorById($target.attr('id'));\n        } else if($target.parents('g').length > 0) {\n            // this element is in a group and it is not a connector\n\n            // traversing up the DOM tree until we find the closest group\n            let $parentGroup = $target.parent();\n            while ($parentGroup.prop(\"tagName\") !== \"G\" && $parentGroup.prop(\"tagName\") !== \"g\") {\n                $parentGroup = $parentGroup.parent();\n            }\n\n            return this.getBoxById($parentGroup.attr('id'));\n        } else if ($target.hasClass(\"wire\")) {\n            return this.getWireById($target.attr('id'));\n        } else {\n            return undefined;\n        }\n    }\n\n    /**\n     * Add an element to the Canvas\n     * @param  {editorElements.NetworkElement}  element Element that will be added on the Canvas\n     * @param  {Boolean} [refresh=true] if true, the SVG document will be reloaded after adding this element\n     */\n    appendElement(element, refresh = true) {\n        this.appendJQueryObject(element.get(), refresh);\n    }\n\n    /**\n     * Append a jQuery element to the SVG document (helper for this.appendElement)\n     * @param  {object}  object         jQuery element that will be added to the SVG document\n     * @param  {Boolean} [refresh=true] if true, the SVG document will be reloaded after adding this element\n     */\n    appendJQueryObject(object, refresh = true) {\n        this.$svg.append(object);\n        if(refresh)\n            this.refresh();\n    }\n\n    /**\n     * Add a new pattern to the definitions element in the SVG document\n     * @param {svgObj.Pattern} pattern pattern that will be added to the <devs> element in the SVG document\n     */\n    addPattern(pattern) {\n        this.$defs.append(pattern);\n        this.refresh();\n    }\n\n    /**\n     * Reload the SVG document (needed to display a newly appended jQuery object)\n     */\n    refresh() {\n        this.$svg.html(this.$svg.html());\n        console.log(\"SVG document has been reloaded.\")\n    }\n\n    /**\n     * Display the context menu on the specified position\n     * @param  {number} x       horizontal position in CSS pixels\n     * @param  {number} y       vertical position in CSS pixels\n     * @param  {jQuery.element} $target the item user clicked on (used to display \"remove this element\"-type items in the menu)\n     */\n    displayContextMenu(x, y, $target) {\n        this.contextMenu.display(x, y, $target);\n\n        // if tutorial exists, call tutorial callback\n        if(this.tutorial) {\n            this.tutorial.onContextMenuOpened();\n        }\n    }\n\n    /**\n     * hide the context menu\n     */\n    hideContextMenu() {\n        this.contextMenu.hide();\n    }\n\n    /**\n     * snap a value to a grid\n     * @param  {number} value value in SVG pixels\n     * @return {number}       the value rounded to the closest number divisible by the grid size\n     */\n    snapToGrid(value) {\n        return Math.round(value / this.gridSize) * this.gridSize;\n    }\n\n    /**\n     * convert grid pixels to SVG pixels\n     * @param  {number} value distance in grid pixels\n     * @return {number}       distance in SVG pixels\n     */\n    gridToSVG(value) {\n        return value * this.gridSize;\n    }\n\n    /**\n     * convert SVG pixels to grid pixels\n     * @param {number} value distance in SVG pixels\n     * @return {number}      distance in grud pixels\n     */\n    SVGToGrid(value) {\n        return value / this.gridSize;\n    }\n\n    /**\n     * static function for snapping a value to a grid\n     * @param  {number} value value in SVG pixels\n     * @param  {number} gridSize size of the grid in SVG pixels\n     * @return {number}       the value rounded to the closest number divisible by the grid size\n     */\n    static snapToGrid(value, gridSize) {\n        return Math.round(value / gridSize) * gridSize;\n    }\n\n    /**\n     * move an element to the front in the canvas\n     * @param  {string} objId id of the element\n     */\n    moveToFrontById(objId) {\n        this.$svg.append($(\"#\" + objId));\n    }\n\n    /**\n     * move an element to the back in the canvas\n     * @param  {string} objId id of the element\n     */\n    moveToBackById(objId) {\n        $(\"#\" + this.background.id)\n            .after($(\"#\" + objId));\n    }\n\n    /**\n     * get set of nodes, that cannot be used for wiring at any circumstances\n     * @return {Set} set of nodes (objects containing x and y coordinates) that are not suitable for wiring\n     */\n    getNonRoutableNodes() {\n        let blockedNodes = new Set();\n        // for each box\n        for(let i = 0 ; i < this.boxes.length ; ++i) {\n            // get the jQuery child with class .rect (\"hitbox\")\n            let rect = $('#' + this.boxes[i].svgObj.id).children(\".rect\")[0];\n            // get the position of the rectangle\n            let position = $(rect).position();\n\n            // snap the position to the grid\n            position.left = this.snapToGrid(position.left);\n            position.top = this.snapToGrid(position.top);\n\n            // for each item in blockedNodes (set of blocked nodes with coordinates relative\n            // to the left upper corner of rect; unit used is \"one gridSize\") convert the coordinates\n            // to absolute (multiple with gridSize and add position of rect) and add the result to the set\n            for(let item of this.boxes[i].blockedNodes) {\n                let absoluteX = position.left + item.x * this.gridSize;\n                let absoluteY = position.top + item.y * this.gridSize;\n\n                blockedNodes.add({\n                    x: absoluteX,\n                    y: absoluteY\n                });\n            }\n        }\n        // TODO ensure that this.refresh() is really unnecessary\n        // this.refresh();\n        // return the set\n        return blockedNodes;\n    }\n\n    /**\n     * get set of nodes, that are inconvenient for wiring, but can be used, just are not preferred\n     * @return {Set} set of nodes (objects containing x and y coordinates) that are not preferred for wiring\n     */\n    getInconvenientNodes(ignoreWireId) {\n\n        let inconvenientNodes = new Set();\n        // for each wire\n        for(let i = 0 ; i < this.wires.length ; ++i) {\n            // (ignore the wire that is specified in the ignoreWireId argument (if any))\n            if(ignoreWireId===undefined || ignoreWireId!==this.wires[i].svgObj.id) {\n                // cycle through points, for each neigbours add all points that are in between them\n                // i.e.: (0,0) and (0,30) are blocking these nodes: (0,0), (0,10), (0,20), (0,30)\n                let prevPoint;\n                this.wires[i].points.forEach(point => {\n                    if (prevPoint === undefined) {\n                        // if the prevPoint is undefined, add the first point\n                        inconvenientNodes.add({x: point.x, y: point.y});\n                    } else {\n                        // else add all the point between the prevPoint (excluded) and point (included)\n\n                        if(prevPoint.x===point.x) {\n                            // if the line is horizontal\n                            let from = Math.min(prevPoint.y, point.y);\n                            let to = Math.max(prevPoint.y, point.y);\n\n                            while(from <= to) {\n                                inconvenientNodes.add({x: point.x, y: from});\n                                from += this.gridSize;\n                            }\n                        } else if(prevPoint.y===point.y) {\n                            // if the line is vertical\n                            let from = Math.min(prevPoint.x, point.x);\n                            let to = Math.max(prevPoint.x, point.x);\n\n                            while(from <= to) {\n                                inconvenientNodes.add({x: from, y: point.y});\n                                from += this.gridSize;\n                            }\n                        } else {\n                            // line is neither horizontal nor vertical, throw an error for better future debugging\n                            console.error(\"getInconvenientNodes: line between two points is neither horizontal nor vertical\");\n                        }\n                    }\n\n                    // set new prevPoint\n                    prevPoint = {\n                        x: point.x,\n                        y: point.y\n                    };\n                });\n\n\n            }\n        }\n        // return the set\n        return inconvenientNodes;\n    }\n}\n","\"use strict\";\n\nimport {\n    getLibrary,\n    getNetworkFromLibrary\n} from './networkLibrary.js';\n\n/**\n * Item in the [ContextMenu](./module-ContextMenu.html). ContextMenuItems can be nested using the appendItem function.\n */\nclass ContextMenuItem {\n    /**\n     * @param {string} text          text on the button\n     * @param {ContextMenu} contextMenu instance of the [ContextMenu](./module-ContextMenu.html) this item belongs to\n     * @param {Function} clickFunction callback function that will be called when user clicks this item\n     */\n    constructor(text, contextMenu, clickFunction) {\n        /**\n         * text on the button\n         * @type {string}\n         */\n        this.text = text;\n\n        /**\n         * instance of the [ContextMenu](./module-ContextMenu.html) this item belongs to\n         * @type {ContextMenu}\n         */\n        this.contextMenu = contextMenu;\n\n        /**\n         * jQuery element representing DOM content of this menu item\n         * @type {jQuery.element}\n         */\n        this.$el = $(\"<li>\").text(text);\n\n        // set up click callback if clickFunction is defined\n        if(clickFunction!==undefined) {\n            $(this.$el).click(\n                (event) => {\n                    clickFunction();\n                    contextMenu.hide();\n\n                    event.stopPropagation();\n                }\n            );\n        }\n\n        /**\n         * jQuery element containing the submenu (or undefined, if item has no subitems)\n         * @type {jQuery.element}\n         */\n        this.$submenu = undefined\n\n        /**\n         * submenu item counter\n         * @type {Number}\n         */\n        this.itemCount = 0\n\n        // set hover callback\n        $(this.$el).hover((event) => {\n            // mouse on\n\n            if(this.length > 0) {\n                this.$submenu.css({\n                    display: \"block\",\n                    top: this.$el.offset().top,\n                    left: this.$el.parent().offset().left + this.$el.parent().width(),\n                })\n\n                this.contextMenu.$el.after(this.$submenu);\n\n                event.stopPropagation()\n            }\n        }, () => {\n            // mouse out\n            if(this.$submenu) {\n                this.$submenu.css({\n                    display: \"none\"\n                })\n            }\n\n            // do not stop event propagation, here it is wanted\n            // (because submenu overrides display: none when user moves from this menu item to the submenu)\n        })\n    }\n\n    /**\n     * instance of [Canvas](./module-Canvas.html) this menu belongs to\n     * @type {Canvas}\n     */\n    get parentSVG() {\n        return this.contextMenu.parentSVG;\n    }\n\n    /**\n     * number of items in the submenu\n     * @return {Number}\n     */\n    get length() {\n        return this.itemCount;\n    }\n\n    /**\n     * add a CSS class to this item\n     * @param {string} cls [description]\n     */\n    addClass(cls) {\n        this.$el.addClass(cls);\n        return this;\n    }\n\n    /**\n     * append a nested {@link ContextMenuItem} to this item\n     * @param  {ContextMenuItem} item item that will be appended\n     */\n    appendItem(item) {\n        if(!this.$submenu) {\n            this.$submenu = $(\"<ul>\").addClass(\"subList\");\n            this.$submenu.hover(() => {\n                this.$submenu.css(\"display\", \"block\");\n            }, () => {\n                this.$submenu.css(\"display\", \"none\");\n            })\n        }\n        this.$submenu.append(item.$el);\n\n        this.itemCount++;\n\n        return item;\n    }\n\n    /**\n     * get jQuery element of this menu item\n     * @return {jQuery.element} jQuery element containing all DOM content for this menu item\n     */\n    get jQuery() {\n        return this.$el;\n    }\n\n    get jQuerySubmenu() {\n        return this.$submenu;\n    }\n}\n\n/**\n * Menu item that has a custom click callback function that adds a {@link Gate} of the specified type to the [Canvas](./module-Canvas.html)\n * @extends ContextMenuItem\n */\nclass GateMenuItem extends ContextMenuItem {\n    /**\n     * @param {string} type        type of the gate {@link Gate} (and, or, ...)\n     * @param {ContextMenu} contextMenu instance of the [ContextMenu](./module-ContextMenu.html) that this item belongs to\n     */\n    constructor(type, contextMenu) {\n        super(\n            `${type} gate`,\n            contextMenu,\n            () => {\n                this.parentSVG.newGate(\n                    type,\n                    this.parentSVG.snapToGrid(this.parentSVG.viewbox.transformX(contextMenu.position.x)),\n                    this.parentSVG.snapToGrid(this.parentSVG.viewbox.transformY(contextMenu.position.y))\n                );\n            }\n        );\n    }\n}\n\nclass BlackboxMenuItem extends ContextMenuItem {\n    constructor(name, file, contextMenu) {\n        super(\n            name,\n            contextMenu,\n            () => {\n                getNetworkFromLibrary(file).then(({blackbox, name}) => {\n                    const {inputs, outputs, table} = blackbox;\n\n                    this.parentSVG.newBlackbox(\n                        inputs,\n                        outputs,\n                        table,\n                        name,\n                        this.parentSVG.snapToGrid(this.parentSVG.viewbox.transformX(contextMenu.position.x)),\n                        this.parentSVG.snapToGrid(this.parentSVG.viewbox.transformY(contextMenu.position.y))\n                    );\n                }).catch(error => {\n                    console.error(error);\n                })\n            }\n        )\n    }\n}\n\nclass NetworkMenuItem extends ContextMenuItem {\n    constructor(name, file, contextMenu) {\n        super(\n            name,\n            contextMenu,\n            () => {\n                getNetworkFromLibrary(file).then(data => {\n                    this.parentSVG.importData(\n                        data,\n                        Math.round(this.parentSVG.viewbox.transformX(contextMenu.position.x) / this.parentSVG.gridSize),\n                        Math.round(this.parentSVG.viewbox.transformY(contextMenu.position.y) / this.parentSVG.gridSize)\n                    ).then(() => {\n                        console.log('wozaa')\n                    });\n                }).catch(error => {\n                    console.error(error);\n                })\n            }\n        )\n    }\n}\n\n/** @module ContextMenu */\n/**\n * ContextMenu represents the menu that is displayed to the user when they right click on a canvas.\n * This menu allows user to add elements to the Canvas and in the case that user rightclicked\n * on a specific element, this menu allows them to remove this element.\n */\nexport default class ContextMenu {\n    /**\n     * @param {Canvas} parentSVG instance of [Canvas](./module-Canvas.html) this menu belongs to\n     */\n    constructor(parentSVG) {\n        /**\n         * instance of [Canvas](./module-Canvas.html) this menu belongs to\n         * @type {Canvas}\n         */\n        this.parentSVG = parentSVG;\n\n        /**\n         * Position of the context menu. It is used to add the new elements to the correct position on the Canvas.\n         * @type {Object}\n         */\n        this.position = {\n            x: 0, y: 0\n        };\n\n        /**\n         * jQuery element containing the context menu\n         * @type {jQuery.element}\n         */\n        this.$el = $(\"<ul>\");\n        this.$el.attr('id', 'contextMenu');\n\n        // add input box\n        this.appendItem(\n            new ContextMenuItem(\"Input box\", this,\n                () => {\n                    let position = {\n                        left: this.parentSVG.snapToGrid(parentSVG.viewbox.transformX(this.position.x)),\n                        top: this.parentSVG.snapToGrid(parentSVG.viewbox.transformY(this.position.y))\n                    };\n\n                    parentSVG.newInput(position.left, position.top);\n                }\n            )\n        );\n\n        // add output box\n        this.appendItem(new ContextMenuItem(\"Output box\", this, () => {\n            let position = {\n                left: this.parentSVG.snapToGrid(parentSVG.viewbox.transformX(this.position.x)),\n                top: this.parentSVG.snapToGrid(parentSVG.viewbox.transformY(this.position.y))\n            };\n\n            parentSVG.newOutput(position.left, position.top);\n        }));\n\n        // add all gates\n\n        // list of gates that can be added\n        const gates = [\"not\", \"and\", \"or\", \"nand\", \"nor\", \"xor\", \"xnor\"];\n        let gateList = new ContextMenuItem(\"New gate\", this, parentSVG);\n        for (let i = 0 ; i < gates.length ; ++i) {\n            gateList.appendItem(\n                new GateMenuItem(gates[i], this)\n            );\n        }\n        this.appendItem(gateList);\n\n        // more options will be added in the getLibrary() callback below\n        let networkList = new ContextMenuItem(\"Add a network\", this);\n        networkList.appendItem(new ContextMenuItem(\"paste a network\", this, () => {\n            this.displayImportDialog()\n        }));\n        this.appendItem(networkList); // always append\n\n        let blackboxList = new ContextMenuItem(\"Add a blackbox\", this); // appends only if contains items (see the callback)\n\n        // network import (blackbox, network)\n        getLibrary().then(networks => {\n\n            for (const {name, file, hasTable, hasNetwork} of networks) {\n                // add a network as a blackbox\n                if(hasTable) {\n                    blackboxList.appendItem(\n                        new BlackboxMenuItem(name, file, this)\n                    );\n                }\n\n                // load a network as a network of components connected with wires\n                if(hasNetwork) {\n                    networkList.appendItem(\n                        new NetworkMenuItem(name, file, this)\n                    );\n                }\n            }\n\n            if(blackboxList.length > 0) {\n                this.appendItem(blackboxList);\n            }\n        }).catch(error => {\n            console.error(error);\n        })\n\n        // add conditional items for box and wire removal\n        this.appendConditionalItem('box', 'Remove this item', id => {this.parentSVG.removeBox(id)});\n        this.appendConditionalItem('wire', 'Remove this wire', id => {this.parentSVG.removeWireById(id)});\n\n        // add the context menu to the DOM\n        parentSVG.$svg.before(this.$el);\n\n        /**\n         * Number of items in this menu (used in the .lenght getter). Conditional items do not count.\n         * @type {Number}\n         */\n        this.itemCount = 0;\n    }\n\n    get length() {\n        return this.itemCount;\n    }\n\n    /**\n     * append a context menu item to the context menu\n     * @param  {ContextMenuItem} item instance of {@link ContextMenuItem} that will be added to this menu\n     */\n    appendItem(item) {\n        this.$el.append(item.jQuery);\n\n        this.itemCount++;\n\n        return item;\n    }\n\n    /**\n     * appends an connditional item (that is shown only if the target has the class itemClass)\n     * @param  {string} itemClass     show the item only if the target has this class\n     * @param  {string} text          text of this menu item\n     * @param  {Function} clickFunction function with one argument (ID of the target) that will be called on click\n     */\n    appendConditionalItem(itemClass, text, clickFunction) {\n        if(!this.conditionalItems) {\n            this.conditionalItems = [];\n        }\n\n        this.conditionalItems[this.conditionalItems.length] = {\n            itemClass: itemClass,\n            text: text,\n            clickFunction: clickFunction\n        }\n    }\n\n    /**\n     * display the dialog for importing a network from a clipboard\n     */\n    displayImportDialog() {\n        let $popup = $(\"<div>\")\n            .addClass(\"importExport\")\n            .addClass(\"import\");\n\n        let textareaId = \"importJSON\";\n        let $textblock = $(\"<textarea>\").attr('id', textareaId);\n\n        let lityInstance;\n\n        $popup.append(\n            $textblock\n        ).append(\n            $(\"<a>\").attr({\n                \"href\": \"#\",\n                \"class\": \"upload\"\n            })\n            .append(\n                $(\"<img>\").attr('src', \"img/gui/import.svg\")\n            )\n            .append(\" import from JSON\")\n            .on('click', () => {\n                const data = JSON.parse($('#' + textareaId).val());\n\n                // proccess the imported data\n                this.parentSVG.importData(\n                    data,\n                    Math.round(this.parentSVG.viewbox.transformX(this.position.x) / this.parentSVG.gridSize),\n                    Math.round(this.parentSVG.viewbox.transformY(this.position.y) / this.parentSVG.gridSize)\n                ).then(() => {\n                    // close Lity\n                    lityInstance.close();\n                })\n            })\n        );\n\n        lityInstance = lity($popup);\n\n        // focus on the textblock\n        $textblock.focus();\n    }\n\n    /**\n     * decide whether or not to display specific conditional items\n     * @param  {jQuery.element} $target jQuery target of a MouseEvent (element that user clicked on)\n     */\n    resolveConditionalItems($target) {\n        for(let i = 0; i < this.conditionalItems.length; ++i) {\n            if($target.hasClass(this.conditionalItems[i].itemClass)) {\n                this.appendItem(\n                    new ContextMenuItem(\n                        this.conditionalItems[i].text, this,\n                        () => {\n                            this.conditionalItems[i].clickFunction($target.attr('id'));\n                        }\n                    )\n                ).addClass('conditional');\n            }\n        }\n    }\n\n    /**\n     * hide all conditional items\n     */\n    hideAllConditionalItems() {\n        this.$el.children('.conditional').remove();\n    }\n\n    /**\n     * displays the context menu with the right set of conditional items\n     * @param  {number} x       horizontal position of the context menu in CSS pixels\n     * @param  {number} y       vertical position of the context menu in CSS pixels\n     * @param  {jQuery.element} $target jQuery target of a MouseEvent (element that user clicked on)\n     */\n    display(x, y, $target) {\n        this.position = {\n            x: x,\n            y: y\n        };\n\n        this.resolveConditionalItems($target);\n\n        this.$el.css({\n            display: 'block',\n            top: y,\n            left: x\n        })\n        // set the width expicitly, or else the menu will widen when displaying a submenu\n        // 2 is to prevent a weird text wrap bug\n        .css('width', 'auto')\n        .css('width', this.$el.innerWidth() + 2);\n    }\n\n    /**\n     * hide the context menu\n     */\n    hide() {\n        this.$el.css({display: 'none'});\n        $(\".subList\").css({display: 'none'});\n        this.hideAllConditionalItems();\n    }\n}\n","import * as svgObj from './svgObjects.js'\nimport MapWithDefaultValue from './mapWithDefaultValue.js'\nimport Logic from './logic.js'\n\n/**\n * mapping of logical states to css classes\n * @type {Object}\n */\nconst stateClasses = {\n    on: \"stateOn\",\n    off: \"stateOff\",\n    unknown: \"stateUnknown\",\n    oscillating: \"stateOscillating\"\n};\n\n/**\n * Helper class used by {@link Transform}.\n *\n * Represents one single property of the transform argument, for example `translate(360 150)`\n * that may be a part of longer transform argument like `transform=\"translate(360 150) rotate(90 30 20)\"`\n */\nclass Property {\n    /**\n     * Initialize the Property object\n     * @param {string} [string] string in the property format `propertyname(list of space separated values)`\n     */\n    constructor(string) {\n        if(string!==undefined) {\n            this.name = string.replace(/^[ ]*([^(]+).*/, \"$1\");\n            this.args = string.replace(/^[^(]+\\((.*)\\)/, \"$1\").split(' ');\n        }\n    }\n\n    /**\n     * set or replace the name of this property\n     * @param {string} name new name for this property\n     */\n    setName(name) {\n        this.name = name;\n    }\n\n    /**\n     * set arguments of this property\n     * @param {array} args array of arguments\n     */\n    setArguments(args) {\n        this.args = args;\n    }\n\n    /**\n     * get string representation of the property\n     * @return {string} property in the property format `name(arg1 arg2)`\n     */\n    get() {\n        return this.name + \"(\" + this.args.join(\" \") + \")\";\n    }\n}\n\n/**\n * API for manipulating the transform argument used in SVG\n */\nexport class Transform {\n    /**\n     * Initialize the Transform object\n     * @param {string} [string] string in the format of the `transform` argument in SVG, for example `translate(360 150) rotate(90 30 20)`\n     */\n    constructor(string) {\n        /**\n         * array of {@link Property} instances\n         * @type {Array}\n         */\n        this.items = [];\n\n        if(string!==undefined) {\n            let splitItems = string.split(\")\");\n\n            for (let i = 0 ; i < splitItems.length ; i++) {\n                if(splitItems[i]) { // if not empty\n                    this.items.push(new Property(splitItems[i] + \")\"));\n                }\n            }\n        }\n    }\n\n    /**\n     * convert distances from SVG pixels to grid pixels\n     * @param  {Canvas} parentSVG instance of [Canvas](./module-Canvas.html)\n     */\n    toGridPixels(parentSVG) {\n        for (let item of this.items) {\n            if(item.name === \"translate\") {\n                item.args = [\n                    parentSVG.SVGToGrid(item.args[0]),\n                    parentSVG.SVGToGrid(item.args[1]),\n                ]\n            } else if(item.name === \"rotate\") {\n                item.args = [\n                    item.args[0],\n                    parentSVG.SVGToGrid(item.args[1]),\n                    parentSVG.SVGToGrid(item.args[2]),\n                ]\n            }\n        }\n    }\n\n    /**\n     * convert distances from grid pixels to SVG pixels\n     * @param  {Canvas} parentSVG instance of [Canvas](./module-Canvas.html)\n     */\n    toSVGPixels(parentSVG) {\n        for (let item of this.items) {\n            if(item.name === \"translate\") {\n                item.args = [\n                    parentSVG.gridToSVG(item.args[0]),\n                    parentSVG.gridToSVG(item.args[1]),\n                ]\n            } else if(item.name === \"rotate\") {\n                item.args = [\n                    item.args[0],\n                    parentSVG.gridToSVG(item.args[1]),\n                    parentSVG.gridToSVG(item.args[2]),\n                ]\n            }\n        }\n    }\n\n    /**\n     * find a transform property by name and get its index in the [items](#items) array\n     * @param  {string} name name of the property\n     * @return {number}      index of the property in the array of properties or `-1` if not found\n     */\n    getIndex(name) {\n        for(let i = 0 ; i < this.items.length; i++) {\n            if(name === this.items[i].name) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * get the translate property\n     * @return {Object} object containing parameters of the translate attribute\n     */\n    getTranslate() {\n        let args = this.getArguments(this.getIndex(\"translate\"));\n\n        return {\n            x: args[0],\n            y: args[1]\n        }\n    }\n\n    /**\n     * get the rotate property\n     * @return {Object} object containing parameters of the rotate attribute\n     */\n    getRotate() {\n        let args = this.getArguments(this.getIndex(\"rotate\"));\n\n        return {\n            deg: args[0],\n            centreX: args[1],\n            centreY: args[2]\n        }\n    }\n\n    /**\n     * set translate to the specified values\n     * @param {number} x horizontal translation\n     * @param {number} y vertical translation\n     */\n    setTranslate(x, y) {\n        this.setParameter(\"translate\", [x, y]);\n    }\n\n    /**\n     * set rotate to the specified values\n     * @param {number} deg     angle of the rotation in degrees\n     * @param {number} centreX horizontal position of the centre of the rotation\n     * @param {number} centreY vertical position of the centre of the rotation\n     */\n    setRotate(deg, centreX, centreY) {\n        this.setParameter(\"rotate\", [deg, centreX, centreY]);\n    }\n\n    /**\n     * rotate by 90 degrees to the right\n     * @param  {number} centreX horizontal position of the centre of the rotation\n     * @param  {number} centreY vertical position of the centre of the rotation\n     */\n    rotateRight(centreX, centreY) {\n        if(this.getIndex(\"rotate\")===-1) {\n            this.setRotate(90, centreX, centreY);\n        } else {\n            let newRotation = (parseInt(this.getRotate().deg) + 90) % 360;\n\n            if(newRotation===180) {\n                // swap centre coordinates\n                // because rotate(c, x, y) is defined like transform(-x, -y) rotate(c) transform(x, y)\n                let a = centreX;\n                centreX = centreY;\n                centreY = a;\n            }\n\n            this.setRotate(\n                newRotation,\n                centreX,\n                centreY\n            );\n        }\n    }\n\n    /**\n     * get the transform values in a string\n     * @return {string} string that can be used as a value for the transform property of a SVG element\n     */\n    get() {\n        let retVal = \"\";\n        for(let i = 0 ; i < this.items.length ; i++) {\n            if(i!==0) {\n                retVal += \" \";\n            }\n            retVal += this.items[i].get();\n        }\n        return retVal;\n    }\n\n    /**\n     * get arguments of a property specified by index\n     * @param  {number} index index of the property\n     * @return {array}       array of arguments of the specified property\n     */\n    getArguments(index) {\n        return this.items[index].args;\n    }\n\n    /**\n     * set argumets of a property specified by name\n     * @param {string} name name of the property\n     * @param {array} args array of arguments of the specified property\n     */\n    setParameter(name, args) {\n        // determine index of the parameter (if set), else index == -1\n        let index = this.getIndex(name);\n\n        // if the property has been already set, change it (rewrite the array in the right index)\n        // else create a new one (set index to the length of an array --> ad an item to the end)\n        if(index===-1) {\n            index = this.items.length;\n            this.items[index] = new Property();\n            this.items[index].setName(name);\n        }\n\n        // save args under the right index\n        this.items[index].setArguments(args);\n    }\n}\n\n/**\n * parent class for all network elements\n */\nclass NetworkElement {\n    /**\n     * Basic constructor for NetworkElement\n     * @param {Canvas} parentSVG reference to the instance of {@link Canvas} that this element belongs to\n     */\n    constructor(parentSVG) {\n        if(!parentSVG) {\n            console.error(\"Parent SVG element has to be defined.\");\n        }\n        this.parentSVG = parentSVG;\n\n        // used to store the svjObject's instance of this element\n        this.svgObj = undefined;\n    }\n\n    /**\n     * Get the unique ID of the SVG element tied to this logical element\n     * @return {string} ID of the SVG element\n     */\n    get id() {\n        return this.svgObj.id;\n    }\n\n    /**\n     * empty callback function to prevent error messages, function is implemented later in the {@link Box} class\n     */\n    onMouseDown() {}\n\n    /**\n     * empty function to prevent error messages, function is implemented later in the {@link Box} and {@link Connector} classes\n     */\n    onMouseUp() {}\n\n    /**\n     * empty function to prevent error messages, function is implemented later in the {@link Box} class\n     */\n    onMouseMove() {}\n\n    /**\n     * \"virtual\" getter for json data, prints an error that it has to be redefined in the derived classes\n     */\n    get exportData() {\n        console.error(\"'json' getter has not been defined for this element\", this);\n        return undefined;\n    }\n}\n\n/**\n * parent class for input and output connectors\n * @extends NetworkElement\n */\nclass Connector extends NetworkElement {\n    /**\n     * @param {Canvas} parentSVG link to the {@link Canvas} instance that this connector will belong to\n     * @param {number} gridSize  size of the grid in SVG pixels\n     * @param {number} left      horizontal position defined in grid units (SVG pixels divided by the grid size)\n     * @param {number} top       vertical position defined in grid units (SVG pixels divided by the grid size)\n     */\n    constructor(parentSVG, gridSize, left, top) {\n        super(parentSVG);\n\n        /**\n         * size of the grid in SVG pixels\n         * @type {number}\n         */\n        this.gridSize = gridSize;\n        /**\n         * size of the connector in SVG pixels\n         * @type {number}\n         */\n        this.connectorSize = gridSize;\n        /**\n         * offset of the connector from the grid in SVG pixels\n         * @type {number}\n         */\n        this.connectorOffset = this.connectorSize / 2;\n\n        /**\n         * instance of {@link svgObjects.svgObj} that holds all SVG information about this connector\n         * @type {svgObj}\n         */\n        this.svgObj = new svgObj.Rectangle(\n            left * this.gridSize - this.connectorOffset,\n            top * this.gridSize - this.connectorOffset,\n            this.connectorSize,\n            this.connectorSize,\n            \"none\",\n            \"black\"\n        );\n\n        this.svgObj.$el.addClass(\"connector\");\n\n        /**\n         * this flag describes whether this connector is an input connector\n         * @type {Boolean}\n         */\n        this.isInputConnector = false;\n\n        /**\n         * current logical state of this connector\n         * @type {Logic.state}\n         */\n        this.elementState = Logic.state.unknown;\n        this.svgObj.addClass(stateClasses.unknown);\n\n        /**\n         * set of ids of all wires connected to this connector\n         * @type {Set}\n         */\n        this.wireIds = new Set();\n    }\n\n    /**\n     * whether this connector is an output connector\n     * @return {Boolean}\n     */\n    get isOutputConnector() {\n        return !this.isInputConnector;\n    }\n\n    /**\n     * whether this connector is an output connector\n     * @return {Boolean}\n     */\n    set isOutputConnector(value) {\n        this.isInputConnector = !value;\n    }\n\n    /**\n     * add a wire id to the list of wire ids\n     * @param {string} wireId\n     */\n    addWireId(wireId) {\n        this.wireIds.add(wireId);\n    }\n\n    /**\n     * remove a wire id from the list of wire ids\n     * @param {string} wireId\n     */\n    removeWireId(wireId) {\n        this.wireIds.delete(wireId);\n    }\n\n    /**\n     * remove a wire specified by ID and update the connector\n     * @param  {string} wireId ID of the wire to be removed\n     */\n    removeWireIdAndUpdate(wireId) {\n        this.removeWireId(wireId);\n    }\n\n    /**\n     * set logical state of the connector\n     * @param {Logic.state} state new state of the connector\n     */\n    setState(state) {\n        this.svgObj.removeClasses(stateClasses.on, stateClasses.off, stateClasses.unknown, stateClasses.oscillating);\n\n        switch (state) {\n            case Logic.state.unknown:\n                this.svgObj.addClass(stateClasses.unknown);\n                break;\n            case Logic.state.on:\n                this.svgObj.addClass(stateClasses.on);\n                break;\n            case Logic.state.off:\n                this.svgObj.addClass(stateClasses.off);\n                break;\n            case Logic.state.oscillating:\n                this.svgObj.addClass(stateClasses.oscillating);\n                break;\n        }\n\n        this.elementState = state;\n    }\n\n    /**\n     * get state of this connector\n     * @return {Logic.state}\n     */\n    get state() {\n        return this.elementState;\n    }\n\n    /**\n     * get svgObj instance content of this connector\n     * @return {svgObjects.Rectangle}\n     */\n    get() {\n        return this.svgObj;\n    }\n\n    /**\n     * call [wireCreationHelper](./module-Canvas.html#wireCreationHelper) on mouse up\n     */\n    onMouseUp() {\n        this.parentSVG.wireCreationHelper(this.svgObj.id);\n    }\n}\n\n/**\n * Connector that gets its state from a connected value and passes it through to the {@link Box} this connector belongs to.\n * @extends Connector\n */\nexport class InputConnector extends Connector {\n    /**\n     * Call the constructor from the parent {@link Connector} class and set isInputConnector to true.\n     * @param {Canvas} parentSVG link to the {@link Canvas} instance that this connector will belong to\n     * @param {number} gridSize  size of the grid in SVG pixels\n     * @param {number} left      horizontal position defined in grid units (SVG pixels divided by the grid size)\n     * @param {number} top       vertical position defined in grid units (SVG pixels divided by the grid size)\n     */\n    constructor(parentSVG, gridSize, left, top) {\n        super(parentSVG, gridSize, left, top);\n\n        this.isInputConnector = true;\n    }\n\n    /**\n     * Call the setState method of {@link Connector} and than refresh the state of the connected {@link Box}\n     * @param {Logic.state} state new {@link Logic.state} of the connector\n     */\n    setState(state) {\n        super.setState(state);\n\n        let gate = this.parentSVG.getBoxByConnectorId(this.svgObj.id);\n        gate.refreshState();\n    }\n\n    /**\n     * remove the wire (by calling the removeWireIdAndUpdate of {@link Connector})\n     * and update state of this connector by setting it to undefined using the setState method\n     * @param  {string} wireId ID of the {@link Wire}\n     */\n    removeWireIdAndUpdate(wireId) {\n        super.removeWireIdAndUpdate(wireId);\n        this.setState(Logic.state.unknown);\n    }\n}\n\n/**\n * Connector that takes a state defined by the {@link Box} it belongs to and passes it to all connected wire\n * @extends Connector\n */\nexport class OutputConnector extends Connector {\n    /**\n     * Call the constructor from the parent {@link Connector} class and set isOutputConnector to true.\n     * @param {Canvas} parentSVG link to the {@link Canvas} instance that this connector will belong to\n     * @param {number} gridSize  size of the grid in SVG pixels\n     * @param {number} left      horizontal position defined in grid units (SVG pixels divided by the grid size)\n     * @param {number} top       vertical position defined in grid units (SVG pixels divided by the grid size)\n     */\n    constructor(parentSVG, gridSize, left, top) {\n        super(parentSVG, gridSize, left, top);\n\n        this.isOutputConnector = true;\n    }\n\n    /**\n     * Call the setState method of {@link Connector} and than set the state of the connected {@link Wire}s\n     * @param {Logic.state} state new {@link Logic.state} of the connector\n     */\n    setState(state) {\n        super.setState(state);\n\n        for (const wireId of this.wireIds) {\n            this.parentSVG.getWireById(wireId).setState(state);\n        }\n    }\n}\n\n/**\n * Parent class for gates and input and output boxes. Defines all the factors\n * that the boxes have in common (svgObj structure, draggability and rotatability...)\n * @extends NetworkElement\n */\nclass Box extends NetworkElement {\n    /**\n     * @param {Canvas} parentSVG  instance of [Canvas](./module-Canvas.html)\n     * @param {string} name       name of the element (input, output, and, or, xor...)\n     * @param {string} category   type of the element (io, gate)\n     * @param {number} gridWidth  width of the element in grid pixels\n     * @param {number} gridHeight height of the element in grid pixels\n     */\n    constructor(parentSVG, name, category, gridWidth, gridHeight) {\n        super(parentSVG);\n\n        /**\n         * specifies the box type within the category (input/output in io, and/or/... in gate)\n         * @type {string}\n         */\n        this.name = name;\n\n        /**\n         * specifies the box category (io for input or output, gate for logic gates)\n         * @type {string}\n         */\n        this.category = category;\n\n        /**\n         * size of the grid in SVG pixels\n         * @type {number}\n         */\n        this.gridSize = this.parentSVG.gridSize;\n\n        /**\n         * url of the image depicting this object\n         * @type {string}\n         */\n        this.url = \"img/\" + this.category + \"/\" + this.name + \".svg\";\n\n        /**\n         * array of connectors of this box\n         * @type {Array}\n         */\n        this.connectors = [];\n\n        /**\n         * svgObj containing all SVG data used to display this box\n         * @type {svgObj}\n         */\n        this.svgObj = new svgObj.Group();\n\n        /**\n         * width of this element in SVG pixels\n         * @type {number}\n         */\n        this.width = gridWidth * this.gridSize;\n        /**\n         * height of this element in SVG pixels\n         * @type {number}\n         */\n        this.height = gridHeight * this.gridSize;\n\n        /**\n         * width of this element in grid pixels\n         * @type {number}\n         */\n        this.gridWidth = gridWidth;\n        /**\n         * height of this element in grid pixels\n         * @type {number}\n         */\n        this.gridHeight = gridHeight;\n\n        // transparent background rectangle\n        let rectangle = new svgObj.Rectangle(0, 0, this.width, this.height, \"none\", \"none\");\n        rectangle.$el.addClass('rect');\n\n        this.svgObj.addChild(rectangle);\n        // image of the element\n        this.image = new svgObj.SvgImage(0, 0, this.width, this.height, this.url);\n        this.svgObj.addChild(this.image);\n\n        // add type=\"gate\", used in special callbacks in contextmenu\n        this.svgObj.addAttr({\"type\": category});\n\n        this.svgObj.$el.addClass(\"box\");\n        this.svgObj.$el.addClass(category);\n\n        this.generateBlockNodes();\n    }\n\n    /**\n     * get all input connectors of this box\n     * @return {Array} array of input connectors\n     */\n    get inputConnectors() {\n        return this.connectors.filter(conn => conn.isInputConnector)\n    }\n\n    /**\n     * get all output connectors of this box\n     * @return {Array} array of output connectors\n     */\n    get outputConnectors() {\n        return this.connectors.filter(conn => conn.isOutputConnector)\n    }\n\n    /**\n     * get data of this box as a JSON-ready object\n     * @return {Object} javascript object containing essential data for this box\n     */\n    get exportData() {\n        let connections = [];\n\n        // go through all connectors\n        let counter = 0\n        for (const conn of this.connectors) {\n            // go through each its wire id\n            for (const item of conn.wireIds) {\n                let thisWireId;\n                if(!this.parentSVG.exportWireIdMap.has(item)) {\n                    // if the wire id is not in the map, add it and assign new arbitrary id\n                    this.parentSVG.exportWireIdMap.set(item, this.parentSVG.exportWireId);\n                    thisWireId = this.parentSVG.exportWireId;\n                    this.parentSVG.exportWireId++;\n                } else {\n                    // else get id from the map\n                    thisWireId = this.parentSVG.exportWireIdMap.get(item);\n                }\n\n\n                // add this connection to the list\n                connections[connections.length] = {\n                    index: counter,\n                    type: conn.type,\n                    wireId: thisWireId\n                };\n            }\n            counter++\n        }\n\n        return {\n            name: this.name,\n            category: this.category,\n            transform: this.getTransform(true),\n            connections: connections\n        };\n    }\n\n    /**\n     * get set of nodes that are not suitable for wire routing\n     * @param  {Number} [marginTop=0]    top margin of the element (distance from the element that should be also blocked)\n     * @param  {Number} [marginRight=0]  right margin of the element\n     * @param  {Number} [marginBottom=0] bottom margin of the element\n     * @param  {Number} [marginLeft=0]   left margin of the element\n     * @param  {Number} specialNodes     additional nodes that should be added to the set\n     * @return {Set}                     set of not suitable nodes\n     */\n    generateBlockNodes(marginTop = 0, marginRight = 0, marginBottom = 0, marginLeft = 0, ...specialNodes) {\n        this.blockedNodes = new Set();\n        for(let x = marginLeft ; x <= this.gridWidth - marginRight ; x++) {\n            for(let y = marginTop ; y <= this.gridHeight - marginBottom ; y++) {\n                this.blockedNodes.add({\n                    x: x,\n                    y: y\n                });\n            }\n        }\n\n        for (let node of specialNodes) {\n            this.blockedNodes.add(node);\n        }\n    }\n\n    /**\n     * empty function, redefined in inherited elements\n     * refreshState takes input connector values and sets output values accordingly\n     */\n    refreshState() {\n        console.warn(\"Calling the virtual function refreshState has no effect.\");\n    }\n\n    /**\n     * change image to another one that ends with a specified suffix\n     *\n     * *usage:* `changeImage(\"abc\")` changes image url to `image-abc.svg`,\n     * `changeImage()` changes image url to the default one (`image.svg`)\n     * @param  {string} [suffix] new suffix for the image\n     */\n    changeImage(suffix) {\n        if(suffix === undefined || suffix === \"\") {\n            suffix = \"\";\n        } else {\n            suffix = \"-\" + suffix;\n        }\n        this.url = \"img/\" + this.category + \"/\" + this.name + suffix + \".svg\";\n\n        this.image.changeUrl(this.url);\n    }\n\n    /**\n     * get a jQuery element representing this box\n     * @return {jQuery.element}\n     */\n    get() {\n        return this.svgObj.get();\n    }\n\n    /**\n     * remove a specific onde from the set of blocked nodes\n     * @param  {number} x horizontal position of the blocked node in grid pixels\n     * @param  {number} y vertical position of the blocked node in grid pixels\n     */\n    removeBlockedNode(x, y) {\n        for(let item of this.blockedNodes) {\n            if(item.x===x && item.y===y) {\n                this.blockedNodes.delete(item);\n                break;\n            }\n        }\n    }\n\n    /**\n     * rotate the set of blocked nodes to the right\n     *\n     * used to rotate the nodes when the object itself is rotated\n     */\n    rotateBlockedNodesRight() {\n        if(this.rotation===undefined || this.rotation===4) {\n            this.rotation = 0;\n        }\n        this.rotation++;\n\n        if(this.rotation === 1 || this.rotation === 3) {\n            let newBlockedNodes = new Set();\n            this.blockedNodes.forEach(item => {\n                newBlockedNodes.add({\n                    x: Math.abs(item.y - this.gridHeight),\n                    y: item.x\n                });\n            });\n            this.blockedNodes = newBlockedNodes;\n        } else if(this.rotation === 2 || this.rotation === 4) {\n            let newBlockedNodes = new Set();\n            this.blockedNodes.forEach(item => {\n                newBlockedNodes.add({\n                    x: Math.abs(item.y - this.gridWidth),\n                    y: item.x\n                });\n            });\n            this.blockedNodes = newBlockedNodes;\n        }\n    }\n\n    /**\n     * add a connector to the element on the specified position\n     * @param {number}  left             horizontal distance from the left edge of the element\n     * @param {number}  top              vertical distance from the top edge of the element\n     * @param {Boolean} isInputConnector whether or not should this connector an input connector (`true` for input connector, `false` for output connector)\n     */\n    addConnector(left, top, isInputConnector) {\n        let index = this.connectors.length;\n        if(isInputConnector) {\n            this.connectors[index] = new InputConnector(this.parentSVG, this.gridSize, left, top);\n        } else {\n            this.connectors[index] = new OutputConnector(this.parentSVG, this.gridSize, left, top);\n        }\n        this.svgObj.addChild(this.connectors[index].get());\n\n        this.removeBlockedNode(left, top);\n    }\n\n    /**\n     * add an input connector to the element on the specified position\n     * @param {number} left horizontal distance from the left edge of the element\n     * @param {number} top  vertical distance from the top edge of the element\n     */\n    addInputConnector(left, top) {\n        return this.addConnector(left, top, true)\n    }\n\n    /**\n     * add an output connector to the element on the specified position\n     * @param {number} left horizontal distance from the left edge of the element\n     * @param {number} top  vertical distance from the top edge of the element\n     */\n    addOutputConnector(left, top) {\n        return this.addConnector(left, top, false)\n    }\n\n    /**\n     * get the connector object based on its id\n     * @param  {string} connectorId ID of the {@link Connector}\n     * @return {Connector}             instance of the {@link Connector} or `undefined` if not found\n     */\n    getConnectorById(connectorId) {\n        for(let i = 0 ; i < this.connectors.length ; i++) {\n            if(this.connectors[i].id===connectorId) {\n                return this.connectors[i];\n            }\n        }\n        // if connector not found, return undefined\n        return undefined;\n    }\n\n    /**\n     * get the instance of {@link Transform} representing the state of the transform attribute of this element\n     * @param  {Boolean} [gridPixels=false] if `true`, function will return the result in grid pixels instead of SVG pixels\n     * @return {Transform}                  {@link Transform} of the element\n     */\n    getTransform(gridPixels = false) {\n        let transform;\n        if (!this.svgObj.$el.attr(\"transform\")) {\n            // the element does not have a \"transform\" property --> create it\n            transform = new Transform();\n            transform.setTranslate(0, 0);\n            this.svgObj.addAttr({\"transform\": transform.get()});\n        } else {\n            // the element does have a \"transform\" property --> change it\n            transform = new Transform(this.svgObj.$el.attr(\"transform\"));\n        }\n\n        // convert values to grid pixels\n        if(gridPixels) {\n            transform.toGridPixels(this.parentSVG);\n        }\n\n        return transform;\n    }\n\n    /**\n     * get the instance of {@link Transform} representing the state of the transform attribute of this element _with lenght units in grid pixels_\n     * @return {Transform} {@link Transform} of the element\n     */\n    getGridPixelTransform() {\n        return this.getTransform(true);\n    }\n\n    /**\n     * set the transform attribute of this element\n     * @param {Transform} transform {@link Transform} of the element (with lengths specified in SVG pixels)\n     */\n    setTransform(transform) {\n        this.svgObj.addAttr({\"transform\": transform.get()});\n    }\n\n    /**\n     * function that is called on every mouse down on this element\n     *\n     * moves the element to the front and calls onMouseDownLeft if applicable\n     * @param  {jQuery.MouseEvent} event\n     */\n    onMouseDown(event) {\n        this.mouseLeft = false;\n        if(event.which === 1) {\n            this.mouseLeft = true;\n            this.onMouseDownLeft(event);\n\n            // move the DOM element to front\n            this.parentSVG.moveToFrontById(this.svgObj.id);\n        }\n    }\n\n    /**\n     * function that is called on every left mouse down on this element\n     *\n     * prepares element for the \"click\" and \"drag and drop\" actions\n     * @param  {jQuery.MouseEvent} event\n     */\n    onMouseDownLeft(event) {\n        this.mouseMoved = false;\n\n        let transform = this.getTransform();\n\n        // save the current item position into a variable\n        let currentPosition = transform.getTranslate();\n\n        let {pageX, pageY} = this.parentSVG.viewbox.transformEvent(event)\n\n        // calculate mouse offset from the object origin\n        this.offset = {\n            x: pageX - currentPosition.x,\n            y: pageY - currentPosition.y\n        };\n    }\n\n    /**\n     * function that is called on every left mouse move with this element\n     * applies the correct transform values to provide the \"drag and drop\" functionality\n     * @param  {jQuery.MouseEvent} event\n     */\n    onMouseMove(event) {\n        if(this.mouseLeft) {\n            this.svgObj.$el.addClass('grabbed');\n\n            this.mouseMoved = true;\n\n            let {pageX, pageY} = this.parentSVG.viewbox.transformEvent(event)\n\n            const left = pageX - this.offset.x;\n            const top = pageY - this.offset.y;\n\n            let transform = this.getTransform();\n            transform.setTranslate(left, top);\n\n            this.setTransform(transform);\n\n            this.updateWires(true);\n        }\n    }\n\n    /**\n     * function that is called on every mouse up on this element\n     * provides the \"click\" functionality and calls the onDrop handler for the \"drag and drop\" functionality\n     * @param  {jQuery.MouseEvent} event\n     */\n    onMouseUp(event) {\n        if(event.which === 1) {\n            if(this.mouseMoved) {\n                this.onDrop(event);\n            } else {\n                this.onClick();\n            }\n        } else if (event.which === 2 ) {\n            this.onClickMiddle();\n        }\n\n        this.svgObj.$el.removeClass('grabbed');\n    }\n\n    /**\n     * called by onMouseUp when the mouse has been moved between onMouseDown and onMouseUp\n     *\n     * applies grid snapping of the element on the end of the \"drag and drop\" action\n     * @param  {jQuery.MouseEvent} event\n     */\n    onDrop(event) {\n        let {pageX, pageY} = this.parentSVG.viewbox.transformEvent(event)\n\n        let left = pageX - this.offset.x;\n        let top = pageY - this.offset.y;\n\n        left = this.parentSVG.snapToGrid(left);\n        top = this.parentSVG.snapToGrid(top);\n\n        let transform = this.getTransform();\n        transform.setTranslate(left, top);\n\n        this.setTransform(transform);\n\n        this.updateWires();\n\n        // if tutorial exists, call tutorial callback\n        if(this.parentSVG.tutorial) {\n            this.parentSVG.tutorial.onBoxMoved();\n        }\n    }\n\n    /**\n     * empty function, will be redefined in InputBox\n     */\n    onClick() {}\n\n    /**\n     * custom callback function for middle click that rotates the box by 90 degrees to the right\n     */\n    onClickMiddle() {\n        // get the transform value for this box\n        let transform = this.getTransform();\n\n        // get the bounding rectangle for this box\n        let rect = this.svgObj.$el[0].getBoundingClientRect();\n\n        // use the bounding rectangle dimensions to figure out the geometrical centre of the box\n        let centreX = Math.round(rect.width / 2);\n        let centreY = Math.round(rect.height / 2);\n\n        centreX -= centreX % this.gridSize;\n        centreY -= centreY % this.gridSize;\n\n        // apply the rotation to the transform object\n        transform.rotateRight(\n            centreX,\n            centreY\n        );\n\n        // apply the modified transform object ot the svgObj\n        this.svgObj.addAttr({\"transform\": transform.get()});\n\n        // rotate also the blocked nodes\n        this.rotateBlockedNodesRight();\n\n        // update the wires\n        this.updateWires();\n\n        // if tutorial exists, call tutorial callback\n        if(this.parentSVG.tutorial) {\n            this.parentSVG.tutorial.onBoxRotated();\n        }\n    }\n\n    /**\n     * Updates all wires connected to this box. Iterates over all wires that are connected to this box\n     * and calls routeWire (or temporaryWire if the `temporary` parameter is set to true) to update the wire routing\n     * @param  {Boolean} [temporary=false] [description]\n     */\n    updateWires(temporary = false) {\n        this.connectors.forEach(conn => {\n            conn.wireIds.forEach(wireId => {\n                let wire = this.parentSVG.getWireById(wireId);\n                if(temporary) {\n                    wire.temporaryWire();\n                } else {\n                    wire.routeWire();\n                }\n            })\n        })\n    }\n}\n\n/**\n * InputBox has only output connectors and is used to set the input states for the logic network.\n * @extends Box\n */\nexport class InputBox extends Box {\n    /**\n     * @param {Canvas} parentSVG  instance of [Canvas](./module-Canvas.html)\n     * @param {Boolean} [isOn=false] the initial state of the inputbox (`true` is *on*, `false` is *off*)\n     */\n    constructor(parentSVG, isOn = false) {\n        const width = 7;\n        const height = 4;\n\n        super(parentSVG, \"input\", \"io\", width, height);\n\n        this.addConnector(width, height / 2, false);\n\n        this.on = isOn;\n    }\n\n    /**\n     * get data of this input box as a JSON-ready object\n     * @return {Object} javascript object containing essential data for this input box\n     */\n    get exportData() {\n        let data = super.exportData;\n        data.isOn = this.isOn;\n        return data;\n    }\n\n    generateBlockNodes() {\n        super.generateBlockNodes(0, 1, 1, 0);\n    }\n\n    /**\n     * start a new simulation from the output connector\n     */\n    refreshState() {\n        this.parentSVG.startNewSimulation(this.connectors[0], this.connectors[0].state)\n    }\n\n    /**\n     * set the state of the inputbox to the corresponding value\n     * @param  {Boolean} isOn set to *on* if `true`, set to *off* if `false`\n     */\n    set on(isOn) {\n        if (isOn) {\n            // turn on\n            this.changeImage(\"on\");\n            this.connectors[0].setState(Logic.state.on);\n            this.refreshState()\n        } else {\n            // turn off\n            this.changeImage();\n            this.connectors[0].setState(Logic.state.off);\n            this.refreshState()\n        }\n\n        this.isOn = isOn;\n    }\n\n    /**\n     * get the state of the inputbox (`true` if *on*, `false` if *off*)\n     * @return {Boolean} [description]\n     */\n    get on() {\n        return this.isOn;\n    }\n\n    /**\n     * toggle the state of the inputbox\n     */\n    onClick() {\n        this.on = !this.on;\n\n        if(this.parentSVG.tutorial) {\n            this.parentSVG.tutorial.onChangeInputBoxState();\n        }\n    }\n}\n\n/**\n * OutputBox has only input connectors and is used to visualize the output states of the logic network.\n * @extends Box\n */\nexport class OutputBox extends Box {\n    /**\n     * @param {Canvas} parentSVG  instance of [Canvas](./module-Canvas.html)\n     */\n    constructor(parentSVG) {\n        const height = 4;\n        const width = 5;\n\n        super(parentSVG, \"output\", \"io\", width, height);\n\n        this.addConnector(0, height / 2, true);\n    }\n\n    /**\n     * set state of this output box to match the state of its input connector\n     */\n    refreshState() {\n        this.setState(this.connectors[0].state);\n    }\n\n    /**\n     * Reflect the input connector state in the appearance of the element - set\n     * the element image to represent the corresponding state\n     * @param {Logic.state} state new state of this outputBox\n     */\n    setState(state) {\n        switch (state) {\n            case Logic.state.on:\n                this.changeImage(\"on\");\n\n                // if tutorial exists, call tutorial callback\n                if(this.parentSVG.tutorial) {\n                    this.parentSVG.tutorial.onOutputBoxTrue();\n                }\n                break;\n            case Logic.state.off:\n                this.changeImage(\"off\");\n                break;\n            case Logic.state.unknown:\n                this.changeImage();\n                break;\n            case Logic.state.oscillating:\n                this.changeImage(\"osc\");\n                break;\n        }\n    }\n\n    generateBlockNodes() {\n        super.generateBlockNodes(0, 0, 0, 1);\n    }\n}\n\n/**\n * Gate is a box that processes the states of its input connectors and returns the result in its output connectors.\n * @extends Box\n */\nexport class Gate extends Box {\n    /**\n     * @param {Canvas} parentSVG  instance of [Canvas](./module-Canvas.html)\n     * @param {string} name       name of the gate (and, not, xor...)\n     */\n    constructor(parentSVG, name) {\n        const width = 9;\n        const height = 4;\n\n        super(parentSVG, name, \"gate\", width, height);\n\n        // output\n        this.addConnector(width, height / 2, false);\n\n        if(this.name===\"not\") {\n            // input\n            this.addConnector(0, height / 2, true);\n        } else {\n            // input\n            this.addConnector(0, height / 4, true);\n            this.addConnector(0, height / (4/3), true);\n\n            // add one blockedNode between the inputs (for better looking wiring)\n            // and regenerate blocked nodes\n            this.generateBlockNodes({\n                x: 0,\n                y: height / 2\n            });\n        }\n\n        this.refreshState();\n    }\n\n    generateBlockNodes(specialNode) {\n        if(specialNode!==undefined) {\n            super.generateBlockNodes(0, 1, 0, 1, specialNode);\n        } else {\n            super.generateBlockNodes(0, 1, 0, 1);\n        }\n    }\n\n    /**\n     * proccess the input connector states and reflect them in the output connector states according\n     * to the logic corresponding to this gate's name\n     */\n    refreshState() {\n        let state = Logic.state.unknown\n        switch (this.name) {\n            case \"and\":\n                state =  Logic.and(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"nand\":\n                state =  Logic.nand(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"nor\":\n                state =  Logic.nor(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"not\":\n                state =  Logic.not(this.connectors[1].state)\n                break;\n            case \"or\":\n                state =  Logic.or(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"xnor\":\n                state =  Logic.xnor(this.connectors[1].state, this.connectors[2].state)\n                break;\n            case \"xor\":\n                state =  Logic.xor(this.connectors[1].state, this.connectors[2].state)\n                break;\n        }\n        // notify the simulator about this change\n        this.parentSVG.simulation.notifyChange(this.connectors[0].id, state)\n    }\n}\n\n/**\n * Blackbox is a box that is defined by its evaluation function\n * @extends Box\n */\nexport class Blackbox extends Box {\n    /**\n     * @param {Canvas} parentSVG  instance of [Canvas](./module-Canvas.html)\n     * @param {number} inputConnectors  number of input connectors\n     * @param {number} outputConnectors number of output connectors\n     * @param {Function} evalFunction   function that takes `inputConnectors` [Logic.state](./module-Logic.html#.state)s\n     *                                  and returns `outputConnectors` Logic.states.\n     * @param {String} [name]        name that will be displayed on the blackbox\n     */\n    constructor(parentSVG, inputConnectors, outputConnectors, evalFunction, name = \"\") {\n        const width = 11;\n        const height = Math.max(inputConnectors, outputConnectors) * 2;\n\n        super(parentSVG, name, \"blackbox\", width, height);\n\n        const connectorPinLenght = 2.5 * this.gridSize;\n\n        // override default svgObj structure\n        this.svgObj = new svgObj.Group();\n\n        // transparent background rectangle\n        let hitbox = new svgObj.Rectangle(0, 0, this.width, this.height, \"none\", \"none\");\n        hitbox.$el.addClass('rect');\n\n        this.svgObj.addChild(hitbox);\n\n        // main rectangle\n        const bodyWidth = this.width - 2 * connectorPinLenght;\n\n        let rectangle = new svgObj.Rectangle(connectorPinLenght, 0, bodyWidth, this.height, \"white\", \"black\");\n        rectangle.addAttr({'stroke-width': '2.5'});\n        rectangle.$el.addClass('rect');\n\n        this.svgObj.addChild(rectangle);\n\n        // text description of the box\n        const textWidth = bodyWidth - this.gridSize;\n        const textHeight = this.height - this.gridSize;\n        let text = new svgObj.MultiLineText(\n            (this.width - textWidth) / 2, // horizontal centering\n            (this.height - textHeight) / 2, // vertical centering\n            textWidth,\n            this.height,\n            name.toUpperCase(),\n            this.gridSize * 1.2\n        );\n        this.svgObj.addChild(text);\n\n        // add input connectors\n        for (let i = 0 ; i < inputConnectors ; ++i) {\n            const gridPosition = (i * 2) + 1;\n            const pixelPosition = gridPosition * this.gridSize;\n\n            let pin = new svgObj.PolyLine(\n                new svgObj.PolylinePoints([\n                    new svgObj.PolylinePoint(0, pixelPosition),\n                    new svgObj.PolylinePoint(connectorPinLenght, pixelPosition),\n                ]),\n                \"black\",\n                1\n            )\n\n            this.svgObj.addChild(pin);\n\n            // add the connector\n            this.addInputConnector(0, gridPosition);\n        }\n\n        // add output connectors\n        for (let i = 0 ; i < outputConnectors ; ++i) {\n            const gridPosition = (i * 2) + 1;\n            const pixelPosition = gridPosition * this.gridSize;\n\n            let pin = new svgObj.PolyLine(\n                new svgObj.PolylinePoints([\n                    new svgObj.PolylinePoint(this.width - connectorPinLenght, pixelPosition),\n                    new svgObj.PolylinePoint(this.width, pixelPosition),\n                ]),\n                \"black\",\n                1\n            )\n\n            this.svgObj.addChild(pin);\n\n            this.addOutputConnector(width, gridPosition);\n        }\n\n        this.svgObj.$el.addClass(\"box\");\n\n        /**\n         * function that takes `inputConnectors` [Logic.state](./module-Logic.html#.state)s\n         * and returns `outputConnectors` Logic.states.\n         */\n        this.evalFunction = evalFunction;\n    }\n\n    /**\n     * get data of this blackbox as a JSON-ready object\n     * @return {Object} javascript object containing essential data for this blackbox\n     */\n    get exportData() {\n        let data = super.exportData;\n        data.inputs = this.inputConnectors.length;\n        data.outputs = this.outputConnectors.length;\n\n        // generate the truth table\n\n        data.table = []\n\n        // array of tested input states\n        const stateList = Logic.stateList;\n\n        // recursive function that generates all possible inputs\n        const getPermutations = (length) => {\n            let permutations = [];\n            switch (length) {\n                case 0:\n                    return [];\n                case 1:\n                    for (const state of stateList) {\n                        permutations.push([state])\n                    }\n                    return permutations;\n                default:\n                    for (const state of stateList) {\n                        for(const perm of getPermutations(length - 1)) {\n                            permutations.push([state, ...perm])\n                        }\n                    }\n                    return permutations;\n            }\n        }\n\n        // generate outputs for all the possible inputs\n        for (const inputValues of getPermutations(data.inputs)) {\n            const outputValues = this.evalFunction(...inputValues);\n\n            // if there is an output value that is not Logic.state.unknown, add this line to the\n            // truthtable, otherwise don't add it (if all output values are Logic.state.unknown,\n            // the input combination does not have to be defines, because Logic.state.unknown is the default value)\n            if (outputValues.reduce((accumulator, current) => {\n                return accumulator || current !== Logic.state.unknown\n            })) {\n                data.table.push([...inputValues, ...outputValues])\n            }\n        }\n\n        return data;\n    }\n\n    /**\n     * proccess the input connector states and reflect them in the output connector states according\n     * to the logic defined by this.evalFunction\n     */\n    refreshState() {\n        const inputStates = this.inputConnectors.map(conn => conn.state);\n        // call the evalFunction to get the output states\n        const outputStates = this.evalFunction(...inputStates);\n\n        // apply the outputStates to the outputConnectors\n        for (let i = 0; i < outputStates.length ; ++i) {\n            this.outputConnectors[i].setState(outputStates[i]);\n        }\n    }\n}\n\n/**\n * Wire represents connection of two {@link Connector}s.\n * @extends NetworkElement\n */\nexport class Wire extends NetworkElement {\n    /**\n     * @param {Canvas} parentSVG  instance of [Canvas](./module-Canvas.html)\n     * @param {string}  fromId    id of the first connector this wire will be connected to\n     * @param {string}  toId      id of the second connector this wire will be connected to\n     * @param {number}  gridSize       size of the grid in SVG pixels\n     * @param {Boolean} [refresh=true] if `true`, the [Canvas](./module-Canvas.html) will refresh after creating this wire\n     */\n    constructor(parentSVG, fromId, toId, gridSize, refresh = true) {\n        // small TODO: rework start... end... to arrays? (not important)\n\n        super(parentSVG);\n\n        this.gridSize = gridSize;\n\n        this.fromId = fromId;\n        this.toId = toId;\n\n        this.startBox = this.parentSVG.getBoxByConnectorId(fromId);\n        this.endBox = this.parentSVG.getBoxByConnectorId(toId);\n\n        this.boxes = [this.startBox, this.endBox]\n\n        this.startConnector = this.parentSVG.getConnectorById(fromId);\n        this.endConnector = this.parentSVG.getConnectorById(toId);\n\n        this.connectors = [this.startConnector, this.endConnector]\n        this.routeWire(true, refresh);\n\n        this.elementState = Logic.state.unknown;\n\n        for (let connector of this.connectors) {\n            if(connector.isOutputConnector) {\n                this.setState(connector.state);\n            }\n        }\n\n        this.svgObj.$el.addClass(\"wire\");\n    }\n\n    /**\n     * get data of this wire as a JSON-ready object\n     * @return {Object} javascript object containing essential data for this wire\n     */\n    get exportData() {\n        return {\n            fromId: this.fromId,\n            toId: this.toId\n        };\n    }\n\n    /**\n     * set the state of this wire to match the state of the input connector it is connected to\n     * @param {Logic.state} state [description]\n     */\n    setState(state) {\n        this.svgObj.removeClasses(stateClasses.on, stateClasses.off, stateClasses.unknown, stateClasses.oscillating);\n\n        switch (state) {\n            case Logic.state.unknown:\n                this.svgObj.addClass(stateClasses.unknown);\n                break;\n            case Logic.state.on:\n                this.svgObj.addClass(stateClasses.on);\n                break;\n            case Logic.state.off:\n                this.svgObj.addClass(stateClasses.off);\n                break;\n            case Logic.state.oscillating:\n                this.svgObj.addClass(stateClasses.oscillating);\n                break;\n        }\n\n        if (this.startConnector.isInputConnector) {\n            this.startConnector.setState(state);\n        }\n        if(this.endConnector.isInputConnector) {\n            this.endConnector.setState(state);\n        }\n\n        this.elementState = state;\n    }\n\n    /**\n     * get the current [Logic.state](./modules-Logic.html#.state) of this wire\n     * @return {Logic.state}\n     */\n    get state() {\n        return this.elementState;\n    }\n\n    /**\n     * update the state of this wire\n     */\n    updateWireState() {\n        for (const box of this.boxes) {\n            box.refreshState()\n        }\n    }\n\n    /**\n     * get the jQuery element for this wire\n     * @return {jQuery.element}\n     */\n    get() {\n        return this.svgObj.get();\n    }\n\n    /**\n     * get the polyline points for a temporary wire placement connecting the two connectors\n     * @return {PolylinePoints} new instance of {@link PolylinePoints}\n     */\n    getTemporaryWirePoints() {\n        let points = new svgObj.PolylinePoints();\n        points.append(new svgObj.PolylinePoint(this.wireStart.x, this.wireStart.y));\n        points.append(new svgObj.PolylinePoint(this.wireEnd.x, this.wireEnd.y));\n        return points;\n    }\n\n    /**\n     * route the wire using the temporary wire points\n     */\n    temporaryWire() {\n        this.wireStart = this.getCoordinates(this.startConnector, false);\n        this.wireEnd = this.getCoordinates(this.endConnector, false);\n\n        this.setWirePath(this.getTemporaryWirePoints());\n    }\n\n    /**\n     * route the wire using the modified A* wire routing algorithm\n     */\n    routeWire(snapToGrid = true, refresh = true) {\n        this.wireStart = this.getCoordinates(this.startConnector, snapToGrid);\n        this.wireEnd = this.getCoordinates(this.endConnector, snapToGrid);\n\n        this.points = this.aStar(\n            {\n                x: this.wireStart.x / this.gridSize,\n                y: this.wireStart.y / this.gridSize\n            },\n            {\n                x: this.wireEnd.x / this.gridSize,\n                y: this.wireEnd.y / this.gridSize\n            });\n\n        this.setWirePath(this.points);\n\n        if (refresh)\n            this.updateWireState();\n    }\n\n    /**\n     * set the wire to follow the specified points\n     * @param {PolylinePoints} points instance of {@link PolylinePoints}\n     */\n    setWirePath(points) {\n        // set the line\n        if(this.svgObj!==undefined) {\n            this.svgObj.updatePoints(points);\n        } else {\n            this.svgObj = new svgObj.PolyLine(points, \"#8b8b8b\", 2);\n        }\n\n        this.svgObj.removeClasses(stateClasses.on, stateClasses.off, stateClasses.unknown, stateClasses.oscillating);\n        this.svgObj.addClass(stateClasses.unknown);\n\n        this.svgObj.addAttr({\n            fromId: this.fromId,\n            toId: this.toId\n        });\n    }\n\n    /**\n     * Heavily modified implementation of the A* algorithm\n     * @param  {Object} start object containing numeric attributes `x` and `y` that represent the first endpoint of the wire\n     * @param  {Object} end   object containing numeric attributes `x` and `y` that represent the second endpoint of the wire\n     * @return {PolylinePoints} instance of {@link PolylinePoints}\n     */\n    aStar(start, end) {\n        const wireCrossPunishment = 2;\n        const wireBendPunishment = 1;\n\n        // number of nodes, that can be opened at once\n        // once is this limit exceeded, aStar will fail and getTemporaryWirePoints will be used instead\n        const maxNodeLimit = 50000;\n\n        let closedNodes = new Set();\n        let openNodes = new Set();\n        openNodes.add(start);\n\n        let cameFrom = new Map();\n\n        // default value: infinity\n        let gScore = new MapWithDefaultValue(Infinity);\n        gScore.set(start, 0);\n\n        // default value: infinity\n        let fScore = new MapWithDefaultValue(Infinity);\n        fScore.set(start, Wire.manhattanDistance(start, end));\n\n        let nonRoutable = this.parentSVG.getNonRoutableNodes();\n        let punishedButRoutable;\n        if(this.svgObj===undefined) {\n            punishedButRoutable = this.parentSVG.getInconvenientNodes();\n        } else {\n            punishedButRoutable = this.parentSVG.getInconvenientNodes(this.svgObj.id);\n        }\n\n        while (openNodes.size > 0) {\n            let currentNode;\n            let currentNodeFScore;\n\n            // find the value from openNodes that has the lowest fScore\n            // (can be implemented effectively using min-heap data structure (maybe TODO sometime)?)\n            for (const node of openNodes) {\n                if(!currentNode || fScore.get(node) < currentNodeFScore) {\n                    currentNode = node;\n                    currentNodeFScore = fScore.get(currentNode)\n                }\n            }\n\n            if(svgObj.PolylinePoint.equals(currentNode, end)) {\n                return this.reconstructPath(cameFrom, currentNode);\n            }\n\n            openNodes.delete(currentNode);\n            closedNodes.add(currentNode);\n\n            // the farthest points accessible without avoiding obstacles in every direction\n            // (but max 50 in each direction)\n            for(let direction = 0 ; direction < 4 ; direction++) {\n                let newPoint = Wire.movePoint(currentNode, direction);\n                for(let i = 0 ; i < 50 ; i++) {\n                    // if newPoint is in the set of non routable points,\n                    // don't add it and stop proceeding in this direction\n                    if(Wire.setHasThisPoint(nonRoutable, this.scalePointToGrid(newPoint))) {\n                        break;\n                    }\n\n                    // skip this node, if it has been already closed\n                    // or if it is on the list of non routable nodes\n                    if (closedNodes.has(newPoint)) {\n                        continue;\n                    }\n\n                    if (!openNodes.has(newPoint)) {\n                        openNodes.add(newPoint);\n                    }\n\n                    // calculate possible GScore by adding 1 to the score of the node we came from\n                    // (we prioritize to minimize the number of nodes and not the distance,\n                    //  so we are adding 1 on all nodes, even if the euclidean / mannhatan distance may vary)\n                    let increment = wireBendPunishment;\n                    let possibleGScore = gScore.get(currentNode) + increment;\n\n                    if(Wire.setHasThisPoint(punishedButRoutable, this.scalePointToGrid(newPoint))) {\n                        // if the node is in the set of punished node, punish it by adding to the GScore\n                        possibleGScore += wireCrossPunishment;\n                    }\n\n                    // skip this node if it has worst estimage gscore than in the gscore table\n                    if (possibleGScore >= gScore.get(newPoint)) {\n                        continue;\n                    }\n\n                    cameFrom.set(newPoint, currentNode);\n                    gScore.set(newPoint, possibleGScore);\n                    fScore.set(newPoint, possibleGScore + Wire.manhattanDistance(newPoint, end));\n\n                    // if newPoint is in the set of punished but routable points,\n                    // add it but stop proceeding in this direction\n                    if(Wire.setHasThisPoint(punishedButRoutable, this.scalePointToGrid(newPoint))) {\n                        break;\n                    }\n\n                    // move to the next point in the direciton\n                    newPoint = Wire.movePoint(newPoint, direction);\n                }\n            }\n\n            if(openNodes.size > maxNodeLimit) {\n                break;\n            }\n        }\n        // if we got here, the path does not exist -> let's use temporary path ignoring all colisions\n        return this.getTemporaryWirePoints();\n    }\n\n    /**\n     * Helper that moves the passed point in the specified direction. It simply adds or subtracts 1 from one of the coordinates depending on the direction attribute.\n     * @param  {Object} point     object containing numeric attributes `x` and `y`\n     * @param  {number} direction directions:\n     *                              - 0: up\n     *                              - 1: right\n     *                              - 2: down\n     *                              - 3: left\n     * @return {Object}           object containing numeric attributes `x` and `y`\n     */\n    static movePoint(point, direction) {\n        switch (direction) {\n            case 0: // up\n                return {\n                    x: point.x,\n                    y: point.y - 1\n                };\n            case 1: // right\n                return {\n                    x: point.x + 1,\n                    y: point.y\n                };\n            case 2: // down\n                return {\n                    x: point.x,\n                    y: point.y + 1\n                };\n            case 3: // left\n                return {\n                    x: point.x - 1,\n                    y: point.y\n                };\n        }\n    }\n\n    /**\n     * multiply the point coordinates by the grid size\n     * @param  {Object} point object containing numeric attributes `x` and `y` in grid pixels\n     * @return {Object}       the same point but containing numeric attributes `x` and `y` in SVG pixels\n     */\n    scalePointToGrid(point) {\n        return {\n            x: point.x * this.gridSize,\n            y: point.y * this.gridSize\n        }\n    }\n\n    /**\n     * helper backtracking function used by the aStar algorithm to construct the final {@link PolylinePoints}\n     * @param  {Object} cameFrom    object containing numeric attributes `x` and `y`\n     * @param  {Object} currentNode object containing numeric attributes `x` and `y`\n     * @return {PolylinePoints}     instance of {@link PolylinePoints} that represents the path found by the aStar algorithm\n     */\n    reconstructPath(cameFrom, currentNode) {\n        let totalPath = new svgObj.PolylinePoints();\n        totalPath.append(new svgObj.PolylinePoint(currentNode.x * this.gridSize, currentNode.y * this.gridSize));\n\n        while (cameFrom.has(currentNode)) {\n            currentNode = cameFrom.get(currentNode);\n            totalPath.append(new svgObj.PolylinePoint(currentNode.x * this.gridSize, currentNode.y * this.gridSize));\n        }\n\n        return totalPath;\n    }\n\n    /**\n     * returns the Manhattan distance between the points _a_ and _b_\n     * @param  {Object} a object containing numeric attributes `x` and `y`\n     * @param  {Object} b object containing numeric attributes `x` and `y`\n     * @return {number}\n     */\n    static manhattanDistance(a, b) {\n        // Manhattan geometry\n        return Math.abs(a.x - b.x) + Math.abs(a.y - b.y);\n    }\n\n    /**\n     * returns `true` if the specified set of points contains the specified point (and returns `false` otherwise)\n     * @param {Set} set set of points\n     * @param {Object} point object containing numeric attributes `x` and `y`\n     */\n    static setHasThisPoint(set, point) {\n        for (let item of set) {\n            if(item.x === point.x && item.y === point.y) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * get the coordinates of the specified connector\n     * @param  {Connector}  connector      instance of {@link Connector}\n     * @param  {Boolean} [snapToGrid=true] if true, the connector position will be snapped to the grid\n     * @return {Object}                    point - object containing numeric attributes `x` and `y`\n     */\n    getCoordinates(connector, snapToGrid = true) {\n        // connector.svgObj.id has to be called, else the getCoordinates does not work on the first call in Firefox 55\n        const dummy = connector.svgObj.id; // eslint-disable-line no-unused-vars\n\n        let $connector = connector.svgObj.$el;\n\n        let position = $connector.position();\n\n        position.left = this.parentSVG.viewbox.transformX(position.left)\n        position.top = this.parentSVG.viewbox.transformY(position.top)\n\n        let width = $connector.attr(\"width\");\n        let height = $connector.attr(\"height\");\n\n        let x = position.left + width / 2;\n        let y = position.top + height / 2;\n        if(snapToGrid) {\n            x = this.parentSVG.snapToGrid(x);\n            y = this.parentSVG.snapToGrid(y);\n        }\n\n        return {\n            x: x,\n            y: y\n        };\n    }\n}\n","import { getJSONString } from \"./helperFunctions.js\";\n\n/**\n * FloatingButton represents a button that is used in the floating menu in the right bottom corner\n * of the application. It may have a custom tooltip and callback on the click event\n */\nclass FloatingButton {\n    /**\n     * @param {string} buttonClass Custom string that identifies the SVG icon used on this button. This string is also added as a CSS class to the button.\n     * @param {string} tooltip     tooltip for the button, that will be displayed on hover and also used as alternative title for the image\n     * @param {Function} clickEvent  custom callback when user clicks the button\n     * @param {Canvas} parentSVG   reference to the parent SVG element\n     */\n    constructor(buttonClass, tooltip, clickEvent, parentSVG) {\n        /**\n         * jQuery element representing the button\n         * @type {jQuery.element}\n         */\n        this.$el = $('<a>')\n\n        // add classes to the element\n        this.$el.addClass(\"button\");\n        this.$el.addClass(buttonClass);\n\n        // add the icon\n        this.$el.append(\n            $(\"<img>\")\n            .attr(\"src\", `img/gui/${buttonClass}.svg`)\n            .attr(\"alt\", tooltip)\n        );\n\n        // add the tooltip element and an event listener if tooltip is defined\n        if (tooltip) {\n            /**\n             * jQuery element representing the tooltip\n             * @type {jQuery.element}\n             */\n            this.$tooltip = $(\"<div>\");\n            this.$tooltip\n                .addClass(\"tooltip\")\n                .html(tooltip);\n\n            parentSVG.$svg.after(this.$tooltip);\n\n            this.$el.hover(() => {\n                this.$tooltip.fadeIn(200);\n            }, () => {\n                this.$tooltip.fadeOut(200);\n            });\n        }\n\n        // add an event listener on click, if the callback function is defined\n        if (clickEvent) {\n            this.$el.on(\"click\", clickEvent);\n        }\n    }\n}\n\n/** @module FloatingMenu */\n/**\n * Class to represent the floating menu in the right bottom corner of the page.\n * It instantiates all the buttons and their callbacks.\n */\nexport default class FloatingMenu {\n    /**\n     * @param {Canvas} parentSVG reference to the Canvas element this menu is associated with\n     */\n    constructor(parentSVG) {\n        /**\n         * the jQuery element containing all buttons\n         * @type {jQuery.element}\n         */\n        this.$el = $('<div>')\n\n        const id = 'floatingMenu';\n\n        this.$el.attr(\"id\", id);\n\n        // const $loader = $(\"<div>\").addClass(\"loader\").addClass(\"hidden\");\n\n\n        /* EXPORT */\n        this.append(\n            new FloatingButton(\"export\", \"Get code for this network\", () => {\n                // create the popup container holding all popup content (that will be passed to lity)\n                let $popup = $(\"<div>\")\n                    .addClass(\"importExport\")\n                    .addClass(\"export\");\n\n                // generate the block with code to be displayed and append it to the popup element\n                const $textblock = $(\"<textarea>\").text(\n                    getJSONString(parentSVG.exportData, true)\n                )\n\n                $popup.append($textblock);\n\n                // generate the links\n                $popup.append(\n                    $(\"<a>\").attr({\n                        \"href\": getJSONString(parentSVG.exportData, true, true),\n                        \"class\": \"download\",\n                        \"download\": \"network.json\"\n                    }).append(\n                        $(\"<img>\").attr('src', \"img/gui/export.svg\")\n                    ).append(\" expanded JSON\")\n                );\n                $popup.append(\n                    $(\"<a>\").attr({\n                        \"href\": getJSONString(parentSVG.exportData, false, true),\n                        \"class\": \"download\",\n                        \"download\": \"network.min.json\"\n                    }).append(\n                        $(\"<img>\").attr('src', \"img/gui/export.svg\")\n                    ).append(\" compact JSON\")\n                );\n\n                lity($popup);\n\n                // highlight the text in the textblock\n                $textblock.select();\n            }, parentSVG)\n        );\n\n        /* HELP */\n\n        let help = new FloatingButton(\"help\", \"Display a help page\", false, parentSVG);\n        help.$el.attr({\n            'href': './docs/user.html',\n            'data-lity': ''\n        });\n        this.append(help);\n\n        parentSVG.$svg.after(this.$el);\n    }\n\n    /**\n     * append a FloatingButton to this menu\n     * @param  {FloatingButton} menuItem append an instance of  {@link FloatingButton} to this menu\n     */\n    append(menuItem) {\n        this.$el.append(menuItem.$el);\n    }\n}\n","\"use strict\";\n\n/**\n * @module HelperFunctions\n */\n\n/**\n * add a cross browser event listener on a mouse scroll\n * @param {string} query DOM query of the element that the listener will be added to\n * @param {Function} func  Function that will be called when the event occurs. The function takes as a parameter an event object.\n */\nexport function addMouseScrollEventListener(query, func) {\n    let MouseWheelHandler = event => {\n        // redeclare for old IE support\n        var event = window.event || event; // eslint-disable-line no-redeclare\n\n        event.delta = Math.max(-1, Math.min(1, (event.wheelDelta || -event.detail)));\n\n        func(event)\n\n        return false;\n    }\n\n    let svgelement;\n\n    // if the query is a simple DOM id selector, we can use getElementById which has better backwards compatibility\n    if(query.match(/^#\\w+$/)) {\n        svgelement = document.getElementById(query.substr(1))\n    } else {\n        svgelement = document.querySelector(query)\n    }\n\n    if (svgelement.addEventListener) {\n        // IE9, Chrome, Safari, Opera\n        svgelement.addEventListener(\"mousewheel\", MouseWheelHandler, false);\n        // Firefox\n        svgelement.addEventListener(\"DOMMouseScroll\", MouseWheelHandler, false);\n    } else  {\n        // IE 6/7/8\n        svgelement.attachEvent(\"onmousewheel\", MouseWheelHandler);\n    }\n    svgelement.addEventListener('mousewheel', function(e) {\n        console.log('event', e)\n    }, false)\n}\n\n/**\n * convert a data object to JSON string or to a data URI containing a JSON string\n * @param  {Object}  data            object that will be serialized into a JSON string\n * @param  {Boolean} [pretty=false]  if `true`, the code will be proprerly indented, else a more compact syntax will be used\n * @param  {Boolean} [dataUri=false] return dataUri containing the JSON string instead of the pure JSON string\n * @return {string}\n */\nexport function getJSONString(data, pretty = false, dataUri = false) {\n    if(dataUri) {\n        return 'data:application/json;charset=utf-8,'\n            + encodeURIComponent(getJSONString(data, pretty));\n    } else {\n        switch (pretty) {\n            case true:\n                return JSON.stringify(data, null, 2);\n            case false:\n                return JSON.stringify(data);\n        }\n    }\n}\n","/** @module Id */\n\n/**\n * the current instance of Id\n * @type {Id}\n */\nlet existingIdInstance;\n\n/**\n * singleton to generate unique id's\n *\n * usage: `let id = new Id().unique`\n */\nexport default class Id {\n    constructor() {\n        if(!existingIdInstance){\n            existingIdInstance = this;\n        }\n\n        /**\n         * prefix for the id, that is common in all the Ids\n         * @type {String}\n         */\n        this.prefix = \"id\";\n\n        /**\n         * numeric part of the next id (the next id without the prefix)\n         * @type {number}\n         */\n        this.nextId = 0;\n\n        return existingIdInstance;\n    }\n\n    /**\n     * get unique ID\n     * @return {string} new unique ID\n     */\n    get unique() {\n        let retVal = this.prefix + this.nextId;\n\n        // find next unused idXXXX to prevent id collision that might be caused by some other component\n        // (it really should not happen, but this is a simple way to ensure it)\n        while($(\"#\"+retVal).length) {\n            this.nextId++;\n            retVal = this.generate();\n        }\n        // return this id\n        this.nextId++;\n\n        return retVal;\n    }\n}\n","\"use strict\";\n\n/** @module Logic */\n/**\n * definitions of logic states and basic logic functions used in the simulation\n */\nexport default class Logic {\n    /**\n     * Enum for logic states.\n     *\n     * States:\n     * - `unknown`\n     * - `on`\n     * - `off`\n     * - `oscillating`\n     * @type {Number}\n     */\n    static get state() {\n        return {\n            unknown: 0,\n            on: 1,\n            off: 2,\n            oscillating: 3\n        }\n    }\n\n    /**\n     * list of all states that can be used in the simulation\n     *\n     * This getter iterates over Logic.state and returns an array containing all values of Logic.state's members\n     * @type {Array}\n     */\n    static get stateList() {\n        let states = [];\n\n        // iterate over all defined states and add their values to the states array\n        Object.keys(Logic.state).forEach(key => {\n            states.push(Logic.state[key]);\n        });\n\n        return states;\n    }\n\n    /**\n     * Logic AND\n     * @param  {Logic.state} a first input state\n     * @param  {Logic.state} b second input state\n     * @return {Logic.state}   output state\n     */\n    static and(a, b) {\n        return Logic.runSymmetricRules(a, b, [\n            [Logic.state.on, Logic.state.on, Logic.state.on],\n            [Logic.state.on, Logic.state.off, Logic.state.off],\n            [Logic.state.on, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.on, Logic.state.oscillating, Logic.state.oscillating],\n\n            [Logic.state.off, Logic.state.off, Logic.state.off],\n            [Logic.state.off, Logic.state.unknown, Logic.state.off],\n            [Logic.state.off, Logic.state.oscillating, Logic.state.off],\n\n            [Logic.state.unknown, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.unknown, Logic.state.oscillating, Logic.state.unknown],\n\n            [Logic.state.oscillating, Logic.state.oscillating, Logic.state.oscillating]\n        ]);\n    }\n    /**\n     * Logic NAND\n     * @param  {Logic.state} a first input state\n     * @param  {Logic.state} b second input state\n     * @return {Logic.state}   output state\n     */\n    static nand(a, b) {\n        return Logic.not(Logic.and(a, b));\n    }\n\n    /**\n     * Logic NOR\n     * @param  {Logic.state} a first input state\n     * @param  {Logic.state} b second input state\n     * @return {Logic.state}   output state\n     */\n    static nor(a, b) {\n        return Logic.not(Logic.or(a, b));\n    }\n\n    /**\n     * Logic NOT\n     * @param  {Logic.state} a first input state\n     * @return {Logic.state}   output state\n     */\n    static not(a) {\n        if(a === Logic.state.on) {\n            return Logic.state.off;\n        } else if (a === Logic.state.off) {\n            return Logic.state.on;\n        } else {\n            return a;\n        }\n    }\n\n    /**\n     * Logic OR\n     * @param  {Logic.state} a first input state\n     * @param  {Logic.state} b second input state\n     * @return {Logic.state}   output state\n     */\n    static or(a, b) {\n        return Logic.runSymmetricRules(a, b, [\n            [Logic.state.on, Logic.state.on, Logic.state.on],\n            [Logic.state.on, Logic.state.off, Logic.state.on],\n            [Logic.state.on, Logic.state.unknown, Logic.state.on],\n            [Logic.state.on, Logic.state.oscillating, Logic.state.on],\n\n            [Logic.state.off, Logic.state.off, Logic.state.off],\n            [Logic.state.off, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.off, Logic.state.oscillating, Logic.state.oscillating],\n\n            [Logic.state.unknown, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.unknown, Logic.state.oscillating, Logic.state.unknown],\n\n            [Logic.state.oscillating, Logic.state.oscillating, Logic.state.oscillating]\n        ]);\n    }\n\n    /**\n     * Logic XNOR\n     * @param  {Logic.state} a first input state\n     * @param  {Logic.state} b second input state\n     * @return {Logic.state}   output state\n     */\n    static xnor(a, b) {\n        return Logic.not(Logic.xor(a, b));\n    }\n\n    /**\n     * Logic XOR\n     * @param  {Logic.state} a first input state\n     * @param  {Logic.state} b second input state\n     * @return {Logic.state}   output state\n     */\n    static xor(a, b) {\n        return Logic.runSymmetricRules(a, b, [\n            [Logic.state.on, Logic.state.on, Logic.state.off],\n            [Logic.state.on, Logic.state.off, Logic.state.on],\n            [Logic.state.on, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.on, Logic.state.oscillating, Logic.state.oscillating],\n\n            [Logic.state.off, Logic.state.off, Logic.state.off],\n            [Logic.state.off, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.off, Logic.state.oscillating, Logic.state.oscillating],\n\n            [Logic.state.unknown, Logic.state.unknown, Logic.state.unknown],\n            [Logic.state.unknown, Logic.state.oscillating, Logic.state.unknown],\n\n            [Logic.state.oscillating, Logic.state.oscillating, Logic.state.oscillating]\n        ]);\n    }\n\n    /**\n     * Finds the correct rule in the array of rules and returns the corresponding return value.\n     * This function expects rules to be symmetric (so `a RULE b` should returns the same value as `b RULE a`),\n     * which allows to cut down on the `rules` array quite a bit\n     * @param  {Logic.state} a     first input state\n     * @param  {Logic.state} b     second input state\n     * @param  {Array} rules       Array of arrays. Each inner array represents a rule in the format [input1, input2, output].\n     *                             The function finds an array, where `a === input1` and `b === input1` (or `a === input2` and `b === input1`)\n     *                             and returns `output` from this array.\n     * @return {Logic.state}       output state\n     */\n    static runSymmetricRules(a, b, rules) {\n        // iterate through all the rules\n        for (const rule of rules) {\n            if ((rule[0] === a && rule[1] === b) || (rule[0] === b && rule[1] === a)) {\n                return rule[2];\n            }\n        }\n\n        // if no rule matches, the output state is unknown\n        return Logic.state.unknown;\n    }\n}\n","import Canvas from './canvas.js';\n\n/**\n * When the document is ready, initialize the application\n */\n$(() => {\n    new Canvas(\"#canvas\", 10);\n});\n","/** @module MapWithDefaultValue */\n/**\n * Map that has a default value specified in the constructor.\n *\n * For the complete documentation of the Map see [Map in the MDN web docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)\n *\n * _Note: This version is written specially for ES6 compiled into ES5. In non-compiled ES6 is the implementation far simpler:_\n *\n * ```JavaScript\n export class MapWithDefaultValue extends Map {\n     constructor(defaultValue) {\n         super();\n\n         this.default = defaultValue;\n     }\n\n     get(key) {\n         if(this.has(key)) {\n             return super.get(key);\n         } else {\n             return this.default;\n         }\n     }\n }```\n */\nexport default class MapWithDefaultValue {\n    /**\n     * @param defaultValue the value that will be returned on get(key) when the key is not found in the map\n     */\n    constructor(defaultValue) {\n        this.map = new Map();\n        this.default = defaultValue;\n    }\n\n    get size() {\n        return this.map.size;\n    }\n\n    clear() {\n        return this.map.clear();\n    }\n\n    forEach(...args) {\n        return this.map.forEach(...args);\n    }\n\n    get(key) {\n        return this.map.get(key);\n    }\n\n    delete(key) {\n        return this.map.delete(key);\n    }\n\n    set(key, value) {\n        return this.map.set(key, value);\n    }\n\n    has(key) {\n        return this.map.has(key);\n    }\n\n    entries() {\n        return this.map.entries();\n    }\n\n    keys() {\n        return this.map.keys();\n    }\n\n    values() {\n        return this.map.values();\n    }\n}\n","/**\n * @module Library\n */\n\nconst libraryDir = './library/'\n\n/**\n * get list of networks from the library\n * @return {Promise} promise, the resolution is an object containing a list of libraries\n */\nexport function getLibrary() {\n    return new Promise((resolve, reject) => {\n        const libraryFile = libraryDir + 'networkList.json';\n\n        let request = new XMLHttpRequest();\n\n        request.addEventListener(\"load\", function() {\n            if(this.response) {\n                resolve(this.response.networks);\n            }\n        });\n\n        request.addEventListener([\"error\", \"abort\"], () => {\n            reject(\"Failed loading libraries.\")\n        });\n\n        request.open('GET', libraryFile, true);\n        request.responseType = 'json';\n        request.send();\n    });\n}\n\n/**\n * get a network from the library, specified by filename\n * @param  {string} networkName library file name without the extension\n * @return {Promise} promise, the resolution is an object containing the library import data\n */\nexport function getNetworkFromLibrary(networkName) {\n    return new Promise((resolve, reject) => {\n        let request = new XMLHttpRequest();\n\n        request.addEventListener(\"load\", function() {\n            if(this.response) {\n                resolve(this.response);\n            }\n        });\n\n        request.addEventListener([\"error\", \"abort\"], () => {\n            reject(`Failed loading library ${networkName}.`)\n        });\n\n        request.open('GET', libraryDir + networkName + '.json', true);\n        request.responseType = 'json';\n        request.send();\n    });\n}\n","import Logic from './logic.js'\n\n/**\n * @module Simulation\n */\n\n\nclass stateChange {\n    constructor(connectorId, state, whoCausedIt) {\n        this.connectorId = connectorId\n        this.state = state\n        this.whoCausedIt = whoCausedIt\n    }\n}\n\n/**\n * This class runs the network simulation.\n *\n * _note: all connectors that are used in this class are **output connectors**_\n */\nexport default class Simulation {\n    /**\n     * @param {Canvas} parentSVG instance of [Canvas](./module-Canvas.html)\n     */\n    constructor(parentSVG) {\n        /**\n         * instance of Canvas this Simulation belongs to\n         * @type {Canvas}\n         */\n        this.parentSVG = parentSVG\n\n        /**\n         * maps each affected output connector to it's directly preceeding output connectors\n         * @type {Map}\n         */\n        this.predecessors = new Map();\n\n        /**\n         * maps waveId to an array of affected outputConnectors\n         * @type {Map}\n         */\n        this.waves = new Map();\n        this.wave = 0\n\n        /**\n         * maps cycled connector id to set of states this connector was in\n         * @type {Map}\n         */\n        this.cycledConnectors = new Map()\n\n        /**\n         * set of cycled connectors that have been already resolved\n         * @type {Set}\n         */\n        this.resolvedCycledConnectors = new Set()\n\n    }\n\n    /**\n     * run the simulation\n     */\n    run() {\n        this.wave++;\n        while(this.waves.has(this.wave)) {\n            this.step()\n            this.waves.delete(this.wave) // clean old waves on the go\n            this.wave++\n        }\n    }\n\n    /**\n     * one step/wave of the simulation\n     *\n     * determines states of the connectors in the current wave, detects cycles\n     */\n    step() {\n        for (let {connectorId, state, whoCausedIt} of this.waves.get(this.wave)) {\n            // skip resolved cycles\n            if(this.resolvedCycledConnectors.has(connectorId)) {\n                continue\n            }\n\n            // skip connector that are cycles\n            if (this.cycledConnectors.has(connectorId)) {\n                // get the set of states that this connector appeared from the moment the signal first cycled\n                let states = this.cycledConnectors.get(connectorId)\n\n                // if the connector already had this state in this cycle, resolve the cycle\n                if(states.has(state)) {\n\n                    // if there are more states in the set, the connector is oscillating\n                    // (else it keeps its state and we just break the cycle)\n                    if(states.size > 1) {\n                        state = Logic.state.oscillating\n                    }\n\n                    // mark this connector as resolved\n                    this.resolvedCycledConnectors.add(connectorId)\n\n                // this is a new, unseen state, add it to the set and continue simulating the cycle\n                } else {\n                    states.add(state)\n                }\n\n                // map the modified set of states to the connector\n                this.cycledConnectors.set(connectorId, states)\n            }\n\n            this.whoCausedIt = connectorId\n            /*  process all outputConnectors by setting their state\n                this will trigger a following event chain:\n                    outputConnector changes\n                    -> all connected wires change\n                    -> all inputConnectors connected to these wires change\n                    -> all elements that contain these inputConnectors change\n                    -> these elements compute the new state of their output connectors and call notifyChange()\n            */\n\n\n            if(whoCausedIt) {\n                this.addPredecessor(connectorId, whoCausedIt)\n            }\n\n            if (!this.cycledConnectors.has(connectorId) && this.getAllPredecessors(connectorId).has(connectorId)) {\n                this.cycledConnectors.set(connectorId, new Set([state]))\n            }\n\n\n            // reflect the changes in SVG\n            let connector = this.parentSVG.getConnectorById(connectorId)\n            if(connector) {\n                connector.setState(state)\n            }\n        }\n        this.whoCausedIt = undefined\n    }\n\n    /**\n     * mark a predecessorConnectorId as a predecessor of connectorId\n     * @param {string} connectorId ID of a connector\n     * @param {string} predecessorConnectorId predecessor of `connectorId`\n     */\n    addPredecessor(connectorId, predecessorConnectorId) {\n        if(!this.predecessors.has(connectorId)) {\n            this.predecessors.set(connectorId, new Set())\n        }\n\n        this.predecessors.get(connectorId).add(predecessorConnectorId)\n    }\n\n    /**\n     * get set of all output connectors that are before this output connector\n     * @param  {string} connectorId ID of a connector\n     * @return {Set}                set of connector ids that are before this output connector\n     */\n    getAllPredecessors(connectorId) {\n        if(!this.predecessors.has(connectorId)) {\n            this.predecessors.set(connectorId, new Set())\n        }\n\n        let all = new Set()\n\n        this.predecessors.get(connectorId).forEach(all.add, all);\n\n        let prevSize = 0\n        let size = all.size\n        while(prevSize < size) {\n            for (let connector of all) {\n                if (this.predecessors.has(connector)) {\n                    this.predecessors.get(connector).forEach(all.add, all);\n                }\n            }\n            prevSize = size\n            size = all.size\n        }\n\n        return all\n    }\n\n    /**\n     * Notify a change in the network. This function adds the changed connector to the next wave\n     * @param  {string} connectorId ID of the changed connector\n     * @param  {Logic.state} state  new [Logic.state](./module-Logic.html#.state) of the connector\n     */\n    notifyChange(connectorId, state) {\n        let waveId = this.wave + 1\n\n        if(!this.waves.has(waveId)) {\n            this.waves.set(waveId, [])\n        }\n\n        this.waves.get(waveId).push(new stateChange(connectorId, state, this.whoCausedIt));\n    }\n}\n","import Id from './id.js'\n\n/**\n * Parent class for all svgObjects\n */\nclass Tag {\n    /**\n     * @param {string} tagName SVG tag identifier (`rect`, `image`, `polyline`)\n     */\n    constructor(tagName) {\n        /**\n         * SVG tag identifier (`rect`, `image`, `polyline`)\n         * @type {string}\n         */\n        this.tagName = tagName;\n\n        /**\n         * jQuery element for this tag\n         * @type {jQuery.element}\n         */\n        this.$el = $(\"<\"+this.tagName+\">\");\n\n        /**\n         * unique ID of this SVG object\n         * @type {string}\n         */\n        this.id = new Id().unique;\n    }\n\n    /**\n     * add a class to this element\n     * @param {string} name class name to be added\n     */\n    addClass(name) {\n        this.$el.addClass(name);\n    }\n\n    /**\n     * remove class names from this element\n     * @param  {string} classes class names to be removed\n     */\n    removeClasses(...classes) {\n        for(let item of classes) {\n            this.$el.removeClass(item);\n        }\n    }\n\n    /**\n     * set attributes of this element\n     * @param {Object} assoc javascript object that will be mapped into attributes (`{key: value}` -> `key=\"value\"`)\n     */\n    addAttr(assoc) {\n        this.checkIfElementExistsInDOM();\n\n        // add attributes to the element\n        this.$el.attr(assoc);\n    }\n\n    /**\n     * get attribute value by name\n     * @param  {string} name name of the attribute\n     * @return {string}      value of the attribute\n     */\n    getAttr(name) {\n        this.checkIfElementExistsInDOM();\n\n        return this.$el.attr(name);\n    }\n\n    /**\n     * remove attribute by value\n     * @param  {string} name name of the attribute to be removed\n     */\n    removeAttr(name) {\n        this.checkIfElementExistsInDOM();\n\n        this.$el.removeAttr(name);\n    }\n\n    /**\n     * set id of this SVG object\n     * @param  {string} id new id for this object\n     */\n    set id(id) {\n        this.addAttr({\"id\": id});\n    }\n\n    /**\n     * get id of this SVG object\n     * @return {string}\n     */\n    get id() {\n        return this.getAttr(\"id\");\n    }\n\n    /**\n     * get jQuery element for this SVG object\n     * @return {jQuery.element}\n     */\n    get() {\n        this.checkIfElementExistsInDOM();\n        return this.$el;\n    }\n\n    /**\n     * check if the element exists in dom, if so, refetch it from DOM using jQuery\n     */\n    checkIfElementExistsInDOM() {\n        let $jqElement = $(\"#\"+this.$el.attr('id'));\n        if($jqElement.length) {\n            this.$el = $jqElement;\n        }\n    }\n}\n\n/**\n * represents visible element in SVG that has position and dimensions (for example `rectangle` is a SvgElement, but `pattern` is not, even though both are tags)\n * @extends Tag\n */\nclass SvgElement extends Tag {\n    /**\n     * @param {number} x       horizontal position in SVG pixels\n     * @param {number} y       vertical position in SVG pixels\n     * @param {number} w       width in SVG pixels\n     * @param {number} h       height in SVG pixels\n     * @param {string} tagName tag name of the element\n     */\n    constructor(x, y, w, h, tagName) {\n        super(tagName);\n\n        this.addAttr({\n            x: x,\n            y: y,\n            width: w,\n            height: h\n        });\n    }\n}\n\n/**\n * a rectangle in SVG\n * @extends SvgElement\n */\nexport class Rectangle extends SvgElement {\n    constructor(x, y, w, h, fill, stroke) {\n        super(x, y, w, h, \"rect\");\n        this.addAttr({\n            fill: fill,\n            stroke: stroke,\n            'stroke-width': 0.5,\n            'pointer-events': 'all' // to trigger hover even with transparent background\n        });\n    }\n}\n\n/**\n * an image in SVG\n * @extends SvgElement\n */\nexport class SvgImage extends SvgElement {\n    constructor(x, y, w, h, url) {\n        super(x, y, w, h, \"image\");\n        this.addAttr({\n            \"xlink:href\": url\n        });\n    }\n\n    /**\n     * change url of the image\n     * @param {string} url the new url of the image\n     */\n    changeUrl(url) {\n        this.addAttr({\n            \"xlink:href\": url\n        });\n    }\n}\n\n/**\n * SVG group, used for grouping elements, for example a gate is represented by many elements (rectangle, image, inivisible hitbox rectangle...),\n * but all of the elements need to be transformed together. Using groups the transform property can be set on the group which contains all the elements.\n * @extends Tag\n */\nexport class Group extends Tag {\n    constructor() {\n        super(\"g\");\n    }\n\n    /**\n     * add an element to the group\n     * @param {SvgElement} el an instance of {@link SvgElement}\n     */\n    addChild(el) {\n        this.$el.append(el.$el);\n        return el; // pro jednodussi \"let rect = g.addChild(new Rectangle(...\"\n    }\n}\n\n/**\n * one point of {@link PolylinePoints}, used in the {@link PolyLine} object\n */\nexport class PolylinePoint {\n    /**\n     * @param {number} x horizontal coordinate of the polyline point\n     * @param {number} y vertical coordinate of the polyline point\n     */\n    constructor(x, y) {\n        this.x = 0;\n        this.y = 0;\n        if(x !== undefined && y !== undefined) {\n            this.x = x;\n            this.y = y;\n        }\n    }\n\n    /**\n     * change the coordinates of this point\n     * @param {number} x horizontal coordinate of the polyline point\n     * @param {number} y vertical coordinate of the polyline point\n     */\n    set(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    /**\n     * create polyline from a comma separated string (e.g. from a string formatted like this: \"x,y\", for example \"15,8\")\n     * @param  {string} string string in the format \"x,y\" representing a point in the SVG polyline\n     * @return {PolylinePoint} newly created instance of {@link PolylinePoint}\n     */\n    static parseFromString(string) {\n        let arr = string.split(\",\");\n        return new PolylinePoint(arr[0], arr[1]);\n    }\n\n    /**\n     * return a string representation of this polyline point\n     * @return {string} string in the format \"x,y\"\n     */\n    get string() {\n        return this.x + \",\" + this.y;\n    }\n\n    /**\n     * compare polyline points, return `true` if they are equal, else return `false`\n     * @param  {PolylinePoint} a\n     * @param  {PolylinePoint} b\n     * @return {boolean}\n     */\n    static equals(a, b) {\n        return a.x === b.x && a.y === b.y;\n    }\n}\n\n/**\n * array-like structure used in {@link PolylinePoints}\n */\nclass SmartArray {\n    /**\n     * @param {Array} [arr] if set, initialized SmartArray will contain these values\n     */\n    constructor(arr) {\n        if(arr !== undefined) {\n            this.arr = arr;\n        } else {\n            this.arr = [];\n        }\n    }\n\n    /**\n     * get a deep copy of this array\n     * @return {SmartArray}\n     */\n    copy() {\n        return SmartArray($.extend(true, [], this.arr));\n    }\n\n    /**\n     * append an item to the array\n     * @param item new item that will be appended to the array\n     */\n    append(item) {\n        return this.addWithIndex(item, this.arr.length);\n    }\n\n    /**\n     * prepend an item to the array\n     * @param item new item that will be prepended to the array\n     */\n    prepend(item) {\n        return this.addWithIndex(item, 0);\n    }\n\n    /**\n     * add a new item at the specified index, move all following items\n     * @param item new item that will be added at the specified index\n     * @param {number} index index of this item\n     */\n    addWithIndex(item, index) {\n        for(let i = this.arr.length ; i > index ; --i) {\n            this.arr[i] = this.arr[i-1];\n        }\n        this.arr[index] = item;\n        return this; // to enable chaining of append / preppend / addWithIndex commands\n    }\n\n    /**\n     * get length of the array\n     * @return {number}\n     */\n    get length() {\n        return this.arr.length;\n    }\n\n    /**\n     * get item by index\n     * @param  {number} index index of the item\n     * @return contents of the array on the specified index\n     */\n    getItem(index) {\n        return this.arr[index];\n    }\n\n    /**\n     * @return last element of the array\n     */\n    get last() {\n        if(this.length!==0) {\n            return this.arr[this.length - 1];\n        } else {\n            return false;\n        }\n    }\n\n    /**\n     * @return first element of the array\n     */\n    get first() {\n        if(this.length!==0) {\n            return this.arr[0];\n        } else {\n            return false;\n        }\n    }\n\n    /**\n     * remove an item from the array by index\n     * @param  {number} index index of the item that will be removed\n     */\n    remove(index) {\n        let length = this.length;\n\n        for(let i = index ; i < length ; ++i) {\n            this.arr[i] = this.arr[i + 1];\n        }\n        this.arr.pop();\n    }\n}\n\n/**\n * points of the {@link PolyLine}\n * @extends SmartArray\n */\nexport class PolylinePoints extends SmartArray {\n    /**\n     * @param {Array} [arr] array containing instances of {@link PolylinePoint}\n     */\n    constructor(arr) {\n        super(arr);\n    }\n\n    /**\n     * get a deep copy of this object\n     * @return {PolylinePoints}\n     */\n    copy() {\n        return new PolylinePoints($.extend(true, [], this.arr));\n    }\n\n    /**\n     * append a point\n     * @param  {PolylinePoint} point a new point\n     */\n    append(point) {\n        // call inherited function to handle the appending\n        super.append(point);\n\n        // if the second to last point is unnecessary, remove it\n        let length = this.length;\n        if ( length >= 3\n                && (    ( this.getItem(length - 3).x === this.getItem(length - 2).x &&\n                          this.getItem(length - 2).x === this.getItem(length - 1).x )\n                     || ( this.getItem(length - 3).y === this.getItem(length - 2).y &&\n                          this.getItem(length - 2).y === this.getItem(length - 1).y )\n                   )\n           )\n        {\n            this.remove(length - 2);\n        }\n\n        // return this element (to allow chaining)\n        return this;\n    }\n\n    /**\n     * parse polyline from string\n     * @param  {string} string string in the polyline format (`x1,y1 x2,y2, x3,y3`)\n     * @return {PolylinePoints} a new instance of {@link PolylinePoints} created by parsing the string\n     */\n    static parseFromString(string) {\n        let pointStrings = string.split(\" \");\n        let points = new PolylinePoints();\n\n        for(let i = 0 ; i < pointStrings.length ; ++i) {\n            points.append(PolylinePoint.parseFromString(pointStrings[i]));\n        }\n\n        return points;\n    }\n\n    /**\n     * get a string representation of this polyline\n     * @return {string} string in the polyline format (`x1,y1 x2,y2, x3,y3`)\n     */\n    get string() {\n        let string = \"\";\n        for(let i = 0 ; i < this.length ; ++i) {\n            if(i !== 0) {\n                string += \" \";\n            }\n            string += this.arr[i].string;\n        }\n        return string;\n    }\n\n    /**\n     * wrapper for foreach on the polyline points\n     * @param  {Function} func function that will be called on each element\n     */\n    forEach(func) {\n        for(let i = 0 ; i < this.arr.length ; ++i) {\n            func(this.arr[i]);\n        }\n    }\n}\n\n/**\n * SVG polyline (a path defined by sequence of points on plane)\n * @extends Tag\n */\nexport class PolyLine extends Tag {\n    /**\n     * @param {PolylinePoints} points points describing this polyline\n     * @param {string} color CSS color of this polyline\n     * @param {number} strokeWidth width of the stroke for this polyline in SVG pixels\n     */\n    constructor(points, color, strokeWidth) {\n        super(\"polyline\");\n\n        this.addAttr({\n            points: points.string,\n            stroke: color,\n            fill: \"none\",\n            \"stroke-width\": strokeWidth\n        });\n    }\n\n    /**\n     * update points of this polyline\n     * @param {PolylinePoints} points new set of points describing this polyline\n     */\n    updatePoints(points) {\n        this.addAttr({\n            points: points.string\n        });\n    }\n}\n\n/**\n * Text element in SVG\n * @extends Tag\n */\nexport class Text extends Tag {\n    /**\n     * @param {number} x       horizontal position in SVG pixels\n     * @param {number} y       vertical position in SVG pixels\n     * @param {number} w       width of the text box in SVG pixels\n     * @param {number} h       height of the text box in SVG pixels\n     * @param {number} text    text content of the text box\n     * @param {string} size    CSS font size of the text\n     * @param {String} [color=\"black\"] color of the text\n     *\n     */\n    constructor(x, y, w, h, text, size, color = \"black\") {\n        super(\"text\");\n        this.addAttr({\n            x: x,\n            y: y,\n            width: w,\n            height: h,\n            fill: color\n        });\n\n        if(size) {\n            this.addAttr({\n                'font-size': size\n            })\n        }\n\n        this.$el.append(text);\n    }\n}\n\n/**\n * Multi line text element in SVG\n *\n * Multi line text is not natively supportend in SVG 1.1,\n * the workaround is to use the <foreignObject> element and display\n * a HTML paragraph inside of the SVG document.\n *\n * Because this technique is not supported by all of the browsers,\n * the foreignObject element is wrapped in <switch>, which\n * provides fallback for those cases.\n *\n * read more: [foreignObject on MDN web docs](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/foreignObject)\n *\n * @extends Tag\n */\nexport class MultiLineText extends Tag {\n    /**\n     * @param {number} x       horizontal position in SVG pixels\n     * @param {number} y       vertical position in SVG pixels\n     * @param {number} w       width of the text box in SVG pixels\n     * @param {number} h       height of the text box in SVG pixels\n     * @param {number} text    text content of the text box\n     * @param {string} size    CSS font size of the text\n     * @param {String} [color=\"black\"] color of the text\n     *\n     */\n    constructor(x, y, w, h, text, size, color = \"black\") {\n        super(\"switch\");\n\n        let foreignObject = new Tag(\"foreignObject\");\n        let alternativeText = new Text(x, y, w, h, text, size, color);\n\n        foreignObject.addAttr({\n            x,\n            y,\n            width: w,\n            height: h\n        });\n\n        foreignObject.$el.append(\n            $(`<p class=\"multilinetext\" xmlns=\"http://www.w3.org/1999/xhtml\" style=\"font-size:${size}px\">`).append(text)\n        )\n\n        this.$el.append(\n            foreignObject.$el\n        ).append(\n            alternativeText.$el\n        )\n    }\n\n}\n\n/**\n * pattern object in SVG\n * @extends Tag\n */\nexport class Pattern extends Tag {\n    /**\n     * @param {string} id     unique id of this pattern\n     * @param {number} width  width of one pattern tile in SVG pixels\n     * @param {number} height height of one pattern tile in SVG pixels\n     */\n    constructor(id, width, height) {\n        super(\"pattern\");\n\n        this.addAttr({\n            id: id,\n            x: 0,\n            y: 0,\n            width: width,\n            height: height,\n            patternUnits: \"userSpaceOnUse\",\n            viewBox: \"0 0 \"+width+\" \"+height\n        });\n    }\n\n    /**\n     * add a child to this pattern\n     *\n     * pattern behaves a little like {@link Group} - it contains child elements, which represent the content of one tile of the pattern\n     * and the whole package of the child elements is repeated on each tile of the pattern\n     * @param {SvgElement} el element that will be added to the pattern\n     */\n    addChild(el) {\n        this.$el.append(el.$el);\n        return el;\n    }\n}\n","export default class Tutorial {\n    constructor(parentSVG, onTutorialClosed) {\n        this.parentSVG = parentSVG;\n        this.currentStep = 0;\n\n        this.$tutorialWindow;\n        this.$tutorialContent;\n\n        this.steps = [() => { this.closeWindow(onTutorialClosed) }];\n\n        this.setUpTutorial();\n\n        this.resetActions();\n    }\n\n    get step() {\n        return this.currentStep;\n    }\n\n    resetActions() {\n        this.onContextMenuOpened = () => {};\n        this.onElementAdded = () => {};\n        this.onBoxMoved = () => {};\n        this.onBoxRotated = () => {};\n        this.onOutputBoxTrue = () => {};\n        this.onCanvasMoved = () => {};\n        this.onCanvasZoomed = () => {};\n        this.onElementRemoved = () => {};\n        this.onChangeInputBoxState = () => {};\n    }\n\n    setUpTutorial() {\n        this.steps.push(\n            () => { this.stepWelcome() },\n            () => { this.stepAddBoxes() },\n            () => { this.stepMoveCanvas() },\n            () => { this.stepZoomCanvas() },\n            () => { this.stepMoveBoxes() },\n            () => { this.stepWiring() },\n            () => { this.switchInputBox() },\n            () => { this.stepRemoveBox() },\n            () => { this.stepFinish() }\n        )\n    }\n\n    stepWelcome() {\n        this.windowContent(\n            `Welcome to Hradla! To get started, click anywhere on the editing area with your right mouse button.`\n        )\n\n        this.onContextMenuOpened = () => {\n            this.next();\n\n            // this function runs only once\n            this.onContextMenuOpened = () => {}\n        }\n    }\n\n    stepAddBoxes() {\n        this.windowContent(\n            `Great job! Now you know, how to open the editor menu.\n            Now try to add an <em>Input box</em>, <em>Output box</em> and a <em>NOT gate</em>\n            to the editing area.`)\n\n        let elementsAdded = {\n            inputBox: false,\n            outputBox: false,\n            notGate: false\n        }\n\n        this.onElementAdded = (name) => {\n            switch (name) {\n                case \"input\":\n                    elementsAdded.inputBox = true;\n                    break;\n                case \"output\":\n                    elementsAdded.outputBox = true;\n                    break;\n                case \"not\":\n                    elementsAdded.notGate = true;\n                    break;\n                default:\n                    // no action on default\n                    break;\n            }\n\n            if(elementsAdded.inputBox && elementsAdded.outputBox && elementsAdded.notGate) {\n                // remove the action\n                this.onElementAdded = () => {}\n\n                // proceed to the next step of the tutorial\n                this.next();\n            }\n        };\n    }\n\n    stepMoveCanvas() {\n        this.windowContent(\n            `You can move the editing area (sometimes called canvas) by dragging\n            with the middle mouse button or by holding the <code>Ctrl</code> key\n            and dragging with the left mouse button. Check it out.`)\n\n        this.onCanvasMoved = () => {\n            this.next();\n            this.onCanvasMoved = () => {}\n        }\n    }\n\n    stepZoomCanvas() {\n        this.windowContent(\n            `You can also zoom in and out using <code>Ctrl</code> and the mouse wheel.`\n        )\n\n        this.onCanvasZoomed = () => {\n            this.next();\n            this.onCanvasZoomed = () => {};\n        }\n    }\n\n    stepMoveBoxes() {\n        this.windowContent(`You can move the elements on the editing canvas by dragging them\n            using the left mouse button. You can also rotate them using middle click. Try it out.`)\n\n        let boxMoved = false;\n        let boxRotated = false;\n\n        let moveRotateCallback = () => {\n            if(boxMoved && boxRotated) {\n                this.next();\n            }\n        }\n\n        this.onBoxMoved = () => {\n            boxMoved = true;\n\n            this.onBoxMoved = () => {}\n\n            moveRotateCallback()\n        }\n\n        this.onBoxRotated = () => {\n            boxRotated = true;\n\n            this.onBoxRotated = () => {}\n\n            moveRotateCallback()\n        }\n    }\n\n    stepWiring() {\n        this.windowContent(`Essential part of logic networks is the wiring. Create a very simple\n            inverter by connecting the <em>Input box</em> to the input of the <em>NOT gate</em>\n            and the output of the <em>NOT gate</em> to the input of the <em>Output box</em>.`,\n            `To connect two elemnts, simply click on a connector of the first element,\n            than click on a conector of the second element.`)\n\n        this.onOutputBoxTrue = () => {\n            this.next();\n\n            this.onOutputBoxTrue = () => {};\n        };\n    }\n\n    switchInputBox() {\n        this.windowContent(`\n            The input boxes can be in two states: <em>ON</em> and <em>OFF</em>, signalled\n            by the green and red colors respectively. You can left click on an Input box to\n            switch its state. Try it out!\n        `)\n\n        this.onChangeInputBoxState = () => {\n            this.next();\n\n            this.onChangeInputBoxState = () => {};\n        };\n    }\n\n    stepRemoveBox() {\n        this.windowContent(\n            `When you right click on an element, you can find a new item in the menu,\n            that allows you to remove the element. This works for wires as well as for gates and other types of boxes.\n            Try to remove an element!`\n        )\n\n        this.onElementRemoved = () => {\n            this.next();\n\n            this.onElementRemoved = () => {};\n        }\n    }\n\n    stepFinish() {\n        this.windowContent(`You're all set, enjoy your stay!`,\n                           `Do you wish to start with empty canvas?`)\n        this.windowChoice(\n            {\n                text: 'yes, clean the canvas',\n                func: () => {\n                    this.parentSVG.cleanCanvas();\n                    this.stop();\n                }\n            },\n            {\n                text: 'no, keep the canvas as it is',\n                func: () => {\n                    this.stop();\n                }\n            }\n        )\n    }\n\n    set step(value) {\n        this.currentStep = value;\n\n        console.log(\"Tutorial step\", this.step)\n\n        if(this.step < this.steps.length) {\n            this.steps[this.step]();\n\n            if(this.step === 1)\n                this.displayWindow();\n        } else {\n            this.step = 0;\n        }\n    }\n\n    displayWindow() {\n        this.parentSVG.$svg.after(this.$tutorialWindow)\n    }\n\n    closeWindow(onTutorialClosed) {\n        this.$tutorialWindow.remove();\n\n        if(onTutorialClosed!==undefined) {\n            onTutorialClosed();\n        }\n    }\n\n    windowContent(...text) {\n        if(!this.$tutorialWindow) {\n            this.$tutorialWindow = $(\"<div>\").attr(\"id\", \"tutorial\");\n\n            this.$tutorialContent = $(\"<div>\").addClass(\"content\");\n            this.$tutorialWindow.append(this.$tutorialContent);\n        }\n\n        this.$tutorialContent.html(\"\");\n        for (const paragraph of text) {\n            this.$tutorialContent.append(\n                $(\"<p>\").html(paragraph)\n            );\n        }\n    }\n\n    windowChoice(...choices) {\n        let $choices = $(\"<ol>\").addClass(\"choices\");\n        for (const choice of choices) {\n            $choices.append(\n                $(\"<li>\").append(\n                    $(\"<a>\").attr(\"href\", \"#\").click(() => {\n                        choice.func()\n                    }).html(choice.text)\n                )\n            )\n        }\n        this.$tutorialContent.append($choices);\n    }\n\n    start() { this.step = 1; }\n    next() { this.step++; }\n    stop() { this.step = 0 }\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZXM2L2NhbnZhcy5qcyIsInNyYy9lczYvY29udGV4dE1lbnUuanMiLCJzcmMvZXM2L2VkaXRvckVsZW1lbnRzLmpzIiwic3JjL2VzNi9mbG9hdGluZ01lbnUuanMiLCJzcmMvZXM2L2hlbHBlckZ1bmN0aW9ucy5qcyIsInNyYy9lczYvaWQuanMiLCJzcmMvZXM2L2xvZ2ljLmpzIiwic3JjL2VzNi9tYWluLmpzIiwic3JjL2VzNi9tYXBXaXRoRGVmYXVsdFZhbHVlLmpzIiwic3JjL2VzNi9uZXR3b3JrTGlicmFyeS5qcyIsInNyYy9lczYvc2ltdWxhdGlvbi5qcyIsInNyYy9lczYvc3ZnT2JqZWN0cy5qcyIsInNyYy9lczYvdHV0b3JpYWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTs7Ozs7Ozs7OztBQUVBOztJQUFZLE07O0FBQ1o7O0lBQVksYzs7QUFDWjs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOztBQUNBOzs7Ozs7Ozs7O0FBRUE7OztJQUdNLE87QUFDRjs7Ozs7OztBQU9BLHFCQUFZLElBQVosRUFBa0IsR0FBbEIsRUFBdUIsS0FBdkIsRUFBOEIsTUFBOUIsRUFBc0M7QUFBQTs7QUFDbEM7Ozs7QUFJQSxhQUFLLElBQUwsR0FBWSxFQUFFLFVBQUYsRUFBUSxRQUFSLEVBQWEsWUFBYixFQUFvQjs7QUFFaEM7Ozs7QUFGWSxTQUFaLENBTUEsS0FBSyxPQUFMLEdBQWUsQ0FBZjtBQUNBOzs7O0FBSUEsYUFBSyxPQUFMLEdBQWUsR0FBZjs7QUFFQTs7OztBQUlBLGFBQUssUUFBTCxHQUFnQixDQUFoQjs7QUFFQTs7OztBQUlBLGFBQUssU0FBTCxHQUFpQixDQUFqQjtBQUNBOzs7O0FBSUEsYUFBSyxRQUFMLEdBQWdCLENBQWhCO0FBQ0g7O0FBRUQ7Ozs7Ozs7Ozs7QUF5REE7Ozs7O21DQUtXLEMsRUFBRztBQUNWLG1CQUFPLEtBQUssSUFB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QUEsMEJBQW5CLE1BQW1CO0FBUTdCO0FBVm9CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBV3JCLGlCQUFLLGdCQUFMLENBQXNCLE1BQXRCLENBQTZCLFFBQTdCO0FBQ0g7OztnQ0FFTztBQUFFLGlCQUFLLElBQUwsR0FBWSxDQUFaO0FBQWdCOzs7K0JBQ25CO0FBQUUsaUJBQUssSUFBTDtBQUFjOzs7K0JBQ2hCO0FBQUUsaUJBQUssSUFBTCxHQUFZLENBQVo7QUFBZTs7OzRCQS9QYjtBQUNQLG1CQUFPLEtBQUssV0FBWjtBQUNILFM7MEJBa01RLEssRUFBTztBQUNaLGlCQUFLLFdBQUwsR0FBbUIsS0FBbkI7O0FBRUEsb0JBQVEsR0FBUixDQUFZLGVBQVosRUFBNkIsS0FBSyxJQUFsQzs7QUFFQSxnQkFBRyxLQUFLLElBQUwsR0FBWSxLQUFLLEtBQUwsQ0FBVyxNQUExQixFQUFrQztBQUM5QixxQkFBSyxLQUFMLENBQVcsS0FBSyxJQUFoQjs7QUFFQSxvQkFBRyxLQUFLLElBQUwsS0FBYyxDQUFqQixFQUNJLEtBQUssYUFBTDtBQUNQLGFBTEQsTUFLTztBQUNILHFCQUFLLElBQUwsR0FBWSxDQUFaO0FBQ0g7QUFDSjs7Ozs7O2tCQWhPZ0IsUSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9cmV0dXJuIGV9KSgpIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCAqIGFzIHN2Z09iaiBmcm9tICcuL3N2Z09iamVjdHMuanMnXG5pbXBvcnQgKiBhcyBlZGl0b3JFbGVtZW50cyBmcm9tICcuL2VkaXRvckVsZW1lbnRzLmpzJ1xuaW1wb3J0IExvZ2ljIGZyb20gJy4vbG9naWMuanMnXG5pbXBvcnQgQ29udGV4dE1lbnUgZnJvbSAnLi9jb250ZXh0TWVudS5qcydcbmltcG9ydCBGbG9hdGluZ01lbnUgZnJvbSAnLi9mbG9hdGluZ01lbnUuanMnXG5pbXBvcnQgU2ltdWxhdGlvbiBmcm9tICcuL3NpbXVsYXRpb24uanMnXG5pbXBvcnQgeyBhZGRNb3VzZVNjcm9sbEV2ZW50TGlzdGVuZXIgfSBmcm9tICcuL2hlbHBlckZ1bmN0aW9ucy5qcydcbmltcG9ydCBUdXRvcmlhbCBmcm9tICcuL3R1dG9yaWFsLmpzJztcblxuLyoqXG4gKiBWaWV3Qm94IHByb3ZpZGVzIGFuIGFwaSBmb3Igb3ByZXJhdGluZyB3aXRoIHRoZSB2aWV3Qm94IGFyZ3VtZW50IG9mIHRoZSA8c3ZnPiBET00gZWxlbWVudC5cbiAqL1xuY2xhc3MgVmlld0JveCB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB2aWV3Qm94XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxlZnQgICBkaXN0YW5jZSBvZiB0aGUgbGVmdCBlZGdlIG9mIHRoZSB2aWV3Ym94IGZyb20gZG9jdW1lbnQncyB5IGF4aXMgaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgICAgZGlzdGFuY2Ugb2YgdGhlIHRvcCBlZGdlIG9mIHRoZSB2aWV3Ym94IGZyb20gdGhlIGRvY3VtZW50J3MgeCBheGlzIGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggIHdpZHRoIG9mIHRoZSB2aWV3Ym94IGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IGhlaWdodCBvZiB0aGUgdmlld2JveCBpbiBTVkcgcGl4ZWxzXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWaWV3Qm94IGF0dHJpYnV0ZXMgYmVmb3JlIGFwcGx5aW5nIHpvb20gYW5kIHNoaWZ0XG4gICAgICAgICAqIEB0eXBlIHtvYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlYWwgPSB7IGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXhpbXVtIGFtb3VudCBvZiB6b29tIG9uIHRoZSB2aWV3Ym94XG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heFpvb20gPSA4O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1pbmltdW0gYW1vdW50IG9mIHpvb20gb24gdGhlIHZpZXdib3hcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluWm9vbSA9IDAuMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW1vdW50IG9mIHpvb20gb24gdGhlIHZpZXdib3gsIGFsd2F5cyBiZXR3ZWVuIHRoaXMubWluWm9vbSBhbmQgdGhpcy5tYXhab29tXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlYWxab29tID0gMVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhbW91bnQgb2YgaG9yaXpvbnRhbCBzaGlmdCBvZiB0aGUgZG9jdW1lbnRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGVmdFNoaWZ0ID0gMFxuICAgICAgICAvKipcbiAgICAgICAgICogYW1vdW50IG9mIHZlcnRpY2FsIHNoaWZ0IG9mIHRoZSBkb2N1bWVudFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50b3BTaGlmdCA9IDBcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIGFtb3VudCBvZiB6b29tIG9uIHRoZSB2aWV3Ym94XG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCB6b29tKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFsWm9vbTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgdGhlIGFtb3VudCBvZiB6b29tIG9uIHRoZSB2aWV3Ym94XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIHRoZSBuZXcgYW1vdW50IG9mIHpvb21cbiAgICAgKi9cbiAgICBzZXQgem9vbSh2YWx1ZSkge1xuICAgICAgICAvLyBmaXQgdGhpcy5yZWFsWm9vbSB0byBmaXQgYmV0d2VlbiB0aGlzLm1pblpvb20gYW5kIHRoaXMubWF4Wm9vbVxuICAgICAgICB0aGlzLnJlYWxab29tID0gTWF0aC5tYXgoTWF0aC5taW4odmFsdWUsIHRoaXMubWF4Wm9vbSksIHRoaXMubWluWm9vbSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IHRoZSB3aWR0aCBvZiB0aGUgdmlld2JveCB3aXRoIHRoZSBjdXJyZW50IHpvb20gYXBwbGllZFxuICAgICAqIEByZXR1cm4ge251bWJlcn0gdGhlIGZpbmFsIHdpZHRoIG9mIHRoZSB2aWV3Ym94XG4gICAgICovXG4gICAgZ2V0IHdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFsLndpZHRoIC8gdGhpcy56b29tXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IHRoZSBoZWlnaHQgb2YgdGhlIHZpZXdib3ggd2l0aCB0aGUgY3VycmVudCB6b29tIGFwcGxpZWRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBmaW5hbCBoZWlnaHQgb2YgdGhlIHZpZXdib3hcbiAgICAgKi9cbiAgICBnZXQgaGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFsLmhlaWdodCAvIHRoaXMuem9vbVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCB0aGUgaG9yaXpvbnRhbCBkaXN0YW5jZSBmcm9tIHRoZSB5IGF4aXMgb2YgdGhlIGRvY3VtZW50IHdpdGggem9vbSBhbmQgc2hpZnQgdmFsdWUgYXBwbGllZFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgbGVmdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbC5sZWZ0IC0gKHRoaXMubGVmdFNoaWZ0IC8gdGhpcy56b29tKSArICgodGhpcy5yZWFsLndpZHRoIC0gdGhpcy53aWR0aCkgLyAyKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCB0aGUgdmVydGljYWwgZGlzdGFuY2UgZnJvbSB0aGUgeCBheGlzIG9mIHRoZSBkb2N1bWVudCB3aXRoIHpvb20gYW5kIHNoaWZ0IHZhbHVlIGFwcGxpZWRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhbC50b3AgLSAodGhpcy50b3BTaGlmdCAvIHRoaXMuem9vbSkgKyAoKHRoaXMucmVhbC5oZWlnaHQgLSB0aGlzLmhlaWdodCkgLyAyKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCB0aGUgY29tcHV0ZWQgdmlld2JveCB2YWx1ZXMgYXMgYSBzdHJpbmcgaW4gdGhlIGNvcnJlY3QgZm9ybWF0IHRoYXQgY2FuIGJlIHVzZWQgaW4gdGhlIHZpZXdCb3ggYXR0cmlidXRlIG9mIHRoZSBTVkcgZWxlbWVudFxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gc3RyaW5nIGluIGZvcm1hdCBcImxlZnQgdG9wIHdpZHRoIGhlaWdodFwiXG4gICAgICovXG4gICAgZ2V0IHN0cigpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMubGVmdH0gJHt0aGlzLnRvcH0gJHt0aGlzLndpZHRofSAke3RoaXMuaGVpZ2h0fWBcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB0cmFuc2Zvcm0gaG9yaXpvbnRhbCB1bml0cyB0byB0aGUgc2NhbGUgYW5kIHNoaWZ0IG9mIHRoZSBlZGl0b3JcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHggb3JpZ2luYWwgaG9yaXpvbnRhbCB2YWx1ZVxuICAgICAqIEByZXR1cm4ge251bWJlcn0gICB0cmFuc2Zvcm1lZCBob3Jpem9udGFsIHZhbHVlXG4gICAgICovXG4gICAgdHJhbnNmb3JtWCh4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQgKyAoeCAvIHRoaXMuem9vbSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB0cmFuc2Zvcm0gdmVydGljYWwgdW5pdHMgdG8gdGhlIHNjYWxlIGFuZCBzaGlmdCBvZiB0aGUgZWRpdG9yXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB5IG9yaWdpbmFsIHZlcnRpY2FsIHZhbHVlXG4gICAgICogQHJldHVybiB7bnVtYmVyfSAgIHRyYW5zZm9ybWVkIHZlcnRpY2FsIHZhbHVlXG4gICAgICovXG4gICAgdHJhbnNmb3JtWSh5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvcCArICh5IC8gdGhpcy56b29tKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHRyYW5zZm9ybSBwYWdlWCBhbmQgcGFnZVkgcGFyYW1ldGVycyBvZiB0aGUganF1ZXJ5IGV2ZW50IHRvIG1hdGNoIHRoZSB6b29tIGFuZCBzaGlmdCBvZiB0aGUgdmlld2JveFxuICAgICAqIEBwYXJhbSAge2pxdWVyeS5Nb3VzZUV2ZW50fSBldmVudCBvcmlnaW5hbCBldmVudFxuICAgICAqIEByZXR1cm4ge2pxdWVyeS5Nb3VzZUV2ZW50fSAgICAgICB0aGUgc2FtZSBldmVudCBidXQgd2l0aCB0cmFuc2Zvcm1lZCBwYWdlWCBhbmQgcGFnZVkgbWVtYmVyc1xuICAgICAqL1xuICAgIHRyYW5zZm9ybUV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnBhZ2VYID0gdGhpcy50cmFuc2Zvcm1YKGV2ZW50LnBhZ2VYKVxuICAgICAgICBldmVudC5wYWdlWSA9IHRoaXMudHJhbnNmb3JtWShldmVudC5wYWdlWSlcblxuICAgICAgICByZXR1cm4gZXZlbnRcbiAgICB9XG59XG5cbmNvbnN0XG4gICAgY3RybEtleSA9IDE3LFxuICAgIGNtZEtleSA9IDkxO1xuXG4vKiogQG1vZHVsZSBDYW52YXMgKi9cbi8qKlxuICogTWFpbiBjbGFzcyBvZiB0aGUgYXBwbGljYXRpb24uIEl0IHJlcHJlc2VudHMgYW4gaW5zdGFuY2Ugb2YgdGhlIHdob2xlIGVkaXRvciBhbmQgaG9sZHNcbiAqIHJlZmVyZW5jZXMgdG8gYWxsIGl0cyBlbGVtZW50cy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBTdmcgY2xhc3NcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2FudmFzICAgcXVlcnkgc2VsZWN0b3Igb2YgdGhlIFNWRyBlbGVtZW50LCB0aGF0IHdpbGwgY29udGFpbiBhbGwgU1ZHIGNvbnRlbnQgb2YgdGhlIGFwcGxpY2F0aW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGdyaWRTaXplIGluaXRpYWwgc2l6ZSBvZiB0aGUgZ3JpZCBpbiBTVkcgcGl4ZWxzXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY2FudmFzLCBncmlkU2l6ZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogalF1ZXJ5IGVsZW1lbnQgZm9yIHRoZSBTVkcgZG9jdW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuJHN2ZyA9ICQoY2FudmFzKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogc3BhY2UgYmV0d2VlbiBncmlkIGxpbmVzIGluIFNWRyBwaXhlbHNcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ3JpZFNpemUgPSBncmlkU2l6ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQXJyYXkgb2YgYWxsIGJveGVzIChpbnN0YW5jZXMgb2Ygb2JqZWN0cyBkZXJpdmVkIGZyb20gZWRpdG9yRWxlbWVudHMuQm94KSB1c2VkIG9uIENhbnZhc1xuICAgICAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJveGVzID0gW107IC8vIHN0b3JlcyBhbGwgYm94ZXNcblxuICAgICAgICAvKipcbiAgICAgICAgICogQXJyYXkgb2YgYWxsIHdpcmVzIChpbnN0YW5jZXMgb2YgZWRpdG9yRWxlbWVudHMuV2lyZSkgdXNlZCBvbiBDYW52YXNcbiAgICAgICAgICogQHR5cGUge0FycmF5fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53aXJlcyA9IFtdOyAvLyBzdG9yZXMgYWxsIHdpcmVzXG5cbiAgICAgICAgdGhpcy5zaW11bGF0aW9uRW5hYmxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zaW11bGF0aW9uID0gbmV3IFNpbXVsYXRpb24odGhpcyk7IC8vIGR1bW15LCB3aWxsIGJlIG92ZXJ3cml0dGVuIG9uIHN0YXJ0TmV3U2ltdWxhdGlvblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBkaXN0YW5jZSBmcm9tIHRoZSBsZWZ0IHRvcCBjb3JuZXIgdG8gdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIGltcG9ydGVkIG5ldHdvcmtcbiAgICAgICAgICogYW5kIGRpc3RhbmNlIGZyb20gdGhlIGxlZnQgdG9wIGNvcm5lciB0byB0aGUgaW1wb3J0ZWQgYmxhY2sgYm94IF9pbiBncmlkIHBpeGVsc19cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGVmdFRvcFBhZGRpbmcgPSA0O1xuXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgZGVmcyBlbGVtZW50LCB1c2VkIGZvciBwYXR0ZXJuc1xuICAgICAgICB0aGlzLiRkZWZzID0gJChcIjxkZWZzPlwiKTtcbiAgICAgICAgdGhpcy4kc3ZnLnByZXBlbmQodGhpcy4kZGVmcyk7XG5cbiAgICAgICAgLy8gQkFDS0dST1VORCBQQVRURVJOXG4gICAgICAgIGxldCBwYXR0ZXJuID0gbmV3IHN2Z09iai5QYXR0ZXJuKFwiZ3JpZFwiLCB0aGlzLmdyaWRTaXplLCB0aGlzLmdyaWRTaXplKTtcblxuICAgICAgICBsZXQgcGF0dGVyblBvaW50cyA9IG5ldyBzdmdPYmouUG9seWxpbmVQb2ludHMoKVxuICAgICAgICAgICAgLmFwcGVuZChuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnQoMCwgMCkpXG4gICAgICAgICAgICAuYXBwZW5kKG5ldyBzdmdPYmouUG9seWxpbmVQb2ludCh0aGlzLmdyaWRTaXplLCAwKSlcbiAgICAgICAgICAgIC5hcHBlbmQobmV3IHN2Z09iai5Qb2x5bGluZVBvaW50KHRoaXMuZ3JpZFNpemUsIHRoaXMuZ3JpZFNpemUpKTtcblxuICAgICAgICBwYXR0ZXJuLmFkZENoaWxkKG5ldyBzdmdPYmouUG9seUxpbmUocGF0dGVyblBvaW50cywgXCIjYTNhNGQyXCIsIDIpKTtcbiAgICAgICAgdGhpcy5hZGRQYXR0ZXJuKHBhdHRlcm4uZ2V0KCkpO1xuXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IG5ldyBzdmdPYmouUmVjdGFuZ2xlKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCBcInVybCgjZ3JpZClcIiwgXCJub25lXCIpO1xuICAgICAgICB0aGlzLmFwcGVuZEpRdWVyeU9iamVjdCh0aGlzLmJhY2tncm91bmQuZ2V0KCkpO1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcblxuICAgICAgICAvLyBzZXQgdGhlIHZpZXdib3ggZm9yIGZ1dHVyZSB6b29taW5nIGFuZCBtb3Zpbmcgb2YgdGhlIGNhbnZhc1xuICAgICAgICB0aGlzLiRzdmcuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWluWU1pbiBzbGljZScpXG4gICAgICAgIHRoaXMudmlld2JveCA9IG5ldyBWaWV3Qm94KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KVxuICAgICAgICB0aGlzLmFwcGx5Vmlld2JveCgpXG5cbiAgICAgICAgLy8gQ09OU1RSVUNUIENPTlRFWFQgTUVOVVxuICAgICAgICB0aGlzLmNvbnRleHRNZW51ID0gbmV3IENvbnRleHRNZW51KHRoaXMpO1xuXG4gICAgICAgIC8vIENPTlNUUlVDVCBGTE9BVElORyBNRU5VXG4gICAgICAgIHRoaXMuZmxvYXRpbmdNZW51ID0gbmV3IEZsb2F0aW5nTWVudSh0aGlzKTtcblxuICAgICAgICAvLyBBTEwgRVZFTlQgQ0FMTEJBQ0tTXG4gICAgICAgIGxldCB0YXJnZXQ7XG4gICAgICAgIHRoaXMuJHN2Zy5vbignbW91c2Vkb3duJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5nZXRSZWFsVGFyZ2V0KGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICBpZih0YXJnZXQhPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBwcm9wYWdhdGUgbW91c2Vkb3duIHRvIHRoZSByZWFsIHRhcmdldFxuICAgICAgICAgICAgICAgIHRhcmdldC5vbk1vdXNlRG93bihldmVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG1vdXNlZG93biBoYXBwZW5lZCBkaXJlY3RseSBvbiB0aGUgc3ZnXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1vdXNlRG93bihldmVudClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5oaWRlQ29udGV4dE1lbnUoKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pLm9uKCdtb3VzZW1vdmUnLCBldmVudCA9PiB7XG4gICAgICAgICAgICBpZih0YXJnZXQhPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQub25Nb3VzZU1vdmUoZXZlbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBtb3VzZW1vdmUgaGFwcGVuZWQgZGlyZWN0bHkgb24gdGhlIHN2Z1xuICAgICAgICAgICAgICAgIHRoaXMub25Nb3VzZU1vdmUoZXZlbnQpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pLm9uKCdtb3VzZXVwJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZih0YXJnZXQhPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQub25Nb3VzZVVwKGV2ZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbW91c2V1cCBoYXBwZW5lZCBkaXJlY3RseSBvbiB0aGUgc3ZnXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1vdXNlVXAoZXZlbnQpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRhcmdldCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSkub24oXCJjb250ZXh0bWVudVwiLCBldmVudCA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlDb250ZXh0TWVudShldmVudC5wYWdlWCwgZXZlbnQucGFnZVksIHRoaXMuZ2V0UmVhbEpRdWVyeVRhcmdldChldmVudC50YXJnZXQpKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2tleWRvd24nLCBldmVudCA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uS2V5RG93bihldmVudCk7XG4gICAgICAgIH0pLm9uKFwia2V5dXBcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgICAgdGhpcy5vbktleVVwKGV2ZW50KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYWRkTW91c2VTY3JvbGxFdmVudExpc3RlbmVyKGNhbnZhcywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgLy8gem9vbSBvbmx5IGlmIHRoZSBjdHJsIGtleSBpcyBwcmVzc2VkXG4gICAgICAgICAgICBpZihldmVudC5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5kZWx0YSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb20gKz0gMC4xXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlIC0xOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tIC09IDAuMVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBjaGVjayBpZiB0aGUgdXNlciB2aXNpdHMgZm9yIHRoZSBmaXJzdCB0aW1lXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZighbG9jYWxTdG9yYWdlLnVzZXJIYXNWaXNpdGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50dXRvcmlhbCA9IG5ldyBUdXRvcmlhbCh0aGlzLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCB1c2VySGFzVmlzaXRlZCB0byB0cnVlIHdoZW4gdXNlciBjbG9zZXMgKG9yIGZpbmlzaGVzKSB0aGUgdHV0b3JpYWxcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnVzZXJIYXNWaXNpdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnR1dG9yaWFsLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgd2lkdGggb2YgdGhlIG1haW4gU1ZHIGVsZW1lbnRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IHdpZHRoIG9mIHRoZSBTVkcgZWxlbWVudCBpbiBwaXhlbHNcbiAgICAgKi9cbiAgICBnZXQgd2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRzdmcud2lkdGgoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaGVpZ2h0IG9mIHRoZSBtYWluIFNWRyBlbGVtZW50XG4gICAgICogQHJldHVybiB7bnVtYmVyfSBoZWlnaHQgb2YgdGhlIFNWRyBlbGVtZW50IGluIHBpeGVsc1xuICAgICAqL1xuICAgIGdldCBoZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRzdmcuaGVpZ2h0KClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIGFsbCBrZXlkb3duIGV2ZW50cyB0aGF0IGFyZSBjb25uZWN0ZWQgdG8gQ2FudmFzXG4gICAgICogQHBhcmFtICB7anF1ZXJ5LktleWJvYXJkRXZlbnR9IGV2ZW50IEtleWJvYXJkRXZlbnQgZ2VuZXJhdGVkIGJ5IGEgbGlzdGVuZXJcbiAgICAgKi9cbiAgICBvbktleURvd24oZXZlbnQpIHtcbiAgICAgICAgaWYoZXZlbnQua2V5Q29kZSA9PT0gY3RybEtleSB8fCBldmVudC5rZXlDb2RlID09PSBjbWRLZXkpIHtcbiAgICAgICAgICAgIHRoaXMuJHN2Zy5hZGRDbGFzcygnZ3JhYmJhYmxlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIGFsbCBrZXl1cCBldmVudHMgdGhhdCBhcmUgY29ubmVjdGVkIHRvIENhbnZhc1xuICAgICAqIEBwYXJhbSAge2pxdWVyeS5LZXlib2FyZEV2ZW50fSBldmVudCBLZXlib2FyZEV2ZW50IGdlbmVyYXRlZCBieSBhIGxpc3RlbmVyXG4gICAgICovXG4gICAgb25LZXlVcChldmVudCkge1xuICAgICAgICBpZihldmVudC5rZXlDb2RlID09PSBjdHJsS2V5IHx8IGV2ZW50LmtleUNvZGUgPT09IGNtZEtleSkge1xuICAgICAgICAgICAgdGhpcy4kc3ZnLnJlbW92ZUNsYXNzKCdncmFiYmFibGUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgYWxsIG1vdXNlZG93biBldmVudHMgdGhhdCBhcmUgaGFwcGVuaW5nIGRpcmVjdGx5IG9uIHRoZSBDYW52YXNcbiAgICAgKiBAcGFyYW0gIHtqcXVlcnkuTW91c2VFdmVudH0gZXZlbnQgTW91c2VFdmVudCBnZW5lcmF0ZWQgYnkgYSBsaXN0ZW5lclxuICAgICAqL1xuICAgIG9uTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgIC8vIG1pZGRsZSBtb3VzZSBvciBsZWZ0IG1vdXNlICsgY3RybCBtb3ZlcyB0aGUgY2FudmFzXG4gICAgICAgIGlmKGV2ZW50LndoaWNoID09PSAyIHx8IChldmVudC53aGljaCA9PT0gMSAmJiBldmVudC5jdHJsS2V5KSkge1xuICAgICAgICAgICAgdGhpcy4kc3ZnLmFkZENsYXNzKCdncmFiYmVkJyk7XG4gICAgICAgICAgICB0aGlzLm1vdmVDYW52YXMgPSB7XG4gICAgICAgICAgICAgICAgbGVmdDogZXZlbnQucGFnZVgsXG4gICAgICAgICAgICAgICAgdG9wOiBldmVudC5wYWdlWVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2VzcyBhbGwgbW91c2Vtb3ZlIGV2ZW50cyB0aGF0IGFyZSBoYXBwZW5pbmcgZGlyZWN0bHkgb24gdGhlIENhbnZhc1xuICAgICAqIEBwYXJhbSAge2pxdWVyeS5Nb3VzZUV2ZW50fSBldmVudCBNb3VzZUV2ZW50IGdlbmVyYXRlZCBieSBhIGxpc3RlbmVyXG4gICAgICovXG4gICAgb25Nb3VzZU1vdmUoZXZlbnQpIHtcbiAgICAgICAgaWYodGhpcy5tb3ZlQ2FudmFzKSB7XG4gICAgICAgICAgICBsZXQgbGVmdCA9IGV2ZW50LnBhZ2VYIC0gdGhpcy5tb3ZlQ2FudmFzLmxlZnRcbiAgICAgICAgICAgIGxldCB0b3AgPSBldmVudC5wYWdlWSAtIHRoaXMubW92ZUNhbnZhcy50b3BcblxuICAgICAgICAgICAgdGhpcy52aWV3Ym94LmxlZnRTaGlmdCArPSBsZWZ0XG4gICAgICAgICAgICB0aGlzLnZpZXdib3gudG9wU2hpZnQgKz0gdG9wXG4gICAgICAgICAgICB0aGlzLmFwcGx5Vmlld2JveCgpXG5cbiAgICAgICAgICAgIHRoaXMubW92ZUNhbnZhcyA9IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiBldmVudC5wYWdlWCxcbiAgICAgICAgICAgICAgICB0b3A6IGV2ZW50LnBhZ2VZXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIGFsbCBtb3VzZXVwIGV2ZW50cyB0aGF0IGFyZSBoYXBwZW5pbmcgZGlyZWN0bHkgb24gdGhlIENhbnZhc1xuICAgICAqL1xuICAgIG9uTW91c2VVcCgpIHtcbiAgICAgICAgaWYodGhpcy5tb3ZlQ2FudmFzKSB7XG4gICAgICAgICAgICB0aGlzLiRzdmcucmVtb3ZlQ2xhc3MoJ2dyYWJiZWQnKTtcbiAgICAgICAgICAgIHRoaXMubW92ZUNhbnZhcyA9IHVuZGVmaW5lZFxuXG4gICAgICAgICAgICAvLyBpZiB0dXRvcmlhbCBleGlzdHMsIGNhbGwgdHV0b3JpYWwgY2FsbGJhY2tcbiAgICAgICAgICAgIGlmKHRoaXMudHV0b3JpYWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnR1dG9yaWFsLm9uQ2FudmFzTW92ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmlld0JveCBhdHRyaWJ1dGUgb2YgdGhlIFNWRyBlbGVtZW50IGFuZCBzaXplIGFuZCBwb3NpdGlvbiBhdHRyaWJ1dGVzXG4gICAgICogb2YgdGhlIHJlY3RhbmdsZSB3aXRoIHRoZSBiYWNrZ3JvdW5kIGdyaWQgdG8gbWF0Y2ggdGhlIHZhbHVlcyBpbiB0aGlzLnZpZXdib3hcbiAgICAgKi9cbiAgICBhcHBseVZpZXdib3goKSB7XG4gICAgICAgIC8vIGFkanVzdCBiYWNrZ3JvdW5kXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZC5hZGRBdHRyKHtcbiAgICAgICAgICAgIHg6IHRoaXMudmlld2JveC5sZWZ0LFxuICAgICAgICAgICAgeTogdGhpcy52aWV3Ym94LnRvcCxcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnZpZXdib3gud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMudmlld2JveC5oZWlnaHRcbiAgICAgICAgfSlcblxuICAgICAgICAvLyBzZXQgdGhlIHZpZXdCb3ggYXR0cmlidXRlXG4gICAgICAgIHRoaXMuJHN2Zy5hdHRyKCd2aWV3Qm94JywgdGhpcy52aWV3Ym94LnN0cilcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgem9vbSBtdWx0aXBsaWVyIG9mIHRoZSBjYW52YXNcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHpvb20oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdib3guem9vbVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgem9vbSBtdWx0aXBsaWVyIG9mIHRoZSBjYW52YXMuXG4gICAgICogSSBzZXRzIHRoZSB2aWV3Ym94IHpvb20gYW5kIHRoZW4gYXBwbGllcyB0aGUgbmV3IHZhbHVlIGJ5IGNhbGxpbmcgdGhpcy5hcHBseVZpZXdib3goKVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gdmFsdWUgc2V0IHRoZSB6b29tIHRvIHRoaXMgdmFsdWVcbiAgICAgKi9cbiAgICBzZXQgem9vbSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZpZXdib3guem9vbSA9IHZhbHVlXG4gICAgICAgIHRoaXMuYXBwbHlWaWV3Ym94KClcblxuICAgICAgICAvLyBpZiB0dXRvcmlhbCBleGlzdHMsIGNhbGwgdHV0b3JpYWwgY2FsbGJhY2tcbiAgICAgICAgaWYodGhpcy50dXRvcmlhbCkge1xuICAgICAgICAgICAgdGhpcy50dXRvcmlhbC5vbkNhbnZhc1pvb21lZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgYW4gb2JqZWN0IGNvbnRhaW5pbmcgZXhwb3J0IGRhdGEgZm9yIHRoZSBDYW52YXMgYW5kIGFsbCBlbGVtZW50cy5cbiAgICAgKiBEYXRhIGZyb20gdGhpcyBmdW5jdGlvbiBzaG91bGQgY292ZXIgYWxsIGltcG9ydGFudCBpbmZvcm1hdGlvbiBuZWVkZWQgdG8gaW1wb3J0IHRoZVxuICAgICAqIG5ldHdvcmsgaW4gYSBkaWZmZXJlbnQgc2Vzc2lvbi5cbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9IG9iamVjdCBjb250YWluaW5nIGluZm9tcmF0aW9uIGFib3V0IHRoZSBuZXR3b3JrXG4gICAgICovXG4gICAgZ2V0IGV4cG9ydERhdGEoKSB7XG4gICAgICAgIHRoaXMuZXhwb3J0V2lyZUlkTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmV4cG9ydFdpcmVJZCA9IDA7XG5cbiAgICAgICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICAgICBib3hlczogW11cbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKGNvbnN0IGJveCBvZiB0aGlzLmJveGVzKSB7XG4gICAgICAgICAgICBkYXRhLmJveGVzLnB1c2goYm94LmV4cG9ydERhdGEpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWNyZWF0ZSBhIGxvZ2ljIG5ldHdvcmsgZnJvbSB0aGUgZGF0YSBwcm92aWRlZFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gZGF0YSBvYmplY3QgY29udGFpbmluZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaW1wb3J0ZWQgbmV0d29ya1xuICAgICAqIEBwYXJhbSAge251bWJlcn0gW3hdICBob3Jpem9udGFsIHBvc2l0aW9uIG9mIHRoZSBsZWZ0IHRvcCBjb3JuZXIgb2YgdGhlIG5ldHdvcmsgaW4gZ3JpZCBwaXhlbHNcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IFt5XSAgdmVydGljYWwgcG9zaXRpb24gb2YgdGhlIGxlZnQgdG9wIGNvcm5lciBvZiB0aGUgbmV0d29yayBpbiBncmlkIHBpeGVsc1xuICAgICAqL1xuICAgIGltcG9ydERhdGEoZGF0YSwgeCwgeSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgdGhlIHggb3IgeSBpcyB1bmRlZmluZWQsIHNldCBpdCB0byBsZWZ0VG9wUGFkZGluZyBpbnN0ZWFkXG4gICAgICAgICAgICAvLyAoY2Fubm90IHVzZSB4IHx8IGxlZnRUb3BQYWRkaW5nIGJlY2F1c2Ugb2YgMClcblxuICAgICAgICAgICAgeCA9IHghPT11bmRlZmluZWQgPyB4IDogdGhpcy5sZWZ0VG9wUGFkZGluZ1xuICAgICAgICAgICAgeSA9IHkhPT11bmRlZmluZWQgPyB5IDogdGhpcy5sZWZ0VG9wUGFkZGluZ1xuXG4gICAgICAgICAgICB0aGlzLnNpbXVsYXRpb25FbmFibGVkID0gZmFsc2VcblxuICAgICAgICAgICAgLy8gbGlzdCBvZiB3aXJlcyB0byBiZSBhZGRlZFxuICAgICAgICAgICAgbGV0IG5ld1dpcmVzID0gbmV3IE1hcCgpO1xuXG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBsZWZ0bW9zdCBhbmQgdG9wbW9zdCBjb29yZGluYXRlIG9mIGFueSBib3gsIHNhdmUgdGhlbSB0byBsZWZ0VG9wQ29ybmVyXG4gICAgICAgICAgICBsZXQgbGVmdFRvcENvcm5lcjtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBib3hEYXRhIG9mIGRhdGEuYm94ZXMpIHtcbiAgICAgICAgICAgICAgICBmb3IoY29uc3QgdHJhbnNmb3JtSW5mbyBvZiBib3hEYXRhLnRyYW5zZm9ybS5pdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBpZih0cmFuc2Zvcm1JbmZvLm5hbWUgPT09IFwidHJhbnNsYXRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxlZnRUb3BDb3JuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0VG9wQ29ybmVyID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBNYXRoLm1pbihsZWZ0VG9wQ29ybmVyLngsIHRyYW5zZm9ybUluZm8uYXJnc1swXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IE1hdGgubWluKGxlZnRUb3BDb3JuZXIueSwgdHJhbnNmb3JtSW5mby5hcmdzWzFdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdFRvcENvcm5lciA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogdHJhbnNmb3JtSW5mby5hcmdzWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiB0cmFuc2Zvcm1JbmZvLmFyZ3NbMV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvcihsZXQgYm94RGF0YSBvZiBkYXRhLmJveGVzKSB7XG4gICAgICAgICAgICAgICAgLy8gYWRkIGJveFxuICAgICAgICAgICAgICAgIGxldCBib3g7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChib3hEYXRhLmNhdGVnb3J5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJnYXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgbmV3IGdhdGUgKHdpdGhvdXQgcmVsb2FkaW5nIHRoZSBTVkcsIHdlIHdpbGwgcmVsb2FkIGl0IG9uY2UgYWZ0ZXIgdGhlIGltcG9ydClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveCA9IHRoaXMubmV3R2F0ZShib3hEYXRhLm5hbWUsIDAsIDAsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW9cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYm94RGF0YS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImlucHV0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBuZXcgaW5wdXQgKHdpdGhvdXQgcmVsb2FkaW5nIHRoZSBTVkcsIHdlIHdpbGwgcmVsb2FkIGl0IG9uY2UgYWZ0ZXIgdGhlIGltcG9ydClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94ID0gdGhpcy5uZXdJbnB1dCgwLCAwLCBib3hEYXRhLmlzT24sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm91dHB1dFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgbmV3IG91dHB1dCAod2l0aG91dCByZWxvYWRpbmcgdGhlIFNWRywgd2Ugd2lsbCByZWxvYWQgaXQgb25jZSBhZnRlciB0aGUgaW1wb3J0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3ggPSB0aGlzLm5ld091dHB1dCgwLCAwLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcIlVua25vd24gaW8gYm94IG5hbWUgJ1wiK2JveERhdGEubmFtZStcIicuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmxhY2tib3hcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveCA9IHRoaXMubmV3QmxhY2tib3goYm94RGF0YS5pbnB1dHMsIGJveERhdGEub3V0cHV0cywgYm94RGF0YS50YWJsZSwgYm94RGF0YS5uYW1lLCAwLCAwLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFwiVW5rbm93biBib3ggY2F0ZWdvcnkgJ1wiK2JveERhdGEuY2F0ZWdvcnkrXCInLlwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYm94KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHByb2NjZXNzIGJveCB0cmFuc2Zvcm1zICh0cmFuc2xhdGlvbiBhbmQgcm90YXRpb24pXG4gICAgICAgICAgICAgICAgICAgIGxldCB0cmFuc2Zvcm0gPSBuZXcgZWRpdG9yRWxlbWVudHMuVHJhbnNmb3JtKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMCA7IGogPCBib3hEYXRhLnRyYW5zZm9ybS5pdGVtcy5sZW5ndGggOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYm94RGF0YS50cmFuc2Zvcm0uaXRlbXNbal0ubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtLnNldFRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveERhdGEudHJhbnNmb3JtLml0ZW1zW2pdLmFyZ3NbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIGxlZnRUb3BDb3JuZXIueCAvLyBtYWtlIGl0IHRoZSByZWxhdGl2ZSBkaXN0YW5jZSBmcm9tIHRoZSBsZWZ0bW9zdCBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyB4IC8vIGFwcGx5IHRoZSBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94RGF0YS50cmFuc2Zvcm0uaXRlbXNbal0uYXJnc1sxXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gbGVmdFRvcENvcm5lci55IC8vIG1ha2UgaXQgdGhlIHJlbGF0aXZlIGRpc3RhbmNlIGZyb20gdGhlIHRvcG1vc3QgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgeSAvLyBhcHBseSB0aGUgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJvdGF0ZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm0uc2V0Um90YXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94RGF0YS50cmFuc2Zvcm0uaXRlbXNbal0uYXJnc1swXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveERhdGEudHJhbnNmb3JtLml0ZW1zW2pdLmFyZ3NbMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3hEYXRhLnRyYW5zZm9ybS5pdGVtc1tqXS5hcmdzWzJdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcIlVua25vd24gdHJhbnNmb3JtIHByb3BlcnR5ICdcIitib3hEYXRhLnRyYW5zZm9ybS5pdGVtc1tqXS5uYW1lK1wiJy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtLnRvU1ZHUGl4ZWxzKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBib3guc2V0VHJhbnNmb3JtKHRyYW5zZm9ybSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGFsbCB3aXJlcyB0byB0aGUgbGlzdCBvZiB3aXJlcyB0byBiZSBhZGRlZFxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwIDsgaiA8IGJveERhdGEuY29ubmVjdGlvbnMubGVuZ3RoIDsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIGFydGlmaWNpYWwgd2lyZSBpZFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdpcmVJZCA9IGJveERhdGEuY29ubmVjdGlvbnNbal0ud2lyZUlkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXNzIHRoZSB2YWx1ZXMgZ290IGZyb20ganNvbiBpbnRvIGEgdmFyaWFibGUgdGhhdCB3aWxsIGJlIGFkZGVkIGludG8gdGhlIG1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBib3hEYXRhLmNvbm5lY3Rpb25zW2pdLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGJveERhdGEuY29ubmVjdGlvbnNbal0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3hJZDogYm94LmlkXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIHZhbHVlIHRvIHRoZSBtYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5ld1dpcmVzLmhhcyh3aXJlSWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgYWxyZWFkeSBpcyBhIHdpcmUgd2l0aCB0aGlzIGlkIGluIHRoZSBtYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSB2YWx1ZSB0byB0aGUgZW5kIG9mIHRoZSBhcnJheSBvZiB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWFwVmFsdWUgPSBuZXdXaXJlcy5nZXQod2lyZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBWYWx1ZVttYXBWYWx1ZS5sZW5ndGhdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3V2lyZXMuc2V0KHdpcmVJZCwgbWFwVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyB3aXJlIHdpdGggdGhpcyBpZCBpbiB0aGUgbWFwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSB3aXJlIGFuZCBzZXQgdGhlIHZhbHVlIHRvIGJlIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBhcnJheVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1dpcmVzLnNldCh3aXJlSWQsIFt2YWx1ZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyByZWZyZXNoIHRoZSBTVkcgZG9jdW1lbnQgKG5lZWRlZCBmb3Igd2lyaW5nKVxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG5cbiAgICAgICAgICAgIC8vIHdpdGggYWxsIGJveGVzIGFkZGVkLCB3ZSBjYW4gbm93IGNvbm5lY3QgdGhlbSB3aXRoIHdpcmVzXG4gICAgICAgICAgICBuZXdXaXJlcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGxldCBjb25uZWN0b3JJZHMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZihpdGVtWzBdICYmIGl0ZW1bMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIFswLCAxXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJveCA9IHRoaXMuZ2V0Qm94QnlJZChpdGVtW2ldLmJveElkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdG9ySWRzW2ldID0gYm94LmNvbm5lY3RvcnNbaXRlbVtpXS5pbmRleF0uaWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5uZXdXaXJlKGNvbm5lY3Rvcklkc1swXSwgY29ubmVjdG9ySWRzWzFdLCB0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyByZWZyZXNoIHRoZSBTVkcgZG9jdW1lbnRcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuXG4gICAgICAgICAgICB0aGlzLnNpbXVsYXRpb25FbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IGJveCBvZiB0aGlzLmJveGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJveCBpbnN0YW5jZW9mIGVkaXRvckVsZW1lbnRzLklucHV0Qm94KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHN3aXRjaCB0aGUgaW5wdXQgYm94IHN0YXRlIHRvIHRoZSBvcG9zaXQgYW5kIGJhY2ssIGZvciBzb21lIHJlYXNvbiBjYWxsaW5nIGJveC5yZWZyZXNoU3RhdGUoKVxuICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHRzIGluIHdlaXJkIHVuZmluaXNoZWQgc2ltdWxhdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGNhdXNlcyB1cGRhdGUgb2YgdGhlIG91dHB1dCBjb25uZWN0b3IgYW5kIGEgc3RhcnQgb2YgYSBuZXcgc2ltdWxhdGlvblxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gZmluZCBiZXR0ZXIgc29sdXRpb24gaW5zdGVhZCBvZiB0aGlzIHdvcmthcm91bmRcbiAgICAgICAgICAgICAgICAgICAgYm94Lm9uID0gIWJveC5vblxuICAgICAgICAgICAgICAgICAgICBib3gub24gPSAhYm94Lm9uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHVzZXIgY2xpY2tzIG9uIGEgY29ubmVjdG9yLCByZW1lbWJlciBpdCB1bnRpbCB0aGV5IGNsaWNrIG9uIHNvbWUgb3RoZXIgY29ubmVjdG9yLlxuICAgICAqIFRoYW4gY2FsbCBuZXdXaXJlIHdpdGggdGhlIGxhc3QgdHdvIGNvbm5lY3RvcnMgaWRzIGFzIGFyZ3VtZW50cy5cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGNvbm5lY3RvcklkIGlkIG9mIHRoZSBjb25uZWN0b3IgdGhhdCB0aGUgdXNlciBjbGlja2VkIG9uXG4gICAgICovXG4gICAgd2lyZUNyZWF0aW9uSGVscGVyKGNvbm5lY3RvcklkKSB7XG4gICAgICAgIGlmKCF0aGlzLmZpcnN0Q29ubmVjdG9ySWQpIHtcbiAgICAgICAgICAgIHRoaXMuZmlyc3RDb25uZWN0b3JJZCA9IGNvbm5lY3RvcklkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5uZXdXaXJlKHRoaXMuZmlyc3RDb25uZWN0b3JJZCwgY29ubmVjdG9ySWQpO1xuICAgICAgICAgICAgdGhpcy5maXJzdENvbm5lY3RvcklkID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUnVuIGEgbG9naWMgc2ltdWxhdGlvbiBmcm9tIHRoZSBzdGFydGluZ0Nvbm5lY3Rvci5cbiAgICAgKiBUaGlzIHJlZnJlc2hlcyB0aGUgc3RhdGVzIG9mIGFsbCBlbGVtZW50cyBpbiB0aGUgbmV0d29yayB3aG9zZSBpbnB1dHMgYXJlXG4gICAgICogZGlyZWN0bHkgKG9yIGJ5IHRyYW5zaXRpb24pIGNvbm5lY3RlZCB0byBzdGFydGluZ0Nvbm5lY3RvcidzIG91dHB1dFxuICAgICAqIEBwYXJhbSAge091dHB1dENvbm5lY3Rvcn0gc3RhcnRpbmdDb25uZWN0b3IgcnVuIHNpbXVsYXRpb24gZnJvbSB0aGlzIG91dHB1dCBjb25uZWN0b3JcbiAgICAgKiBAcGFyYW0gIHtMb2dpYy5zdGF0ZX0gc3RhdGUgbmV3IHN0YXRlIG9mIHRoZSBzdGFydGluZ0Nvbm5lY3RvclxuICAgICAqL1xuICAgIHN0YXJ0TmV3U2ltdWxhdGlvbihzdGFydGluZ0Nvbm5lY3Rvciwgc3RhdGUpIHtcbiAgICAgICAgaWYodGhpcy5zaW11bGF0aW9uRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5zaW11bGF0aW9uID0gbmV3IFNpbXVsYXRpb24odGhpcylcbiAgICAgICAgICAgIHRoaXMuc2ltdWxhdGlvbi5ub3RpZnlDaGFuZ2Uoc3RhcnRpbmdDb25uZWN0b3IuaWQsIHN0YXRlKVxuICAgICAgICAgICAgdGhpcy5zaW11bGF0aW9uLnJ1bigpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgZ2F0ZSBvbiB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSAgbmFtZSAgICAgICAgICAgdHlwZSBvZiB0aGUgZ2F0ZSAoYW5kLCBvciAuLi4pXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgeCAgICAgICAgICAgICAgaG9yaXpvbnRhbCBwb3NpdGlvbiBvZiB0aGUgZ2F0ZSBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgeSAgICAgICAgICAgICAgdmVydGljYWwgcG9zaXRpb24gb2YgdGhlIGdhdGUgaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IFtyZWZyZXNoPXRydWVdIGlmIHRydWUsIHRoaXMucmVmcmVzaCgpIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGFkZGluZyB0aGUgZ2F0ZVxuICAgICAqIEByZXR1cm4ge2VkaXRvckVsZW1lbnRzLkdhdGV9ICAgIGluc3RhbmNlIG9mIEdhdGUgdGhhdCBoYXMgYmVlbiBuZXdseSBhZGRlZFxuICAgICAqL1xuICAgIG5ld0dhdGUobmFtZSwgeCwgeSwgcmVmcmVzaCA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV3Qm94KHgsIHksIG5ldyBlZGl0b3JFbGVtZW50cy5HYXRlKHRoaXMsIG5hbWUsIHgsIHkpLCByZWZyZXNoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gaW5wdXQgYm94IG9uIHRoZSBzcGVjaWZpZWQgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB4ICAgICAgICAgICAgICBob3Jpem9udGFsIHBvc2l0aW9uIG9mIHRoZSBnYXRlIGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB5ICAgICAgICAgICAgICB2ZXJ0aWNhbCBwb3NpdGlvbiBvZiB0aGUgZ2F0ZSBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gW2lzT249ZmFsc2VdICAgc3RhdGUgb2YgdGhlIGlucHV0IGJveCAoZGVmYXVsdCBpcyBmYWxzZSAob2ZmKSlcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBbcmVmcmVzaD10cnVlXSBpZiB0cnVlLCB0aGlzLnJlZnJlc2goKSB3aWxsIGJlIGNhbGxlZCBhZnRlciBhZGRpbmcgdGhlIGlucHV0IGJveFxuICAgICAqIEByZXR1cm4ge2VkaXRvckVsZW1lbnRzLklucHV0Qm94fSAgICBpbnN0YW5jZSBvZiB0aGUgSW5wdXRCb3ggdGhhdCBoYXMgYmVlbiBuZXdseSBhZGRlZFxuICAgICAqL1xuICAgIG5ld0lucHV0KHgsIHksIGlzT24gPSBmYWxzZSwgcmVmcmVzaCA9IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV3Qm94KHgsIHksIG5ldyBlZGl0b3JFbGVtZW50cy5JbnB1dEJveCh0aGlzLCBpc09uKSwgcmVmcmVzaCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIG91dHB1dCBib3ggb24gdGhlIHNwZWNpZmllZCBwb3NpdGlvblxuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHggICAgICAgICAgICAgIGhvcml6b250YWwgcG9zaXRpb24gb2YgdGhlIGdhdGUgaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHkgICAgICAgICAgICAgIHZlcnRpY2FsIHBvc2l0aW9uIG9mIHRoZSBnYXRlIGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBbcmVmcmVzaD10cnVlXSBpZiB0cnVlLCB0aGlzLnJlZnJlc2goKSB3aWxsIGJlIGNhbGxlZCBhZnRlciBhZGRpbmcgdGhlIG91dHB1dCBib3hcbiAgICAgKiBAcmV0dXJuIHtlZGl0b3JFbGVtZW50cy5JbnB1dEJveH0gICAgaW5zdGFuY2Ugb2YgdGhlIE91dHB1dEJveCB0aGF0IGhhcyBiZWVuIG5ld2x5IGFkZGVkXG4gICAgICovXG4gICAgbmV3T3V0cHV0KHgsIHksIHJlZnJlc2ggPSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5ld0JveCh4LCB5LCBuZXcgZWRpdG9yRWxlbWVudHMuT3V0cHV0Qm94KHRoaXMpLCByZWZyZXNoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBuZXcgQm94IHRvIHRoZSBDYW52YXNcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB4ICAgICAgICAgICAgICBob3Jpem9udGFsIHBvc2l0aW9uIG9mIHRoZSBib3ggaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHkgICAgICAgICAgICAgIHZlcnRpY2FsIHBvc2l0aW9uIG9mIHRoZSBib3ggaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSAge2VkaXRvckVsZW1lbnRzLkJveH0gIG9iamVjdCAgICAgICAgIGluc3RhbmNlIG9mIGFuIG9iamVjdCBkZXJpdmVkIGZyb20gdGhlIGVkaXRvckVsZW1lbnRzLkJveCBjbGFzc1xuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IFtyZWZyZXNoPXRydWVdIGlmIHRydWUsIHRoaXMucmVmcmVzaCgpIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGFkZGluZyB0aGUgYm94XG4gICAgICogQHJldHVybiB7ZWRpdG9yRWxlbWVudHMuQm94fSAgICAgICAgICAgICAgICAgcmV0dXJuIHRoZSBpbnN0YW5jZSBvZiB0aGUgbmV3bHkgYWRkZWQgb2JqZWN0XG4gICAgICovXG4gICAgbmV3Qm94KHgsIHksIG9iamVjdCwgcmVmcmVzaCA9IHRydWUpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5ib3hlcy5sZW5ndGg7XG5cbiAgICAgICAgdGhpcy5ib3hlc1tpbmRleF0gPSBvYmplY3Q7XG5cbiAgICAgICAgLy8gdHJhbnNsYXRlIHRoZSBnYXRlIGlmIHggYW5kIHkgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAgICAgIGlmKHggJiYgeSkge1xuICAgICAgICAgICAgbGV0IHRyID0gbmV3IGVkaXRvckVsZW1lbnRzLlRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgdHIuc2V0VHJhbnNsYXRlKHgsIHkpO1xuXG4gICAgICAgICAgICB0aGlzLmJveGVzW2luZGV4XS5zdmdPYmouYWRkQXR0cih7XCJ0cmFuc2Zvcm1cIjogdHIuZ2V0KCl9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYXBwZW5kRWxlbWVudCh0aGlzLmJveGVzW2luZGV4XSwgcmVmcmVzaCk7XG5cbiAgICAgICAgLy8gaWYgdHV0b3JpYWwgZXhpc3RzLCBjYWxsIHR1dG9yaWFsIGNhbGxiYWNrXG4gICAgICAgIGlmKHRoaXMudHV0b3JpYWwpIHtcbiAgICAgICAgICAgIHRoaXMudHV0b3JpYWwub25FbGVtZW50QWRkZWQodGhpcy5ib3hlc1tpbmRleF0ubmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5ib3hlc1tpbmRleF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgYm94IGZyb20gQ2FudmFzIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBJRFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBib3hJZCBpZCBvZiB0aGUgYm94IHRoYXQgc2hvdWxkIGJlIHJlbW92ZWRcbiAgICAgKi9cbiAgICByZW1vdmVCb3goYm94SWQpIHtcbiAgICAgICAgbGV0ICRnYXRlID0gJChcIiNcIitib3hJZCk7XG5cbiAgICAgICAgLy8gZmluZCB0aGUgZ2F0ZSBpbiBzdmcncyBsaXN0IG9mIGdhdGVzXG4gICAgICAgIGxldCBnYXRlSW5kZXggPSAtMTtcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLmJveGVzLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgaWYodGhpcy5ib3hlc1tpXS5zdmdPYmouaWQ9PT1ib3hJZCkge1xuICAgICAgICAgICAgICAgIGdhdGVJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZihnYXRlSW5kZXggPiAtMSkge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIGFsbCB3aXJlcyBjb25uZWN0ZWQgdG8gdGhpcyBnYXRlXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5ib3hlc1tnYXRlSW5kZXhdLmNvbm5lY3RvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVdpcmVzQnlDb25uZWN0b3JJZCh0aGlzLmJveGVzW2dhdGVJbmRleF0uY29ubmVjdG9yc1tpXS5zdmdPYmouaWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyByZW1vdmUgdGhlIGdhdGVcbiAgICAgICAgICAgIHRoaXMuYm94ZXMuc3BsaWNlKGdhdGVJbmRleCwgMSk7XG4gICAgICAgICAgICAkZ2F0ZS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgLy8gaWYgdHV0b3JpYWwgZXhpc3RzLCBjYWxsIHR1dG9yaWFsIGNhbGxiYWNrXG4gICAgICAgICAgICBpZih0aGlzLnR1dG9yaWFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50dXRvcmlhbC5vbkVsZW1lbnRSZW1vdmVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVHJ5aW5nIHRvIHJlbW92ZSBhbiBub25leGlzdGluZyBib3guIEJveCBpZDpcIiwgYm94SWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBib3hlcyBmcm9tIHRoZSBjYW52YXNcbiAgICAgKiBUT0RPIGZpeDogbm90IGFsbCBib3hlcyBhcmUgcmVtb3ZlZFxuICAgICAqL1xuICAgIGNsZWFuQ2FudmFzKCkge1xuICAgICAgICBmb3IgKGxldCBib3ggb2YgdGhpcy5ib3hlcykge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVCb3goYm94LmlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyB3aXJlIGNvbm5lY3RpbmcgdGhlIHByb3ZpZGVkIGNvbm5lY3RvcnNcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICBmcm9tSWQgICAgICAgICBpZCBvZiB0aGUgY29ubmVjdG9yIHRoYXQgdGhlIHdpcmUgaXMgYXR0YWNoZWQgdG9cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICB0b0lkICAgICAgICAgICBpZCBvZiB0aGUgY29ubmVjdG9yIHRoYXQgdGhlIHdpcmUgaXMgYXR0YWNoZWQgdG9cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbcmVmcmVzaD10cnVlXSBpZiByZWZyZXNoIGlzIHNldCB0byB0cnVlLCB0aGUgU1ZHIGRvY3VtZW50IHdpbGwgYmUgcmVsb2FkZWQgYWZ0ZXIgYWRkaW5nIHRoZSB3aXJlXG4gICAgICogQHJldHVybiB7ZWRpdG9yRWxlbWVudHMuV2lyZX0gICAgaW5zdGFuY2Ugb2YgZWRpdG9yRWxlbWVudHMuV2lyZSB0aGF0IGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBDYW52YXNcbiAgICAgKi9cbiAgICBuZXdXaXJlKGZyb21JZCwgdG9JZCwgcmVmcmVzaCA9IHRydWUpIHtcbiAgICAgICAgLy8gd2lyZSBtdXN0IGNvbm5lY3QgdHdvIGRpc3RpbmN0IGNvbm5lY3RvcnNcbiAgICAgICAgaWYgKGZyb21JZD09PXRvSWQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcblxuICAgICAgICBsZXQgY29ubmVjdG9ycyA9IFt0aGlzLmdldENvbm5lY3RvckJ5SWQoZnJvbUlkKSwgdGhpcy5nZXRDb25uZWN0b3JCeUlkKHRvSWQpXVxuXG4gICAgICAgIC8vIGlucHV0IGNvbm5lY3RvcnMgY2FuIGJlIGNvbm5lY3RlZCB0byBvbmUgd2lyZSBtYXhcbiAgICAgICAgY29ubmVjdG9ycy5mb3JFYWNoKGNvbm4gPT4ge1xuICAgICAgICAgICAgaWYoY29ubi5pc0lucHV0Q29ubmVjdG9yKVxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlV2lyZXNCeUNvbm5lY3RvcklkKGNvbm4uaWQpXG4gICAgICAgIH0pXG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMud2lyZXMubGVuZ3RoO1xuICAgICAgICB0aGlzLndpcmVzW2luZGV4XSA9IG5ldyBlZGl0b3JFbGVtZW50cy5XaXJlKHRoaXMsIGZyb21JZCwgdG9JZCwgdGhpcy5ncmlkU2l6ZSwgcmVmcmVzaCk7XG5cbiAgICAgICAgY29ubmVjdG9ycy5mb3JFYWNoKGNvbm4gPT4ge1xuICAgICAgICAgICAgY29ubi5hZGRXaXJlSWQodGhpcy53aXJlc1tpbmRleF0uc3ZnT2JqLmlkKTtcbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLmFwcGVuZEVsZW1lbnQodGhpcy53aXJlc1tpbmRleF0sIHJlZnJlc2gpO1xuICAgICAgICB0aGlzLm1vdmVUb0JhY2tCeUlkKHRoaXMud2lyZXNbaW5kZXhdLnN2Z09iai5pZCk7XG5cbiAgICAgICAgaWYocmVmcmVzaClcbiAgICAgICAgICAgIHRoaXMud2lyZXNbaW5kZXhdLnVwZGF0ZVdpcmVTdGF0ZSgpXG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2lyZXNbaW5kZXhdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNyZWF0ZXMgYSBuZXcgYmxhY2tib3hcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHggICAgICAgaG9yaXpvbnRhbCBwb3NpdGlvbiBvZiB0aGUgYmxhY2tib3ggaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSAge251bWJlcn0geSAgICAgICB2ZXJ0aWNhbCBwb3NpdGlvbiBvZiB0aGUgZ2F0ZSBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBpbnB1dHMgIG51bWJlciBvZiBpbnB1dCBwaW5zIG9mIHRoaXMgYmxhY2tib3hcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IG91dHB1dHMgbnVtYmVyIG9mIG91dHB1dCBwaW5zIG9mIHRoaXMgYmxhY2tib3hcbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gdGFibGUgICBBcnJheSBvZiBhcnJheXMsIGVhY2ggaW5uZXIgYXJyYXkgY29udGFpbnMgbGlzdCBvZiBbTG9naWMuc3RhdGVdKC4vbW9kdWxlLUxvZ2ljLmh0bWwjLnN0YXRlKXMsXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQgZGVzY3JpYmUgdGhlIGNvbWJpbmF0aW9uIG9mIGlucHV0IHBpbiBhbmQgb3V0cHV0IHBpbiBzdGF0ZXMgaW4gdGhlIG9yZGVyIGZyb20gdGhlIHRvcCB0byBib3R0b20gZm9yIGJvdGggaW5wdXQgYW5kIG91dHB1dCBjb25uZWN0b3JzLlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICBJZiB3ZSBoYWQgYW4gQU5EIGFycmF5IGFzIGEgYmxhY2tib3gsIG9uZSBvZiB0aGUgc3RhdGVzIGNvdWxkIGJlIGBbTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub2ZmXWBcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpY2ggbWVhbnMgdGhhdCBpZiB0aGUgZmlyc3QgaW5wdXQgY29ubmVjdG9yIGlzIGluIHRoZSBgb25gIHN0YXRlIGFuZCB0aGUgc2Vjb25kIGNvbm5lY3RvciBpcyBpbiB0aGUgYG9mZmAgc3RhdGUsXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBzdGF0ZSBvZiB0aGUgb3V0cHV0IGNvbm5lY3RvciB3aWxsIGJlIGBvZmZgLlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgYXJyYXkgY2FuIGJlIGRlc2NyaWJlZCBhcyBgW3N0YXRlIGZvciBpbnB1dCBjb25uIDEsIHN0YXRlIGZvciBpbnB1dCBjb25uIDIsIC4uLiwgc3RhdGUgZm9yIG91dHB1dCBjb25uIDEsIHN0YXRlIGZvciBvdXRwdXQgY29ubiAyIC4uLl1gLlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gIG5hbWUgICBhIG5hbWUgdGhhdCB3aWxsIGJlIGRpc3BsYXllZCBvbiB0aGUgYmxhY2tib3hcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBbcmVmcmVzaD10cnVlXSBpZiB0cnVlLCB0aGlzLnJlZnJlc2goKSB3aWxsIGJlIGNhbGxlZCBhZnRlciBhZGRpbmcgdGhlIGdhdGVcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2VkaXRvckVsZW1lbnRzLkJsYWNrYm94fSBpbnN0YW5jZSBvZiB7QGxpbmsgQmxhY2tib3h9IHRoYXQgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIFtDYW52YXNdKC4vbW9kdWxlLUNhbnZhcy5odG1sKVxuICAgICAqL1xuICAgIG5ld0JsYWNrYm94KGlucHV0cywgb3V0cHV0cywgdGFibGUsIG5hbWUsIHgsIHksIHJlZnJlc2g9dHJ1ZSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuYm94ZXMubGVuZ3RoO1xuXG4gICAgICAgIHRoaXMuYm94ZXNbaW5kZXhdID0gbmV3IGVkaXRvckVsZW1lbnRzLkJsYWNrYm94KFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIGlucHV0cyxcbiAgICAgICAgICAgIG91dHB1dHMsXG4gICAgICAgICAgICAoLi4uaW5wdXRTdGF0ZXMpID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgdGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZUlucHV0U3RhdGVzID0gbGluZS5zbGljZSgwLCBpbnB1dHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGV2ZXJ5IGlucHV0IHN0YXRlIG1hdGNoZXMgdGhlIGNvcnJlc3BvbmRpbmcgaW5wdXQgc3RhdGUgaW4gdGhpcyBsaW5lIG9mIHRoZSB0cnV0aCB0YWJsZVxuICAgICAgICAgICAgICAgICAgICBpZihpbnB1dFN0YXRlcy5ldmVyeSgodmFsdWUsIGluZGV4KSA9PiB2YWx1ZSA9PT0gbGluZUlucHV0U3RhdGVzW2luZGV4XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiB0aGUgcmVzdCBvZiB0aGUgbGluZSBhcyBvdXRwdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5lLnNsaWNlKGlucHV0cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaWYgbm90aGluZyBtYXRjaGVzLCBzZXQgYWxsIG91dHB1dHMgdG8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20obmV3IEFycmF5KG91dHB1dHMpLCAoKSA9PiBMb2dpYy5zdGF0ZS51bmtub3duKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5hbWVcbiAgICAgICAgKTtcblxuICAgICAgICBpZih4ICYmIHkpIHtcbiAgICAgICAgICAgIGxldCB0ciA9IG5ldyBlZGl0b3JFbGVtZW50cy5UcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHRyLnNldFRyYW5zbGF0ZSh4LCB5KTtcblxuICAgICAgICAgICAgdGhpcy5ib3hlc1tpbmRleF0uc3ZnT2JqLmFkZEF0dHIoe1widHJhbnNmb3JtXCI6IHRyLmdldCgpfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFwcGVuZEVsZW1lbnQodGhpcy5ib3hlc1tpbmRleF0sIHJlZnJlc2gpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmJveGVzW2luZGV4XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSBjb3JyZWN0IGluc3RhbmNlIG9mIGVkaXRvckVsZW1lbnRzLldpcmUgaW4gdGhlIENhbnZhcycgd2lyZXMgYnkgdGhlIHByb3ZpZGVkIGlkXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSB3aXJlSWQgaWQgb2YgdGhlIHdpcmVcbiAgICAgKiBAcmV0dXJuIHtlZGl0b3JFbGVtZW50cy5XaXJlfSBpbnN0YW5jZSBvZiB0aGUgd2lyZVxuICAgICAqL1xuICAgIGdldFdpcmVCeUlkKHdpcmVJZCkge1xuICAgICAgICBmb3IgKGNvbnN0IHdpcmUgb2YgdGhpcy53aXJlcykge1xuICAgICAgICAgICAgaWYod2lyZS5zdmdPYmouaWQgPT09IHdpcmVJZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB3aXJlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZCBhbGwgd2lyZXMgdGhhdCBhcmUgY29ubmVjdGVkIHRvIHRoZSBzcGVjaWZpZWQgY29ubmVjdG9yXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBjb25uZWN0b3JJZCBpZCBvZiB0aGUgY29ubmVjdG9yXG4gICAgICogQHJldHVybiB7U2V0fSBzZXQgb2YgSUQncyBvZiB0aGUgd2lyZXMgY29ubmVjdGVkIHRvIHRoaXMgY29ubmVjdG9yXG4gICAgICovXG4gICAgZ2V0V2lyZXNCeUNvbm5lY3RvcklkKGNvbm5lY3RvcklkKSB7XG4gICAgICAgIGxldCBjb25uZWN0b3IgPSB0aGlzLmdldENvbm5lY3RvckJ5SWQoY29ubmVjdG9ySWQpO1xuICAgICAgICByZXR1cm4gY29ubmVjdG9yLndpcmVJZHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHdpcmUgdGhhdCBoYXMgdGhlIHByb3ZpZGVkIElEXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSB3aXJlSWQgSUQgb2YgdGhlIHdpcmUgdGhhdCBzaG91bGQgYmUgcmVtb3ZlZFxuICAgICAqL1xuICAgIHJlbW92ZVdpcmVCeUlkKHdpcmVJZCkge1xuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMud2lyZXMubGVuZ3RoIDsgKytpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy53aXJlc1tpXS5zdmdPYmouaWQgPT09IHdpcmVJZCkge1xuXG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3RvcjEgPSB0aGlzLndpcmVzW2ldLnN0YXJ0Q29ubmVjdG9yO1xuICAgICAgICAgICAgICAgIGxldCBjb25uZWN0b3IyID0gdGhpcy53aXJlc1tpXS5lbmRDb25uZWN0b3I7XG5cbiAgICAgICAgICAgICAgICBjb25uZWN0b3IxLnJlbW92ZVdpcmVJZEFuZFVwZGF0ZSh3aXJlSWQpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3RvcjIucmVtb3ZlV2lyZUlkQW5kVXBkYXRlKHdpcmVJZCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLndpcmVzW2ldLnN2Z09iai4kZWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy53aXJlcy5zcGxpY2UoaSwgMSk7XG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgd2lyZXMgdGhhdCBhcmUgY29ubmVjdGVkIHRvIHRoZSBjb25uZWN0b3IgcHJvdmlkZWQgYnkgaXRzIElEXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBjb25uZWN0b3JJZCBJRCBvZiB0aGUgY29ubmVjdG9yXG4gICAgICovXG4gICAgcmVtb3ZlV2lyZXNCeUNvbm5lY3RvcklkKGNvbm5lY3RvcklkKSB7XG4gICAgICAgIGxldCBjb25uZWN0b3IgPSB0aGlzLmdldENvbm5lY3RvckJ5SWQoY29ubmVjdG9ySWQpO1xuXG4gICAgICAgIGNvbm5lY3Rvci53aXJlSWRzLmZvckVhY2god2lyZUlkID0+IHtcbiAgICAgICAgICAgIGxldCB3aXJlID0gdGhpcy5nZXRXaXJlQnlJZCh3aXJlSWQpO1xuXG4gICAgICAgICAgICAvLyBnZXQgdGhlIG90aGVyIGNvbm5lY3RvciB0aGF0IGlzIHRoZSB3aXJlIGNvbm5lY3RlZCB0b1xuICAgICAgICAgICAgbGV0IG90aGVyQ29ubmVjdG9yID0gdGhpcy5nZXRDb25uZWN0b3JCeUlkKHdpcmUuZnJvbUlkLCB3aXJlKTtcbiAgICAgICAgICAgIGlmKG90aGVyQ29ubmVjdG9yLnN2Z09iai5pZD09PWNvbm5lY3RvcklkKSB7XG4gICAgICAgICAgICAgICAgb3RoZXJDb25uZWN0b3IgPSB0aGlzLmdldENvbm5lY3RvckJ5SWQod2lyZS50b0lkLCB3aXJlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSB3aXJlIHJlY29yZCBmcm9tIHRoZSBvdGhlciBjb25uZWN0b3JcbiAgICAgICAgICAgIG90aGVyQ29ubmVjdG9yLndpcmVJZHMuZGVsZXRlKHdpcmVJZCk7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgd2lyZSByZXByZXNlbnRhdGlvbiB1c2luZyBqUXVlcnlcbiAgICAgICAgICAgICQoXCIjXCIgKyB3aXJlSWQpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAvLyBpZiBvdGhlckNvbm5lY3RvciBpcyBhbiBpbnB1dCBjb25uZWN0b3IsIHNldCBpdHMgc3RhdGUgdG8gdW5rbm93blxuICAgICAgICAgICAgaWYob3RoZXJDb25uZWN0b3IuaXNJbnB1dENvbm5lY3Rvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnROZXdTaW11bGF0aW9uKG90aGVyQ29ubmVjdG9yLCBMb2dpYy5zdGF0ZS51bmtub3duKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBjbGVhciB0aGUgbGlzdCBvZiB3aXJlIElkc1xuICAgICAgICBjb25uZWN0b3Iud2lyZUlkcy5jbGVhcigpO1xuICAgICAgICAvLyBpZiBjb25uZWN0b3IgaXMgYW4gaW5wdXQgY29ubmVjdG9yLCBzZXQgaXRzIHN0YXRlIHRvIHVua25vd25cbiAgICAgICAgaWYoY29ubmVjdG9yLmlzSW5wdXRDb25uZWN0b3IpIHtcbiAgICAgICAgICAgIGNvbm5lY3Rvci5zZXRTdGF0ZShMb2dpYy5zdGF0ZS51bmtub3duKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIGNvcnJlY3QgaW5zdGFuY2Ugb2YgZWRpdG9yRWxlbWVudHMuQm94IGluIHRoZSBDYW52YXMnIGJveGVzIGJ5IHRoZSBwcm92aWRlZCBpZFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gYm94SWQgaWQgb2YgdGhlIGJveFxuICAgICAqIEByZXR1cm4ge2VkaXRvckVsZW1lbnRzLkJveH0gaW5zdGFuY2Ugb2YgdGhlIGJveFxuICAgICAqL1xuICAgIGdldEJveEJ5SWQoYm94SWQpIHtcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLmJveGVzLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgaWYodGhpcy5ib3hlc1tpXS5zdmdPYmouaWQ9PT1ib3hJZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJveGVzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kIHRoZSBjb3JyZWN0IGluc3RhbmNlIG9mIGVkaXRvckVsZW1lbnRzLkJveCBpbiB0aGUgQ2FudmFzJyBib3hlcyBieSBJRCBvZiBhIGNvbm5lY3RvciB0aGF0IGJlbG9uZ3MgdG8gdGhpcyBib3hcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGJveElkIGlkIG9mIHRoZSBjb25uZWN0b3JcbiAgICAgKiBAcmV0dXJuIHtlZGl0b3JFbGVtZW50cy5Cb3h9IGluc3RhbmNlIG9mIHRoZSBib3hcbiAgICAgKi9cbiAgICBnZXRCb3hCeUNvbm5lY3RvcklkKGNvbm5lY3RvcklkKSB7XG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy5ib3hlcy5sZW5ndGggOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmJveGVzW2ldLmdldENvbm5lY3RvckJ5SWQoY29ubmVjdG9ySWQpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ib3hlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGluc3RhbmNlIG9mIGEgY29ubmVjdG9yIGJhc2VkIG9uIGl0J3MgSUQgKGFuZCBhbHNvIG9uIGFuIGluc3RhbmNlIG9mIGVkaXRvckVsZW1lbnRzLldpcmUgaWYgcHJvdmlkZWQpXG4gICAgICpcbiAgICAgKiBUaGUgd2lyZSB2YXJpYWJsZSBpcyB1c2VkIGFzIGhldXJpc3RpYzogV2hlbiB3ZSBrbm93IHRoZSB3aXJlLCB3ZSBoYXZlIHRvIGNoZWNrIG9ubHlcbiAgICAgKiB0d28gZ2F0ZXMgaW5zdGVhZCBvZiBhbGwgb2YgdGhlbVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gY29ubmVjdG9ySWQgaWQgb2YgdGhlIGNvbm5lY3RvclxuICAgICAqIEBwYXJhbSAge2VkaXRvckVsZW1lbnRzLldpcmV9IFt3aXJlXSAgICAgIGluc3RhbmNlIG9mIHRoZSBXaXJlIHRoYXQgaXMgY29ubmVjdGVkIHRvIHRoaXMgY29ubmVjdG9yXG4gICAgICogQHJldHVybiB7ZWRpdG9yRWxlbWVudHMuQ29ubmVjdG9yfSAgICAgICAgaW5zdGFuY2Ugb2YgdGhlIGNvbm5lY3RvclxuICAgICAqL1xuICAgIGdldENvbm5lY3RvckJ5SWQoY29ubmVjdG9ySWQsIHdpcmU9dW5kZWZpbmVkKSB7XG5cbiAgICAgICAgaWYod2lyZSE9PXVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gd2Uga25vdyB0aGUgd2lyZSAtLSB3ZSBjYW4gY2hlY2sgb25seSBnYXRlcyBhdCB0aGUgZW5kcyBvZiB0aGlzIHdpcmVcbiAgICAgICAgICAgIGxldCBjb25uZWN0b3IgPSB3aXJlLnN0YXJ0Qm94LmdldENvbm5lY3RvckJ5SWQoY29ubmVjdG9ySWQpXG4gICAgICAgICAgICBpZiAoIWNvbm5lY3Rvcikge1xuICAgICAgICAgICAgICAgIGNvbm5lY3RvciA9IHdpcmUuZW5kQm94LmdldENvbm5lY3RvckJ5SWQoY29ubmVjdG9ySWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29ubmVjdG9yXG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHdlIGRvIG5vdCBrbm93IHRoZSB3aXJlIC0tIHdlIGhhdmUgdG8gY2hlY2sgYWxsIGdhdGVzXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGJveCBvZiB0aGlzLmJveGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdG9yID0gYm94LmdldENvbm5lY3RvckJ5SWQoY29ubmVjdG9ySWQpXG4gICAgICAgICAgICAgICAgaWYoY29ubmVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25uZWN0b3JcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxvZ2ljYWwgalF1ZXJ5IHRhcmdldCBiYXNlZCBvbiB0aGUgZmFjdHVhbCBqUXVlcnkgdGFyZ2V0LlxuICAgICAqXG4gICAgICogSWYgdGhlIG9iamVjdCwgdGhhdCB1c2VyIGludGVyYWN0ZWQgd2l0aCwgaXMgbm90IGEgY29ubmVjdG9yIGFuZCBpcyBpbiBhIGdyb3VwLFxuICAgICAqIHJldHVybiB0aGUgZ3JvdXAgalF1ZXJ5IG9iamVjdCBpbnN0ZWFkIG9mIHRoZSBvcmlnaW5hbCBqUXVlcnkgb2JqZWN0LlxuICAgICAqIEBwYXJhbSAge3RhcmdldH0gdGFyZ2V0IGpRdWVyeSB0YXJnZXQgb2YgdGhlIG9iamVjdCB1c2VyIGludGVyYWN0ZWQgd2l0aFxuICAgICAqIEByZXR1cm4ge3RhcmdldH0gICAgICAgIGpRdWVyeSB0YXJnZXQgb2YgdGhlIG9iamVjdCB1c2VyIHdhbnRlZCB0byBpbnRlcmFjdCB3aXRoXG4gICAgICovXG4gICAgZ2V0UmVhbEpRdWVyeVRhcmdldCh0YXJnZXQpIHtcbiAgICAgICAgbGV0ICR0YXJnZXQgPSAkKHRhcmdldCk7XG4gICAgICAgIGlmKCEkdGFyZ2V0Lmhhc0NsYXNzKFwiY29ubmVjdG9yXCIpICYmICR0YXJnZXQucGFyZW50cygnZycpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICR0YXJnZXQgPSAkdGFyZ2V0LnBhcmVudCgpO1xuICAgICAgICAgICAgd2hpbGUgKCR0YXJnZXQucHJvcChcInRhZ05hbWVcIikgIT09IFwiR1wiICYmICR0YXJnZXQucHJvcChcInRhZ05hbWVcIikgIT09IFwiZ1wiKSB7XG4gICAgICAgICAgICAgICAgJHRhcmdldCA9ICR0YXJnZXQucGFyZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICR0YXJnZXQ7XG4gICAgfVxuXG4gICAgLy8gcmV0dXJucyB0aGUgZWRpdG9yRWxlbWVudCB0aGF0IHVzZXIgaW50ZXJhY3RlZCB3aXRoLCB0aGUgXCJ0YXJnZXRcIiBhcmd1bWVudCBpcyBhIGpRdWVyeSBlbGVtZW50XG4gICAgLyoqXG4gICAgICogR2V0IGluc3RhbmNlIG9mIHNvbWUgb2JqZWN0IGZyb20gZWRpdG9yRWxlbWVudCBiYXNlZCBvbiB0aGUgalF1ZXJ5IHRhcmdldFxuICAgICAqIEBwYXJhbSAge3RhcmdldH0gdGFyZ2V0IGpRdWVyeSB0YXJnZXQgdGhhdCB1c2VyIGludGVyYWN0ZWQgd2l0aFxuICAgICAqIEByZXR1cm4ge2VkaXRvckVsZW1lbnRzLk5ldHdvcmtFbGVtZW50fSBpbnN0YW5jZSBvZiBhbiBvYmplY3QgZGVyaXZlZCBmcm9tIGVkaXRvckVsZW1lbnRzLk5ldHdvcmtFbGVtZW50IHRoYXQgdGhlIHVzZXIgaW50ZXJhY3RlZCB3aXRoXG4gICAgICovXG4gICAgZ2V0UmVhbFRhcmdldCh0YXJnZXQpIHtcbiAgICAgICAgLy8gZXZlbnR5IHNlIG11c2VqaSB6cHJhY292YXQgdGFkeSwgcHJvdG96ZSB2IFNWRyBzZSBldmVudHkgbmVwcm9wYWd1amlcbiAgICAgICAgbGV0ICR0YXJnZXQgPSAkKHRhcmdldCk7XG5cbiAgICAgICAgaWYoJHRhcmdldC5oYXNDbGFzcyhcImNvbm5lY3RvclwiKSkge1xuICAgICAgICAgICAgLy8gdGhpcyBpcyBhIGNvbm5lY3RvciwgZG9uJ3QgdHJhdmVyc2UgZ3JvdXBzXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb25uZWN0b3JCeUlkKCR0YXJnZXQuYXR0cignaWQnKSk7XG4gICAgICAgIH0gZWxzZSBpZigkdGFyZ2V0LnBhcmVudHMoJ2cnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGVsZW1lbnQgaXMgaW4gYSBncm91cCBhbmQgaXQgaXMgbm90IGEgY29ubmVjdG9yXG5cbiAgICAgICAgICAgIC8vIHRyYXZlcnNpbmcgdXAgdGhlIERPTSB0cmVlIHVudGlsIHdlIGZpbmQgdGhlIGNsb3Nlc3QgZ3JvdXBcbiAgICAgICAgICAgIGxldCAkcGFyZW50R3JvdXAgPSAkdGFyZ2V0LnBhcmVudCgpO1xuICAgICAgICAgICAgd2hpbGUgKCRwYXJlbnRHcm91cC5wcm9wKFwidGFnTmFtZVwiKSAhPT0gXCJHXCIgJiYgJHBhcmVudEdyb3VwLnByb3AoXCJ0YWdOYW1lXCIpICE9PSBcImdcIikge1xuICAgICAgICAgICAgICAgICRwYXJlbnRHcm91cCA9ICRwYXJlbnRHcm91cC5wYXJlbnQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Qm94QnlJZCgkcGFyZW50R3JvdXAuYXR0cignaWQnKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoJHRhcmdldC5oYXNDbGFzcyhcIndpcmVcIikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFdpcmVCeUlkKCR0YXJnZXQuYXR0cignaWQnKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIGVsZW1lbnQgdG8gdGhlIENhbnZhc1xuICAgICAqIEBwYXJhbSAge2VkaXRvckVsZW1lbnRzLk5ldHdvcmtFbGVtZW50fSAgZWxlbWVudCBFbGVtZW50IHRoYXQgd2lsbCBiZSBhZGRlZCBvbiB0aGUgQ2FudmFzXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gW3JlZnJlc2g9dHJ1ZV0gaWYgdHJ1ZSwgdGhlIFNWRyBkb2N1bWVudCB3aWxsIGJlIHJlbG9hZGVkIGFmdGVyIGFkZGluZyB0aGlzIGVsZW1lbnRcbiAgICAgKi9cbiAgICBhcHBlbmRFbGVtZW50KGVsZW1lbnQsIHJlZnJlc2ggPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kSlF1ZXJ5T2JqZWN0KGVsZW1lbnQuZ2V0KCksIHJlZnJlc2gpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGVuZCBhIGpRdWVyeSBlbGVtZW50IHRvIHRoZSBTVkcgZG9jdW1lbnQgKGhlbHBlciBmb3IgdGhpcy5hcHBlbmRFbGVtZW50KVxuICAgICAqIEBwYXJhbSAge29iamVjdH0gIG9iamVjdCAgICAgICAgIGpRdWVyeSBlbGVtZW50IHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGUgU1ZHIGRvY3VtZW50XG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gW3JlZnJlc2g9dHJ1ZV0gaWYgdHJ1ZSwgdGhlIFNWRyBkb2N1bWVudCB3aWxsIGJlIHJlbG9hZGVkIGFmdGVyIGFkZGluZyB0aGlzIGVsZW1lbnRcbiAgICAgKi9cbiAgICBhcHBlbmRKUXVlcnlPYmplY3Qob2JqZWN0LCByZWZyZXNoID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLiRzdmcuYXBwZW5kKG9iamVjdCk7XG4gICAgICAgIGlmKHJlZnJlc2gpXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBuZXcgcGF0dGVybiB0byB0aGUgZGVmaW5pdGlvbnMgZWxlbWVudCBpbiB0aGUgU1ZHIGRvY3VtZW50XG4gICAgICogQHBhcmFtIHtzdmdPYmouUGF0dGVybn0gcGF0dGVybiBwYXR0ZXJuIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGUgPGRldnM+IGVsZW1lbnQgaW4gdGhlIFNWRyBkb2N1bWVudFxuICAgICAqL1xuICAgIGFkZFBhdHRlcm4ocGF0dGVybikge1xuICAgICAgICB0aGlzLiRkZWZzLmFwcGVuZChwYXR0ZXJuKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVsb2FkIHRoZSBTVkcgZG9jdW1lbnQgKG5lZWRlZCB0byBkaXNwbGF5IGEgbmV3bHkgYXBwZW5kZWQgalF1ZXJ5IG9iamVjdClcbiAgICAgKi9cbiAgICByZWZyZXNoKCkge1xuICAgICAgICB0aGlzLiRzdmcuaHRtbCh0aGlzLiRzdmcuaHRtbCgpKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJTVkcgZG9jdW1lbnQgaGFzIGJlZW4gcmVsb2FkZWQuXCIpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzcGxheSB0aGUgY29udGV4dCBtZW51IG9uIHRoZSBzcGVjaWZpZWQgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHggICAgICAgaG9yaXpvbnRhbCBwb3NpdGlvbiBpbiBDU1MgcGl4ZWxzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB5ICAgICAgIHZlcnRpY2FsIHBvc2l0aW9uIGluIENTUyBwaXhlbHNcbiAgICAgKiBAcGFyYW0gIHtqUXVlcnkuZWxlbWVudH0gJHRhcmdldCB0aGUgaXRlbSB1c2VyIGNsaWNrZWQgb24gKHVzZWQgdG8gZGlzcGxheSBcInJlbW92ZSB0aGlzIGVsZW1lbnRcIi10eXBlIGl0ZW1zIGluIHRoZSBtZW51KVxuICAgICAqL1xuICAgIGRpc3BsYXlDb250ZXh0TWVudSh4LCB5LCAkdGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dE1lbnUuZGlzcGxheSh4LCB5LCAkdGFyZ2V0KTtcblxuICAgICAgICAvLyBpZiB0dXRvcmlhbCBleGlzdHMsIGNhbGwgdHV0b3JpYWwgY2FsbGJhY2tcbiAgICAgICAgaWYodGhpcy50dXRvcmlhbCkge1xuICAgICAgICAgICAgdGhpcy50dXRvcmlhbC5vbkNvbnRleHRNZW51T3BlbmVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoaWRlIHRoZSBjb250ZXh0IG1lbnVcbiAgICAgKi9cbiAgICBoaWRlQ29udGV4dE1lbnUoKSB7XG4gICAgICAgIHRoaXMuY29udGV4dE1lbnUuaGlkZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNuYXAgYSB2YWx1ZSB0byBhIGdyaWRcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHZhbHVlIHZhbHVlIGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9ICAgICAgIHRoZSB2YWx1ZSByb3VuZGVkIHRvIHRoZSBjbG9zZXN0IG51bWJlciBkaXZpc2libGUgYnkgdGhlIGdyaWQgc2l6ZVxuICAgICAqL1xuICAgIHNuYXBUb0dyaWQodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodmFsdWUgLyB0aGlzLmdyaWRTaXplKSAqIHRoaXMuZ3JpZFNpemU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY29udmVydCBncmlkIHBpeGVscyB0byBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB2YWx1ZSBkaXN0YW5jZSBpbiBncmlkIHBpeGVsc1xuICAgICAqIEByZXR1cm4ge251bWJlcn0gICAgICAgZGlzdGFuY2UgaW4gU1ZHIHBpeGVsc1xuICAgICAqL1xuICAgIGdyaWRUb1NWRyh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgKiB0aGlzLmdyaWRTaXplO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNvbnZlcnQgU1ZHIHBpeGVscyB0byBncmlkIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBkaXN0YW5jZSBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHJldHVybiB7bnVtYmVyfSAgICAgIGRpc3RhbmNlIGluIGdydWQgcGl4ZWxzXG4gICAgICovXG4gICAgU1ZHVG9HcmlkKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSAvIHRoaXMuZ3JpZFNpemU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc3RhdGljIGZ1bmN0aW9uIGZvciBzbmFwcGluZyBhIHZhbHVlIHRvIGEgZ3JpZFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gdmFsdWUgdmFsdWUgaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSAge251bWJlcn0gZ3JpZFNpemUgc2l6ZSBvZiB0aGUgZ3JpZCBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHJldHVybiB7bnVtYmVyfSAgICAgICB0aGUgdmFsdWUgcm91bmRlZCB0byB0aGUgY2xvc2VzdCBudW1iZXIgZGl2aXNpYmxlIGJ5IHRoZSBncmlkIHNpemVcbiAgICAgKi9cbiAgICBzdGF0aWMgc25hcFRvR3JpZCh2YWx1ZSwgZ3JpZFNpemUpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodmFsdWUgLyBncmlkU2l6ZSkgKiBncmlkU2l6ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBtb3ZlIGFuIGVsZW1lbnQgdG8gdGhlIGZyb250IGluIHRoZSBjYW52YXNcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG9iaklkIGlkIG9mIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgbW92ZVRvRnJvbnRCeUlkKG9iaklkKSB7XG4gICAgICAgIHRoaXMuJHN2Zy5hcHBlbmQoJChcIiNcIiArIG9iaklkKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbW92ZSBhbiBlbGVtZW50IHRvIHRoZSBiYWNrIGluIHRoZSBjYW52YXNcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG9iaklkIGlkIG9mIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgbW92ZVRvQmFja0J5SWQob2JqSWQpIHtcbiAgICAgICAgJChcIiNcIiArIHRoaXMuYmFja2dyb3VuZC5pZClcbiAgICAgICAgICAgIC5hZnRlcigkKFwiI1wiICsgb2JqSWQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgc2V0IG9mIG5vZGVzLCB0aGF0IGNhbm5vdCBiZSB1c2VkIGZvciB3aXJpbmcgYXQgYW55IGNpcmN1bXN0YW5jZXNcbiAgICAgKiBAcmV0dXJuIHtTZXR9IHNldCBvZiBub2RlcyAob2JqZWN0cyBjb250YWluaW5nIHggYW5kIHkgY29vcmRpbmF0ZXMpIHRoYXQgYXJlIG5vdCBzdWl0YWJsZSBmb3Igd2lyaW5nXG4gICAgICovXG4gICAgZ2V0Tm9uUm91dGFibGVOb2RlcygpIHtcbiAgICAgICAgbGV0IGJsb2NrZWROb2RlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gZm9yIGVhY2ggYm94XG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy5ib3hlcy5sZW5ndGggOyArK2kpIHtcbiAgICAgICAgICAgIC8vIGdldCB0aGUgalF1ZXJ5IGNoaWxkIHdpdGggY2xhc3MgLnJlY3QgKFwiaGl0Ym94XCIpXG4gICAgICAgICAgICBsZXQgcmVjdCA9ICQoJyMnICsgdGhpcy5ib3hlc1tpXS5zdmdPYmouaWQpLmNoaWxkcmVuKFwiLnJlY3RcIilbMF07XG4gICAgICAgICAgICAvLyBnZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSByZWN0YW5nbGVcbiAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9ICQocmVjdCkucG9zaXRpb24oKTtcblxuICAgICAgICAgICAgLy8gc25hcCB0aGUgcG9zaXRpb24gdG8gdGhlIGdyaWRcbiAgICAgICAgICAgIHBvc2l0aW9uLmxlZnQgPSB0aGlzLnNuYXBUb0dyaWQocG9zaXRpb24ubGVmdCk7XG4gICAgICAgICAgICBwb3NpdGlvbi50b3AgPSB0aGlzLnNuYXBUb0dyaWQocG9zaXRpb24udG9wKTtcblxuICAgICAgICAgICAgLy8gZm9yIGVhY2ggaXRlbSBpbiBibG9ja2VkTm9kZXMgKHNldCBvZiBibG9ja2VkIG5vZGVzIHdpdGggY29vcmRpbmF0ZXMgcmVsYXRpdmVcbiAgICAgICAgICAgIC8vIHRvIHRoZSBsZWZ0IHVwcGVyIGNvcm5lciBvZiByZWN0OyB1bml0IHVzZWQgaXMgXCJvbmUgZ3JpZFNpemVcIikgY29udmVydCB0aGUgY29vcmRpbmF0ZXNcbiAgICAgICAgICAgIC8vIHRvIGFic29sdXRlIChtdWx0aXBsZSB3aXRoIGdyaWRTaXplIGFuZCBhZGQgcG9zaXRpb24gb2YgcmVjdCkgYW5kIGFkZCB0aGUgcmVzdWx0IHRvIHRoZSBzZXRcbiAgICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiB0aGlzLmJveGVzW2ldLmJsb2NrZWROb2Rlcykge1xuICAgICAgICAgICAgICAgIGxldCBhYnNvbHV0ZVggPSBwb3NpdGlvbi5sZWZ0ICsgaXRlbS54ICogdGhpcy5ncmlkU2l6ZTtcbiAgICAgICAgICAgICAgICBsZXQgYWJzb2x1dGVZID0gcG9zaXRpb24udG9wICsgaXRlbS55ICogdGhpcy5ncmlkU2l6ZTtcblxuICAgICAgICAgICAgICAgIGJsb2NrZWROb2Rlcy5hZGQoe1xuICAgICAgICAgICAgICAgICAgICB4OiBhYnNvbHV0ZVgsXG4gICAgICAgICAgICAgICAgICAgIHk6IGFic29sdXRlWVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE8gZW5zdXJlIHRoYXQgdGhpcy5yZWZyZXNoKCkgaXMgcmVhbGx5IHVubmVjZXNzYXJ5XG4gICAgICAgIC8vIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAvLyByZXR1cm4gdGhlIHNldFxuICAgICAgICByZXR1cm4gYmxvY2tlZE5vZGVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCBzZXQgb2Ygbm9kZXMsIHRoYXQgYXJlIGluY29udmVuaWVudCBmb3Igd2lyaW5nLCBidXQgY2FuIGJlIHVzZWQsIGp1c3QgYXJlIG5vdCBwcmVmZXJyZWRcbiAgICAgKiBAcmV0dXJuIHtTZXR9IHNldCBvZiBub2RlcyAob2JqZWN0cyBjb250YWluaW5nIHggYW5kIHkgY29vcmRpbmF0ZXMpIHRoYXQgYXJlIG5vdCBwcmVmZXJyZWQgZm9yIHdpcmluZ1xuICAgICAqL1xuICAgIGdldEluY29udmVuaWVudE5vZGVzKGlnbm9yZVdpcmVJZCkge1xuXG4gICAgICAgIGxldCBpbmNvbnZlbmllbnROb2RlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gZm9yIGVhY2ggd2lyZVxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMud2lyZXMubGVuZ3RoIDsgKytpKSB7XG4gICAgICAgICAgICAvLyAoaWdub3JlIHRoZSB3aXJlIHRoYXQgaXMgc3BlY2lmaWVkIGluIHRoZSBpZ25vcmVXaXJlSWQgYXJndW1lbnQgKGlmIGFueSkpXG4gICAgICAgICAgICBpZihpZ25vcmVXaXJlSWQ9PT11bmRlZmluZWQgfHwgaWdub3JlV2lyZUlkIT09dGhpcy53aXJlc1tpXS5zdmdPYmouaWQpIHtcbiAgICAgICAgICAgICAgICAvLyBjeWNsZSB0aHJvdWdoIHBvaW50cywgZm9yIGVhY2ggbmVpZ2JvdXJzIGFkZCBhbGwgcG9pbnRzIHRoYXQgYXJlIGluIGJldHdlZW4gdGhlbVxuICAgICAgICAgICAgICAgIC8vIGkuZS46ICgwLDApIGFuZCAoMCwzMCkgYXJlIGJsb2NraW5nIHRoZXNlIG5vZGVzOiAoMCwwKSwgKDAsMTApLCAoMCwyMCksICgwLDMwKVxuICAgICAgICAgICAgICAgIGxldCBwcmV2UG9pbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy53aXJlc1tpXS5wb2ludHMuZm9yRWFjaChwb2ludCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2UG9pbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHByZXZQb2ludCBpcyB1bmRlZmluZWQsIGFkZCB0aGUgZmlyc3QgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY29udmVuaWVudE5vZGVzLmFkZCh7eDogcG9pbnQueCwgeTogcG9pbnQueX0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSBhZGQgYWxsIHRoZSBwb2ludCBiZXR3ZWVuIHRoZSBwcmV2UG9pbnQgKGV4Y2x1ZGVkKSBhbmQgcG9pbnQgKGluY2x1ZGVkKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihwcmV2UG9pbnQueD09PXBvaW50LngpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgbGluZSBpcyBob3Jpem9udGFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZyb20gPSBNYXRoLm1pbihwcmV2UG9pbnQueSwgcG9pbnQueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRvID0gTWF0aC5tYXgocHJldlBvaW50LnksIHBvaW50LnkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUoZnJvbSA8PSB0bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNvbnZlbmllbnROb2Rlcy5hZGQoe3g6IHBvaW50LngsIHk6IGZyb219KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSArPSB0aGlzLmdyaWRTaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihwcmV2UG9pbnQueT09PXBvaW50LnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgbGluZSBpcyB2ZXJ0aWNhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmcm9tID0gTWF0aC5taW4ocHJldlBvaW50LngsIHBvaW50LngpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0byA9IE1hdGgubWF4KHByZXZQb2ludC54LCBwb2ludC54KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKGZyb20gPD0gdG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jb252ZW5pZW50Tm9kZXMuYWRkKHt4OiBmcm9tLCB5OiBwb2ludC55fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gKz0gdGhpcy5ncmlkU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpbmUgaXMgbmVpdGhlciBob3Jpem9udGFsIG5vciB2ZXJ0aWNhbCwgdGhyb3cgYW4gZXJyb3IgZm9yIGJldHRlciBmdXR1cmUgZGVidWdnaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImdldEluY29udmVuaWVudE5vZGVzOiBsaW5lIGJldHdlZW4gdHdvIHBvaW50cyBpcyBuZWl0aGVyIGhvcml6b250YWwgbm9yIHZlcnRpY2FsXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG5ldyBwcmV2UG9pbnRcbiAgICAgICAgICAgICAgICAgICAgcHJldlBvaW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDogcG9pbnQueCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHBvaW50LnlcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0dXJuIHRoZSBzZXRcbiAgICAgICAgcmV0dXJuIGluY29udmVuaWVudE5vZGVzO1xuICAgIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQge1xuICAgIGdldExpYnJhcnksXG4gICAgZ2V0TmV0d29ya0Zyb21MaWJyYXJ5XG59IGZyb20gJy4vbmV0d29ya0xpYnJhcnkuanMnO1xuXG4vKipcbiAqIEl0ZW0gaW4gdGhlIFtDb250ZXh0TWVudV0oLi9tb2R1bGUtQ29udGV4dE1lbnUuaHRtbCkuIENvbnRleHRNZW51SXRlbXMgY2FuIGJlIG5lc3RlZCB1c2luZyB0aGUgYXBwZW5kSXRlbSBmdW5jdGlvbi5cbiAqL1xuY2xhc3MgQ29udGV4dE1lbnVJdGVtIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAgICAgICAgICB0ZXh0IG9uIHRoZSBidXR0b25cbiAgICAgKiBAcGFyYW0ge0NvbnRleHRNZW51fSBjb250ZXh0TWVudSBpbnN0YW5jZSBvZiB0aGUgW0NvbnRleHRNZW51XSguL21vZHVsZS1Db250ZXh0TWVudS5odG1sKSB0aGlzIGl0ZW0gYmVsb25ncyB0b1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNsaWNrRnVuY3Rpb24gY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHVzZXIgY2xpY2tzIHRoaXMgaXRlbVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRleHQsIGNvbnRleHRNZW51LCBjbGlja0Z1bmN0aW9uKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0ZXh0IG9uIHRoZSBidXR0b25cbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGluc3RhbmNlIG9mIHRoZSBbQ29udGV4dE1lbnVdKC4vbW9kdWxlLUNvbnRleHRNZW51Lmh0bWwpIHRoaXMgaXRlbSBiZWxvbmdzIHRvXG4gICAgICAgICAqIEB0eXBlIHtDb250ZXh0TWVudX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29udGV4dE1lbnUgPSBjb250ZXh0TWVudTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogalF1ZXJ5IGVsZW1lbnQgcmVwcmVzZW50aW5nIERPTSBjb250ZW50IG9mIHRoaXMgbWVudSBpdGVtXG4gICAgICAgICAqIEB0eXBlIHtqUXVlcnkuZWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuJGVsID0gJChcIjxsaT5cIikudGV4dCh0ZXh0KTtcblxuICAgICAgICAvLyBzZXQgdXAgY2xpY2sgY2FsbGJhY2sgaWYgY2xpY2tGdW5jdGlvbiBpcyBkZWZpbmVkXG4gICAgICAgIGlmKGNsaWNrRnVuY3Rpb24hPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgICQodGhpcy4kZWwpLmNsaWNrKFxuICAgICAgICAgICAgICAgIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjbGlja0Z1bmN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRNZW51LmhpZGUoKTtcblxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGpRdWVyeSBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIHN1Ym1lbnUgKG9yIHVuZGVmaW5lZCwgaWYgaXRlbSBoYXMgbm8gc3ViaXRlbXMpXG4gICAgICAgICAqIEB0eXBlIHtqUXVlcnkuZWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuJHN1Ym1lbnUgPSB1bmRlZmluZWRcblxuICAgICAgICAvKipcbiAgICAgICAgICogc3VibWVudSBpdGVtIGNvdW50ZXJcbiAgICAgICAgICogQHR5cGUge051bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXRlbUNvdW50ID0gMFxuXG4gICAgICAgIC8vIHNldCBob3ZlciBjYWxsYmFja1xuICAgICAgICAkKHRoaXMuJGVsKS5ob3ZlcigoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIC8vIG1vdXNlIG9uXG5cbiAgICAgICAgICAgIGlmKHRoaXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHN1Ym1lbnUuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IHRoaXMuJGVsLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogdGhpcy4kZWwucGFyZW50KCkub2Zmc2V0KCkubGVmdCArIHRoaXMuJGVsLnBhcmVudCgpLndpZHRoKCksXG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnUuJGVsLmFmdGVyKHRoaXMuJHN1Ym1lbnUpO1xuXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgLy8gbW91c2Ugb3V0XG4gICAgICAgICAgICBpZih0aGlzLiRzdWJtZW51KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kc3VibWVudS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGRvIG5vdCBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLCBoZXJlIGl0IGlzIHdhbnRlZFxuICAgICAgICAgICAgLy8gKGJlY2F1c2Ugc3VibWVudSBvdmVycmlkZXMgZGlzcGxheTogbm9uZSB3aGVuIHVzZXIgbW92ZXMgZnJvbSB0aGlzIG1lbnUgaXRlbSB0byB0aGUgc3VibWVudSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBpbnN0YW5jZSBvZiBbQ2FudmFzXSguL21vZHVsZS1DYW52YXMuaHRtbCkgdGhpcyBtZW51IGJlbG9uZ3MgdG9cbiAgICAgKiBAdHlwZSB7Q2FudmFzfVxuICAgICAqL1xuICAgIGdldCBwYXJlbnRTVkcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHRNZW51LnBhcmVudFNWRztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIHN1Ym1lbnVcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbUNvdW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGFkZCBhIENTUyBjbGFzcyB0byB0aGlzIGl0ZW1cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xzIFtkZXNjcmlwdGlvbl1cbiAgICAgKi9cbiAgICBhZGRDbGFzcyhjbHMpIHtcbiAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoY2xzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYXBwZW5kIGEgbmVzdGVkIHtAbGluayBDb250ZXh0TWVudUl0ZW19IHRvIHRoaXMgaXRlbVxuICAgICAqIEBwYXJhbSAge0NvbnRleHRNZW51SXRlbX0gaXRlbSBpdGVtIHRoYXQgd2lsbCBiZSBhcHBlbmRlZFxuICAgICAqL1xuICAgIGFwcGVuZEl0ZW0oaXRlbSkge1xuICAgICAgICBpZighdGhpcy4kc3VibWVudSkge1xuICAgICAgICAgICAgdGhpcy4kc3VibWVudSA9ICQoXCI8dWw+XCIpLmFkZENsYXNzKFwic3ViTGlzdFwiKTtcbiAgICAgICAgICAgIHRoaXMuJHN1Ym1lbnUuaG92ZXIoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuJHN1Ym1lbnUuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuJHN1Ym1lbnUuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuJHN1Ym1lbnUuYXBwZW5kKGl0ZW0uJGVsKTtcblxuICAgICAgICB0aGlzLml0ZW1Db3VudCsrO1xuXG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCBqUXVlcnkgZWxlbWVudCBvZiB0aGlzIG1lbnUgaXRlbVxuICAgICAqIEByZXR1cm4ge2pRdWVyeS5lbGVtZW50fSBqUXVlcnkgZWxlbWVudCBjb250YWluaW5nIGFsbCBET00gY29udGVudCBmb3IgdGhpcyBtZW51IGl0ZW1cbiAgICAgKi9cbiAgICBnZXQgalF1ZXJ5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kZWw7XG4gICAgfVxuXG4gICAgZ2V0IGpRdWVyeVN1Ym1lbnUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRzdWJtZW51O1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZW51IGl0ZW0gdGhhdCBoYXMgYSBjdXN0b20gY2xpY2sgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBhZGRzIGEge0BsaW5rIEdhdGV9IG9mIHRoZSBzcGVjaWZpZWQgdHlwZSB0byB0aGUgW0NhbnZhc10oLi9tb2R1bGUtQ2FudmFzLmh0bWwpXG4gKiBAZXh0ZW5kcyBDb250ZXh0TWVudUl0ZW1cbiAqL1xuY2xhc3MgR2F0ZU1lbnVJdGVtIGV4dGVuZHMgQ29udGV4dE1lbnVJdGVtIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAgICAgICAgdHlwZSBvZiB0aGUgZ2F0ZSB7QGxpbmsgR2F0ZX0gKGFuZCwgb3IsIC4uLilcbiAgICAgKiBAcGFyYW0ge0NvbnRleHRNZW51fSBjb250ZXh0TWVudSBpbnN0YW5jZSBvZiB0aGUgW0NvbnRleHRNZW51XSguL21vZHVsZS1Db250ZXh0TWVudS5odG1sKSB0aGF0IHRoaXMgaXRlbSBiZWxvbmdzIHRvXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodHlwZSwgY29udGV4dE1lbnUpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBgJHt0eXBlfSBnYXRlYCxcbiAgICAgICAgICAgIGNvbnRleHRNZW51LFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50U1ZHLm5ld0dhdGUoXG4gICAgICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50U1ZHLnNuYXBUb0dyaWQodGhpcy5wYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1YKGNvbnRleHRNZW51LnBvc2l0aW9uLngpKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRTVkcuc25hcFRvR3JpZCh0aGlzLnBhcmVudFNWRy52aWV3Ym94LnRyYW5zZm9ybVkoY29udGV4dE1lbnUucG9zaXRpb24ueSkpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmNsYXNzIEJsYWNrYm94TWVudUl0ZW0gZXh0ZW5kcyBDb250ZXh0TWVudUl0ZW0ge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGZpbGUsIGNvbnRleHRNZW51KSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGNvbnRleHRNZW51LFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGdldE5ldHdvcmtGcm9tTGlicmFyeShmaWxlKS50aGVuKCh7YmxhY2tib3gsIG5hbWV9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHtpbnB1dHMsIG91dHB1dHMsIHRhYmxlfSA9IGJsYWNrYm94O1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50U1ZHLm5ld0JsYWNrYm94KFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50U1ZHLnNuYXBUb0dyaWQodGhpcy5wYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1YKGNvbnRleHRNZW51LnBvc2l0aW9uLngpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50U1ZHLnNuYXBUb0dyaWQodGhpcy5wYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1ZKGNvbnRleHRNZW51LnBvc2l0aW9uLnkpKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH1cbn1cblxuY2xhc3MgTmV0d29ya01lbnVJdGVtIGV4dGVuZHMgQ29udGV4dE1lbnVJdGVtIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBmaWxlLCBjb250ZXh0TWVudSkge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBjb250ZXh0TWVudSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICBnZXROZXR3b3JrRnJvbUxpYnJhcnkoZmlsZSkudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRTVkcuaW1wb3J0RGF0YShcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKHRoaXMucGFyZW50U1ZHLnZpZXdib3gudHJhbnNmb3JtWChjb250ZXh0TWVudS5wb3NpdGlvbi54KSAvIHRoaXMucGFyZW50U1ZHLmdyaWRTaXplKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgucm91bmQodGhpcy5wYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1ZKGNvbnRleHRNZW51LnBvc2l0aW9uLnkpIC8gdGhpcy5wYXJlbnRTVkcuZ3JpZFNpemUpXG4gICAgICAgICAgICAgICAgICAgICkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnd296YWEnKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9XG59XG5cbi8qKiBAbW9kdWxlIENvbnRleHRNZW51ICovXG4vKipcbiAqIENvbnRleHRNZW51IHJlcHJlc2VudHMgdGhlIG1lbnUgdGhhdCBpcyBkaXNwbGF5ZWQgdG8gdGhlIHVzZXIgd2hlbiB0aGV5IHJpZ2h0IGNsaWNrIG9uIGEgY2FudmFzLlxuICogVGhpcyBtZW51IGFsbG93cyB1c2VyIHRvIGFkZCBlbGVtZW50cyB0byB0aGUgQ2FudmFzIGFuZCBpbiB0aGUgY2FzZSB0aGF0IHVzZXIgcmlnaHRjbGlja2VkXG4gKiBvbiBhIHNwZWNpZmljIGVsZW1lbnQsIHRoaXMgbWVudSBhbGxvd3MgdGhlbSB0byByZW1vdmUgdGhpcyBlbGVtZW50LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250ZXh0TWVudSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXN9IHBhcmVudFNWRyBpbnN0YW5jZSBvZiBbQ2FudmFzXSguL21vZHVsZS1DYW52YXMuaHRtbCkgdGhpcyBtZW51IGJlbG9uZ3MgdG9cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTVkcpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGluc3RhbmNlIG9mIFtDYW52YXNdKC4vbW9kdWxlLUNhbnZhcy5odG1sKSB0aGlzIG1lbnUgYmVsb25ncyB0b1xuICAgICAgICAgKiBAdHlwZSB7Q2FudmFzfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYXJlbnRTVkcgPSBwYXJlbnRTVkc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvc2l0aW9uIG9mIHRoZSBjb250ZXh0IG1lbnUuIEl0IGlzIHVzZWQgdG8gYWRkIHRoZSBuZXcgZWxlbWVudHMgdG8gdGhlIGNvcnJlY3QgcG9zaXRpb24gb24gdGhlIENhbnZhcy5cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7XG4gICAgICAgICAgICB4OiAwLCB5OiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGpRdWVyeSBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGNvbnRleHQgbWVudVxuICAgICAgICAgKiBAdHlwZSB7alF1ZXJ5LmVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLiRlbCA9ICQoXCI8dWw+XCIpO1xuICAgICAgICB0aGlzLiRlbC5hdHRyKCdpZCcsICdjb250ZXh0TWVudScpO1xuXG4gICAgICAgIC8vIGFkZCBpbnB1dCBib3hcbiAgICAgICAgdGhpcy5hcHBlbmRJdGVtKFxuICAgICAgICAgICAgbmV3IENvbnRleHRNZW51SXRlbShcIklucHV0IGJveFwiLCB0aGlzLFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogdGhpcy5wYXJlbnRTVkcuc25hcFRvR3JpZChwYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1YKHRoaXMucG9zaXRpb24ueCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiB0aGlzLnBhcmVudFNWRy5zbmFwVG9HcmlkKHBhcmVudFNWRy52aWV3Ym94LnRyYW5zZm9ybVkodGhpcy5wb3NpdGlvbi55KSlcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRTVkcubmV3SW5wdXQocG9zaXRpb24ubGVmdCwgcG9zaXRpb24udG9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gYWRkIG91dHB1dCBib3hcbiAgICAgICAgdGhpcy5hcHBlbmRJdGVtKG5ldyBDb250ZXh0TWVudUl0ZW0oXCJPdXRwdXQgYm94XCIsIHRoaXMsICgpID0+IHtcbiAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLnBhcmVudFNWRy5zbmFwVG9HcmlkKHBhcmVudFNWRy52aWV3Ym94LnRyYW5zZm9ybVgodGhpcy5wb3NpdGlvbi54KSksXG4gICAgICAgICAgICAgICAgdG9wOiB0aGlzLnBhcmVudFNWRy5zbmFwVG9HcmlkKHBhcmVudFNWRy52aWV3Ym94LnRyYW5zZm9ybVkodGhpcy5wb3NpdGlvbi55KSlcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHBhcmVudFNWRy5uZXdPdXRwdXQocG9zaXRpb24ubGVmdCwgcG9zaXRpb24udG9wKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIGFkZCBhbGwgZ2F0ZXNcblxuICAgICAgICAvLyBsaXN0IG9mIGdhdGVzIHRoYXQgY2FuIGJlIGFkZGVkXG4gICAgICAgIGNvbnN0IGdhdGVzID0gW1wibm90XCIsIFwiYW5kXCIsIFwib3JcIiwgXCJuYW5kXCIsIFwibm9yXCIsIFwieG9yXCIsIFwieG5vclwiXTtcbiAgICAgICAgbGV0IGdhdGVMaXN0ID0gbmV3IENvbnRleHRNZW51SXRlbShcIk5ldyBnYXRlXCIsIHRoaXMsIHBhcmVudFNWRyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IGdhdGVzLmxlbmd0aCA7ICsraSkge1xuICAgICAgICAgICAgZ2F0ZUxpc3QuYXBwZW5kSXRlbShcbiAgICAgICAgICAgICAgICBuZXcgR2F0ZU1lbnVJdGVtKGdhdGVzW2ldLCB0aGlzKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFwcGVuZEl0ZW0oZ2F0ZUxpc3QpO1xuXG4gICAgICAgIC8vIG1vcmUgb3B0aW9ucyB3aWxsIGJlIGFkZGVkIGluIHRoZSBnZXRMaWJyYXJ5KCkgY2FsbGJhY2sgYmVsb3dcbiAgICAgICAgbGV0IG5ldHdvcmtMaXN0ID0gbmV3IENvbnRleHRNZW51SXRlbShcIkFkZCBhIG5ldHdvcmtcIiwgdGhpcyk7XG4gICAgICAgIG5ldHdvcmtMaXN0LmFwcGVuZEl0ZW0obmV3IENvbnRleHRNZW51SXRlbShcInBhc3RlIGEgbmV0d29ya1wiLCB0aGlzLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlJbXBvcnREaWFsb2coKVxuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuYXBwZW5kSXRlbShuZXR3b3JrTGlzdCk7IC8vIGFsd2F5cyBhcHBlbmRcblxuICAgICAgICBsZXQgYmxhY2tib3hMaXN0ID0gbmV3IENvbnRleHRNZW51SXRlbShcIkFkZCBhIGJsYWNrYm94XCIsIHRoaXMpOyAvLyBhcHBlbmRzIG9ubHkgaWYgY29udGFpbnMgaXRlbXMgKHNlZSB0aGUgY2FsbGJhY2spXG5cbiAgICAgICAgLy8gbmV0d29yayBpbXBvcnQgKGJsYWNrYm94LCBuZXR3b3JrKVxuICAgICAgICBnZXRMaWJyYXJ5KCkudGhlbihuZXR3b3JrcyA9PiB7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qge25hbWUsIGZpbGUsIGhhc1RhYmxlLCBoYXNOZXR3b3JrfSBvZiBuZXR3b3Jrcykge1xuICAgICAgICAgICAgICAgIC8vIGFkZCBhIG5ldHdvcmsgYXMgYSBibGFja2JveFxuICAgICAgICAgICAgICAgIGlmKGhhc1RhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsYWNrYm94TGlzdC5hcHBlbmRJdGVtKFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEJsYWNrYm94TWVudUl0ZW0obmFtZSwgZmlsZSwgdGhpcylcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBsb2FkIGEgbmV0d29yayBhcyBhIG5ldHdvcmsgb2YgY29tcG9uZW50cyBjb25uZWN0ZWQgd2l0aCB3aXJlc1xuICAgICAgICAgICAgICAgIGlmKGhhc05ldHdvcmspIHtcbiAgICAgICAgICAgICAgICAgICAgbmV0d29ya0xpc3QuYXBwZW5kSXRlbShcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOZXR3b3JrTWVudUl0ZW0obmFtZSwgZmlsZSwgdGhpcylcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGJsYWNrYm94TGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRJdGVtKGJsYWNrYm94TGlzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICB9KVxuXG4gICAgICAgIC8vIGFkZCBjb25kaXRpb25hbCBpdGVtcyBmb3IgYm94IGFuZCB3aXJlIHJlbW92YWxcbiAgICAgICAgdGhpcy5hcHBlbmRDb25kaXRpb25hbEl0ZW0oJ2JveCcsICdSZW1vdmUgdGhpcyBpdGVtJywgaWQgPT4ge3RoaXMucGFyZW50U1ZHLnJlbW92ZUJveChpZCl9KTtcbiAgICAgICAgdGhpcy5hcHBlbmRDb25kaXRpb25hbEl0ZW0oJ3dpcmUnLCAnUmVtb3ZlIHRoaXMgd2lyZScsIGlkID0+IHt0aGlzLnBhcmVudFNWRy5yZW1vdmVXaXJlQnlJZChpZCl9KTtcblxuICAgICAgICAvLyBhZGQgdGhlIGNvbnRleHQgbWVudSB0byB0aGUgRE9NXG4gICAgICAgIHBhcmVudFNWRy4kc3ZnLmJlZm9yZSh0aGlzLiRlbCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE51bWJlciBvZiBpdGVtcyBpbiB0aGlzIG1lbnUgKHVzZWQgaW4gdGhlIC5sZW5naHQgZ2V0dGVyKS4gQ29uZGl0aW9uYWwgaXRlbXMgZG8gbm90IGNvdW50LlxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pdGVtQ291bnQgPSAwO1xuICAgIH1cblxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1Db3VudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhcHBlbmQgYSBjb250ZXh0IG1lbnUgaXRlbSB0byB0aGUgY29udGV4dCBtZW51XG4gICAgICogQHBhcmFtICB7Q29udGV4dE1lbnVJdGVtfSBpdGVtIGluc3RhbmNlIG9mIHtAbGluayBDb250ZXh0TWVudUl0ZW19IHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGlzIG1lbnVcbiAgICAgKi9cbiAgICBhcHBlbmRJdGVtKGl0ZW0pIHtcbiAgICAgICAgdGhpcy4kZWwuYXBwZW5kKGl0ZW0ualF1ZXJ5KTtcblxuICAgICAgICB0aGlzLml0ZW1Db3VudCsrO1xuXG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGFwcGVuZHMgYW4gY29ubmRpdGlvbmFsIGl0ZW0gKHRoYXQgaXMgc2hvd24gb25seSBpZiB0aGUgdGFyZ2V0IGhhcyB0aGUgY2xhc3MgaXRlbUNsYXNzKVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gaXRlbUNsYXNzICAgICBzaG93IHRoZSBpdGVtIG9ubHkgaWYgdGhlIHRhcmdldCBoYXMgdGhpcyBjbGFzc1xuICAgICAqIEBwYXJhbSAge3N0cmluZ30gdGV4dCAgICAgICAgICB0ZXh0IG9mIHRoaXMgbWVudSBpdGVtXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGNsaWNrRnVuY3Rpb24gZnVuY3Rpb24gd2l0aCBvbmUgYXJndW1lbnQgKElEIG9mIHRoZSB0YXJnZXQpIHRoYXQgd2lsbCBiZSBjYWxsZWQgb24gY2xpY2tcbiAgICAgKi9cbiAgICBhcHBlbmRDb25kaXRpb25hbEl0ZW0oaXRlbUNsYXNzLCB0ZXh0LCBjbGlja0Z1bmN0aW9uKSB7XG4gICAgICAgIGlmKCF0aGlzLmNvbmRpdGlvbmFsSXRlbXMpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uYWxJdGVtcyA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb25kaXRpb25hbEl0ZW1zW3RoaXMuY29uZGl0aW9uYWxJdGVtcy5sZW5ndGhdID0ge1xuICAgICAgICAgICAgaXRlbUNsYXNzOiBpdGVtQ2xhc3MsXG4gICAgICAgICAgICB0ZXh0OiB0ZXh0LFxuICAgICAgICAgICAgY2xpY2tGdW5jdGlvbjogY2xpY2tGdW5jdGlvblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZGlzcGxheSB0aGUgZGlhbG9nIGZvciBpbXBvcnRpbmcgYSBuZXR3b3JrIGZyb20gYSBjbGlwYm9hcmRcbiAgICAgKi9cbiAgICBkaXNwbGF5SW1wb3J0RGlhbG9nKCkge1xuICAgICAgICBsZXQgJHBvcHVwID0gJChcIjxkaXY+XCIpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoXCJpbXBvcnRFeHBvcnRcIilcbiAgICAgICAgICAgIC5hZGRDbGFzcyhcImltcG9ydFwiKTtcblxuICAgICAgICBsZXQgdGV4dGFyZWFJZCA9IFwiaW1wb3J0SlNPTlwiO1xuICAgICAgICBsZXQgJHRleHRibG9jayA9ICQoXCI8dGV4dGFyZWE+XCIpLmF0dHIoJ2lkJywgdGV4dGFyZWFJZCk7XG5cbiAgICAgICAgbGV0IGxpdHlJbnN0YW5jZTtcblxuICAgICAgICAkcG9wdXAuYXBwZW5kKFxuICAgICAgICAgICAgJHRleHRibG9ja1xuICAgICAgICApLmFwcGVuZChcbiAgICAgICAgICAgICQoXCI8YT5cIikuYXR0cih7XG4gICAgICAgICAgICAgICAgXCJocmVmXCI6IFwiI1wiLFxuICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJ1cGxvYWRcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hcHBlbmQoXG4gICAgICAgICAgICAgICAgJChcIjxpbWc+XCIpLmF0dHIoJ3NyYycsIFwiaW1nL2d1aS9pbXBvcnQuc3ZnXCIpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuYXBwZW5kKFwiIGltcG9ydCBmcm9tIEpTT05cIilcbiAgICAgICAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoJCgnIycgKyB0ZXh0YXJlYUlkKS52YWwoKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBwcm9jY2VzcyB0aGUgaW1wb3J0ZWQgZGF0YVxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50U1ZHLmltcG9ydERhdGEoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucm91bmQodGhpcy5wYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1YKHRoaXMucG9zaXRpb24ueCkgLyB0aGlzLnBhcmVudFNWRy5ncmlkU2l6ZSksXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucm91bmQodGhpcy5wYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1ZKHRoaXMucG9zaXRpb24ueSkgLyB0aGlzLnBhcmVudFNWRy5ncmlkU2l6ZSlcbiAgICAgICAgICAgICAgICApLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBjbG9zZSBMaXR5XG4gICAgICAgICAgICAgICAgICAgIGxpdHlJbnN0YW5jZS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIGxpdHlJbnN0YW5jZSA9IGxpdHkoJHBvcHVwKTtcblxuICAgICAgICAvLyBmb2N1cyBvbiB0aGUgdGV4dGJsb2NrXG4gICAgICAgICR0ZXh0YmxvY2suZm9jdXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBkZWNpZGUgd2hldGhlciBvciBub3QgdG8gZGlzcGxheSBzcGVjaWZpYyBjb25kaXRpb25hbCBpdGVtc1xuICAgICAqIEBwYXJhbSAge2pRdWVyeS5lbGVtZW50fSAkdGFyZ2V0IGpRdWVyeSB0YXJnZXQgb2YgYSBNb3VzZUV2ZW50IChlbGVtZW50IHRoYXQgdXNlciBjbGlja2VkIG9uKVxuICAgICAqL1xuICAgIHJlc29sdmVDb25kaXRpb25hbEl0ZW1zKCR0YXJnZXQpIHtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZGl0aW9uYWxJdGVtcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYoJHRhcmdldC5oYXNDbGFzcyh0aGlzLmNvbmRpdGlvbmFsSXRlbXNbaV0uaXRlbUNsYXNzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kSXRlbShcbiAgICAgICAgICAgICAgICAgICAgbmV3IENvbnRleHRNZW51SXRlbShcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uYWxJdGVtc1tpXS50ZXh0LCB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uYWxJdGVtc1tpXS5jbGlja0Z1bmN0aW9uKCR0YXJnZXQuYXR0cignaWQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApLmFkZENsYXNzKCdjb25kaXRpb25hbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGlkZSBhbGwgY29uZGl0aW9uYWwgaXRlbXNcbiAgICAgKi9cbiAgICBoaWRlQWxsQ29uZGl0aW9uYWxJdGVtcygpIHtcbiAgICAgICAgdGhpcy4kZWwuY2hpbGRyZW4oJy5jb25kaXRpb25hbCcpLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGRpc3BsYXlzIHRoZSBjb250ZXh0IG1lbnUgd2l0aCB0aGUgcmlnaHQgc2V0IG9mIGNvbmRpdGlvbmFsIGl0ZW1zXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB4ICAgICAgIGhvcml6b250YWwgcG9zaXRpb24gb2YgdGhlIGNvbnRleHQgbWVudSBpbiBDU1MgcGl4ZWxzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB5ICAgICAgIHZlcnRpY2FsIHBvc2l0aW9uIG9mIHRoZSBjb250ZXh0IG1lbnUgaW4gQ1NTIHBpeGVsc1xuICAgICAqIEBwYXJhbSAge2pRdWVyeS5lbGVtZW50fSAkdGFyZ2V0IGpRdWVyeSB0YXJnZXQgb2YgYSBNb3VzZUV2ZW50IChlbGVtZW50IHRoYXQgdXNlciBjbGlja2VkIG9uKVxuICAgICAqL1xuICAgIGRpc3BsYXkoeCwgeSwgJHRhcmdldCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHlcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlc29sdmVDb25kaXRpb25hbEl0ZW1zKCR0YXJnZXQpO1xuXG4gICAgICAgIHRoaXMuJGVsLmNzcyh7XG4gICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICAgICAgdG9wOiB5LFxuICAgICAgICAgICAgbGVmdDogeFxuICAgICAgICB9KVxuICAgICAgICAvLyBzZXQgdGhlIHdpZHRoIGV4cGljaXRseSwgb3IgZWxzZSB0aGUgbWVudSB3aWxsIHdpZGVuIHdoZW4gZGlzcGxheWluZyBhIHN1Ym1lbnVcbiAgICAgICAgLy8gMiBpcyB0byBwcmV2ZW50IGEgd2VpcmQgdGV4dCB3cmFwIGJ1Z1xuICAgICAgICAuY3NzKCd3aWR0aCcsICdhdXRvJylcbiAgICAgICAgLmNzcygnd2lkdGgnLCB0aGlzLiRlbC5pbm5lcldpZHRoKCkgKyAyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoaWRlIHRoZSBjb250ZXh0IG1lbnVcbiAgICAgKi9cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLiRlbC5jc3Moe2Rpc3BsYXk6ICdub25lJ30pO1xuICAgICAgICAkKFwiLnN1Ykxpc3RcIikuY3NzKHtkaXNwbGF5OiAnbm9uZSd9KTtcbiAgICAgICAgdGhpcy5oaWRlQWxsQ29uZGl0aW9uYWxJdGVtcygpO1xuICAgIH1cbn1cbiIsImltcG9ydCAqIGFzIHN2Z09iaiBmcm9tICcuL3N2Z09iamVjdHMuanMnXG5pbXBvcnQgTWFwV2l0aERlZmF1bHRWYWx1ZSBmcm9tICcuL21hcFdpdGhEZWZhdWx0VmFsdWUuanMnXG5pbXBvcnQgTG9naWMgZnJvbSAnLi9sb2dpYy5qcydcblxuLyoqXG4gKiBtYXBwaW5nIG9mIGxvZ2ljYWwgc3RhdGVzIHRvIGNzcyBjbGFzc2VzXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5jb25zdCBzdGF0ZUNsYXNzZXMgPSB7XG4gICAgb246IFwic3RhdGVPblwiLFxuICAgIG9mZjogXCJzdGF0ZU9mZlwiLFxuICAgIHVua25vd246IFwic3RhdGVVbmtub3duXCIsXG4gICAgb3NjaWxsYXRpbmc6IFwic3RhdGVPc2NpbGxhdGluZ1wiXG59O1xuXG4vKipcbiAqIEhlbHBlciBjbGFzcyB1c2VkIGJ5IHtAbGluayBUcmFuc2Zvcm19LlxuICpcbiAqIFJlcHJlc2VudHMgb25lIHNpbmdsZSBwcm9wZXJ0eSBvZiB0aGUgdHJhbnNmb3JtIGFyZ3VtZW50LCBmb3IgZXhhbXBsZSBgdHJhbnNsYXRlKDM2MCAxNTApYFxuICogdGhhdCBtYXkgYmUgYSBwYXJ0IG9mIGxvbmdlciB0cmFuc2Zvcm0gYXJndW1lbnQgbGlrZSBgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDM2MCAxNTApIHJvdGF0ZSg5MCAzMCAyMClcImBcbiAqL1xuY2xhc3MgUHJvcGVydHkge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIFByb3BlcnR5IG9iamVjdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nXSBzdHJpbmcgaW4gdGhlIHByb3BlcnR5IGZvcm1hdCBgcHJvcGVydHluYW1lKGxpc3Qgb2Ygc3BhY2Ugc2VwYXJhdGVkIHZhbHVlcylgXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3RyaW5nKSB7XG4gICAgICAgIGlmKHN0cmluZyE9PXVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gc3RyaW5nLnJlcGxhY2UoL15bIF0qKFteKF0rKS4qLywgXCIkMVwiKTtcbiAgICAgICAgICAgIHRoaXMuYXJncyA9IHN0cmluZy5yZXBsYWNlKC9eW14oXStcXCgoLiopXFwpLywgXCIkMVwiKS5zcGxpdCgnICcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IG9yIHJlcGxhY2UgdGhlIG5hbWUgb2YgdGhpcyBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIG5ldyBuYW1lIGZvciB0aGlzIHByb3BlcnR5XG4gICAgICovXG4gICAgc2V0TmFtZShuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IGFyZ3VtZW50cyBvZiB0aGlzIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHthcnJheX0gYXJncyBhcnJheSBvZiBhcmd1bWVudHNcbiAgICAgKi9cbiAgICBzZXRBcmd1bWVudHMoYXJncykge1xuICAgICAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3BlcnR5XG4gICAgICogQHJldHVybiB7c3RyaW5nfSBwcm9wZXJ0eSBpbiB0aGUgcHJvcGVydHkgZm9ybWF0IGBuYW1lKGFyZzEgYXJnMilgXG4gICAgICovXG4gICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lICsgXCIoXCIgKyB0aGlzLmFyZ3Muam9pbihcIiBcIikgKyBcIilcIjtcbiAgICB9XG59XG5cbi8qKlxuICogQVBJIGZvciBtYW5pcHVsYXRpbmcgdGhlIHRyYW5zZm9ybSBhcmd1bWVudCB1c2VkIGluIFNWR1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNmb3JtIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoZSBUcmFuc2Zvcm0gb2JqZWN0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmddIHN0cmluZyBpbiB0aGUgZm9ybWF0IG9mIHRoZSBgdHJhbnNmb3JtYCBhcmd1bWVudCBpbiBTVkcsIGZvciBleGFtcGxlIGB0cmFuc2xhdGUoMzYwIDE1MCkgcm90YXRlKDkwIDMwIDIwKWBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzdHJpbmcpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFycmF5IG9mIHtAbGluayBQcm9wZXJ0eX0gaW5zdGFuY2VzXG4gICAgICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcblxuICAgICAgICBpZihzdHJpbmchPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCBzcGxpdEl0ZW1zID0gc3RyaW5nLnNwbGl0KFwiKVwiKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgc3BsaXRJdGVtcy5sZW5ndGggOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZihzcGxpdEl0ZW1zW2ldKSB7IC8vIGlmIG5vdCBlbXB0eVxuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2gobmV3IFByb3BlcnR5KHNwbGl0SXRlbXNbaV0gKyBcIilcIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNvbnZlcnQgZGlzdGFuY2VzIGZyb20gU1ZHIHBpeGVscyB0byBncmlkIHBpeGVsc1xuICAgICAqIEBwYXJhbSAge0NhbnZhc30gcGFyZW50U1ZHIGluc3RhbmNlIG9mIFtDYW52YXNdKC4vbW9kdWxlLUNhbnZhcy5odG1sKVxuICAgICAqL1xuICAgIHRvR3JpZFBpeGVscyhwYXJlbnRTVkcpIHtcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICAgICAgICBpZihpdGVtLm5hbWUgPT09IFwidHJhbnNsYXRlXCIpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmFyZ3MgPSBbXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFNWRy5TVkdUb0dyaWQoaXRlbS5hcmdzWzBdKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50U1ZHLlNWR1RvR3JpZChpdGVtLmFyZ3NbMV0pLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0gZWxzZSBpZihpdGVtLm5hbWUgPT09IFwicm90YXRlXCIpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmFyZ3MgPSBbXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uYXJnc1swXSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50U1ZHLlNWR1RvR3JpZChpdGVtLmFyZ3NbMV0pLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRTVkcuU1ZHVG9HcmlkKGl0ZW0uYXJnc1syXSksXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY29udmVydCBkaXN0YW5jZXMgZnJvbSBncmlkIHBpeGVscyB0byBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtICB7Q2FudmFzfSBwYXJlbnRTVkcgaW5zdGFuY2Ugb2YgW0NhbnZhc10oLi9tb2R1bGUtQ2FudmFzLmh0bWwpXG4gICAgICovXG4gICAgdG9TVkdQaXhlbHMocGFyZW50U1ZHKSB7XG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5pdGVtcykge1xuICAgICAgICAgICAgaWYoaXRlbS5uYW1lID09PSBcInRyYW5zbGF0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5hcmdzID0gW1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRTVkcuZ3JpZFRvU1ZHKGl0ZW0uYXJnc1swXSksXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFNWRy5ncmlkVG9TVkcoaXRlbS5hcmdzWzFdKSxcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9IGVsc2UgaWYoaXRlbS5uYW1lID09PSBcInJvdGF0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5hcmdzID0gW1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmFyZ3NbMF0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFNWRy5ncmlkVG9TVkcoaXRlbS5hcmdzWzFdKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50U1ZHLmdyaWRUb1NWRyhpdGVtLmFyZ3NbMl0pLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZpbmQgYSB0cmFuc2Zvcm0gcHJvcGVydHkgYnkgbmFtZSBhbmQgZ2V0IGl0cyBpbmRleCBpbiB0aGUgW2l0ZW1zXSgjaXRlbXMpIGFycmF5XG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAgICogQHJldHVybiB7bnVtYmVyfSAgICAgIGluZGV4IG9mIHRoZSBwcm9wZXJ0eSBpbiB0aGUgYXJyYXkgb2YgcHJvcGVydGllcyBvciBgLTFgIGlmIG5vdCBmb3VuZFxuICAgICAqL1xuICAgIGdldEluZGV4KG5hbWUpIHtcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZihuYW1lID09PSB0aGlzLml0ZW1zW2ldLm5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIHRyYW5zbGF0ZSBwcm9wZXJ0eVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gb2JqZWN0IGNvbnRhaW5pbmcgcGFyYW1ldGVycyBvZiB0aGUgdHJhbnNsYXRlIGF0dHJpYnV0ZVxuICAgICAqL1xuICAgIGdldFRyYW5zbGF0ZSgpIHtcbiAgICAgICAgbGV0IGFyZ3MgPSB0aGlzLmdldEFyZ3VtZW50cyh0aGlzLmdldEluZGV4KFwidHJhbnNsYXRlXCIpKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogYXJnc1swXSxcbiAgICAgICAgICAgIHk6IGFyZ3NbMV1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCB0aGUgcm90YXRlIHByb3BlcnR5XG4gICAgICogQHJldHVybiB7T2JqZWN0fSBvYmplY3QgY29udGFpbmluZyBwYXJhbWV0ZXJzIG9mIHRoZSByb3RhdGUgYXR0cmlidXRlXG4gICAgICovXG4gICAgZ2V0Um90YXRlKCkge1xuICAgICAgICBsZXQgYXJncyA9IHRoaXMuZ2V0QXJndW1lbnRzKHRoaXMuZ2V0SW5kZXgoXCJyb3RhdGVcIikpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkZWc6IGFyZ3NbMF0sXG4gICAgICAgICAgICBjZW50cmVYOiBhcmdzWzFdLFxuICAgICAgICAgICAgY2VudHJlWTogYXJnc1syXVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IHRyYW5zbGF0ZSB0byB0aGUgc3BlY2lmaWVkIHZhbHVlc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IGhvcml6b250YWwgdHJhbnNsYXRpb25cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSB2ZXJ0aWNhbCB0cmFuc2xhdGlvblxuICAgICAqL1xuICAgIHNldFRyYW5zbGF0ZSh4LCB5KSB7XG4gICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyKFwidHJhbnNsYXRlXCIsIFt4LCB5XSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IHJvdGF0ZSB0byB0aGUgc3BlY2lmaWVkIHZhbHVlc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWcgICAgIGFuZ2xlIG9mIHRoZSByb3RhdGlvbiBpbiBkZWdyZWVzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNlbnRyZVggaG9yaXpvbnRhbCBwb3NpdGlvbiBvZiB0aGUgY2VudHJlIG9mIHRoZSByb3RhdGlvblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjZW50cmVZIHZlcnRpY2FsIHBvc2l0aW9uIG9mIHRoZSBjZW50cmUgb2YgdGhlIHJvdGF0aW9uXG4gICAgICovXG4gICAgc2V0Um90YXRlKGRlZywgY2VudHJlWCwgY2VudHJlWSkge1xuICAgICAgICB0aGlzLnNldFBhcmFtZXRlcihcInJvdGF0ZVwiLCBbZGVnLCBjZW50cmVYLCBjZW50cmVZXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcm90YXRlIGJ5IDkwIGRlZ3JlZXMgdG8gdGhlIHJpZ2h0XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBjZW50cmVYIGhvcml6b250YWwgcG9zaXRpb24gb2YgdGhlIGNlbnRyZSBvZiB0aGUgcm90YXRpb25cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGNlbnRyZVkgdmVydGljYWwgcG9zaXRpb24gb2YgdGhlIGNlbnRyZSBvZiB0aGUgcm90YXRpb25cbiAgICAgKi9cbiAgICByb3RhdGVSaWdodChjZW50cmVYLCBjZW50cmVZKSB7XG4gICAgICAgIGlmKHRoaXMuZ2V0SW5kZXgoXCJyb3RhdGVcIik9PT0tMSkge1xuICAgICAgICAgICAgdGhpcy5zZXRSb3RhdGUoOTAsIGNlbnRyZVgsIGNlbnRyZVkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IG5ld1JvdGF0aW9uID0gKHBhcnNlSW50KHRoaXMuZ2V0Um90YXRlKCkuZGVnKSArIDkwKSAlIDM2MDtcblxuICAgICAgICAgICAgaWYobmV3Um90YXRpb249PT0xODApIHtcbiAgICAgICAgICAgICAgICAvLyBzd2FwIGNlbnRyZSBjb29yZGluYXRlc1xuICAgICAgICAgICAgICAgIC8vIGJlY2F1c2Ugcm90YXRlKGMsIHgsIHkpIGlzIGRlZmluZWQgbGlrZSB0cmFuc2Zvcm0oLXgsIC15KSByb3RhdGUoYykgdHJhbnNmb3JtKHgsIHkpXG4gICAgICAgICAgICAgICAgbGV0IGEgPSBjZW50cmVYO1xuICAgICAgICAgICAgICAgIGNlbnRyZVggPSBjZW50cmVZO1xuICAgICAgICAgICAgICAgIGNlbnRyZVkgPSBhO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldFJvdGF0ZShcbiAgICAgICAgICAgICAgICBuZXdSb3RhdGlvbixcbiAgICAgICAgICAgICAgICBjZW50cmVYLFxuICAgICAgICAgICAgICAgIGNlbnRyZVlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIHRyYW5zZm9ybSB2YWx1ZXMgaW4gYSBzdHJpbmdcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IHN0cmluZyB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdmFsdWUgZm9yIHRoZSB0cmFuc2Zvcm0gcHJvcGVydHkgb2YgYSBTVkcgZWxlbWVudFxuICAgICAqL1xuICAgIGdldCgpIHtcbiAgICAgICAgbGV0IHJldFZhbCA9IFwiXCI7XG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGggOyBpKyspIHtcbiAgICAgICAgICAgIGlmKGkhPT0wKSB7XG4gICAgICAgICAgICAgICAgcmV0VmFsICs9IFwiIFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0VmFsICs9IHRoaXMuaXRlbXNbaV0uZ2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldFZhbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgYXJndW1lbnRzIG9mIGEgcHJvcGVydHkgc3BlY2lmaWVkIGJ5IGluZGV4XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBpbmRleCBpbmRleCBvZiB0aGUgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJuIHthcnJheX0gICAgICAgYXJyYXkgb2YgYXJndW1lbnRzIG9mIHRoZSBzcGVjaWZpZWQgcHJvcGVydHlcbiAgICAgKi9cbiAgICBnZXRBcmd1bWVudHMoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXNbaW5kZXhdLmFyZ3M7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IGFyZ3VtZXRzIG9mIGEgcHJvcGVydHkgc3BlY2lmaWVkIGJ5IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7YXJyYXl9IGFyZ3MgYXJyYXkgb2YgYXJndW1lbnRzIG9mIHRoZSBzcGVjaWZpZWQgcHJvcGVydHlcbiAgICAgKi9cbiAgICBzZXRQYXJhbWV0ZXIobmFtZSwgYXJncykge1xuICAgICAgICAvLyBkZXRlcm1pbmUgaW5kZXggb2YgdGhlIHBhcmFtZXRlciAoaWYgc2V0KSwgZWxzZSBpbmRleCA9PSAtMVxuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmdldEluZGV4KG5hbWUpO1xuXG4gICAgICAgIC8vIGlmIHRoZSBwcm9wZXJ0eSBoYXMgYmVlbiBhbHJlYWR5IHNldCwgY2hhbmdlIGl0IChyZXdyaXRlIHRoZSBhcnJheSBpbiB0aGUgcmlnaHQgaW5kZXgpXG4gICAgICAgIC8vIGVsc2UgY3JlYXRlIGEgbmV3IG9uZSAoc2V0IGluZGV4IHRvIHRoZSBsZW5ndGggb2YgYW4gYXJyYXkgLS0+IGFkIGFuIGl0ZW0gdG8gdGhlIGVuZClcbiAgICAgICAgaWYoaW5kZXg9PT0tMSkge1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLml0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuaXRlbXNbaW5kZXhdID0gbmV3IFByb3BlcnR5KCk7XG4gICAgICAgICAgICB0aGlzLml0ZW1zW2luZGV4XS5zZXROYW1lKG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2F2ZSBhcmdzIHVuZGVyIHRoZSByaWdodCBpbmRleFxuICAgICAgICB0aGlzLml0ZW1zW2luZGV4XS5zZXRBcmd1bWVudHMoYXJncyk7XG4gICAgfVxufVxuXG4vKipcbiAqIHBhcmVudCBjbGFzcyBmb3IgYWxsIG5ldHdvcmsgZWxlbWVudHNcbiAqL1xuY2xhc3MgTmV0d29ya0VsZW1lbnQge1xuICAgIC8qKlxuICAgICAqIEJhc2ljIGNvbnN0cnVjdG9yIGZvciBOZXR3b3JrRWxlbWVudFxuICAgICAqIEBwYXJhbSB7Q2FudmFzfSBwYXJlbnRTVkcgcmVmZXJlbmNlIHRvIHRoZSBpbnN0YW5jZSBvZiB7QGxpbmsgQ2FudmFzfSB0aGF0IHRoaXMgZWxlbWVudCBiZWxvbmdzIHRvXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHKSB7XG4gICAgICAgIGlmKCFwYXJlbnRTVkcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJQYXJlbnQgU1ZHIGVsZW1lbnQgaGFzIHRvIGJlIGRlZmluZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyZW50U1ZHID0gcGFyZW50U1ZHO1xuXG4gICAgICAgIC8vIHVzZWQgdG8gc3RvcmUgdGhlIHN2ak9iamVjdCdzIGluc3RhbmNlIG9mIHRoaXMgZWxlbWVudFxuICAgICAgICB0aGlzLnN2Z09iaiA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHVuaXF1ZSBJRCBvZiB0aGUgU1ZHIGVsZW1lbnQgdGllZCB0byB0aGlzIGxvZ2ljYWwgZWxlbWVudFxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gSUQgb2YgdGhlIFNWRyBlbGVtZW50XG4gICAgICovXG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdmdPYmouaWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZW1wdHkgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcHJldmVudCBlcnJvciBtZXNzYWdlcywgZnVuY3Rpb24gaXMgaW1wbGVtZW50ZWQgbGF0ZXIgaW4gdGhlIHtAbGluayBCb3h9IGNsYXNzXG4gICAgICovXG4gICAgb25Nb3VzZURvd24oKSB7fVxuXG4gICAgLyoqXG4gICAgICogZW1wdHkgZnVuY3Rpb24gdG8gcHJldmVudCBlcnJvciBtZXNzYWdlcywgZnVuY3Rpb24gaXMgaW1wbGVtZW50ZWQgbGF0ZXIgaW4gdGhlIHtAbGluayBCb3h9IGFuZCB7QGxpbmsgQ29ubmVjdG9yfSBjbGFzc2VzXG4gICAgICovXG4gICAgb25Nb3VzZVVwKCkge31cblxuICAgIC8qKlxuICAgICAqIGVtcHR5IGZ1bmN0aW9uIHRvIHByZXZlbnQgZXJyb3IgbWVzc2FnZXMsIGZ1bmN0aW9uIGlzIGltcGxlbWVudGVkIGxhdGVyIGluIHRoZSB7QGxpbmsgQm94fSBjbGFzc1xuICAgICAqL1xuICAgIG9uTW91c2VNb3ZlKCkge31cblxuICAgIC8qKlxuICAgICAqIFwidmlydHVhbFwiIGdldHRlciBmb3IganNvbiBkYXRhLCBwcmludHMgYW4gZXJyb3IgdGhhdCBpdCBoYXMgdG8gYmUgcmVkZWZpbmVkIGluIHRoZSBkZXJpdmVkIGNsYXNzZXNcbiAgICAgKi9cbiAgICBnZXQgZXhwb3J0RGF0YSgpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIidqc29uJyBnZXR0ZXIgaGFzIG5vdCBiZWVuIGRlZmluZWQgZm9yIHRoaXMgZWxlbWVudFwiLCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG5cbi8qKlxuICogcGFyZW50IGNsYXNzIGZvciBpbnB1dCBhbmQgb3V0cHV0IGNvbm5lY3RvcnNcbiAqIEBleHRlbmRzIE5ldHdvcmtFbGVtZW50XG4gKi9cbmNsYXNzIENvbm5lY3RvciBleHRlbmRzIE5ldHdvcmtFbGVtZW50IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc30gcGFyZW50U1ZHIGxpbmsgdG8gdGhlIHtAbGluayBDYW52YXN9IGluc3RhbmNlIHRoYXQgdGhpcyBjb25uZWN0b3Igd2lsbCBiZWxvbmcgdG9cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ3JpZFNpemUgIHNpemUgb2YgdGhlIGdyaWQgaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0ICAgICAgaG9yaXpvbnRhbCBwb3NpdGlvbiBkZWZpbmVkIGluIGdyaWQgdW5pdHMgKFNWRyBwaXhlbHMgZGl2aWRlZCBieSB0aGUgZ3JpZCBzaXplKVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgICAgICAgdmVydGljYWwgcG9zaXRpb24gZGVmaW5lZCBpbiBncmlkIHVuaXRzIChTVkcgcGl4ZWxzIGRpdmlkZWQgYnkgdGhlIGdyaWQgc2l6ZSlcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTVkcsIGdyaWRTaXplLCBsZWZ0LCB0b3ApIHtcbiAgICAgICAgc3VwZXIocGFyZW50U1ZHKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogc2l6ZSBvZiB0aGUgZ3JpZCBpbiBTVkcgcGl4ZWxzXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdyaWRTaXplID0gZ3JpZFNpemU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzaXplIG9mIHRoZSBjb25uZWN0b3IgaW4gU1ZHIHBpeGVsc1xuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb25uZWN0b3JTaXplID0gZ3JpZFNpemU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBvZmZzZXQgb2YgdGhlIGNvbm5lY3RvciBmcm9tIHRoZSBncmlkIGluIFNWRyBwaXhlbHNcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29ubmVjdG9yT2Zmc2V0ID0gdGhpcy5jb25uZWN0b3JTaXplIC8gMjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogaW5zdGFuY2Ugb2Yge0BsaW5rIHN2Z09iamVjdHMuc3ZnT2JqfSB0aGF0IGhvbGRzIGFsbCBTVkcgaW5mb3JtYXRpb24gYWJvdXQgdGhpcyBjb25uZWN0b3JcbiAgICAgICAgICogQHR5cGUge3N2Z09ian1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3ZnT2JqID0gbmV3IHN2Z09iai5SZWN0YW5nbGUoXG4gICAgICAgICAgICBsZWZ0ICogdGhpcy5ncmlkU2l6ZSAtIHRoaXMuY29ubmVjdG9yT2Zmc2V0LFxuICAgICAgICAgICAgdG9wICogdGhpcy5ncmlkU2l6ZSAtIHRoaXMuY29ubmVjdG9yT2Zmc2V0LFxuICAgICAgICAgICAgdGhpcy5jb25uZWN0b3JTaXplLFxuICAgICAgICAgICAgdGhpcy5jb25uZWN0b3JTaXplLFxuICAgICAgICAgICAgXCJub25lXCIsXG4gICAgICAgICAgICBcImJsYWNrXCJcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnN2Z09iai4kZWwuYWRkQ2xhc3MoXCJjb25uZWN0b3JcIik7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRoaXMgZmxhZyBkZXNjcmliZXMgd2hldGhlciB0aGlzIGNvbm5lY3RvciBpcyBhbiBpbnB1dCBjb25uZWN0b3JcbiAgICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzSW5wdXRDb25uZWN0b3IgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogY3VycmVudCBsb2dpY2FsIHN0YXRlIG9mIHRoaXMgY29ubmVjdG9yXG4gICAgICAgICAqIEB0eXBlIHtMb2dpYy5zdGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZWxlbWVudFN0YXRlID0gTG9naWMuc3RhdGUudW5rbm93bjtcbiAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2xhc3Moc3RhdGVDbGFzc2VzLnVua25vd24pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzZXQgb2YgaWRzIG9mIGFsbCB3aXJlcyBjb25uZWN0ZWQgdG8gdGhpcyBjb25uZWN0b3JcbiAgICAgICAgICogQHR5cGUge1NldH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2lyZUlkcyA9IG5ldyBTZXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB3aGV0aGVyIHRoaXMgY29ubmVjdG9yIGlzIGFuIG91dHB1dCBjb25uZWN0b3JcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIGdldCBpc091dHB1dENvbm5lY3RvcigpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzSW5wdXRDb25uZWN0b3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogd2hldGhlciB0aGlzIGNvbm5lY3RvciBpcyBhbiBvdXRwdXQgY29ubmVjdG9yXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBzZXQgaXNPdXRwdXRDb25uZWN0b3IodmFsdWUpIHtcbiAgICAgICAgdGhpcy5pc0lucHV0Q29ubmVjdG9yID0gIXZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGFkZCBhIHdpcmUgaWQgdG8gdGhlIGxpc3Qgb2Ygd2lyZSBpZHNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gd2lyZUlkXG4gICAgICovXG4gICAgYWRkV2lyZUlkKHdpcmVJZCkge1xuICAgICAgICB0aGlzLndpcmVJZHMuYWRkKHdpcmVJZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIGEgd2lyZSBpZCBmcm9tIHRoZSBsaXN0IG9mIHdpcmUgaWRzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHdpcmVJZFxuICAgICAqL1xuICAgIHJlbW92ZVdpcmVJZCh3aXJlSWQpIHtcbiAgICAgICAgdGhpcy53aXJlSWRzLmRlbGV0ZSh3aXJlSWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJlbW92ZSBhIHdpcmUgc3BlY2lmaWVkIGJ5IElEIGFuZCB1cGRhdGUgdGhlIGNvbm5lY3RvclxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gd2lyZUlkIElEIG9mIHRoZSB3aXJlIHRvIGJlIHJlbW92ZWRcbiAgICAgKi9cbiAgICByZW1vdmVXaXJlSWRBbmRVcGRhdGUod2lyZUlkKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlV2lyZUlkKHdpcmVJZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IGxvZ2ljYWwgc3RhdGUgb2YgdGhlIGNvbm5lY3RvclxuICAgICAqIEBwYXJhbSB7TG9naWMuc3RhdGV9IHN0YXRlIG5ldyBzdGF0ZSBvZiB0aGUgY29ubmVjdG9yXG4gICAgICovXG4gICAgc2V0U3RhdGUoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdmdPYmoucmVtb3ZlQ2xhc3NlcyhzdGF0ZUNsYXNzZXMub24sIHN0YXRlQ2xhc3Nlcy5vZmYsIHN0YXRlQ2xhc3Nlcy51bmtub3duLCBzdGF0ZUNsYXNzZXMub3NjaWxsYXRpbmcpO1xuXG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUudW5rbm93bjpcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iai5hZGRDbGFzcyhzdGF0ZUNsYXNzZXMudW5rbm93bik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExvZ2ljLnN0YXRlLm9uOlxuICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqLmFkZENsYXNzKHN0YXRlQ2xhc3Nlcy5vbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExvZ2ljLnN0YXRlLm9mZjpcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iai5hZGRDbGFzcyhzdGF0ZUNsYXNzZXMub2ZmKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUub3NjaWxsYXRpbmc6XG4gICAgICAgICAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2xhc3Moc3RhdGVDbGFzc2VzLm9zY2lsbGF0aW5nKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWxlbWVudFN0YXRlID0gc3RhdGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IHN0YXRlIG9mIHRoaXMgY29ubmVjdG9yXG4gICAgICogQHJldHVybiB7TG9naWMuc3RhdGV9XG4gICAgICovXG4gICAgZ2V0IHN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50U3RhdGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IHN2Z09iaiBpbnN0YW5jZSBjb250ZW50IG9mIHRoaXMgY29ubmVjdG9yXG4gICAgICogQHJldHVybiB7c3ZnT2JqZWN0cy5SZWN0YW5nbGV9XG4gICAgICovXG4gICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdmdPYmo7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY2FsbCBbd2lyZUNyZWF0aW9uSGVscGVyXSguL21vZHVsZS1DYW52YXMuaHRtbCN3aXJlQ3JlYXRpb25IZWxwZXIpIG9uIG1vdXNlIHVwXG4gICAgICovXG4gICAgb25Nb3VzZVVwKCkge1xuICAgICAgICB0aGlzLnBhcmVudFNWRy53aXJlQ3JlYXRpb25IZWxwZXIodGhpcy5zdmdPYmouaWQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb25uZWN0b3IgdGhhdCBnZXRzIGl0cyBzdGF0ZSBmcm9tIGEgY29ubmVjdGVkIHZhbHVlIGFuZCBwYXNzZXMgaXQgdGhyb3VnaCB0byB0aGUge0BsaW5rIEJveH0gdGhpcyBjb25uZWN0b3IgYmVsb25ncyB0by5cbiAqIEBleHRlbmRzIENvbm5lY3RvclxuICovXG5leHBvcnQgY2xhc3MgSW5wdXRDb25uZWN0b3IgZXh0ZW5kcyBDb25uZWN0b3Ige1xuICAgIC8qKlxuICAgICAqIENhbGwgdGhlIGNvbnN0cnVjdG9yIGZyb20gdGhlIHBhcmVudCB7QGxpbmsgQ29ubmVjdG9yfSBjbGFzcyBhbmQgc2V0IGlzSW5wdXRDb25uZWN0b3IgdG8gdHJ1ZS5cbiAgICAgKiBAcGFyYW0ge0NhbnZhc30gcGFyZW50U1ZHIGxpbmsgdG8gdGhlIHtAbGluayBDYW52YXN9IGluc3RhbmNlIHRoYXQgdGhpcyBjb25uZWN0b3Igd2lsbCBiZWxvbmcgdG9cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ3JpZFNpemUgIHNpemUgb2YgdGhlIGdyaWQgaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0ICAgICAgaG9yaXpvbnRhbCBwb3NpdGlvbiBkZWZpbmVkIGluIGdyaWQgdW5pdHMgKFNWRyBwaXhlbHMgZGl2aWRlZCBieSB0aGUgZ3JpZCBzaXplKVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgICAgICAgdmVydGljYWwgcG9zaXRpb24gZGVmaW5lZCBpbiBncmlkIHVuaXRzIChTVkcgcGl4ZWxzIGRpdmlkZWQgYnkgdGhlIGdyaWQgc2l6ZSlcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTVkcsIGdyaWRTaXplLCBsZWZ0LCB0b3ApIHtcbiAgICAgICAgc3VwZXIocGFyZW50U1ZHLCBncmlkU2l6ZSwgbGVmdCwgdG9wKTtcblxuICAgICAgICB0aGlzLmlzSW5wdXRDb25uZWN0b3IgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGwgdGhlIHNldFN0YXRlIG1ldGhvZCBvZiB7QGxpbmsgQ29ubmVjdG9yfSBhbmQgdGhhbiByZWZyZXNoIHRoZSBzdGF0ZSBvZiB0aGUgY29ubmVjdGVkIHtAbGluayBCb3h9XG4gICAgICogQHBhcmFtIHtMb2dpYy5zdGF0ZX0gc3RhdGUgbmV3IHtAbGluayBMb2dpYy5zdGF0ZX0gb2YgdGhlIGNvbm5lY3RvclxuICAgICAqL1xuICAgIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgICAgIHN1cGVyLnNldFN0YXRlKHN0YXRlKTtcblxuICAgICAgICBsZXQgZ2F0ZSA9IHRoaXMucGFyZW50U1ZHLmdldEJveEJ5Q29ubmVjdG9ySWQodGhpcy5zdmdPYmouaWQpO1xuICAgICAgICBnYXRlLnJlZnJlc2hTdGF0ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJlbW92ZSB0aGUgd2lyZSAoYnkgY2FsbGluZyB0aGUgcmVtb3ZlV2lyZUlkQW5kVXBkYXRlIG9mIHtAbGluayBDb25uZWN0b3J9KVxuICAgICAqIGFuZCB1cGRhdGUgc3RhdGUgb2YgdGhpcyBjb25uZWN0b3IgYnkgc2V0dGluZyBpdCB0byB1bmRlZmluZWQgdXNpbmcgdGhlIHNldFN0YXRlIG1ldGhvZFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gd2lyZUlkIElEIG9mIHRoZSB7QGxpbmsgV2lyZX1cbiAgICAgKi9cbiAgICByZW1vdmVXaXJlSWRBbmRVcGRhdGUod2lyZUlkKSB7XG4gICAgICAgIHN1cGVyLnJlbW92ZVdpcmVJZEFuZFVwZGF0ZSh3aXJlSWQpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKExvZ2ljLnN0YXRlLnVua25vd24pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb25uZWN0b3IgdGhhdCB0YWtlcyBhIHN0YXRlIGRlZmluZWQgYnkgdGhlIHtAbGluayBCb3h9IGl0IGJlbG9uZ3MgdG8gYW5kIHBhc3NlcyBpdCB0byBhbGwgY29ubmVjdGVkIHdpcmVcbiAqIEBleHRlbmRzIENvbm5lY3RvclxuICovXG5leHBvcnQgY2xhc3MgT3V0cHV0Q29ubmVjdG9yIGV4dGVuZHMgQ29ubmVjdG9yIHtcbiAgICAvKipcbiAgICAgKiBDYWxsIHRoZSBjb25zdHJ1Y3RvciBmcm9tIHRoZSBwYXJlbnQge0BsaW5rIENvbm5lY3Rvcn0gY2xhc3MgYW5kIHNldCBpc091dHB1dENvbm5lY3RvciB0byB0cnVlLlxuICAgICAqIEBwYXJhbSB7Q2FudmFzfSBwYXJlbnRTVkcgbGluayB0byB0aGUge0BsaW5rIENhbnZhc30gaW5zdGFuY2UgdGhhdCB0aGlzIGNvbm5lY3RvciB3aWxsIGJlbG9uZyB0b1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBncmlkU2l6ZSAgc2l6ZSBvZiB0aGUgZ3JpZCBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxlZnQgICAgICBob3Jpem9udGFsIHBvc2l0aW9uIGRlZmluZWQgaW4gZ3JpZCB1bml0cyAoU1ZHIHBpeGVscyBkaXZpZGVkIGJ5IHRoZSBncmlkIHNpemUpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRvcCAgICAgICB2ZXJ0aWNhbCBwb3NpdGlvbiBkZWZpbmVkIGluIGdyaWQgdW5pdHMgKFNWRyBwaXhlbHMgZGl2aWRlZCBieSB0aGUgZ3JpZCBzaXplKVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFNWRywgZ3JpZFNpemUsIGxlZnQsIHRvcCkge1xuICAgICAgICBzdXBlcihwYXJlbnRTVkcsIGdyaWRTaXplLCBsZWZ0LCB0b3ApO1xuXG4gICAgICAgIHRoaXMuaXNPdXRwdXRDb25uZWN0b3IgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGwgdGhlIHNldFN0YXRlIG1ldGhvZCBvZiB7QGxpbmsgQ29ubmVjdG9yfSBhbmQgdGhhbiBzZXQgdGhlIHN0YXRlIG9mIHRoZSBjb25uZWN0ZWQge0BsaW5rIFdpcmV9c1xuICAgICAqIEBwYXJhbSB7TG9naWMuc3RhdGV9IHN0YXRlIG5ldyB7QGxpbmsgTG9naWMuc3RhdGV9IG9mIHRoZSBjb25uZWN0b3JcbiAgICAgKi9cbiAgICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICBzdXBlci5zZXRTdGF0ZShzdGF0ZSk7XG5cbiAgICAgICAgZm9yIChjb25zdCB3aXJlSWQgb2YgdGhpcy53aXJlSWRzKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudFNWRy5nZXRXaXJlQnlJZCh3aXJlSWQpLnNldFN0YXRlKHN0YXRlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBQYXJlbnQgY2xhc3MgZm9yIGdhdGVzIGFuZCBpbnB1dCBhbmQgb3V0cHV0IGJveGVzLiBEZWZpbmVzIGFsbCB0aGUgZmFjdG9yc1xuICogdGhhdCB0aGUgYm94ZXMgaGF2ZSBpbiBjb21tb24gKHN2Z09iaiBzdHJ1Y3R1cmUsIGRyYWdnYWJpbGl0eSBhbmQgcm90YXRhYmlsaXR5Li4uKVxuICogQGV4dGVuZHMgTmV0d29ya0VsZW1lbnRcbiAqL1xuY2xhc3MgQm94IGV4dGVuZHMgTmV0d29ya0VsZW1lbnQge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzfSBwYXJlbnRTVkcgIGluc3RhbmNlIG9mIFtDYW52YXNdKC4vbW9kdWxlLUNhbnZhcy5odG1sKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lICAgICAgIG5hbWUgb2YgdGhlIGVsZW1lbnQgKGlucHV0LCBvdXRwdXQsIGFuZCwgb3IsIHhvci4uLilcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2F0ZWdvcnkgICB0eXBlIG9mIHRoZSBlbGVtZW50IChpbywgZ2F0ZSlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ3JpZFdpZHRoICB3aWR0aCBvZiB0aGUgZWxlbWVudCBpbiBncmlkIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBncmlkSGVpZ2h0IGhlaWdodCBvZiB0aGUgZWxlbWVudCBpbiBncmlkIHBpeGVsc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFNWRywgbmFtZSwgY2F0ZWdvcnksIGdyaWRXaWR0aCwgZ3JpZEhlaWdodCkge1xuICAgICAgICBzdXBlcihwYXJlbnRTVkcpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzcGVjaWZpZXMgdGhlIGJveCB0eXBlIHdpdGhpbiB0aGUgY2F0ZWdvcnkgKGlucHV0L291dHB1dCBpbiBpbywgYW5kL29yLy4uLiBpbiBnYXRlKVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogc3BlY2lmaWVzIHRoZSBib3ggY2F0ZWdvcnkgKGlvIGZvciBpbnB1dCBvciBvdXRwdXQsIGdhdGUgZm9yIGxvZ2ljIGdhdGVzKVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzaXplIG9mIHRoZSBncmlkIGluIFNWRyBwaXhlbHNcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ3JpZFNpemUgPSB0aGlzLnBhcmVudFNWRy5ncmlkU2l6ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogdXJsIG9mIHRoZSBpbWFnZSBkZXBpY3RpbmcgdGhpcyBvYmplY3RcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXJsID0gXCJpbWcvXCIgKyB0aGlzLmNhdGVnb3J5ICsgXCIvXCIgKyB0aGlzLm5hbWUgKyBcIi5zdmdcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogYXJyYXkgb2YgY29ubmVjdG9ycyBvZiB0aGlzIGJveFxuICAgICAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbm5lY3RvcnMgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogc3ZnT2JqIGNvbnRhaW5pbmcgYWxsIFNWRyBkYXRhIHVzZWQgdG8gZGlzcGxheSB0aGlzIGJveFxuICAgICAgICAgKiBAdHlwZSB7c3ZnT2JqfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdmdPYmogPSBuZXcgc3ZnT2JqLkdyb3VwKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHdpZHRoIG9mIHRoaXMgZWxlbWVudCBpbiBTVkcgcGl4ZWxzXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndpZHRoID0gZ3JpZFdpZHRoICogdGhpcy5ncmlkU2l6ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGhlaWdodCBvZiB0aGlzIGVsZW1lbnQgaW4gU1ZHIHBpeGVsc1xuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oZWlnaHQgPSBncmlkSGVpZ2h0ICogdGhpcy5ncmlkU2l6ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogd2lkdGggb2YgdGhpcyBlbGVtZW50IGluIGdyaWQgcGl4ZWxzXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdyaWRXaWR0aCA9IGdyaWRXaWR0aDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGhlaWdodCBvZiB0aGlzIGVsZW1lbnQgaW4gZ3JpZCBwaXhlbHNcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ3JpZEhlaWdodCA9IGdyaWRIZWlnaHQ7XG5cbiAgICAgICAgLy8gdHJhbnNwYXJlbnQgYmFja2dyb3VuZCByZWN0YW5nbGVcbiAgICAgICAgbGV0IHJlY3RhbmdsZSA9IG5ldyBzdmdPYmouUmVjdGFuZ2xlKDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCBcIm5vbmVcIiwgXCJub25lXCIpO1xuICAgICAgICByZWN0YW5nbGUuJGVsLmFkZENsYXNzKCdyZWN0Jyk7XG5cbiAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2hpbGQocmVjdGFuZ2xlKTtcbiAgICAgICAgLy8gaW1hZ2Ugb2YgdGhlIGVsZW1lbnRcbiAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBzdmdPYmouU3ZnSW1hZ2UoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIHRoaXMudXJsKTtcbiAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2hpbGQodGhpcy5pbWFnZSk7XG5cbiAgICAgICAgLy8gYWRkIHR5cGU9XCJnYXRlXCIsIHVzZWQgaW4gc3BlY2lhbCBjYWxsYmFja3MgaW4gY29udGV4dG1lbnVcbiAgICAgICAgdGhpcy5zdmdPYmouYWRkQXR0cih7XCJ0eXBlXCI6IGNhdGVnb3J5fSk7XG5cbiAgICAgICAgdGhpcy5zdmdPYmouJGVsLmFkZENsYXNzKFwiYm94XCIpO1xuICAgICAgICB0aGlzLnN2Z09iai4kZWwuYWRkQ2xhc3MoY2F0ZWdvcnkpO1xuXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVCbG9ja05vZGVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IGFsbCBpbnB1dCBjb25uZWN0b3JzIG9mIHRoaXMgYm94XG4gICAgICogQHJldHVybiB7QXJyYXl9IGFycmF5IG9mIGlucHV0IGNvbm5lY3RvcnNcbiAgICAgKi9cbiAgICBnZXQgaW5wdXRDb25uZWN0b3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0b3JzLmZpbHRlcihjb25uID0+IGNvbm4uaXNJbnB1dENvbm5lY3RvcilcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgYWxsIG91dHB1dCBjb25uZWN0b3JzIG9mIHRoaXMgYm94XG4gICAgICogQHJldHVybiB7QXJyYXl9IGFycmF5IG9mIG91dHB1dCBjb25uZWN0b3JzXG4gICAgICovXG4gICAgZ2V0IG91dHB1dENvbm5lY3RvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3RvcnMuZmlsdGVyKGNvbm4gPT4gY29ubi5pc091dHB1dENvbm5lY3RvcilcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgZGF0YSBvZiB0aGlzIGJveCBhcyBhIEpTT04tcmVhZHkgb2JqZWN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSBqYXZhc2NyaXB0IG9iamVjdCBjb250YWluaW5nIGVzc2VudGlhbCBkYXRhIGZvciB0aGlzIGJveFxuICAgICAqL1xuICAgIGdldCBleHBvcnREYXRhKCkge1xuICAgICAgICBsZXQgY29ubmVjdGlvbnMgPSBbXTtcblxuICAgICAgICAvLyBnbyB0aHJvdWdoIGFsbCBjb25uZWN0b3JzXG4gICAgICAgIGxldCBjb3VudGVyID0gMFxuICAgICAgICBmb3IgKGNvbnN0IGNvbm4gb2YgdGhpcy5jb25uZWN0b3JzKSB7XG4gICAgICAgICAgICAvLyBnbyB0aHJvdWdoIGVhY2ggaXRzIHdpcmUgaWRcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb25uLndpcmVJZHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGhpc1dpcmVJZDtcbiAgICAgICAgICAgICAgICBpZighdGhpcy5wYXJlbnRTVkcuZXhwb3J0V2lyZUlkTWFwLmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgd2lyZSBpZCBpcyBub3QgaW4gdGhlIG1hcCwgYWRkIGl0IGFuZCBhc3NpZ24gbmV3IGFyYml0cmFyeSBpZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudFNWRy5leHBvcnRXaXJlSWRNYXAuc2V0KGl0ZW0sIHRoaXMucGFyZW50U1ZHLmV4cG9ydFdpcmVJZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNXaXJlSWQgPSB0aGlzLnBhcmVudFNWRy5leHBvcnRXaXJlSWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50U1ZHLmV4cG9ydFdpcmVJZCsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVsc2UgZ2V0IGlkIGZyb20gdGhlIG1hcFxuICAgICAgICAgICAgICAgICAgICB0aGlzV2lyZUlkID0gdGhpcy5wYXJlbnRTVkcuZXhwb3J0V2lyZUlkTWFwLmdldChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIC8vIGFkZCB0aGlzIGNvbm5lY3Rpb24gdG8gdGhlIGxpc3RcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uc1tjb25uZWN0aW9ucy5sZW5ndGhdID0ge1xuICAgICAgICAgICAgICAgICAgICBpbmRleDogY291bnRlcixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogY29ubi50eXBlLFxuICAgICAgICAgICAgICAgICAgICB3aXJlSWQ6IHRoaXNXaXJlSWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY291bnRlcisrXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcnksXG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRoaXMuZ2V0VHJhbnNmb3JtKHRydWUpLFxuICAgICAgICAgICAgY29ubmVjdGlvbnM6IGNvbm5lY3Rpb25zXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IHNldCBvZiBub2RlcyB0aGF0IGFyZSBub3Qgc3VpdGFibGUgZm9yIHdpcmUgcm91dGluZ1xuICAgICAqIEBwYXJhbSAge051bWJlcn0gW21hcmdpblRvcD0wXSAgICB0b3AgbWFyZ2luIG9mIHRoZSBlbGVtZW50IChkaXN0YW5jZSBmcm9tIHRoZSBlbGVtZW50IHRoYXQgc2hvdWxkIGJlIGFsc28gYmxvY2tlZClcbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IFttYXJnaW5SaWdodD0wXSAgcmlnaHQgbWFyZ2luIG9mIHRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBbbWFyZ2luQm90dG9tPTBdIGJvdHRvbSBtYXJnaW4gb2YgdGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IFttYXJnaW5MZWZ0PTBdICAgbGVmdCBtYXJnaW4gb2YgdGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHNwZWNpYWxOb2RlcyAgICAgYWRkaXRpb25hbCBub2RlcyB0aGF0IHNob3VsZCBiZSBhZGRlZCB0byB0aGUgc2V0XG4gICAgICogQHJldHVybiB7U2V0fSAgICAgICAgICAgICAgICAgICAgIHNldCBvZiBub3Qgc3VpdGFibGUgbm9kZXNcbiAgICAgKi9cbiAgICBnZW5lcmF0ZUJsb2NrTm9kZXMobWFyZ2luVG9wID0gMCwgbWFyZ2luUmlnaHQgPSAwLCBtYXJnaW5Cb3R0b20gPSAwLCBtYXJnaW5MZWZ0ID0gMCwgLi4uc3BlY2lhbE5vZGVzKSB7XG4gICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IobGV0IHggPSBtYXJnaW5MZWZ0IDsgeCA8PSB0aGlzLmdyaWRXaWR0aCAtIG1hcmdpblJpZ2h0IDsgeCsrKSB7XG4gICAgICAgICAgICBmb3IobGV0IHkgPSBtYXJnaW5Ub3AgOyB5IDw9IHRoaXMuZ3JpZEhlaWdodCAtIG1hcmdpbkJvdHRvbSA7IHkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzLmFkZCh7XG4gICAgICAgICAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICAgICAgICAgIHk6IHlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IG5vZGUgb2Ygc3BlY2lhbE5vZGVzKSB7XG4gICAgICAgICAgICB0aGlzLmJsb2NrZWROb2Rlcy5hZGQobm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBlbXB0eSBmdW5jdGlvbiwgcmVkZWZpbmVkIGluIGluaGVyaXRlZCBlbGVtZW50c1xuICAgICAqIHJlZnJlc2hTdGF0ZSB0YWtlcyBpbnB1dCBjb25uZWN0b3IgdmFsdWVzIGFuZCBzZXRzIG91dHB1dCB2YWx1ZXMgYWNjb3JkaW5nbHlcbiAgICAgKi9cbiAgICByZWZyZXNoU3RhdGUoKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkNhbGxpbmcgdGhlIHZpcnR1YWwgZnVuY3Rpb24gcmVmcmVzaFN0YXRlIGhhcyBubyBlZmZlY3QuXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNoYW5nZSBpbWFnZSB0byBhbm90aGVyIG9uZSB0aGF0IGVuZHMgd2l0aCBhIHNwZWNpZmllZCBzdWZmaXhcbiAgICAgKlxuICAgICAqICp1c2FnZToqIGBjaGFuZ2VJbWFnZShcImFiY1wiKWAgY2hhbmdlcyBpbWFnZSB1cmwgdG8gYGltYWdlLWFiYy5zdmdgLFxuICAgICAqIGBjaGFuZ2VJbWFnZSgpYCBjaGFuZ2VzIGltYWdlIHVybCB0byB0aGUgZGVmYXVsdCBvbmUgKGBpbWFnZS5zdmdgKVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gW3N1ZmZpeF0gbmV3IHN1ZmZpeCBmb3IgdGhlIGltYWdlXG4gICAgICovXG4gICAgY2hhbmdlSW1hZ2Uoc3VmZml4KSB7XG4gICAgICAgIGlmKHN1ZmZpeCA9PT0gdW5kZWZpbmVkIHx8IHN1ZmZpeCA9PT0gXCJcIikge1xuICAgICAgICAgICAgc3VmZml4ID0gXCJcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1ZmZpeCA9IFwiLVwiICsgc3VmZml4O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXJsID0gXCJpbWcvXCIgKyB0aGlzLmNhdGVnb3J5ICsgXCIvXCIgKyB0aGlzLm5hbWUgKyBzdWZmaXggKyBcIi5zdmdcIjtcblxuICAgICAgICB0aGlzLmltYWdlLmNoYW5nZVVybCh0aGlzLnVybCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IGEgalF1ZXJ5IGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoaXMgYm94XG4gICAgICogQHJldHVybiB7alF1ZXJ5LmVsZW1lbnR9XG4gICAgICovXG4gICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdmdPYmouZ2V0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIGEgc3BlY2lmaWMgb25kZSBmcm9tIHRoZSBzZXQgb2YgYmxvY2tlZCBub2Rlc1xuICAgICAqIEBwYXJhbSAge251bWJlcn0geCBob3Jpem9udGFsIHBvc2l0aW9uIG9mIHRoZSBibG9ja2VkIG5vZGUgaW4gZ3JpZCBwaXhlbHNcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHkgdmVydGljYWwgcG9zaXRpb24gb2YgdGhlIGJsb2NrZWQgbm9kZSBpbiBncmlkIHBpeGVsc1xuICAgICAqL1xuICAgIHJlbW92ZUJsb2NrZWROb2RlKHgsIHkpIHtcbiAgICAgICAgZm9yKGxldCBpdGVtIG9mIHRoaXMuYmxvY2tlZE5vZGVzKSB7XG4gICAgICAgICAgICBpZihpdGVtLng9PT14ICYmIGl0ZW0ueT09PXkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrZWROb2Rlcy5kZWxldGUoaXRlbSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByb3RhdGUgdGhlIHNldCBvZiBibG9ja2VkIG5vZGVzIHRvIHRoZSByaWdodFxuICAgICAqXG4gICAgICogdXNlZCB0byByb3RhdGUgdGhlIG5vZGVzIHdoZW4gdGhlIG9iamVjdCBpdHNlbGYgaXMgcm90YXRlZFxuICAgICAqL1xuICAgIHJvdGF0ZUJsb2NrZWROb2Rlc1JpZ2h0KCkge1xuICAgICAgICBpZih0aGlzLnJvdGF0aW9uPT09dW5kZWZpbmVkIHx8IHRoaXMucm90YXRpb249PT00KSB7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvdGF0aW9uKys7XG5cbiAgICAgICAgaWYodGhpcy5yb3RhdGlvbiA9PT0gMSB8fCB0aGlzLnJvdGF0aW9uID09PSAzKSB7XG4gICAgICAgICAgICBsZXQgbmV3QmxvY2tlZE5vZGVzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgdGhpcy5ibG9ja2VkTm9kZXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBuZXdCbG9ja2VkTm9kZXMuYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgeDogTWF0aC5hYnMoaXRlbS55IC0gdGhpcy5ncmlkSGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgeTogaXRlbS54XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tlZE5vZGVzID0gbmV3QmxvY2tlZE5vZGVzO1xuICAgICAgICB9IGVsc2UgaWYodGhpcy5yb3RhdGlvbiA9PT0gMiB8fCB0aGlzLnJvdGF0aW9uID09PSA0KSB7XG4gICAgICAgICAgICBsZXQgbmV3QmxvY2tlZE5vZGVzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgdGhpcy5ibG9ja2VkTm9kZXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBuZXdCbG9ja2VkTm9kZXMuYWRkKHtcbiAgICAgICAgICAgICAgICAgICAgeDogTWF0aC5hYnMoaXRlbS55IC0gdGhpcy5ncmlkV2lkdGgpLFxuICAgICAgICAgICAgICAgICAgICB5OiBpdGVtLnhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5ibG9ja2VkTm9kZXMgPSBuZXdCbG9ja2VkTm9kZXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhZGQgYSBjb25uZWN0b3IgdG8gdGhlIGVsZW1lbnQgb24gdGhlIHNwZWNpZmllZCBwb3NpdGlvblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSAgbGVmdCAgICAgICAgICAgICBob3Jpem9udGFsIGRpc3RhbmNlIGZyb20gdGhlIGxlZnQgZWRnZSBvZiB0aGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSAgdG9wICAgICAgICAgICAgICB2ZXJ0aWNhbCBkaXN0YW5jZSBmcm9tIHRoZSB0b3AgZWRnZSBvZiB0aGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNJbnB1dENvbm5lY3RvciB3aGV0aGVyIG9yIG5vdCBzaG91bGQgdGhpcyBjb25uZWN0b3IgYW4gaW5wdXQgY29ubmVjdG9yIChgdHJ1ZWAgZm9yIGlucHV0IGNvbm5lY3RvciwgYGZhbHNlYCBmb3Igb3V0cHV0IGNvbm5lY3RvcilcbiAgICAgKi9cbiAgICBhZGRDb25uZWN0b3IobGVmdCwgdG9wLCBpc0lucHV0Q29ubmVjdG9yKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuY29ubmVjdG9ycy5sZW5ndGg7XG4gICAgICAgIGlmKGlzSW5wdXRDb25uZWN0b3IpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yc1tpbmRleF0gPSBuZXcgSW5wdXRDb25uZWN0b3IodGhpcy5wYXJlbnRTVkcsIHRoaXMuZ3JpZFNpemUsIGxlZnQsIHRvcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RvcnNbaW5kZXhdID0gbmV3IE91dHB1dENvbm5lY3Rvcih0aGlzLnBhcmVudFNWRywgdGhpcy5ncmlkU2l6ZSwgbGVmdCwgdG9wKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN2Z09iai5hZGRDaGlsZCh0aGlzLmNvbm5lY3RvcnNbaW5kZXhdLmdldCgpKTtcblxuICAgICAgICB0aGlzLnJlbW92ZUJsb2NrZWROb2RlKGxlZnQsIHRvcCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYWRkIGFuIGlucHV0IGNvbm5lY3RvciB0byB0aGUgZWxlbWVudCBvbiB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxlZnQgaG9yaXpvbnRhbCBkaXN0YW5jZSBmcm9tIHRoZSBsZWZ0IGVkZ2Ugb2YgdGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9wICB2ZXJ0aWNhbCBkaXN0YW5jZSBmcm9tIHRoZSB0b3AgZWRnZSBvZiB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGFkZElucHV0Q29ubmVjdG9yKGxlZnQsIHRvcCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRDb25uZWN0b3IobGVmdCwgdG9wLCB0cnVlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGFkZCBhbiBvdXRwdXQgY29ubmVjdG9yIHRvIHRoZSBlbGVtZW50IG9uIHRoZSBzcGVjaWZpZWQgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGVmdCBob3Jpem9udGFsIGRpc3RhbmNlIGZyb20gdGhlIGxlZnQgZWRnZSBvZiB0aGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgIHZlcnRpY2FsIGRpc3RhbmNlIGZyb20gdGhlIHRvcCBlZGdlIG9mIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgYWRkT3V0cHV0Q29ubmVjdG9yKGxlZnQsIHRvcCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRDb25uZWN0b3IobGVmdCwgdG9wLCBmYWxzZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIGNvbm5lY3RvciBvYmplY3QgYmFzZWQgb24gaXRzIGlkXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBjb25uZWN0b3JJZCBJRCBvZiB0aGUge0BsaW5rIENvbm5lY3Rvcn1cbiAgICAgKiBAcmV0dXJuIHtDb25uZWN0b3J9ICAgICAgICAgICAgIGluc3RhbmNlIG9mIHRoZSB7QGxpbmsgQ29ubmVjdG9yfSBvciBgdW5kZWZpbmVkYCBpZiBub3QgZm91bmRcbiAgICAgKi9cbiAgICBnZXRDb25uZWN0b3JCeUlkKGNvbm5lY3RvcklkKSB7XG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy5jb25uZWN0b3JzLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgaWYodGhpcy5jb25uZWN0b3JzW2ldLmlkPT09Y29ubmVjdG9ySWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0b3JzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlmIGNvbm5lY3RvciBub3QgZm91bmQsIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIGluc3RhbmNlIG9mIHtAbGluayBUcmFuc2Zvcm19IHJlcHJlc2VudGluZyB0aGUgc3RhdGUgb2YgdGhlIHRyYW5zZm9ybSBhdHRyaWJ1dGUgb2YgdGhpcyBlbGVtZW50XG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gW2dyaWRQaXhlbHM9ZmFsc2VdIGlmIGB0cnVlYCwgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHJlc3VsdCBpbiBncmlkIHBpeGVscyBpbnN0ZWFkIG9mIFNWRyBwaXhlbHNcbiAgICAgKiBAcmV0dXJuIHtUcmFuc2Zvcm19ICAgICAgICAgICAgICAgICAge0BsaW5rIFRyYW5zZm9ybX0gb2YgdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBnZXRUcmFuc2Zvcm0oZ3JpZFBpeGVscyA9IGZhbHNlKSB7XG4gICAgICAgIGxldCB0cmFuc2Zvcm07XG4gICAgICAgIGlmICghdGhpcy5zdmdPYmouJGVsLmF0dHIoXCJ0cmFuc2Zvcm1cIikpIHtcbiAgICAgICAgICAgIC8vIHRoZSBlbGVtZW50IGRvZXMgbm90IGhhdmUgYSBcInRyYW5zZm9ybVwiIHByb3BlcnR5IC0tPiBjcmVhdGUgaXRcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybS5zZXRUcmFuc2xhdGUoMCwgMCk7XG4gICAgICAgICAgICB0aGlzLnN2Z09iai5hZGRBdHRyKHtcInRyYW5zZm9ybVwiOiB0cmFuc2Zvcm0uZ2V0KCl9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHRoZSBlbGVtZW50IGRvZXMgaGF2ZSBhIFwidHJhbnNmb3JtXCIgcHJvcGVydHkgLS0+IGNoYW5nZSBpdFxuICAgICAgICAgICAgdHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSh0aGlzLnN2Z09iai4kZWwuYXR0cihcInRyYW5zZm9ybVwiKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb252ZXJ0IHZhbHVlcyB0byBncmlkIHBpeGVsc1xuICAgICAgICBpZihncmlkUGl4ZWxzKSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm0udG9HcmlkUGl4ZWxzKHRoaXMucGFyZW50U1ZHKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IHRoZSBpbnN0YW5jZSBvZiB7QGxpbmsgVHJhbnNmb3JtfSByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIHRoZSB0cmFuc2Zvcm0gYXR0cmlidXRlIG9mIHRoaXMgZWxlbWVudCBfd2l0aCBsZW5naHQgdW5pdHMgaW4gZ3JpZCBwaXhlbHNfXG4gICAgICogQHJldHVybiB7VHJhbnNmb3JtfSB7QGxpbmsgVHJhbnNmb3JtfSBvZiB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGdldEdyaWRQaXhlbFRyYW5zZm9ybSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHJhbnNmb3JtKHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCB0aGUgdHJhbnNmb3JtIGF0dHJpYnV0ZSBvZiB0aGlzIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge1RyYW5zZm9ybX0gdHJhbnNmb3JtIHtAbGluayBUcmFuc2Zvcm19IG9mIHRoZSBlbGVtZW50ICh3aXRoIGxlbmd0aHMgc3BlY2lmaWVkIGluIFNWRyBwaXhlbHMpXG4gICAgICovXG4gICAgc2V0VHJhbnNmb3JtKHRyYW5zZm9ybSkge1xuICAgICAgICB0aGlzLnN2Z09iai5hZGRBdHRyKHtcInRyYW5zZm9ybVwiOiB0cmFuc2Zvcm0uZ2V0KCl9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBvbiBldmVyeSBtb3VzZSBkb3duIG9uIHRoaXMgZWxlbWVudFxuICAgICAqXG4gICAgICogbW92ZXMgdGhlIGVsZW1lbnQgdG8gdGhlIGZyb250IGFuZCBjYWxscyBvbk1vdXNlRG93bkxlZnQgaWYgYXBwbGljYWJsZVxuICAgICAqIEBwYXJhbSAge2pRdWVyeS5Nb3VzZUV2ZW50fSBldmVudFxuICAgICAqL1xuICAgIG9uTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgIHRoaXMubW91c2VMZWZ0ID0gZmFsc2U7XG4gICAgICAgIGlmKGV2ZW50LndoaWNoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLm1vdXNlTGVmdCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm9uTW91c2VEb3duTGVmdChldmVudCk7XG5cbiAgICAgICAgICAgIC8vIG1vdmUgdGhlIERPTSBlbGVtZW50IHRvIGZyb250XG4gICAgICAgICAgICB0aGlzLnBhcmVudFNWRy5tb3ZlVG9Gcm9udEJ5SWQodGhpcy5zdmdPYmouaWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgb24gZXZlcnkgbGVmdCBtb3VzZSBkb3duIG9uIHRoaXMgZWxlbWVudFxuICAgICAqXG4gICAgICogcHJlcGFyZXMgZWxlbWVudCBmb3IgdGhlIFwiY2xpY2tcIiBhbmQgXCJkcmFnIGFuZCBkcm9wXCIgYWN0aW9uc1xuICAgICAqIEBwYXJhbSAge2pRdWVyeS5Nb3VzZUV2ZW50fSBldmVudFxuICAgICAqL1xuICAgIG9uTW91c2VEb3duTGVmdChldmVudCkge1xuICAgICAgICB0aGlzLm1vdXNlTW92ZWQgPSBmYWxzZTtcblxuICAgICAgICBsZXQgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oKTtcblxuICAgICAgICAvLyBzYXZlIHRoZSBjdXJyZW50IGl0ZW0gcG9zaXRpb24gaW50byBhIHZhcmlhYmxlXG4gICAgICAgIGxldCBjdXJyZW50UG9zaXRpb24gPSB0cmFuc2Zvcm0uZ2V0VHJhbnNsYXRlKCk7XG5cbiAgICAgICAgbGV0IHtwYWdlWCwgcGFnZVl9ID0gdGhpcy5wYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1FdmVudChldmVudClcblxuICAgICAgICAvLyBjYWxjdWxhdGUgbW91c2Ugb2Zmc2V0IGZyb20gdGhlIG9iamVjdCBvcmlnaW5cbiAgICAgICAgdGhpcy5vZmZzZXQgPSB7XG4gICAgICAgICAgICB4OiBwYWdlWCAtIGN1cnJlbnRQb3NpdGlvbi54LFxuICAgICAgICAgICAgeTogcGFnZVkgLSBjdXJyZW50UG9zaXRpb24ueVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIG9uIGV2ZXJ5IGxlZnQgbW91c2UgbW92ZSB3aXRoIHRoaXMgZWxlbWVudFxuICAgICAqIGFwcGxpZXMgdGhlIGNvcnJlY3QgdHJhbnNmb3JtIHZhbHVlcyB0byBwcm92aWRlIHRoZSBcImRyYWcgYW5kIGRyb3BcIiBmdW5jdGlvbmFsaXR5XG4gICAgICogQHBhcmFtICB7alF1ZXJ5Lk1vdXNlRXZlbnR9IGV2ZW50XG4gICAgICovXG4gICAgb25Nb3VzZU1vdmUoZXZlbnQpIHtcbiAgICAgICAgaWYodGhpcy5tb3VzZUxlZnQpIHtcbiAgICAgICAgICAgIHRoaXMuc3ZnT2JqLiRlbC5hZGRDbGFzcygnZ3JhYmJlZCcpO1xuXG4gICAgICAgICAgICB0aGlzLm1vdXNlTW92ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBsZXQge3BhZ2VYLCBwYWdlWX0gPSB0aGlzLnBhcmVudFNWRy52aWV3Ym94LnRyYW5zZm9ybUV2ZW50KGV2ZW50KVxuXG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gcGFnZVggLSB0aGlzLm9mZnNldC54O1xuICAgICAgICAgICAgY29uc3QgdG9wID0gcGFnZVkgLSB0aGlzLm9mZnNldC55O1xuXG4gICAgICAgICAgICBsZXQgdHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybS5zZXRUcmFuc2xhdGUobGVmdCwgdG9wKTtcblxuICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtKTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVXaXJlcyh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIG9uIGV2ZXJ5IG1vdXNlIHVwIG9uIHRoaXMgZWxlbWVudFxuICAgICAqIHByb3ZpZGVzIHRoZSBcImNsaWNrXCIgZnVuY3Rpb25hbGl0eSBhbmQgY2FsbHMgdGhlIG9uRHJvcCBoYW5kbGVyIGZvciB0aGUgXCJkcmFnIGFuZCBkcm9wXCIgZnVuY3Rpb25hbGl0eVxuICAgICAqIEBwYXJhbSAge2pRdWVyeS5Nb3VzZUV2ZW50fSBldmVudFxuICAgICAqL1xuICAgIG9uTW91c2VVcChldmVudCkge1xuICAgICAgICBpZihldmVudC53aGljaCA9PT0gMSkge1xuICAgICAgICAgICAgaWYodGhpcy5tb3VzZU1vdmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRyb3AoZXZlbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChldmVudC53aGljaCA9PT0gMiApIHtcbiAgICAgICAgICAgIHRoaXMub25DbGlja01pZGRsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdmdPYmouJGVsLnJlbW92ZUNsYXNzKCdncmFiYmVkJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY2FsbGVkIGJ5IG9uTW91c2VVcCB3aGVuIHRoZSBtb3VzZSBoYXMgYmVlbiBtb3ZlZCBiZXR3ZWVuIG9uTW91c2VEb3duIGFuZCBvbk1vdXNlVXBcbiAgICAgKlxuICAgICAqIGFwcGxpZXMgZ3JpZCBzbmFwcGluZyBvZiB0aGUgZWxlbWVudCBvbiB0aGUgZW5kIG9mIHRoZSBcImRyYWcgYW5kIGRyb3BcIiBhY3Rpb25cbiAgICAgKiBAcGFyYW0gIHtqUXVlcnkuTW91c2VFdmVudH0gZXZlbnRcbiAgICAgKi9cbiAgICBvbkRyb3AoZXZlbnQpIHtcbiAgICAgICAgbGV0IHtwYWdlWCwgcGFnZVl9ID0gdGhpcy5wYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1FdmVudChldmVudClcblxuICAgICAgICBsZXQgbGVmdCA9IHBhZ2VYIC0gdGhpcy5vZmZzZXQueDtcbiAgICAgICAgbGV0IHRvcCA9IHBhZ2VZIC0gdGhpcy5vZmZzZXQueTtcblxuICAgICAgICBsZWZ0ID0gdGhpcy5wYXJlbnRTVkcuc25hcFRvR3JpZChsZWZ0KTtcbiAgICAgICAgdG9wID0gdGhpcy5wYXJlbnRTVkcuc25hcFRvR3JpZCh0b3ApO1xuXG4gICAgICAgIGxldCB0cmFuc2Zvcm0gPSB0aGlzLmdldFRyYW5zZm9ybSgpO1xuICAgICAgICB0cmFuc2Zvcm0uc2V0VHJhbnNsYXRlKGxlZnQsIHRvcCk7XG5cbiAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVdpcmVzKCk7XG5cbiAgICAgICAgLy8gaWYgdHV0b3JpYWwgZXhpc3RzLCBjYWxsIHR1dG9yaWFsIGNhbGxiYWNrXG4gICAgICAgIGlmKHRoaXMucGFyZW50U1ZHLnR1dG9yaWFsKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudFNWRy50dXRvcmlhbC5vbkJveE1vdmVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBlbXB0eSBmdW5jdGlvbiwgd2lsbCBiZSByZWRlZmluZWQgaW4gSW5wdXRCb3hcbiAgICAgKi9cbiAgICBvbkNsaWNrKCkge31cblxuICAgIC8qKlxuICAgICAqIGN1c3RvbSBjYWxsYmFjayBmdW5jdGlvbiBmb3IgbWlkZGxlIGNsaWNrIHRoYXQgcm90YXRlcyB0aGUgYm94IGJ5IDkwIGRlZ3JlZXMgdG8gdGhlIHJpZ2h0XG4gICAgICovXG4gICAgb25DbGlja01pZGRsZSgpIHtcbiAgICAgICAgLy8gZ2V0IHRoZSB0cmFuc2Zvcm0gdmFsdWUgZm9yIHRoaXMgYm94XG4gICAgICAgIGxldCB0cmFuc2Zvcm0gPSB0aGlzLmdldFRyYW5zZm9ybSgpO1xuXG4gICAgICAgIC8vIGdldCB0aGUgYm91bmRpbmcgcmVjdGFuZ2xlIGZvciB0aGlzIGJveFxuICAgICAgICBsZXQgcmVjdCA9IHRoaXMuc3ZnT2JqLiRlbFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAvLyB1c2UgdGhlIGJvdW5kaW5nIHJlY3RhbmdsZSBkaW1lbnNpb25zIHRvIGZpZ3VyZSBvdXQgdGhlIGdlb21ldHJpY2FsIGNlbnRyZSBvZiB0aGUgYm94XG4gICAgICAgIGxldCBjZW50cmVYID0gTWF0aC5yb3VuZChyZWN0LndpZHRoIC8gMik7XG4gICAgICAgIGxldCBjZW50cmVZID0gTWF0aC5yb3VuZChyZWN0LmhlaWdodCAvIDIpO1xuXG4gICAgICAgIGNlbnRyZVggLT0gY2VudHJlWCAlIHRoaXMuZ3JpZFNpemU7XG4gICAgICAgIGNlbnRyZVkgLT0gY2VudHJlWSAlIHRoaXMuZ3JpZFNpemU7XG5cbiAgICAgICAgLy8gYXBwbHkgdGhlIHJvdGF0aW9uIHRvIHRoZSB0cmFuc2Zvcm0gb2JqZWN0XG4gICAgICAgIHRyYW5zZm9ybS5yb3RhdGVSaWdodChcbiAgICAgICAgICAgIGNlbnRyZVgsXG4gICAgICAgICAgICBjZW50cmVZXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gYXBwbHkgdGhlIG1vZGlmaWVkIHRyYW5zZm9ybSBvYmplY3Qgb3QgdGhlIHN2Z09ialxuICAgICAgICB0aGlzLnN2Z09iai5hZGRBdHRyKHtcInRyYW5zZm9ybVwiOiB0cmFuc2Zvcm0uZ2V0KCl9KTtcblxuICAgICAgICAvLyByb3RhdGUgYWxzbyB0aGUgYmxvY2tlZCBub2Rlc1xuICAgICAgICB0aGlzLnJvdGF0ZUJsb2NrZWROb2Rlc1JpZ2h0KCk7XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSB3aXJlc1xuICAgICAgICB0aGlzLnVwZGF0ZVdpcmVzKCk7XG5cbiAgICAgICAgLy8gaWYgdHV0b3JpYWwgZXhpc3RzLCBjYWxsIHR1dG9yaWFsIGNhbGxiYWNrXG4gICAgICAgIGlmKHRoaXMucGFyZW50U1ZHLnR1dG9yaWFsKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudFNWRy50dXRvcmlhbC5vbkJveFJvdGF0ZWQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgYWxsIHdpcmVzIGNvbm5lY3RlZCB0byB0aGlzIGJveC4gSXRlcmF0ZXMgb3ZlciBhbGwgd2lyZXMgdGhhdCBhcmUgY29ubmVjdGVkIHRvIHRoaXMgYm94XG4gICAgICogYW5kIGNhbGxzIHJvdXRlV2lyZSAob3IgdGVtcG9yYXJ5V2lyZSBpZiB0aGUgYHRlbXBvcmFyeWAgcGFyYW1ldGVyIGlzIHNldCB0byB0cnVlKSB0byB1cGRhdGUgdGhlIHdpcmUgcm91dGluZ1xuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IFt0ZW1wb3Jhcnk9ZmFsc2VdIFtkZXNjcmlwdGlvbl1cbiAgICAgKi9cbiAgICB1cGRhdGVXaXJlcyh0ZW1wb3JhcnkgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmNvbm5lY3RvcnMuZm9yRWFjaChjb25uID0+IHtcbiAgICAgICAgICAgIGNvbm4ud2lyZUlkcy5mb3JFYWNoKHdpcmVJZCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHdpcmUgPSB0aGlzLnBhcmVudFNWRy5nZXRXaXJlQnlJZCh3aXJlSWQpO1xuICAgICAgICAgICAgICAgIGlmKHRlbXBvcmFyeSkge1xuICAgICAgICAgICAgICAgICAgICB3aXJlLnRlbXBvcmFyeVdpcmUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3aXJlLnJvdXRlV2lyZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG4vKipcbiAqIElucHV0Qm94IGhhcyBvbmx5IG91dHB1dCBjb25uZWN0b3JzIGFuZCBpcyB1c2VkIHRvIHNldCB0aGUgaW5wdXQgc3RhdGVzIGZvciB0aGUgbG9naWMgbmV0d29yay5cbiAqIEBleHRlbmRzIEJveFxuICovXG5leHBvcnQgY2xhc3MgSW5wdXRCb3ggZXh0ZW5kcyBCb3gge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzfSBwYXJlbnRTVkcgIGluc3RhbmNlIG9mIFtDYW52YXNdKC4vbW9kdWxlLUNhbnZhcy5odG1sKVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2lzT249ZmFsc2VdIHRoZSBpbml0aWFsIHN0YXRlIG9mIHRoZSBpbnB1dGJveCAoYHRydWVgIGlzICpvbiosIGBmYWxzZWAgaXMgKm9mZiopXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHLCBpc09uID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSA3O1xuICAgICAgICBjb25zdCBoZWlnaHQgPSA0O1xuXG4gICAgICAgIHN1cGVyKHBhcmVudFNWRywgXCJpbnB1dFwiLCBcImlvXCIsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIHRoaXMuYWRkQ29ubmVjdG9yKHdpZHRoLCBoZWlnaHQgLyAyLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5vbiA9IGlzT247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IGRhdGEgb2YgdGhpcyBpbnB1dCBib3ggYXMgYSBKU09OLXJlYWR5IG9iamVjdFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gamF2YXNjcmlwdCBvYmplY3QgY29udGFpbmluZyBlc3NlbnRpYWwgZGF0YSBmb3IgdGhpcyBpbnB1dCBib3hcbiAgICAgKi9cbiAgICBnZXQgZXhwb3J0RGF0YSgpIHtcbiAgICAgICAgbGV0IGRhdGEgPSBzdXBlci5leHBvcnREYXRhO1xuICAgICAgICBkYXRhLmlzT24gPSB0aGlzLmlzT247XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGdlbmVyYXRlQmxvY2tOb2RlcygpIHtcbiAgICAgICAgc3VwZXIuZ2VuZXJhdGVCbG9ja05vZGVzKDAsIDEsIDEsIDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHN0YXJ0IGEgbmV3IHNpbXVsYXRpb24gZnJvbSB0aGUgb3V0cHV0IGNvbm5lY3RvclxuICAgICAqL1xuICAgIHJlZnJlc2hTdGF0ZSgpIHtcbiAgICAgICAgdGhpcy5wYXJlbnRTVkcuc3RhcnROZXdTaW11bGF0aW9uKHRoaXMuY29ubmVjdG9yc1swXSwgdGhpcy5jb25uZWN0b3JzWzBdLnN0YXRlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCB0aGUgc3RhdGUgb2YgdGhlIGlucHV0Ym94IHRvIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gaXNPbiBzZXQgdG8gKm9uKiBpZiBgdHJ1ZWAsIHNldCB0byAqb2ZmKiBpZiBgZmFsc2VgXG4gICAgICovXG4gICAgc2V0IG9uKGlzT24pIHtcbiAgICAgICAgaWYgKGlzT24pIHtcbiAgICAgICAgICAgIC8vIHR1cm4gb25cbiAgICAgICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UoXCJvblwiKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9yc1swXS5zZXRTdGF0ZShMb2dpYy5zdGF0ZS5vbik7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hTdGF0ZSgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyB0dXJuIG9mZlxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZSgpO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0b3JzWzBdLnNldFN0YXRlKExvZ2ljLnN0YXRlLm9mZik7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hTdGF0ZSgpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzT24gPSBpc09uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCB0aGUgc3RhdGUgb2YgdGhlIGlucHV0Ym94IChgdHJ1ZWAgaWYgKm9uKiwgYGZhbHNlYCBpZiAqb2ZmKilcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBbZGVzY3JpcHRpb25dXG4gICAgICovXG4gICAgZ2V0IG9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc09uO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHRvZ2dsZSB0aGUgc3RhdGUgb2YgdGhlIGlucHV0Ym94XG4gICAgICovXG4gICAgb25DbGljaygpIHtcbiAgICAgICAgdGhpcy5vbiA9ICF0aGlzLm9uO1xuXG4gICAgICAgIGlmKHRoaXMucGFyZW50U1ZHLnR1dG9yaWFsKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudFNWRy50dXRvcmlhbC5vbkNoYW5nZUlucHV0Qm94U3RhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBPdXRwdXRCb3ggaGFzIG9ubHkgaW5wdXQgY29ubmVjdG9ycyBhbmQgaXMgdXNlZCB0byB2aXN1YWxpemUgdGhlIG91dHB1dCBzdGF0ZXMgb2YgdGhlIGxvZ2ljIG5ldHdvcmsuXG4gKiBAZXh0ZW5kcyBCb3hcbiAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dEJveCBleHRlbmRzIEJveCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXN9IHBhcmVudFNWRyAgaW5zdGFuY2Ugb2YgW0NhbnZhc10oLi9tb2R1bGUtQ2FudmFzLmh0bWwpXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHKSB7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IDQ7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gNTtcblxuICAgICAgICBzdXBlcihwYXJlbnRTVkcsIFwib3V0cHV0XCIsIFwiaW9cIiwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgdGhpcy5hZGRDb25uZWN0b3IoMCwgaGVpZ2h0IC8gMiwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IHN0YXRlIG9mIHRoaXMgb3V0cHV0IGJveCB0byBtYXRjaCB0aGUgc3RhdGUgb2YgaXRzIGlucHV0IGNvbm5lY3RvclxuICAgICAqL1xuICAgIHJlZnJlc2hTdGF0ZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmNvbm5lY3RvcnNbMF0uc3RhdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZmxlY3QgdGhlIGlucHV0IGNvbm5lY3RvciBzdGF0ZSBpbiB0aGUgYXBwZWFyYW5jZSBvZiB0aGUgZWxlbWVudCAtIHNldFxuICAgICAqIHRoZSBlbGVtZW50IGltYWdlIHRvIHJlcHJlc2VudCB0aGUgY29ycmVzcG9uZGluZyBzdGF0ZVxuICAgICAqIEBwYXJhbSB7TG9naWMuc3RhdGV9IHN0YXRlIG5ldyBzdGF0ZSBvZiB0aGlzIG91dHB1dEJveFxuICAgICAqL1xuICAgIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUub246XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZShcIm9uXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gaWYgdHV0b3JpYWwgZXhpc3RzLCBjYWxsIHR1dG9yaWFsIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgaWYodGhpcy5wYXJlbnRTVkcudHV0b3JpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRTVkcudHV0b3JpYWwub25PdXRwdXRCb3hUcnVlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMb2dpYy5zdGF0ZS5vZmY6XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZShcIm9mZlwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUudW5rbm93bjpcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUltYWdlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nOlxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UoXCJvc2NcIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZW5lcmF0ZUJsb2NrTm9kZXMoKSB7XG4gICAgICAgIHN1cGVyLmdlbmVyYXRlQmxvY2tOb2RlcygwLCAwLCAwLCAxKTtcbiAgICB9XG59XG5cbi8qKlxuICogR2F0ZSBpcyBhIGJveCB0aGF0IHByb2Nlc3NlcyB0aGUgc3RhdGVzIG9mIGl0cyBpbnB1dCBjb25uZWN0b3JzIGFuZCByZXR1cm5zIHRoZSByZXN1bHQgaW4gaXRzIG91dHB1dCBjb25uZWN0b3JzLlxuICogQGV4dGVuZHMgQm94XG4gKi9cbmV4cG9ydCBjbGFzcyBHYXRlIGV4dGVuZHMgQm94IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc30gcGFyZW50U1ZHICBpbnN0YW5jZSBvZiBbQ2FudmFzXSguL21vZHVsZS1DYW52YXMuaHRtbClcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAgICAgICBuYW1lIG9mIHRoZSBnYXRlIChhbmQsIG5vdCwgeG9yLi4uKVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFNWRywgbmFtZSkge1xuICAgICAgICBjb25zdCB3aWR0aCA9IDk7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IDQ7XG5cbiAgICAgICAgc3VwZXIocGFyZW50U1ZHLCBuYW1lLCBcImdhdGVcIiwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgLy8gb3V0cHV0XG4gICAgICAgIHRoaXMuYWRkQ29ubmVjdG9yKHdpZHRoLCBoZWlnaHQgLyAyLCBmYWxzZSk7XG5cbiAgICAgICAgaWYodGhpcy5uYW1lPT09XCJub3RcIikge1xuICAgICAgICAgICAgLy8gaW5wdXRcbiAgICAgICAgICAgIHRoaXMuYWRkQ29ubmVjdG9yKDAsIGhlaWdodCAvIDIsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gaW5wdXRcbiAgICAgICAgICAgIHRoaXMuYWRkQ29ubmVjdG9yKDAsIGhlaWdodCAvIDQsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5hZGRDb25uZWN0b3IoMCwgaGVpZ2h0IC8gKDQvMyksIHRydWUpO1xuXG4gICAgICAgICAgICAvLyBhZGQgb25lIGJsb2NrZWROb2RlIGJldHdlZW4gdGhlIGlucHV0cyAoZm9yIGJldHRlciBsb29raW5nIHdpcmluZylcbiAgICAgICAgICAgIC8vIGFuZCByZWdlbmVyYXRlIGJsb2NrZWQgbm9kZXNcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVCbG9ja05vZGVzKHtcbiAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgIHk6IGhlaWdodCAvIDJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWZyZXNoU3RhdGUoKTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUJsb2NrTm9kZXMoc3BlY2lhbE5vZGUpIHtcbiAgICAgICAgaWYoc3BlY2lhbE5vZGUhPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN1cGVyLmdlbmVyYXRlQmxvY2tOb2RlcygwLCAxLCAwLCAxLCBzcGVjaWFsTm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdXBlci5nZW5lcmF0ZUJsb2NrTm9kZXMoMCwgMSwgMCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBwcm9jY2VzcyB0aGUgaW5wdXQgY29ubmVjdG9yIHN0YXRlcyBhbmQgcmVmbGVjdCB0aGVtIGluIHRoZSBvdXRwdXQgY29ubmVjdG9yIHN0YXRlcyBhY2NvcmRpbmdcbiAgICAgKiB0byB0aGUgbG9naWMgY29ycmVzcG9uZGluZyB0byB0aGlzIGdhdGUncyBuYW1lXG4gICAgICovXG4gICAgcmVmcmVzaFN0YXRlKCkge1xuICAgICAgICBsZXQgc3RhdGUgPSBMb2dpYy5zdGF0ZS51bmtub3duXG4gICAgICAgIHN3aXRjaCAodGhpcy5uYW1lKSB7XG4gICAgICAgICAgICBjYXNlIFwiYW5kXCI6XG4gICAgICAgICAgICAgICAgc3RhdGUgPSAgTG9naWMuYW5kKHRoaXMuY29ubmVjdG9yc1sxXS5zdGF0ZSwgdGhpcy5jb25uZWN0b3JzWzJdLnN0YXRlKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm5hbmRcIjpcbiAgICAgICAgICAgICAgICBzdGF0ZSA9ICBMb2dpYy5uYW5kKHRoaXMuY29ubmVjdG9yc1sxXS5zdGF0ZSwgdGhpcy5jb25uZWN0b3JzWzJdLnN0YXRlKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm5vclwiOlxuICAgICAgICAgICAgICAgIHN0YXRlID0gIExvZ2ljLm5vcih0aGlzLmNvbm5lY3RvcnNbMV0uc3RhdGUsIHRoaXMuY29ubmVjdG9yc1syXS5zdGF0ZSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJub3RcIjpcbiAgICAgICAgICAgICAgICBzdGF0ZSA9ICBMb2dpYy5ub3QodGhpcy5jb25uZWN0b3JzWzFdLnN0YXRlKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm9yXCI6XG4gICAgICAgICAgICAgICAgc3RhdGUgPSAgTG9naWMub3IodGhpcy5jb25uZWN0b3JzWzFdLnN0YXRlLCB0aGlzLmNvbm5lY3RvcnNbMl0uc3RhdGUpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwieG5vclwiOlxuICAgICAgICAgICAgICAgIHN0YXRlID0gIExvZ2ljLnhub3IodGhpcy5jb25uZWN0b3JzWzFdLnN0YXRlLCB0aGlzLmNvbm5lY3RvcnNbMl0uc3RhdGUpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwieG9yXCI6XG4gICAgICAgICAgICAgICAgc3RhdGUgPSAgTG9naWMueG9yKHRoaXMuY29ubmVjdG9yc1sxXS5zdGF0ZSwgdGhpcy5jb25uZWN0b3JzWzJdLnN0YXRlKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIG5vdGlmeSB0aGUgc2ltdWxhdG9yIGFib3V0IHRoaXMgY2hhbmdlXG4gICAgICAgIHRoaXMucGFyZW50U1ZHLnNpbXVsYXRpb24ubm90aWZ5Q2hhbmdlKHRoaXMuY29ubmVjdG9yc1swXS5pZCwgc3RhdGUpXG4gICAgfVxufVxuXG4vKipcbiAqIEJsYWNrYm94IGlzIGEgYm94IHRoYXQgaXMgZGVmaW5lZCBieSBpdHMgZXZhbHVhdGlvbiBmdW5jdGlvblxuICogQGV4dGVuZHMgQm94XG4gKi9cbmV4cG9ydCBjbGFzcyBCbGFja2JveCBleHRlbmRzIEJveCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXN9IHBhcmVudFNWRyAgaW5zdGFuY2Ugb2YgW0NhbnZhc10oLi9tb2R1bGUtQ2FudmFzLmh0bWwpXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGlucHV0Q29ubmVjdG9ycyAgbnVtYmVyIG9mIGlucHV0IGNvbm5lY3RvcnNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3V0cHV0Q29ubmVjdG9ycyBudW1iZXIgb2Ygb3V0cHV0IGNvbm5lY3RvcnNcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBldmFsRnVuY3Rpb24gICBmdW5jdGlvbiB0aGF0IHRha2VzIGBpbnB1dENvbm5lY3RvcnNgIFtMb2dpYy5zdGF0ZV0oLi9tb2R1bGUtTG9naWMuaHRtbCMuc3RhdGUpc1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCByZXR1cm5zIGBvdXRwdXRDb25uZWN0b3JzYCBMb2dpYy5zdGF0ZXMuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtuYW1lXSAgICAgICAgbmFtZSB0aGF0IHdpbGwgYmUgZGlzcGxheWVkIG9uIHRoZSBibGFja2JveFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFNWRywgaW5wdXRDb25uZWN0b3JzLCBvdXRwdXRDb25uZWN0b3JzLCBldmFsRnVuY3Rpb24sIG5hbWUgPSBcIlwiKSB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gMTE7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWF4KGlucHV0Q29ubmVjdG9ycywgb3V0cHV0Q29ubmVjdG9ycykgKiAyO1xuXG4gICAgICAgIHN1cGVyKHBhcmVudFNWRywgbmFtZSwgXCJibGFja2JveFwiLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICBjb25zdCBjb25uZWN0b3JQaW5MZW5naHQgPSAyLjUgKiB0aGlzLmdyaWRTaXplO1xuXG4gICAgICAgIC8vIG92ZXJyaWRlIGRlZmF1bHQgc3ZnT2JqIHN0cnVjdHVyZVxuICAgICAgICB0aGlzLnN2Z09iaiA9IG5ldyBzdmdPYmouR3JvdXAoKTtcblxuICAgICAgICAvLyB0cmFuc3BhcmVudCBiYWNrZ3JvdW5kIHJlY3RhbmdsZVxuICAgICAgICBsZXQgaGl0Ym94ID0gbmV3IHN2Z09iai5SZWN0YW5nbGUoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIFwibm9uZVwiLCBcIm5vbmVcIik7XG4gICAgICAgIGhpdGJveC4kZWwuYWRkQ2xhc3MoJ3JlY3QnKTtcblxuICAgICAgICB0aGlzLnN2Z09iai5hZGRDaGlsZChoaXRib3gpO1xuXG4gICAgICAgIC8vIG1haW4gcmVjdGFuZ2xlXG4gICAgICAgIGNvbnN0IGJvZHlXaWR0aCA9IHRoaXMud2lkdGggLSAyICogY29ubmVjdG9yUGluTGVuZ2h0O1xuXG4gICAgICAgIGxldCByZWN0YW5nbGUgPSBuZXcgc3ZnT2JqLlJlY3RhbmdsZShjb25uZWN0b3JQaW5MZW5naHQsIDAsIGJvZHlXaWR0aCwgdGhpcy5oZWlnaHQsIFwid2hpdGVcIiwgXCJibGFja1wiKTtcbiAgICAgICAgcmVjdGFuZ2xlLmFkZEF0dHIoeydzdHJva2Utd2lkdGgnOiAnMi41J30pO1xuICAgICAgICByZWN0YW5nbGUuJGVsLmFkZENsYXNzKCdyZWN0Jyk7XG5cbiAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2hpbGQocmVjdGFuZ2xlKTtcblxuICAgICAgICAvLyB0ZXh0IGRlc2NyaXB0aW9uIG9mIHRoZSBib3hcbiAgICAgICAgY29uc3QgdGV4dFdpZHRoID0gYm9keVdpZHRoIC0gdGhpcy5ncmlkU2l6ZTtcbiAgICAgICAgY29uc3QgdGV4dEhlaWdodCA9IHRoaXMuaGVpZ2h0IC0gdGhpcy5ncmlkU2l6ZTtcbiAgICAgICAgbGV0IHRleHQgPSBuZXcgc3ZnT2JqLk11bHRpTGluZVRleHQoXG4gICAgICAgICAgICAodGhpcy53aWR0aCAtIHRleHRXaWR0aCkgLyAyLCAvLyBob3Jpem9udGFsIGNlbnRlcmluZ1xuICAgICAgICAgICAgKHRoaXMuaGVpZ2h0IC0gdGV4dEhlaWdodCkgLyAyLCAvLyB2ZXJ0aWNhbCBjZW50ZXJpbmdcbiAgICAgICAgICAgIHRleHRXaWR0aCxcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0LFxuICAgICAgICAgICAgbmFtZS50b1VwcGVyQ2FzZSgpLFxuICAgICAgICAgICAgdGhpcy5ncmlkU2l6ZSAqIDEuMlxuICAgICAgICApO1xuICAgICAgICB0aGlzLnN2Z09iai5hZGRDaGlsZCh0ZXh0KTtcblxuICAgICAgICAvLyBhZGQgaW5wdXQgY29ubmVjdG9yc1xuICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCBpbnB1dENvbm5lY3RvcnMgOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGdyaWRQb3NpdGlvbiA9IChpICogMikgKyAxO1xuICAgICAgICAgICAgY29uc3QgcGl4ZWxQb3NpdGlvbiA9IGdyaWRQb3NpdGlvbiAqIHRoaXMuZ3JpZFNpemU7XG5cbiAgICAgICAgICAgIGxldCBwaW4gPSBuZXcgc3ZnT2JqLlBvbHlMaW5lKFxuICAgICAgICAgICAgICAgIG5ldyBzdmdPYmouUG9seWxpbmVQb2ludHMoW1xuICAgICAgICAgICAgICAgICAgICBuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnQoMCwgcGl4ZWxQb3NpdGlvbiksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzdmdPYmouUG9seWxpbmVQb2ludChjb25uZWN0b3JQaW5MZW5naHQsIHBpeGVsUG9zaXRpb24pLFxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIFwiYmxhY2tcIixcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICApXG5cbiAgICAgICAgICAgIHRoaXMuc3ZnT2JqLmFkZENoaWxkKHBpbik7XG5cbiAgICAgICAgICAgIC8vIGFkZCB0aGUgY29ubmVjdG9yXG4gICAgICAgICAgICB0aGlzLmFkZElucHV0Q29ubmVjdG9yKDAsIGdyaWRQb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgb3V0cHV0IGNvbm5lY3RvcnNcbiAgICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgb3V0cHV0Q29ubmVjdG9ycyA7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgZ3JpZFBvc2l0aW9uID0gKGkgKiAyKSArIDE7XG4gICAgICAgICAgICBjb25zdCBwaXhlbFBvc2l0aW9uID0gZ3JpZFBvc2l0aW9uICogdGhpcy5ncmlkU2l6ZTtcblxuICAgICAgICAgICAgbGV0IHBpbiA9IG5ldyBzdmdPYmouUG9seUxpbmUoXG4gICAgICAgICAgICAgICAgbmV3IHN2Z09iai5Qb2x5bGluZVBvaW50cyhbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBzdmdPYmouUG9seWxpbmVQb2ludCh0aGlzLndpZHRoIC0gY29ubmVjdG9yUGluTGVuZ2h0LCBwaXhlbFBvc2l0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IHN2Z09iai5Qb2x5bGluZVBvaW50KHRoaXMud2lkdGgsIHBpeGVsUG9zaXRpb24pLFxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIFwiYmxhY2tcIixcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICApXG5cbiAgICAgICAgICAgIHRoaXMuc3ZnT2JqLmFkZENoaWxkKHBpbik7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkT3V0cHV0Q29ubmVjdG9yKHdpZHRoLCBncmlkUG9zaXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdmdPYmouJGVsLmFkZENsYXNzKFwiYm94XCIpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBmdW5jdGlvbiB0aGF0IHRha2VzIGBpbnB1dENvbm5lY3RvcnNgIFtMb2dpYy5zdGF0ZV0oLi9tb2R1bGUtTG9naWMuaHRtbCMuc3RhdGUpc1xuICAgICAgICAgKiBhbmQgcmV0dXJucyBgb3V0cHV0Q29ubmVjdG9yc2AgTG9naWMuc3RhdGVzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ldmFsRnVuY3Rpb24gPSBldmFsRnVuY3Rpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IGRhdGEgb2YgdGhpcyBibGFja2JveCBhcyBhIEpTT04tcmVhZHkgb2JqZWN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSBqYXZhc2NyaXB0IG9iamVjdCBjb250YWluaW5nIGVzc2VudGlhbCBkYXRhIGZvciB0aGlzIGJsYWNrYm94XG4gICAgICovXG4gICAgZ2V0IGV4cG9ydERhdGEoKSB7XG4gICAgICAgIGxldCBkYXRhID0gc3VwZXIuZXhwb3J0RGF0YTtcbiAgICAgICAgZGF0YS5pbnB1dHMgPSB0aGlzLmlucHV0Q29ubmVjdG9ycy5sZW5ndGg7XG4gICAgICAgIGRhdGEub3V0cHV0cyA9IHRoaXMub3V0cHV0Q29ubmVjdG9ycy5sZW5ndGg7XG5cbiAgICAgICAgLy8gZ2VuZXJhdGUgdGhlIHRydXRoIHRhYmxlXG5cbiAgICAgICAgZGF0YS50YWJsZSA9IFtdXG5cbiAgICAgICAgLy8gYXJyYXkgb2YgdGVzdGVkIGlucHV0IHN0YXRlc1xuICAgICAgICBjb25zdCBzdGF0ZUxpc3QgPSBMb2dpYy5zdGF0ZUxpc3Q7XG5cbiAgICAgICAgLy8gcmVjdXJzaXZlIGZ1bmN0aW9uIHRoYXQgZ2VuZXJhdGVzIGFsbCBwb3NzaWJsZSBpbnB1dHNcbiAgICAgICAgY29uc3QgZ2V0UGVybXV0YXRpb25zID0gKGxlbmd0aCkgPT4ge1xuICAgICAgICAgICAgbGV0IHBlcm11dGF0aW9ucyA9IFtdO1xuICAgICAgICAgICAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3RhdGUgb2Ygc3RhdGVMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtdXRhdGlvbnMucHVzaChbc3RhdGVdKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwZXJtdXRhdGlvbnM7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzdGF0ZSBvZiBzdGF0ZUxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihjb25zdCBwZXJtIG9mIGdldFBlcm11dGF0aW9ucyhsZW5ndGggLSAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm11dGF0aW9ucy5wdXNoKFtzdGF0ZSwgLi4ucGVybV0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBlcm11dGF0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGdlbmVyYXRlIG91dHB1dHMgZm9yIGFsbCB0aGUgcG9zc2libGUgaW5wdXRzXG4gICAgICAgIGZvciAoY29uc3QgaW5wdXRWYWx1ZXMgb2YgZ2V0UGVybXV0YXRpb25zKGRhdGEuaW5wdXRzKSkge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0VmFsdWVzID0gdGhpcy5ldmFsRnVuY3Rpb24oLi4uaW5wdXRWYWx1ZXMpO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBhbiBvdXRwdXQgdmFsdWUgdGhhdCBpcyBub3QgTG9naWMuc3RhdGUudW5rbm93biwgYWRkIHRoaXMgbGluZSB0byB0aGVcbiAgICAgICAgICAgIC8vIHRydXRodGFibGUsIG90aGVyd2lzZSBkb24ndCBhZGQgaXQgKGlmIGFsbCBvdXRwdXQgdmFsdWVzIGFyZSBMb2dpYy5zdGF0ZS51bmtub3duLFxuICAgICAgICAgICAgLy8gdGhlIGlucHV0IGNvbWJpbmF0aW9uIGRvZXMgbm90IGhhdmUgdG8gYmUgZGVmaW5lcywgYmVjYXVzZSBMb2dpYy5zdGF0ZS51bmtub3duIGlzIHRoZSBkZWZhdWx0IHZhbHVlKVxuICAgICAgICAgICAgaWYgKG91dHB1dFZhbHVlcy5yZWR1Y2UoKGFjY3VtdWxhdG9yLCBjdXJyZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yIHx8IGN1cnJlbnQgIT09IExvZ2ljLnN0YXRlLnVua25vd25cbiAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgZGF0YS50YWJsZS5wdXNoKFsuLi5pbnB1dFZhbHVlcywgLi4ub3V0cHV0VmFsdWVzXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHByb2NjZXNzIHRoZSBpbnB1dCBjb25uZWN0b3Igc3RhdGVzIGFuZCByZWZsZWN0IHRoZW0gaW4gdGhlIG91dHB1dCBjb25uZWN0b3Igc3RhdGVzIGFjY29yZGluZ1xuICAgICAqIHRvIHRoZSBsb2dpYyBkZWZpbmVkIGJ5IHRoaXMuZXZhbEZ1bmN0aW9uXG4gICAgICovXG4gICAgcmVmcmVzaFN0YXRlKCkge1xuICAgICAgICBjb25zdCBpbnB1dFN0YXRlcyA9IHRoaXMuaW5wdXRDb25uZWN0b3JzLm1hcChjb25uID0+IGNvbm4uc3RhdGUpO1xuICAgICAgICAvLyBjYWxsIHRoZSBldmFsRnVuY3Rpb24gdG8gZ2V0IHRoZSBvdXRwdXQgc3RhdGVzXG4gICAgICAgIGNvbnN0IG91dHB1dFN0YXRlcyA9IHRoaXMuZXZhbEZ1bmN0aW9uKC4uLmlucHV0U3RhdGVzKTtcblxuICAgICAgICAvLyBhcHBseSB0aGUgb3V0cHV0U3RhdGVzIHRvIHRoZSBvdXRwdXRDb25uZWN0b3JzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0cHV0U3RhdGVzLmxlbmd0aCA7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRDb25uZWN0b3JzW2ldLnNldFN0YXRlKG91dHB1dFN0YXRlc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogV2lyZSByZXByZXNlbnRzIGNvbm5lY3Rpb24gb2YgdHdvIHtAbGluayBDb25uZWN0b3J9cy5cbiAqIEBleHRlbmRzIE5ldHdvcmtFbGVtZW50XG4gKi9cbmV4cG9ydCBjbGFzcyBXaXJlIGV4dGVuZHMgTmV0d29ya0VsZW1lbnQge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzfSBwYXJlbnRTVkcgIGluc3RhbmNlIG9mIFtDYW52YXNdKC4vbW9kdWxlLUNhbnZhcy5odG1sKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSAgZnJvbUlkICAgIGlkIG9mIHRoZSBmaXJzdCBjb25uZWN0b3IgdGhpcyB3aXJlIHdpbGwgYmUgY29ubmVjdGVkIHRvXG4gICAgICogQHBhcmFtIHtzdHJpbmd9ICB0b0lkICAgICAgaWQgb2YgdGhlIHNlY29uZCBjb25uZWN0b3IgdGhpcyB3aXJlIHdpbGwgYmUgY29ubmVjdGVkIHRvXG4gICAgICogQHBhcmFtIHtudW1iZXJ9ICBncmlkU2l6ZSAgICAgICBzaXplIG9mIHRoZSBncmlkIGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtyZWZyZXNoPXRydWVdIGlmIGB0cnVlYCwgdGhlIFtDYW52YXNdKC4vbW9kdWxlLUNhbnZhcy5odG1sKSB3aWxsIHJlZnJlc2ggYWZ0ZXIgY3JlYXRpbmcgdGhpcyB3aXJlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHLCBmcm9tSWQsIHRvSWQsIGdyaWRTaXplLCByZWZyZXNoID0gdHJ1ZSkge1xuICAgICAgICAvLyBzbWFsbCBUT0RPOiByZXdvcmsgc3RhcnQuLi4gZW5kLi4uIHRvIGFycmF5cz8gKG5vdCBpbXBvcnRhbnQpXG5cbiAgICAgICAgc3VwZXIocGFyZW50U1ZHKTtcblxuICAgICAgICB0aGlzLmdyaWRTaXplID0gZ3JpZFNpemU7XG5cbiAgICAgICAgdGhpcy5mcm9tSWQgPSBmcm9tSWQ7XG4gICAgICAgIHRoaXMudG9JZCA9IHRvSWQ7XG5cbiAgICAgICAgdGhpcy5zdGFydEJveCA9IHRoaXMucGFyZW50U1ZHLmdldEJveEJ5Q29ubmVjdG9ySWQoZnJvbUlkKTtcbiAgICAgICAgdGhpcy5lbmRCb3ggPSB0aGlzLnBhcmVudFNWRy5nZXRCb3hCeUNvbm5lY3RvcklkKHRvSWQpO1xuXG4gICAgICAgIHRoaXMuYm94ZXMgPSBbdGhpcy5zdGFydEJveCwgdGhpcy5lbmRCb3hdXG5cbiAgICAgICAgdGhpcy5zdGFydENvbm5lY3RvciA9IHRoaXMucGFyZW50U1ZHLmdldENvbm5lY3RvckJ5SWQoZnJvbUlkKTtcbiAgICAgICAgdGhpcy5lbmRDb25uZWN0b3IgPSB0aGlzLnBhcmVudFNWRy5nZXRDb25uZWN0b3JCeUlkKHRvSWQpO1xuXG4gICAgICAgIHRoaXMuY29ubmVjdG9ycyA9IFt0aGlzLnN0YXJ0Q29ubmVjdG9yLCB0aGlzLmVuZENvbm5lY3Rvcl1cbiAgICAgICAgdGhpcy5yb3V0ZVdpcmUodHJ1ZSwgcmVmcmVzaCk7XG5cbiAgICAgICAgdGhpcy5lbGVtZW50U3RhdGUgPSBMb2dpYy5zdGF0ZS51bmtub3duO1xuXG4gICAgICAgIGZvciAobGV0IGNvbm5lY3RvciBvZiB0aGlzLmNvbm5lY3RvcnMpIHtcbiAgICAgICAgICAgIGlmKGNvbm5lY3Rvci5pc091dHB1dENvbm5lY3Rvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoY29ubmVjdG9yLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3ZnT2JqLiRlbC5hZGRDbGFzcyhcIndpcmVcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IGRhdGEgb2YgdGhpcyB3aXJlIGFzIGEgSlNPTi1yZWFkeSBvYmplY3RcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGphdmFzY3JpcHQgb2JqZWN0IGNvbnRhaW5pbmcgZXNzZW50aWFsIGRhdGEgZm9yIHRoaXMgd2lyZVxuICAgICAqL1xuICAgIGdldCBleHBvcnREYXRhKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZnJvbUlkOiB0aGlzLmZyb21JZCxcbiAgICAgICAgICAgIHRvSWQ6IHRoaXMudG9JZFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCB0aGUgc3RhdGUgb2YgdGhpcyB3aXJlIHRvIG1hdGNoIHRoZSBzdGF0ZSBvZiB0aGUgaW5wdXQgY29ubmVjdG9yIGl0IGlzIGNvbm5lY3RlZCB0b1xuICAgICAqIEBwYXJhbSB7TG9naWMuc3RhdGV9IHN0YXRlIFtkZXNjcmlwdGlvbl1cbiAgICAgKi9cbiAgICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICB0aGlzLnN2Z09iai5yZW1vdmVDbGFzc2VzKHN0YXRlQ2xhc3Nlcy5vbiwgc3RhdGVDbGFzc2VzLm9mZiwgc3RhdGVDbGFzc2VzLnVua25vd24sIHN0YXRlQ2xhc3Nlcy5vc2NpbGxhdGluZyk7XG5cbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBMb2dpYy5zdGF0ZS51bmtub3duOlxuICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqLmFkZENsYXNzKHN0YXRlQ2xhc3Nlcy51bmtub3duKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUub246XG4gICAgICAgICAgICAgICAgdGhpcy5zdmdPYmouYWRkQ2xhc3Moc3RhdGVDbGFzc2VzLm9uKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTG9naWMuc3RhdGUub2ZmOlxuICAgICAgICAgICAgICAgIHRoaXMuc3ZnT2JqLmFkZENsYXNzKHN0YXRlQ2xhc3Nlcy5vZmYpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZzpcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z09iai5hZGRDbGFzcyhzdGF0ZUNsYXNzZXMub3NjaWxsYXRpbmcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhcnRDb25uZWN0b3IuaXNJbnB1dENvbm5lY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5zdGFydENvbm5lY3Rvci5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5lbmRDb25uZWN0b3IuaXNJbnB1dENvbm5lY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5lbmRDb25uZWN0b3Iuc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbGVtZW50U3RhdGUgPSBzdGF0ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIGN1cnJlbnQgW0xvZ2ljLnN0YXRlXSguL21vZHVsZXMtTG9naWMuaHRtbCMuc3RhdGUpIG9mIHRoaXMgd2lyZVxuICAgICAqIEByZXR1cm4ge0xvZ2ljLnN0YXRlfVxuICAgICAqL1xuICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudFN0YXRlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHVwZGF0ZSB0aGUgc3RhdGUgb2YgdGhpcyB3aXJlXG4gICAgICovXG4gICAgdXBkYXRlV2lyZVN0YXRlKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGJveCBvZiB0aGlzLmJveGVzKSB7XG4gICAgICAgICAgICBib3gucmVmcmVzaFN0YXRlKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCB0aGUgalF1ZXJ5IGVsZW1lbnQgZm9yIHRoaXMgd2lyZVxuICAgICAqIEByZXR1cm4ge2pRdWVyeS5lbGVtZW50fVxuICAgICAqL1xuICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ZnT2JqLmdldCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCB0aGUgcG9seWxpbmUgcG9pbnRzIGZvciBhIHRlbXBvcmFyeSB3aXJlIHBsYWNlbWVudCBjb25uZWN0aW5nIHRoZSB0d28gY29ubmVjdG9yc1xuICAgICAqIEByZXR1cm4ge1BvbHlsaW5lUG9pbnRzfSBuZXcgaW5zdGFuY2Ugb2Yge0BsaW5rIFBvbHlsaW5lUG9pbnRzfVxuICAgICAqL1xuICAgIGdldFRlbXBvcmFyeVdpcmVQb2ludHMoKSB7XG4gICAgICAgIGxldCBwb2ludHMgPSBuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnRzKCk7XG4gICAgICAgIHBvaW50cy5hcHBlbmQobmV3IHN2Z09iai5Qb2x5bGluZVBvaW50KHRoaXMud2lyZVN0YXJ0LngsIHRoaXMud2lyZVN0YXJ0LnkpKTtcbiAgICAgICAgcG9pbnRzLmFwcGVuZChuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnQodGhpcy53aXJlRW5kLngsIHRoaXMud2lyZUVuZC55KSk7XG4gICAgICAgIHJldHVybiBwb2ludHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcm91dGUgdGhlIHdpcmUgdXNpbmcgdGhlIHRlbXBvcmFyeSB3aXJlIHBvaW50c1xuICAgICAqL1xuICAgIHRlbXBvcmFyeVdpcmUoKSB7XG4gICAgICAgIHRoaXMud2lyZVN0YXJ0ID0gdGhpcy5nZXRDb29yZGluYXRlcyh0aGlzLnN0YXJ0Q29ubmVjdG9yLCBmYWxzZSk7XG4gICAgICAgIHRoaXMud2lyZUVuZCA9IHRoaXMuZ2V0Q29vcmRpbmF0ZXModGhpcy5lbmRDb25uZWN0b3IsIGZhbHNlKTtcblxuICAgICAgICB0aGlzLnNldFdpcmVQYXRoKHRoaXMuZ2V0VGVtcG9yYXJ5V2lyZVBvaW50cygpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByb3V0ZSB0aGUgd2lyZSB1c2luZyB0aGUgbW9kaWZpZWQgQSogd2lyZSByb3V0aW5nIGFsZ29yaXRobVxuICAgICAqL1xuICAgIHJvdXRlV2lyZShzbmFwVG9HcmlkID0gdHJ1ZSwgcmVmcmVzaCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy53aXJlU3RhcnQgPSB0aGlzLmdldENvb3JkaW5hdGVzKHRoaXMuc3RhcnRDb25uZWN0b3IsIHNuYXBUb0dyaWQpO1xuICAgICAgICB0aGlzLndpcmVFbmQgPSB0aGlzLmdldENvb3JkaW5hdGVzKHRoaXMuZW5kQ29ubmVjdG9yLCBzbmFwVG9HcmlkKTtcblxuICAgICAgICB0aGlzLnBvaW50cyA9IHRoaXMuYVN0YXIoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgeDogdGhpcy53aXJlU3RhcnQueCAvIHRoaXMuZ3JpZFNpemUsXG4gICAgICAgICAgICAgICAgeTogdGhpcy53aXJlU3RhcnQueSAvIHRoaXMuZ3JpZFNpemVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgeDogdGhpcy53aXJlRW5kLnggLyB0aGlzLmdyaWRTaXplLFxuICAgICAgICAgICAgICAgIHk6IHRoaXMud2lyZUVuZC55IC8gdGhpcy5ncmlkU2l6ZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zZXRXaXJlUGF0aCh0aGlzLnBvaW50cyk7XG5cbiAgICAgICAgaWYgKHJlZnJlc2gpXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVdpcmVTdGF0ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCB0aGUgd2lyZSB0byBmb2xsb3cgdGhlIHNwZWNpZmllZCBwb2ludHNcbiAgICAgKiBAcGFyYW0ge1BvbHlsaW5lUG9pbnRzfSBwb2ludHMgaW5zdGFuY2Ugb2Yge0BsaW5rIFBvbHlsaW5lUG9pbnRzfVxuICAgICAqL1xuICAgIHNldFdpcmVQYXRoKHBvaW50cykge1xuICAgICAgICAvLyBzZXQgdGhlIGxpbmVcbiAgICAgICAgaWYodGhpcy5zdmdPYmohPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3ZnT2JqLnVwZGF0ZVBvaW50cyhwb2ludHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdmdPYmogPSBuZXcgc3ZnT2JqLlBvbHlMaW5lKHBvaW50cywgXCIjOGI4YjhiXCIsIDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdmdPYmoucmVtb3ZlQ2xhc3NlcyhzdGF0ZUNsYXNzZXMub24sIHN0YXRlQ2xhc3Nlcy5vZmYsIHN0YXRlQ2xhc3Nlcy51bmtub3duLCBzdGF0ZUNsYXNzZXMub3NjaWxsYXRpbmcpO1xuICAgICAgICB0aGlzLnN2Z09iai5hZGRDbGFzcyhzdGF0ZUNsYXNzZXMudW5rbm93bik7XG5cbiAgICAgICAgdGhpcy5zdmdPYmouYWRkQXR0cih7XG4gICAgICAgICAgICBmcm9tSWQ6IHRoaXMuZnJvbUlkLFxuICAgICAgICAgICAgdG9JZDogdGhpcy50b0lkXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlYXZpbHkgbW9kaWZpZWQgaW1wbGVtZW50YXRpb24gb2YgdGhlIEEqIGFsZ29yaXRobVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gc3RhcnQgb2JqZWN0IGNvbnRhaW5pbmcgbnVtZXJpYyBhdHRyaWJ1dGVzIGB4YCBhbmQgYHlgIHRoYXQgcmVwcmVzZW50IHRoZSBmaXJzdCBlbmRwb2ludCBvZiB0aGUgd2lyZVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gZW5kICAgb2JqZWN0IGNvbnRhaW5pbmcgbnVtZXJpYyBhdHRyaWJ1dGVzIGB4YCBhbmQgYHlgIHRoYXQgcmVwcmVzZW50IHRoZSBzZWNvbmQgZW5kcG9pbnQgb2YgdGhlIHdpcmVcbiAgICAgKiBAcmV0dXJuIHtQb2x5bGluZVBvaW50c30gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvbHlsaW5lUG9pbnRzfVxuICAgICAqL1xuICAgIGFTdGFyKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgY29uc3Qgd2lyZUNyb3NzUHVuaXNobWVudCA9IDI7XG4gICAgICAgIGNvbnN0IHdpcmVCZW5kUHVuaXNobWVudCA9IDE7XG5cbiAgICAgICAgLy8gbnVtYmVyIG9mIG5vZGVzLCB0aGF0IGNhbiBiZSBvcGVuZWQgYXQgb25jZVxuICAgICAgICAvLyBvbmNlIGlzIHRoaXMgbGltaXQgZXhjZWVkZWQsIGFTdGFyIHdpbGwgZmFpbCBhbmQgZ2V0VGVtcG9yYXJ5V2lyZVBvaW50cyB3aWxsIGJlIHVzZWQgaW5zdGVhZFxuICAgICAgICBjb25zdCBtYXhOb2RlTGltaXQgPSA1MDAwMDtcblxuICAgICAgICBsZXQgY2xvc2VkTm9kZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGxldCBvcGVuTm9kZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIG9wZW5Ob2Rlcy5hZGQoc3RhcnQpO1xuXG4gICAgICAgIGxldCBjYW1lRnJvbSA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvLyBkZWZhdWx0IHZhbHVlOiBpbmZpbml0eVxuICAgICAgICBsZXQgZ1Njb3JlID0gbmV3IE1hcFdpdGhEZWZhdWx0VmFsdWUoSW5maW5pdHkpO1xuICAgICAgICBnU2NvcmUuc2V0KHN0YXJ0LCAwKTtcblxuICAgICAgICAvLyBkZWZhdWx0IHZhbHVlOiBpbmZpbml0eVxuICAgICAgICBsZXQgZlNjb3JlID0gbmV3IE1hcFdpdGhEZWZhdWx0VmFsdWUoSW5maW5pdHkpO1xuICAgICAgICBmU2NvcmUuc2V0KHN0YXJ0LCBXaXJlLm1hbmhhdHRhbkRpc3RhbmNlKHN0YXJ0LCBlbmQpKTtcblxuICAgICAgICBsZXQgbm9uUm91dGFibGUgPSB0aGlzLnBhcmVudFNWRy5nZXROb25Sb3V0YWJsZU5vZGVzKCk7XG4gICAgICAgIGxldCBwdW5pc2hlZEJ1dFJvdXRhYmxlO1xuICAgICAgICBpZih0aGlzLnN2Z09iaj09PXVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcHVuaXNoZWRCdXRSb3V0YWJsZSA9IHRoaXMucGFyZW50U1ZHLmdldEluY29udmVuaWVudE5vZGVzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwdW5pc2hlZEJ1dFJvdXRhYmxlID0gdGhpcy5wYXJlbnRTVkcuZ2V0SW5jb252ZW5pZW50Tm9kZXModGhpcy5zdmdPYmouaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKG9wZW5Ob2Rlcy5zaXplID4gMCkge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnROb2RlO1xuICAgICAgICAgICAgbGV0IGN1cnJlbnROb2RlRlNjb3JlO1xuXG4gICAgICAgICAgICAvLyBmaW5kIHRoZSB2YWx1ZSBmcm9tIG9wZW5Ob2RlcyB0aGF0IGhhcyB0aGUgbG93ZXN0IGZTY29yZVxuICAgICAgICAgICAgLy8gKGNhbiBiZSBpbXBsZW1lbnRlZCBlZmZlY3RpdmVseSB1c2luZyBtaW4taGVhcCBkYXRhIHN0cnVjdHVyZSAobWF5YmUgVE9ETyBzb21ldGltZSk/KVxuICAgICAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIG9wZW5Ob2Rlcykge1xuICAgICAgICAgICAgICAgIGlmKCFjdXJyZW50Tm9kZSB8fCBmU2NvcmUuZ2V0KG5vZGUpIDwgY3VycmVudE5vZGVGU2NvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUgPSBub2RlO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZUZTY29yZSA9IGZTY29yZS5nZXQoY3VycmVudE5vZGUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihzdmdPYmouUG9seWxpbmVQb2ludC5lcXVhbHMoY3VycmVudE5vZGUsIGVuZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWNvbnN0cnVjdFBhdGgoY2FtZUZyb20sIGN1cnJlbnROb2RlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3Blbk5vZGVzLmRlbGV0ZShjdXJyZW50Tm9kZSk7XG4gICAgICAgICAgICBjbG9zZWROb2Rlcy5hZGQoY3VycmVudE5vZGUpO1xuXG4gICAgICAgICAgICAvLyB0aGUgZmFydGhlc3QgcG9pbnRzIGFjY2Vzc2libGUgd2l0aG91dCBhdm9pZGluZyBvYnN0YWNsZXMgaW4gZXZlcnkgZGlyZWN0aW9uXG4gICAgICAgICAgICAvLyAoYnV0IG1heCA1MCBpbiBlYWNoIGRpcmVjdGlvbilcbiAgICAgICAgICAgIGZvcihsZXQgZGlyZWN0aW9uID0gMCA7IGRpcmVjdGlvbiA8IDQgOyBkaXJlY3Rpb24rKykge1xuICAgICAgICAgICAgICAgIGxldCBuZXdQb2ludCA9IFdpcmUubW92ZVBvaW50KGN1cnJlbnROb2RlLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgNTAgOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgbmV3UG9pbnQgaXMgaW4gdGhlIHNldCBvZiBub24gcm91dGFibGUgcG9pbnRzLFxuICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBhZGQgaXQgYW5kIHN0b3AgcHJvY2VlZGluZyBpbiB0aGlzIGRpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICBpZihXaXJlLnNldEhhc1RoaXNQb2ludChub25Sb3V0YWJsZSwgdGhpcy5zY2FsZVBvaW50VG9HcmlkKG5ld1BvaW50KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2tpcCB0aGlzIG5vZGUsIGlmIGl0IGhhcyBiZWVuIGFscmVhZHkgY2xvc2VkXG4gICAgICAgICAgICAgICAgICAgIC8vIG9yIGlmIGl0IGlzIG9uIHRoZSBsaXN0IG9mIG5vbiByb3V0YWJsZSBub2Rlc1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VkTm9kZXMuaGFzKG5ld1BvaW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wZW5Ob2Rlcy5oYXMobmV3UG9pbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuTm9kZXMuYWRkKG5ld1BvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBwb3NzaWJsZSBHU2NvcmUgYnkgYWRkaW5nIDEgdG8gdGhlIHNjb3JlIG9mIHRoZSBub2RlIHdlIGNhbWUgZnJvbVxuICAgICAgICAgICAgICAgICAgICAvLyAod2UgcHJpb3JpdGl6ZSB0byBtaW5pbWl6ZSB0aGUgbnVtYmVyIG9mIG5vZGVzIGFuZCBub3QgdGhlIGRpc3RhbmNlLFxuICAgICAgICAgICAgICAgICAgICAvLyAgc28gd2UgYXJlIGFkZGluZyAxIG9uIGFsbCBub2RlcywgZXZlbiBpZiB0aGUgZXVjbGlkZWFuIC8gbWFubmhhdGFuIGRpc3RhbmNlIG1heSB2YXJ5KVxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5jcmVtZW50ID0gd2lyZUJlbmRQdW5pc2htZW50O1xuICAgICAgICAgICAgICAgICAgICBsZXQgcG9zc2libGVHU2NvcmUgPSBnU2NvcmUuZ2V0KGN1cnJlbnROb2RlKSArIGluY3JlbWVudDtcblxuICAgICAgICAgICAgICAgICAgICBpZihXaXJlLnNldEhhc1RoaXNQb2ludChwdW5pc2hlZEJ1dFJvdXRhYmxlLCB0aGlzLnNjYWxlUG9pbnRUb0dyaWQobmV3UG9pbnQpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIG5vZGUgaXMgaW4gdGhlIHNldCBvZiBwdW5pc2hlZCBub2RlLCBwdW5pc2ggaXQgYnkgYWRkaW5nIHRvIHRoZSBHU2NvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlR1Njb3JlICs9IHdpcmVDcm9zc1B1bmlzaG1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBza2lwIHRoaXMgbm9kZSBpZiBpdCBoYXMgd29yc3QgZXN0aW1hZ2UgZ3Njb3JlIHRoYW4gaW4gdGhlIGdzY29yZSB0YWJsZVxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVHU2NvcmUgPj0gZ1Njb3JlLmdldChuZXdQb2ludCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY2FtZUZyb20uc2V0KG5ld1BvaW50LCBjdXJyZW50Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGdTY29yZS5zZXQobmV3UG9pbnQsIHBvc3NpYmxlR1Njb3JlKTtcbiAgICAgICAgICAgICAgICAgICAgZlNjb3JlLnNldChuZXdQb2ludCwgcG9zc2libGVHU2NvcmUgKyBXaXJlLm1hbmhhdHRhbkRpc3RhbmNlKG5ld1BvaW50LCBlbmQpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBuZXdQb2ludCBpcyBpbiB0aGUgc2V0IG9mIHB1bmlzaGVkIGJ1dCByb3V0YWJsZSBwb2ludHMsXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBpdCBidXQgc3RvcCBwcm9jZWVkaW5nIGluIHRoaXMgZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIGlmKFdpcmUuc2V0SGFzVGhpc1BvaW50KHB1bmlzaGVkQnV0Um91dGFibGUsIHRoaXMuc2NhbGVQb2ludFRvR3JpZChuZXdQb2ludCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgdG8gdGhlIG5leHQgcG9pbnQgaW4gdGhlIGRpcmVjaXRvblxuICAgICAgICAgICAgICAgICAgICBuZXdQb2ludCA9IFdpcmUubW92ZVBvaW50KG5ld1BvaW50LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYob3Blbk5vZGVzLnNpemUgPiBtYXhOb2RlTGltaXQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpZiB3ZSBnb3QgaGVyZSwgdGhlIHBhdGggZG9lcyBub3QgZXhpc3QgLT4gbGV0J3MgdXNlIHRlbXBvcmFyeSBwYXRoIGlnbm9yaW5nIGFsbCBjb2xpc2lvbnNcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGVtcG9yYXJ5V2lyZVBvaW50cygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciB0aGF0IG1vdmVzIHRoZSBwYXNzZWQgcG9pbnQgaW4gdGhlIHNwZWNpZmllZCBkaXJlY3Rpb24uIEl0IHNpbXBseSBhZGRzIG9yIHN1YnRyYWN0cyAxIGZyb20gb25lIG9mIHRoZSBjb29yZGluYXRlcyBkZXBlbmRpbmcgb24gdGhlIGRpcmVjdGlvbiBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBwb2ludCAgICAgb2JqZWN0IGNvbnRhaW5pbmcgbnVtZXJpYyBhdHRyaWJ1dGVzIGB4YCBhbmQgYHlgXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBkaXJlY3Rpb24gZGlyZWN0aW9uczpcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gMDogdXBcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gMTogcmlnaHRcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gMjogZG93blxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSAzOiBsZWZ0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgICAgb2JqZWN0IGNvbnRhaW5pbmcgbnVtZXJpYyBhdHRyaWJ1dGVzIGB4YCBhbmQgYHlgXG4gICAgICovXG4gICAgc3RhdGljIG1vdmVQb2ludChwb2ludCwgZGlyZWN0aW9uKSB7XG4gICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIDA6IC8vIHVwXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgeDogcG9pbnQueCxcbiAgICAgICAgICAgICAgICAgICAgeTogcG9pbnQueSAtIDFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSAxOiAvLyByaWdodFxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHg6IHBvaW50LnggKyAxLFxuICAgICAgICAgICAgICAgICAgICB5OiBwb2ludC55XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgMjogLy8gZG93blxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHg6IHBvaW50LngsXG4gICAgICAgICAgICAgICAgICAgIHk6IHBvaW50LnkgKyAxXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgMzogLy8gbGVmdFxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHg6IHBvaW50LnggLSAxLFxuICAgICAgICAgICAgICAgICAgICB5OiBwb2ludC55XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIG11bHRpcGx5IHRoZSBwb2ludCBjb29yZGluYXRlcyBieSB0aGUgZ3JpZCBzaXplXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBwb2ludCBvYmplY3QgY29udGFpbmluZyBudW1lcmljIGF0dHJpYnV0ZXMgYHhgIGFuZCBgeWAgaW4gZ3JpZCBwaXhlbHNcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgIHRoZSBzYW1lIHBvaW50IGJ1dCBjb250YWluaW5nIG51bWVyaWMgYXR0cmlidXRlcyBgeGAgYW5kIGB5YCBpbiBTVkcgcGl4ZWxzXG4gICAgICovXG4gICAgc2NhbGVQb2ludFRvR3JpZChwb2ludCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogcG9pbnQueCAqIHRoaXMuZ3JpZFNpemUsXG4gICAgICAgICAgICB5OiBwb2ludC55ICogdGhpcy5ncmlkU2l6ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGVscGVyIGJhY2t0cmFja2luZyBmdW5jdGlvbiB1c2VkIGJ5IHRoZSBhU3RhciBhbGdvcml0aG0gdG8gY29uc3RydWN0IHRoZSBmaW5hbCB7QGxpbmsgUG9seWxpbmVQb2ludHN9XG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBjYW1lRnJvbSAgICBvYmplY3QgY29udGFpbmluZyBudW1lcmljIGF0dHJpYnV0ZXMgYHhgIGFuZCBgeWBcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGN1cnJlbnROb2RlIG9iamVjdCBjb250YWluaW5nIG51bWVyaWMgYXR0cmlidXRlcyBgeGAgYW5kIGB5YFxuICAgICAqIEByZXR1cm4ge1BvbHlsaW5lUG9pbnRzfSAgICAgaW5zdGFuY2Ugb2Yge0BsaW5rIFBvbHlsaW5lUG9pbnRzfSB0aGF0IHJlcHJlc2VudHMgdGhlIHBhdGggZm91bmQgYnkgdGhlIGFTdGFyIGFsZ29yaXRobVxuICAgICAqL1xuICAgIHJlY29uc3RydWN0UGF0aChjYW1lRnJvbSwgY3VycmVudE5vZGUpIHtcbiAgICAgICAgbGV0IHRvdGFsUGF0aCA9IG5ldyBzdmdPYmouUG9seWxpbmVQb2ludHMoKTtcbiAgICAgICAgdG90YWxQYXRoLmFwcGVuZChuZXcgc3ZnT2JqLlBvbHlsaW5lUG9pbnQoY3VycmVudE5vZGUueCAqIHRoaXMuZ3JpZFNpemUsIGN1cnJlbnROb2RlLnkgKiB0aGlzLmdyaWRTaXplKSk7XG5cbiAgICAgICAgd2hpbGUgKGNhbWVGcm9tLmhhcyhjdXJyZW50Tm9kZSkpIHtcbiAgICAgICAgICAgIGN1cnJlbnROb2RlID0gY2FtZUZyb20uZ2V0KGN1cnJlbnROb2RlKTtcbiAgICAgICAgICAgIHRvdGFsUGF0aC5hcHBlbmQobmV3IHN2Z09iai5Qb2x5bGluZVBvaW50KGN1cnJlbnROb2RlLnggKiB0aGlzLmdyaWRTaXplLCBjdXJyZW50Tm9kZS55ICogdGhpcy5ncmlkU2l6ZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRvdGFsUGF0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHRoZSBNYW5oYXR0YW4gZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnRzIF9hXyBhbmQgX2JfXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBhIG9iamVjdCBjb250YWluaW5nIG51bWVyaWMgYXR0cmlidXRlcyBgeGAgYW5kIGB5YFxuICAgICAqIEBwYXJhbSAge09iamVjdH0gYiBvYmplY3QgY29udGFpbmluZyBudW1lcmljIGF0dHJpYnV0ZXMgYHhgIGFuZCBgeWBcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3RhdGljIG1hbmhhdHRhbkRpc3RhbmNlKGEsIGIpIHtcbiAgICAgICAgLy8gTWFuaGF0dGFuIGdlb21ldHJ5XG4gICAgICAgIHJldHVybiBNYXRoLmFicyhhLnggLSBiLngpICsgTWF0aC5hYnMoYS55IC0gYi55KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIGB0cnVlYCBpZiB0aGUgc3BlY2lmaWVkIHNldCBvZiBwb2ludHMgY29udGFpbnMgdGhlIHNwZWNpZmllZCBwb2ludCAoYW5kIHJldHVybnMgYGZhbHNlYCBvdGhlcndpc2UpXG4gICAgICogQHBhcmFtIHtTZXR9IHNldCBzZXQgb2YgcG9pbnRzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBvaW50IG9iamVjdCBjb250YWluaW5nIG51bWVyaWMgYXR0cmlidXRlcyBgeGAgYW5kIGB5YFxuICAgICAqL1xuICAgIHN0YXRpYyBzZXRIYXNUaGlzUG9pbnQoc2V0LCBwb2ludCkge1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHNldCkge1xuICAgICAgICAgICAgaWYoaXRlbS54ID09PSBwb2ludC54ICYmIGl0ZW0ueSA9PT0gcG9pbnQueSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBzcGVjaWZpZWQgY29ubmVjdG9yXG4gICAgICogQHBhcmFtICB7Q29ubmVjdG9yfSAgY29ubmVjdG9yICAgICAgaW5zdGFuY2Ugb2Yge0BsaW5rIENvbm5lY3Rvcn1cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbc25hcFRvR3JpZD10cnVlXSBpZiB0cnVlLCB0aGUgY29ubmVjdG9yIHBvc2l0aW9uIHdpbGwgYmUgc25hcHBlZCB0byB0aGUgZ3JpZFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICAgICAgICAgICAgICAgIHBvaW50IC0gb2JqZWN0IGNvbnRhaW5pbmcgbnVtZXJpYyBhdHRyaWJ1dGVzIGB4YCBhbmQgYHlgXG4gICAgICovXG4gICAgZ2V0Q29vcmRpbmF0ZXMoY29ubmVjdG9yLCBzbmFwVG9HcmlkID0gdHJ1ZSkge1xuICAgICAgICAvLyBjb25uZWN0b3Iuc3ZnT2JqLmlkIGhhcyB0byBiZSBjYWxsZWQsIGVsc2UgdGhlIGdldENvb3JkaW5hdGVzIGRvZXMgbm90IHdvcmsgb24gdGhlIGZpcnN0IGNhbGwgaW4gRmlyZWZveCA1NVxuICAgICAgICBjb25zdCBkdW1teSA9IGNvbm5lY3Rvci5zdmdPYmouaWQ7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuICAgICAgICBsZXQgJGNvbm5lY3RvciA9IGNvbm5lY3Rvci5zdmdPYmouJGVsO1xuXG4gICAgICAgIGxldCBwb3NpdGlvbiA9ICRjb25uZWN0b3IucG9zaXRpb24oKTtcblxuICAgICAgICBwb3NpdGlvbi5sZWZ0ID0gdGhpcy5wYXJlbnRTVkcudmlld2JveC50cmFuc2Zvcm1YKHBvc2l0aW9uLmxlZnQpXG4gICAgICAgIHBvc2l0aW9uLnRvcCA9IHRoaXMucGFyZW50U1ZHLnZpZXdib3gudHJhbnNmb3JtWShwb3NpdGlvbi50b3ApXG5cbiAgICAgICAgbGV0IHdpZHRoID0gJGNvbm5lY3Rvci5hdHRyKFwid2lkdGhcIik7XG4gICAgICAgIGxldCBoZWlnaHQgPSAkY29ubmVjdG9yLmF0dHIoXCJoZWlnaHRcIik7XG5cbiAgICAgICAgbGV0IHggPSBwb3NpdGlvbi5sZWZ0ICsgd2lkdGggLyAyO1xuICAgICAgICBsZXQgeSA9IHBvc2l0aW9uLnRvcCArIGhlaWdodCAvIDI7XG4gICAgICAgIGlmKHNuYXBUb0dyaWQpIHtcbiAgICAgICAgICAgIHggPSB0aGlzLnBhcmVudFNWRy5zbmFwVG9HcmlkKHgpO1xuICAgICAgICAgICAgeSA9IHRoaXMucGFyZW50U1ZHLnNuYXBUb0dyaWQoeSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHlcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRKU09OU3RyaW5nIH0gZnJvbSBcIi4vaGVscGVyRnVuY3Rpb25zLmpzXCI7XG5cbi8qKlxuICogRmxvYXRpbmdCdXR0b24gcmVwcmVzZW50cyBhIGJ1dHRvbiB0aGF0IGlzIHVzZWQgaW4gdGhlIGZsb2F0aW5nIG1lbnUgaW4gdGhlIHJpZ2h0IGJvdHRvbSBjb3JuZXJcbiAqIG9mIHRoZSBhcHBsaWNhdGlvbi4gSXQgbWF5IGhhdmUgYSBjdXN0b20gdG9vbHRpcCBhbmQgY2FsbGJhY2sgb24gdGhlIGNsaWNrIGV2ZW50XG4gKi9cbmNsYXNzIEZsb2F0aW5nQnV0dG9uIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYnV0dG9uQ2xhc3MgQ3VzdG9tIHN0cmluZyB0aGF0IGlkZW50aWZpZXMgdGhlIFNWRyBpY29uIHVzZWQgb24gdGhpcyBidXR0b24uIFRoaXMgc3RyaW5nIGlzIGFsc28gYWRkZWQgYXMgYSBDU1MgY2xhc3MgdG8gdGhlIGJ1dHRvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdG9vbHRpcCAgICAgdG9vbHRpcCBmb3IgdGhlIGJ1dHRvbiwgdGhhdCB3aWxsIGJlIGRpc3BsYXllZCBvbiBob3ZlciBhbmQgYWxzbyB1c2VkIGFzIGFsdGVybmF0aXZlIHRpdGxlIGZvciB0aGUgaW1hZ2VcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjbGlja0V2ZW50ICBjdXN0b20gY2FsbGJhY2sgd2hlbiB1c2VyIGNsaWNrcyB0aGUgYnV0dG9uXG4gICAgICogQHBhcmFtIHtDYW52YXN9IHBhcmVudFNWRyAgIHJlZmVyZW5jZSB0byB0aGUgcGFyZW50IFNWRyBlbGVtZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYnV0dG9uQ2xhc3MsIHRvb2x0aXAsIGNsaWNrRXZlbnQsIHBhcmVudFNWRykge1xuICAgICAgICAvKipcbiAgICAgICAgICogalF1ZXJ5IGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSBidXR0b25cbiAgICAgICAgICogQHR5cGUge2pRdWVyeS5lbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy4kZWwgPSAkKCc8YT4nKVxuXG4gICAgICAgIC8vIGFkZCBjbGFzc2VzIHRvIHRoZSBlbGVtZW50XG4gICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKFwiYnV0dG9uXCIpO1xuICAgICAgICB0aGlzLiRlbC5hZGRDbGFzcyhidXR0b25DbGFzcyk7XG5cbiAgICAgICAgLy8gYWRkIHRoZSBpY29uXG4gICAgICAgIHRoaXMuJGVsLmFwcGVuZChcbiAgICAgICAgICAgICQoXCI8aW1nPlwiKVxuICAgICAgICAgICAgLmF0dHIoXCJzcmNcIiwgYGltZy9ndWkvJHtidXR0b25DbGFzc30uc3ZnYClcbiAgICAgICAgICAgIC5hdHRyKFwiYWx0XCIsIHRvb2x0aXApXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gYWRkIHRoZSB0b29sdGlwIGVsZW1lbnQgYW5kIGFuIGV2ZW50IGxpc3RlbmVyIGlmIHRvb2x0aXAgaXMgZGVmaW5lZFxuICAgICAgICBpZiAodG9vbHRpcCkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBqUXVlcnkgZWxlbWVudCByZXByZXNlbnRpbmcgdGhlIHRvb2x0aXBcbiAgICAgICAgICAgICAqIEB0eXBlIHtqUXVlcnkuZWxlbWVudH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy4kdG9vbHRpcCA9ICQoXCI8ZGl2PlwiKTtcbiAgICAgICAgICAgIHRoaXMuJHRvb2x0aXBcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJ0b29sdGlwXCIpXG4gICAgICAgICAgICAgICAgLmh0bWwodG9vbHRpcCk7XG5cbiAgICAgICAgICAgIHBhcmVudFNWRy4kc3ZnLmFmdGVyKHRoaXMuJHRvb2x0aXApO1xuXG4gICAgICAgICAgICB0aGlzLiRlbC5ob3ZlcigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdG9vbHRpcC5mYWRlSW4oMjAwKTtcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiR0b29sdGlwLmZhZGVPdXQoMjAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWRkIGFuIGV2ZW50IGxpc3RlbmVyIG9uIGNsaWNrLCBpZiB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gaXMgZGVmaW5lZFxuICAgICAgICBpZiAoY2xpY2tFdmVudCkge1xuICAgICAgICAgICAgdGhpcy4kZWwub24oXCJjbGlja1wiLCBjbGlja0V2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqIEBtb2R1bGUgRmxvYXRpbmdNZW51ICovXG4vKipcbiAqIENsYXNzIHRvIHJlcHJlc2VudCB0aGUgZmxvYXRpbmcgbWVudSBpbiB0aGUgcmlnaHQgYm90dG9tIGNvcm5lciBvZiB0aGUgcGFnZS5cbiAqIEl0IGluc3RhbnRpYXRlcyBhbGwgdGhlIGJ1dHRvbnMgYW5kIHRoZWlyIGNhbGxiYWNrcy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmxvYXRpbmdNZW51IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc30gcGFyZW50U1ZHIHJlZmVyZW5jZSB0byB0aGUgQ2FudmFzIGVsZW1lbnQgdGhpcyBtZW51IGlzIGFzc29jaWF0ZWQgd2l0aFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFNWRykge1xuICAgICAgICAvKipcbiAgICAgICAgICogdGhlIGpRdWVyeSBlbGVtZW50IGNvbnRhaW5pbmcgYWxsIGJ1dHRvbnNcbiAgICAgICAgICogQHR5cGUge2pRdWVyeS5lbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy4kZWwgPSAkKCc8ZGl2PicpXG5cbiAgICAgICAgY29uc3QgaWQgPSAnZmxvYXRpbmdNZW51JztcblxuICAgICAgICB0aGlzLiRlbC5hdHRyKFwiaWRcIiwgaWQpO1xuXG4gICAgICAgIC8vIGNvbnN0ICRsb2FkZXIgPSAkKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJsb2FkZXJcIikuYWRkQ2xhc3MoXCJoaWRkZW5cIik7XG5cblxuICAgICAgICAvKiBFWFBPUlQgKi9cbiAgICAgICAgdGhpcy5hcHBlbmQoXG4gICAgICAgICAgICBuZXcgRmxvYXRpbmdCdXR0b24oXCJleHBvcnRcIiwgXCJHZXQgY29kZSBmb3IgdGhpcyBuZXR3b3JrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgdGhlIHBvcHVwIGNvbnRhaW5lciBob2xkaW5nIGFsbCBwb3B1cCBjb250ZW50ICh0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIGxpdHkpXG4gICAgICAgICAgICAgICAgbGV0ICRwb3B1cCA9ICQoXCI8ZGl2PlwiKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJpbXBvcnRFeHBvcnRcIilcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiZXhwb3J0XCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgdGhlIGJsb2NrIHdpdGggY29kZSB0byBiZSBkaXNwbGF5ZWQgYW5kIGFwcGVuZCBpdCB0byB0aGUgcG9wdXAgZWxlbWVudFxuICAgICAgICAgICAgICAgIGNvbnN0ICR0ZXh0YmxvY2sgPSAkKFwiPHRleHRhcmVhPlwiKS50ZXh0KFxuICAgICAgICAgICAgICAgICAgICBnZXRKU09OU3RyaW5nKHBhcmVudFNWRy5leHBvcnREYXRhLCB0cnVlKVxuICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgICRwb3B1cC5hcHBlbmQoJHRleHRibG9jayk7XG5cbiAgICAgICAgICAgICAgICAvLyBnZW5lcmF0ZSB0aGUgbGlua3NcbiAgICAgICAgICAgICAgICAkcG9wdXAuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAkKFwiPGE+XCIpLmF0dHIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJocmVmXCI6IGdldEpTT05TdHJpbmcocGFyZW50U1ZHLmV4cG9ydERhdGEsIHRydWUsIHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcImRvd25sb2FkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRvd25sb2FkXCI6IFwibmV0d29yay5qc29uXCJcbiAgICAgICAgICAgICAgICAgICAgfSkuYXBwZW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIjxpbWc+XCIpLmF0dHIoJ3NyYycsIFwiaW1nL2d1aS9leHBvcnQuc3ZnXCIpXG4gICAgICAgICAgICAgICAgICAgICkuYXBwZW5kKFwiIGV4cGFuZGVkIEpTT05cIilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICRwb3B1cC5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICQoXCI8YT5cIikuYXR0cih7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImhyZWZcIjogZ2V0SlNPTlN0cmluZyhwYXJlbnRTVkcuZXhwb3J0RGF0YSwgZmFsc2UsIHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcImRvd25sb2FkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRvd25sb2FkXCI6IFwibmV0d29yay5taW4uanNvblwiXG4gICAgICAgICAgICAgICAgICAgIH0pLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCI8aW1nPlwiKS5hdHRyKCdzcmMnLCBcImltZy9ndWkvZXhwb3J0LnN2Z1wiKVxuICAgICAgICAgICAgICAgICAgICApLmFwcGVuZChcIiBjb21wYWN0IEpTT05cIilcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgbGl0eSgkcG9wdXApO1xuXG4gICAgICAgICAgICAgICAgLy8gaGlnaGxpZ2h0IHRoZSB0ZXh0IGluIHRoZSB0ZXh0YmxvY2tcbiAgICAgICAgICAgICAgICAkdGV4dGJsb2NrLnNlbGVjdCgpO1xuICAgICAgICAgICAgfSwgcGFyZW50U1ZHKVxuICAgICAgICApO1xuXG4gICAgICAgIC8qIEhFTFAgKi9cblxuICAgICAgICBsZXQgaGVscCA9IG5ldyBGbG9hdGluZ0J1dHRvbihcImhlbHBcIiwgXCJEaXNwbGF5IGEgaGVscCBwYWdlXCIsIGZhbHNlLCBwYXJlbnRTVkcpO1xuICAgICAgICBoZWxwLiRlbC5hdHRyKHtcbiAgICAgICAgICAgICdocmVmJzogJy4vZG9jcy91c2VyLmh0bWwnLFxuICAgICAgICAgICAgJ2RhdGEtbGl0eSc6ICcnXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFwcGVuZChoZWxwKTtcblxuICAgICAgICBwYXJlbnRTVkcuJHN2Zy5hZnRlcih0aGlzLiRlbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYXBwZW5kIGEgRmxvYXRpbmdCdXR0b24gdG8gdGhpcyBtZW51XG4gICAgICogQHBhcmFtICB7RmxvYXRpbmdCdXR0b259IG1lbnVJdGVtIGFwcGVuZCBhbiBpbnN0YW5jZSBvZiAge0BsaW5rIEZsb2F0aW5nQnV0dG9ufSB0byB0aGlzIG1lbnVcbiAgICAgKi9cbiAgICBhcHBlbmQobWVudUl0ZW0pIHtcbiAgICAgICAgdGhpcy4kZWwuYXBwZW5kKG1lbnVJdGVtLiRlbCk7XG4gICAgfVxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKlxuICogQG1vZHVsZSBIZWxwZXJGdW5jdGlvbnNcbiAqL1xuXG4vKipcbiAqIGFkZCBhIGNyb3NzIGJyb3dzZXIgZXZlbnQgbGlzdGVuZXIgb24gYSBtb3VzZSBzY3JvbGxcbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeSBET00gcXVlcnkgb2YgdGhlIGVsZW1lbnQgdGhhdCB0aGUgbGlzdGVuZXIgd2lsbCBiZSBhZGRlZCB0b1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyAgRnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBldmVudCBvY2N1cnMuIFRoZSBmdW5jdGlvbiB0YWtlcyBhcyBhIHBhcmFtZXRlciBhbiBldmVudCBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRNb3VzZVNjcm9sbEV2ZW50TGlzdGVuZXIocXVlcnksIGZ1bmMpIHtcbiAgICBsZXQgTW91c2VXaGVlbEhhbmRsZXIgPSBldmVudCA9PiB7XG4gICAgICAgIC8vIHJlZGVjbGFyZSBmb3Igb2xkIElFIHN1cHBvcnRcbiAgICAgICAgdmFyIGV2ZW50ID0gd2luZG93LmV2ZW50IHx8IGV2ZW50OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXJlZGVjbGFyZVxuXG4gICAgICAgIGV2ZW50LmRlbHRhID0gTWF0aC5tYXgoLTEsIE1hdGgubWluKDEsIChldmVudC53aGVlbERlbHRhIHx8IC1ldmVudC5kZXRhaWwpKSk7XG5cbiAgICAgICAgZnVuYyhldmVudClcblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IHN2Z2VsZW1lbnQ7XG5cbiAgICAvLyBpZiB0aGUgcXVlcnkgaXMgYSBzaW1wbGUgRE9NIGlkIHNlbGVjdG9yLCB3ZSBjYW4gdXNlIGdldEVsZW1lbnRCeUlkIHdoaWNoIGhhcyBiZXR0ZXIgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICBpZihxdWVyeS5tYXRjaCgvXiNcXHcrJC8pKSB7XG4gICAgICAgIHN2Z2VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChxdWVyeS5zdWJzdHIoMSkpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3ZnZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocXVlcnkpXG4gICAgfVxuXG4gICAgaWYgKHN2Z2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAvLyBJRTksIENocm9tZSwgU2FmYXJpLCBPcGVyYVxuICAgICAgICBzdmdlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXdoZWVsXCIsIE1vdXNlV2hlZWxIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIC8vIEZpcmVmb3hcbiAgICAgICAgc3ZnZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NTW91c2VTY3JvbGxcIiwgTW91c2VXaGVlbEhhbmRsZXIsIGZhbHNlKTtcbiAgICB9IGVsc2UgIHtcbiAgICAgICAgLy8gSUUgNi83LzhcbiAgICAgICAgc3ZnZWxlbWVudC5hdHRhY2hFdmVudChcIm9ubW91c2V3aGVlbFwiLCBNb3VzZVdoZWVsSGFuZGxlcik7XG4gICAgfVxuICAgIHN2Z2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2V2ZW50JywgZSlcbiAgICB9LCBmYWxzZSlcbn1cblxuLyoqXG4gKiBjb252ZXJ0IGEgZGF0YSBvYmplY3QgdG8gSlNPTiBzdHJpbmcgb3IgdG8gYSBkYXRhIFVSSSBjb250YWluaW5nIGEgSlNPTiBzdHJpbmdcbiAqIEBwYXJhbSAge09iamVjdH0gIGRhdGEgICAgICAgICAgICBvYmplY3QgdGhhdCB3aWxsIGJlIHNlcmlhbGl6ZWQgaW50byBhIEpTT04gc3RyaW5nXG4gKiBAcGFyYW0gIHtCb29sZWFufSBbcHJldHR5PWZhbHNlXSAgaWYgYHRydWVgLCB0aGUgY29kZSB3aWxsIGJlIHByb3ByZXJseSBpbmRlbnRlZCwgZWxzZSBhIG1vcmUgY29tcGFjdCBzeW50YXggd2lsbCBiZSB1c2VkXG4gKiBAcGFyYW0gIHtCb29sZWFufSBbZGF0YVVyaT1mYWxzZV0gcmV0dXJuIGRhdGFVcmkgY29udGFpbmluZyB0aGUgSlNPTiBzdHJpbmcgaW5zdGVhZCBvZiB0aGUgcHVyZSBKU09OIHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SlNPTlN0cmluZyhkYXRhLCBwcmV0dHkgPSBmYWxzZSwgZGF0YVVyaSA9IGZhbHNlKSB7XG4gICAgaWYoZGF0YVVyaSkge1xuICAgICAgICByZXR1cm4gJ2RhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04LCdcbiAgICAgICAgICAgICsgZW5jb2RlVVJJQ29tcG9uZW50KGdldEpTT05TdHJpbmcoZGF0YSwgcHJldHR5KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3dpdGNoIChwcmV0dHkpIHtcbiAgICAgICAgICAgIGNhc2UgdHJ1ZTpcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7XG4gICAgICAgICAgICBjYXNlIGZhbHNlOlxuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8qKiBAbW9kdWxlIElkICovXG5cbi8qKlxuICogdGhlIGN1cnJlbnQgaW5zdGFuY2Ugb2YgSWRcbiAqIEB0eXBlIHtJZH1cbiAqL1xubGV0IGV4aXN0aW5nSWRJbnN0YW5jZTtcblxuLyoqXG4gKiBzaW5nbGV0b24gdG8gZ2VuZXJhdGUgdW5pcXVlIGlkJ3NcbiAqXG4gKiB1c2FnZTogYGxldCBpZCA9IG5ldyBJZCgpLnVuaXF1ZWBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSWQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBpZighZXhpc3RpbmdJZEluc3RhbmNlKXtcbiAgICAgICAgICAgIGV4aXN0aW5nSWRJbnN0YW5jZSA9IHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogcHJlZml4IGZvciB0aGUgaWQsIHRoYXQgaXMgY29tbW9uIGluIGFsbCB0aGUgSWRzXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByZWZpeCA9IFwiaWRcIjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogbnVtZXJpYyBwYXJ0IG9mIHRoZSBuZXh0IGlkICh0aGUgbmV4dCBpZCB3aXRob3V0IHRoZSBwcmVmaXgpXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5leHRJZCA9IDA7XG5cbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nSWRJbnN0YW5jZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdW5pcXVlIElEXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBuZXcgdW5pcXVlIElEXG4gICAgICovXG4gICAgZ2V0IHVuaXF1ZSgpIHtcbiAgICAgICAgbGV0IHJldFZhbCA9IHRoaXMucHJlZml4ICsgdGhpcy5uZXh0SWQ7XG5cbiAgICAgICAgLy8gZmluZCBuZXh0IHVudXNlZCBpZFhYWFggdG8gcHJldmVudCBpZCBjb2xsaXNpb24gdGhhdCBtaWdodCBiZSBjYXVzZWQgYnkgc29tZSBvdGhlciBjb21wb25lbnRcbiAgICAgICAgLy8gKGl0IHJlYWxseSBzaG91bGQgbm90IGhhcHBlbiwgYnV0IHRoaXMgaXMgYSBzaW1wbGUgd2F5IHRvIGVuc3VyZSBpdClcbiAgICAgICAgd2hpbGUoJChcIiNcIityZXRWYWwpLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0SWQrKztcbiAgICAgICAgICAgIHJldFZhbCA9IHRoaXMuZ2VuZXJhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXR1cm4gdGhpcyBpZFxuICAgICAgICB0aGlzLm5leHRJZCsrO1xuXG4gICAgICAgIHJldHVybiByZXRWYWw7XG4gICAgfVxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qKiBAbW9kdWxlIExvZ2ljICovXG4vKipcbiAqIGRlZmluaXRpb25zIG9mIGxvZ2ljIHN0YXRlcyBhbmQgYmFzaWMgbG9naWMgZnVuY3Rpb25zIHVzZWQgaW4gdGhlIHNpbXVsYXRpb25cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9naWMge1xuICAgIC8qKlxuICAgICAqIEVudW0gZm9yIGxvZ2ljIHN0YXRlcy5cbiAgICAgKlxuICAgICAqIFN0YXRlczpcbiAgICAgKiAtIGB1bmtub3duYFxuICAgICAqIC0gYG9uYFxuICAgICAqIC0gYG9mZmBcbiAgICAgKiAtIGBvc2NpbGxhdGluZ2BcbiAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1bmtub3duOiAwLFxuICAgICAgICAgICAgb246IDEsXG4gICAgICAgICAgICBvZmY6IDIsXG4gICAgICAgICAgICBvc2NpbGxhdGluZzogM1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbGlzdCBvZiBhbGwgc3RhdGVzIHRoYXQgY2FuIGJlIHVzZWQgaW4gdGhlIHNpbXVsYXRpb25cbiAgICAgKlxuICAgICAqIFRoaXMgZ2V0dGVyIGl0ZXJhdGVzIG92ZXIgTG9naWMuc3RhdGUgYW5kIHJldHVybnMgYW4gYXJyYXkgY29udGFpbmluZyBhbGwgdmFsdWVzIG9mIExvZ2ljLnN0YXRlJ3MgbWVtYmVyc1xuICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IHN0YXRlTGlzdCgpIHtcbiAgICAgICAgbGV0IHN0YXRlcyA9IFtdO1xuXG4gICAgICAgIC8vIGl0ZXJhdGUgb3ZlciBhbGwgZGVmaW5lZCBzdGF0ZXMgYW5kIGFkZCB0aGVpciB2YWx1ZXMgdG8gdGhlIHN0YXRlcyBhcnJheVxuICAgICAgICBPYmplY3Qua2V5cyhMb2dpYy5zdGF0ZSkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgc3RhdGVzLnB1c2goTG9naWMuc3RhdGVba2V5XSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzdGF0ZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9naWMgQU5EXG4gICAgICogQHBhcmFtICB7TG9naWMuc3RhdGV9IGEgZmlyc3QgaW5wdXQgc3RhdGVcbiAgICAgKiBAcGFyYW0gIHtMb2dpYy5zdGF0ZX0gYiBzZWNvbmQgaW5wdXQgc3RhdGVcbiAgICAgKiBAcmV0dXJuIHtMb2dpYy5zdGF0ZX0gICBvdXRwdXQgc3RhdGVcbiAgICAgKi9cbiAgICBzdGF0aWMgYW5kKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIExvZ2ljLnJ1blN5bW1ldHJpY1J1bGVzKGEsIGIsIFtcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9uXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vZmZdLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9uLCBMb2dpYy5zdGF0ZS51bmtub3duLCBMb2dpYy5zdGF0ZS51bmtub3duXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nXSxcblxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vZmZdLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUub2ZmXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vZmYsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS5vZmZdLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93bl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLnVua25vd25dLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZ11cbiAgICAgICAgXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvZ2ljIE5BTkRcbiAgICAgKiBAcGFyYW0gIHtMb2dpYy5zdGF0ZX0gYSBmaXJzdCBpbnB1dCBzdGF0ZVxuICAgICAqIEBwYXJhbSAge0xvZ2ljLnN0YXRlfSBiIHNlY29uZCBpbnB1dCBzdGF0ZVxuICAgICAqIEByZXR1cm4ge0xvZ2ljLnN0YXRlfSAgIG91dHB1dCBzdGF0ZVxuICAgICAqL1xuICAgIHN0YXRpYyBuYW5kKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIExvZ2ljLm5vdChMb2dpYy5hbmQoYSwgYikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ2ljIE5PUlxuICAgICAqIEBwYXJhbSAge0xvZ2ljLnN0YXRlfSBhIGZpcnN0IGlucHV0IHN0YXRlXG4gICAgICogQHBhcmFtICB7TG9naWMuc3RhdGV9IGIgc2Vjb25kIGlucHV0IHN0YXRlXG4gICAgICogQHJldHVybiB7TG9naWMuc3RhdGV9ICAgb3V0cHV0IHN0YXRlXG4gICAgICovXG4gICAgc3RhdGljIG5vcihhLCBiKSB7XG4gICAgICAgIHJldHVybiBMb2dpYy5ub3QoTG9naWMub3IoYSwgYikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ2ljIE5PVFxuICAgICAqIEBwYXJhbSAge0xvZ2ljLnN0YXRlfSBhIGZpcnN0IGlucHV0IHN0YXRlXG4gICAgICogQHJldHVybiB7TG9naWMuc3RhdGV9ICAgb3V0cHV0IHN0YXRlXG4gICAgICovXG4gICAgc3RhdGljIG5vdChhKSB7XG4gICAgICAgIGlmKGEgPT09IExvZ2ljLnN0YXRlLm9uKSB7XG4gICAgICAgICAgICByZXR1cm4gTG9naWMuc3RhdGUub2ZmO1xuICAgICAgICB9IGVsc2UgaWYgKGEgPT09IExvZ2ljLnN0YXRlLm9mZikge1xuICAgICAgICAgICAgcmV0dXJuIExvZ2ljLnN0YXRlLm9uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dpYyBPUlxuICAgICAqIEBwYXJhbSAge0xvZ2ljLnN0YXRlfSBhIGZpcnN0IGlucHV0IHN0YXRlXG4gICAgICogQHBhcmFtICB7TG9naWMuc3RhdGV9IGIgc2Vjb25kIGlucHV0IHN0YXRlXG4gICAgICogQHJldHVybiB7TG9naWMuc3RhdGV9ICAgb3V0cHV0IHN0YXRlXG4gICAgICovXG4gICAgc3RhdGljIG9yKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIExvZ2ljLnJ1blN5bW1ldHJpY1J1bGVzKGEsIGIsIFtcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9uXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vbl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLnVua25vd24sIExvZ2ljLnN0YXRlLm9uXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9uXSxcblxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vZmZdLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93bl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZywgTG9naWMuc3RhdGUub3NjaWxsYXRpbmddLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93bl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLnVua25vd25dLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZ11cbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9naWMgWE5PUlxuICAgICAqIEBwYXJhbSAge0xvZ2ljLnN0YXRlfSBhIGZpcnN0IGlucHV0IHN0YXRlXG4gICAgICogQHBhcmFtICB7TG9naWMuc3RhdGV9IGIgc2Vjb25kIGlucHV0IHN0YXRlXG4gICAgICogQHJldHVybiB7TG9naWMuc3RhdGV9ICAgb3V0cHV0IHN0YXRlXG4gICAgICovXG4gICAgc3RhdGljIHhub3IoYSwgYikge1xuICAgICAgICByZXR1cm4gTG9naWMubm90KExvZ2ljLnhvcihhLCBiKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9naWMgWE9SXG4gICAgICogQHBhcmFtICB7TG9naWMuc3RhdGV9IGEgZmlyc3QgaW5wdXQgc3RhdGVcbiAgICAgKiBAcGFyYW0gIHtMb2dpYy5zdGF0ZX0gYiBzZWNvbmQgaW5wdXQgc3RhdGVcbiAgICAgKiBAcmV0dXJuIHtMb2dpYy5zdGF0ZX0gICBvdXRwdXQgc3RhdGVcbiAgICAgKi9cbiAgICBzdGF0aWMgeG9yKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIExvZ2ljLnJ1blN5bW1ldHJpY1J1bGVzKGEsIGIsIFtcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9mZl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub24sIExvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub25dLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9uLCBMb2dpYy5zdGF0ZS51bmtub3duLCBMb2dpYy5zdGF0ZS51bmtub3duXSxcbiAgICAgICAgICAgIFtMb2dpYy5zdGF0ZS5vbiwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nXSxcblxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vZmZdLFxuICAgICAgICAgICAgW0xvZ2ljLnN0YXRlLm9mZiwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93bl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub2ZmLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZywgTG9naWMuc3RhdGUub3NjaWxsYXRpbmddLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUudW5rbm93bl0sXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUudW5rbm93biwgTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLnVua25vd25dLFxuXG4gICAgICAgICAgICBbTG9naWMuc3RhdGUub3NjaWxsYXRpbmcsIExvZ2ljLnN0YXRlLm9zY2lsbGF0aW5nLCBMb2dpYy5zdGF0ZS5vc2NpbGxhdGluZ11cbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGNvcnJlY3QgcnVsZSBpbiB0aGUgYXJyYXkgb2YgcnVsZXMgYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcmV0dXJuIHZhbHVlLlxuICAgICAqIFRoaXMgZnVuY3Rpb24gZXhwZWN0cyBydWxlcyB0byBiZSBzeW1tZXRyaWMgKHNvIGBhIFJVTEUgYmAgc2hvdWxkIHJldHVybnMgdGhlIHNhbWUgdmFsdWUgYXMgYGIgUlVMRSBhYCksXG4gICAgICogd2hpY2ggYWxsb3dzIHRvIGN1dCBkb3duIG9uIHRoZSBgcnVsZXNgIGFycmF5IHF1aXRlIGEgYml0XG4gICAgICogQHBhcmFtICB7TG9naWMuc3RhdGV9IGEgICAgIGZpcnN0IGlucHV0IHN0YXRlXG4gICAgICogQHBhcmFtICB7TG9naWMuc3RhdGV9IGIgICAgIHNlY29uZCBpbnB1dCBzdGF0ZVxuICAgICAqIEBwYXJhbSAge0FycmF5fSBydWxlcyAgICAgICBBcnJheSBvZiBhcnJheXMuIEVhY2ggaW5uZXIgYXJyYXkgcmVwcmVzZW50cyBhIHJ1bGUgaW4gdGhlIGZvcm1hdCBbaW5wdXQxLCBpbnB1dDIsIG91dHB1dF0uXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBmdW5jdGlvbiBmaW5kcyBhbiBhcnJheSwgd2hlcmUgYGEgPT09IGlucHV0MWAgYW5kIGBiID09PSBpbnB1dDFgIChvciBgYSA9PT0gaW5wdXQyYCBhbmQgYGIgPT09IGlucHV0MWApXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCByZXR1cm5zIGBvdXRwdXRgIGZyb20gdGhpcyBhcnJheS5cbiAgICAgKiBAcmV0dXJuIHtMb2dpYy5zdGF0ZX0gICAgICAgb3V0cHV0IHN0YXRlXG4gICAgICovXG4gICAgc3RhdGljIHJ1blN5bW1ldHJpY1J1bGVzKGEsIGIsIHJ1bGVzKSB7XG4gICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBhbGwgdGhlIHJ1bGVzXG4gICAgICAgIGZvciAoY29uc3QgcnVsZSBvZiBydWxlcykge1xuICAgICAgICAgICAgaWYgKChydWxlWzBdID09PSBhICYmIHJ1bGVbMV0gPT09IGIpIHx8IChydWxlWzBdID09PSBiICYmIHJ1bGVbMV0gPT09IGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGVbMl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiBubyBydWxlIG1hdGNoZXMsIHRoZSBvdXRwdXQgc3RhdGUgaXMgdW5rbm93blxuICAgICAgICByZXR1cm4gTG9naWMuc3RhdGUudW5rbm93bjtcbiAgICB9XG59XG4iLCJpbXBvcnQgQ2FudmFzIGZyb20gJy4vY2FudmFzLmpzJztcblxuLyoqXG4gKiBXaGVuIHRoZSBkb2N1bWVudCBpcyByZWFkeSwgaW5pdGlhbGl6ZSB0aGUgYXBwbGljYXRpb25cbiAqL1xuJCgoKSA9PiB7XG4gICAgbmV3IENhbnZhcyhcIiNjYW52YXNcIiwgMTApO1xufSk7XG4iLCIvKiogQG1vZHVsZSBNYXBXaXRoRGVmYXVsdFZhbHVlICovXG4vKipcbiAqIE1hcCB0aGF0IGhhcyBhIGRlZmF1bHQgdmFsdWUgc3BlY2lmaWVkIGluIHRoZSBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBGb3IgdGhlIGNvbXBsZXRlIGRvY3VtZW50YXRpb24gb2YgdGhlIE1hcCBzZWUgW01hcCBpbiB0aGUgTUROIHdlYiBkb2NzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9NYXApXG4gKlxuICogX05vdGU6IFRoaXMgdmVyc2lvbiBpcyB3cml0dGVuIHNwZWNpYWxseSBmb3IgRVM2IGNvbXBpbGVkIGludG8gRVM1LiBJbiBub24tY29tcGlsZWQgRVM2IGlzIHRoZSBpbXBsZW1lbnRhdGlvbiBmYXIgc2ltcGxlcjpfXG4gKlxuICogYGBgSmF2YVNjcmlwdFxuIGV4cG9ydCBjbGFzcyBNYXBXaXRoRGVmYXVsdFZhbHVlIGV4dGVuZHMgTWFwIHtcbiAgICAgY29uc3RydWN0b3IoZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgICB0aGlzLmRlZmF1bHQgPSBkZWZhdWx0VmFsdWU7XG4gICAgIH1cblxuICAgICBnZXQoa2V5KSB7XG4gICAgICAgICBpZih0aGlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmdldChrZXkpO1xuICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xuICAgICAgICAgfVxuICAgICB9XG4gfWBgYFxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXBXaXRoRGVmYXVsdFZhbHVlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIHRoZSB2YWx1ZSB0aGF0IHdpbGwgYmUgcmV0dXJuZWQgb24gZ2V0KGtleSkgd2hlbiB0aGUga2V5IGlzIG5vdCBmb3VuZCBpbiB0aGUgbWFwXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIHRoaXMubWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSBkZWZhdWx0VmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5zaXplO1xuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuY2xlYXIoKTtcbiAgICB9XG5cbiAgICBmb3JFYWNoKC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmZvckVhY2goLi4uYXJncyk7XG4gICAgfVxuXG4gICAgZ2V0KGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuZ2V0KGtleSk7XG4gICAgfVxuXG4gICAgZGVsZXRlKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuZGVsZXRlKGtleSk7XG4gICAgfVxuXG4gICAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLnNldChrZXksIHZhbHVlKTtcbiAgICB9XG5cbiAgICBoYXMoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5oYXMoa2V5KTtcbiAgICB9XG5cbiAgICBlbnRyaWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuZW50cmllcygpO1xuICAgIH1cblxuICAgIGtleXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5rZXlzKCk7XG4gICAgfVxuXG4gICAgdmFsdWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAudmFsdWVzKCk7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBAbW9kdWxlIExpYnJhcnlcbiAqL1xuXG5jb25zdCBsaWJyYXJ5RGlyID0gJy4vbGlicmFyeS8nXG5cbi8qKlxuICogZ2V0IGxpc3Qgb2YgbmV0d29ya3MgZnJvbSB0aGUgbGlicmFyeVxuICogQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSwgdGhlIHJlc29sdXRpb24gaXMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYSBsaXN0IG9mIGxpYnJhcmllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGlicmFyeSgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBsaWJyYXJ5RmlsZSA9IGxpYnJhcnlEaXIgKyAnbmV0d29ya0xpc3QuanNvbic7XG5cbiAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYodGhpcy5yZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZS5uZXR3b3Jrcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcihbXCJlcnJvclwiLCBcImFib3J0XCJdLCAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QoXCJGYWlsZWQgbG9hZGluZyBsaWJyYXJpZXMuXCIpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgbGlicmFyeUZpbGUsIHRydWUpO1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgICAgcmVxdWVzdC5zZW5kKCk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogZ2V0IGEgbmV0d29yayBmcm9tIHRoZSBsaWJyYXJ5LCBzcGVjaWZpZWQgYnkgZmlsZW5hbWVcbiAqIEBwYXJhbSAge3N0cmluZ30gbmV0d29ya05hbWUgbGlicmFyeSBmaWxlIG5hbWUgd2l0aG91dCB0aGUgZXh0ZW5zaW9uXG4gKiBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlLCB0aGUgcmVzb2x1dGlvbiBpcyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgbGlicmFyeSBpbXBvcnQgZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV0d29ya0Zyb21MaWJyYXJ5KG5ldHdvcmtOYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYodGhpcy5yZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcihbXCJlcnJvclwiLCBcImFib3J0XCJdLCAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QoYEZhaWxlZCBsb2FkaW5nIGxpYnJhcnkgJHtuZXR3b3JrTmFtZX0uYClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCBsaWJyYXJ5RGlyICsgbmV0d29ya05hbWUgKyAnLmpzb24nLCB0cnVlKTtcbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICAgIHJlcXVlc3Quc2VuZCgpO1xuICAgIH0pO1xufVxuIiwiaW1wb3J0IExvZ2ljIGZyb20gJy4vbG9naWMuanMnXG5cbi8qKlxuICogQG1vZHVsZSBTaW11bGF0aW9uXG4gKi9cblxuXG5jbGFzcyBzdGF0ZUNoYW5nZSB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdG9ySWQsIHN0YXRlLCB3aG9DYXVzZWRJdCkge1xuICAgICAgICB0aGlzLmNvbm5lY3RvcklkID0gY29ubmVjdG9ySWRcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlXG4gICAgICAgIHRoaXMud2hvQ2F1c2VkSXQgPSB3aG9DYXVzZWRJdFxuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJ1bnMgdGhlIG5ldHdvcmsgc2ltdWxhdGlvbi5cbiAqXG4gKiBfbm90ZTogYWxsIGNvbm5lY3RvcnMgdGhhdCBhcmUgdXNlZCBpbiB0aGlzIGNsYXNzIGFyZSAqKm91dHB1dCBjb25uZWN0b3JzKipfXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNpbXVsYXRpb24ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzfSBwYXJlbnRTVkcgaW5zdGFuY2Ugb2YgW0NhbnZhc10oLi9tb2R1bGUtQ2FudmFzLmh0bWwpXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocGFyZW50U1ZHKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBpbnN0YW5jZSBvZiBDYW52YXMgdGhpcyBTaW11bGF0aW9uIGJlbG9uZ3MgdG9cbiAgICAgICAgICogQHR5cGUge0NhbnZhc31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGFyZW50U1ZHID0gcGFyZW50U1ZHXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIG1hcHMgZWFjaCBhZmZlY3RlZCBvdXRwdXQgY29ubmVjdG9yIHRvIGl0J3MgZGlyZWN0bHkgcHJlY2VlZGluZyBvdXRwdXQgY29ubmVjdG9yc1xuICAgICAgICAgKiBAdHlwZSB7TWFwfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcmVkZWNlc3NvcnMgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIG1hcHMgd2F2ZUlkIHRvIGFuIGFycmF5IG9mIGFmZmVjdGVkIG91dHB1dENvbm5lY3RvcnNcbiAgICAgICAgICogQHR5cGUge01hcH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2F2ZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMud2F2ZSA9IDBcblxuICAgICAgICAvKipcbiAgICAgICAgICogbWFwcyBjeWNsZWQgY29ubmVjdG9yIGlkIHRvIHNldCBvZiBzdGF0ZXMgdGhpcyBjb25uZWN0b3Igd2FzIGluXG4gICAgICAgICAqIEB0eXBlIHtNYXB9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN5Y2xlZENvbm5lY3RvcnMgPSBuZXcgTWFwKClcblxuICAgICAgICAvKipcbiAgICAgICAgICogc2V0IG9mIGN5Y2xlZCBjb25uZWN0b3JzIHRoYXQgaGF2ZSBiZWVuIGFscmVhZHkgcmVzb2x2ZWRcbiAgICAgICAgICogQHR5cGUge1NldH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVzb2x2ZWRDeWNsZWRDb25uZWN0b3JzID0gbmV3IFNldCgpXG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBydW4gdGhlIHNpbXVsYXRpb25cbiAgICAgKi9cbiAgICBydW4oKSB7XG4gICAgICAgIHRoaXMud2F2ZSsrO1xuICAgICAgICB3aGlsZSh0aGlzLndhdmVzLmhhcyh0aGlzLndhdmUpKSB7XG4gICAgICAgICAgICB0aGlzLnN0ZXAoKVxuICAgICAgICAgICAgdGhpcy53YXZlcy5kZWxldGUodGhpcy53YXZlKSAvLyBjbGVhbiBvbGQgd2F2ZXMgb24gdGhlIGdvXG4gICAgICAgICAgICB0aGlzLndhdmUrK1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogb25lIHN0ZXAvd2F2ZSBvZiB0aGUgc2ltdWxhdGlvblxuICAgICAqXG4gICAgICogZGV0ZXJtaW5lcyBzdGF0ZXMgb2YgdGhlIGNvbm5lY3RvcnMgaW4gdGhlIGN1cnJlbnQgd2F2ZSwgZGV0ZWN0cyBjeWNsZXNcbiAgICAgKi9cbiAgICBzdGVwKCkge1xuICAgICAgICBmb3IgKGxldCB7Y29ubmVjdG9ySWQsIHN0YXRlLCB3aG9DYXVzZWRJdH0gb2YgdGhpcy53YXZlcy5nZXQodGhpcy53YXZlKSkge1xuICAgICAgICAgICAgLy8gc2tpcCByZXNvbHZlZCBjeWNsZXNcbiAgICAgICAgICAgIGlmKHRoaXMucmVzb2x2ZWRDeWNsZWRDb25uZWN0b3JzLmhhcyhjb25uZWN0b3JJZCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBza2lwIGNvbm5lY3RvciB0aGF0IGFyZSBjeWNsZXNcbiAgICAgICAgICAgIGlmICh0aGlzLmN5Y2xlZENvbm5lY3RvcnMuaGFzKGNvbm5lY3RvcklkKSkge1xuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgc2V0IG9mIHN0YXRlcyB0aGF0IHRoaXMgY29ubmVjdG9yIGFwcGVhcmVkIGZyb20gdGhlIG1vbWVudCB0aGUgc2lnbmFsIGZpcnN0IGN5Y2xlZFxuICAgICAgICAgICAgICAgIGxldCBzdGF0ZXMgPSB0aGlzLmN5Y2xlZENvbm5lY3RvcnMuZ2V0KGNvbm5lY3RvcklkKVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIGNvbm5lY3RvciBhbHJlYWR5IGhhZCB0aGlzIHN0YXRlIGluIHRoaXMgY3ljbGUsIHJlc29sdmUgdGhlIGN5Y2xlXG4gICAgICAgICAgICAgICAgaWYoc3RhdGVzLmhhcyhzdGF0ZSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbW9yZSBzdGF0ZXMgaW4gdGhlIHNldCwgdGhlIGNvbm5lY3RvciBpcyBvc2NpbGxhdGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyAoZWxzZSBpdCBrZWVwcyBpdHMgc3RhdGUgYW5kIHdlIGp1c3QgYnJlYWsgdGhlIGN5Y2xlKVxuICAgICAgICAgICAgICAgICAgICBpZihzdGF0ZXMuc2l6ZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gTG9naWMuc3RhdGUub3NjaWxsYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmsgdGhpcyBjb25uZWN0b3IgYXMgcmVzb2x2ZWRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlZEN5Y2xlZENvbm5lY3RvcnMuYWRkKGNvbm5lY3RvcklkKVxuXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBhIG5ldywgdW5zZWVuIHN0YXRlLCBhZGQgaXQgdG8gdGhlIHNldCBhbmQgY29udGludWUgc2ltdWxhdGluZyB0aGUgY3ljbGVcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXMuYWRkKHN0YXRlKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIG1hcCB0aGUgbW9kaWZpZWQgc2V0IG9mIHN0YXRlcyB0byB0aGUgY29ubmVjdG9yXG4gICAgICAgICAgICAgICAgdGhpcy5jeWNsZWRDb25uZWN0b3JzLnNldChjb25uZWN0b3JJZCwgc3RhdGVzKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLndob0NhdXNlZEl0ID0gY29ubmVjdG9ySWRcbiAgICAgICAgICAgIC8qICBwcm9jZXNzIGFsbCBvdXRwdXRDb25uZWN0b3JzIGJ5IHNldHRpbmcgdGhlaXIgc3RhdGVcbiAgICAgICAgICAgICAgICB0aGlzIHdpbGwgdHJpZ2dlciBhIGZvbGxvd2luZyBldmVudCBjaGFpbjpcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0Q29ubmVjdG9yIGNoYW5nZXNcbiAgICAgICAgICAgICAgICAgICAgLT4gYWxsIGNvbm5lY3RlZCB3aXJlcyBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgLT4gYWxsIGlucHV0Q29ubmVjdG9ycyBjb25uZWN0ZWQgdG8gdGhlc2Ugd2lyZXMgY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgIC0+IGFsbCBlbGVtZW50cyB0aGF0IGNvbnRhaW4gdGhlc2UgaW5wdXRDb25uZWN0b3JzIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAtPiB0aGVzZSBlbGVtZW50cyBjb21wdXRlIHRoZSBuZXcgc3RhdGUgb2YgdGhlaXIgb3V0cHV0IGNvbm5lY3RvcnMgYW5kIGNhbGwgbm90aWZ5Q2hhbmdlKClcbiAgICAgICAgICAgICovXG5cblxuICAgICAgICAgICAgaWYod2hvQ2F1c2VkSXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFByZWRlY2Vzc29yKGNvbm5lY3RvcklkLCB3aG9DYXVzZWRJdClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLmN5Y2xlZENvbm5lY3RvcnMuaGFzKGNvbm5lY3RvcklkKSAmJiB0aGlzLmdldEFsbFByZWRlY2Vzc29ycyhjb25uZWN0b3JJZCkuaGFzKGNvbm5lY3RvcklkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3ljbGVkQ29ubmVjdG9ycy5zZXQoY29ubmVjdG9ySWQsIG5ldyBTZXQoW3N0YXRlXSkpXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy8gcmVmbGVjdCB0aGUgY2hhbmdlcyBpbiBTVkdcbiAgICAgICAgICAgIGxldCBjb25uZWN0b3IgPSB0aGlzLnBhcmVudFNWRy5nZXRDb25uZWN0b3JCeUlkKGNvbm5lY3RvcklkKVxuICAgICAgICAgICAgaWYoY29ubmVjdG9yKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdG9yLnNldFN0YXRlKHN0YXRlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMud2hvQ2F1c2VkSXQgPSB1bmRlZmluZWRcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBtYXJrIGEgcHJlZGVjZXNzb3JDb25uZWN0b3JJZCBhcyBhIHByZWRlY2Vzc29yIG9mIGNvbm5lY3RvcklkXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbm5lY3RvcklkIElEIG9mIGEgY29ubmVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByZWRlY2Vzc29yQ29ubmVjdG9ySWQgcHJlZGVjZXNzb3Igb2YgYGNvbm5lY3RvcklkYFxuICAgICAqL1xuICAgIGFkZFByZWRlY2Vzc29yKGNvbm5lY3RvcklkLCBwcmVkZWNlc3NvckNvbm5lY3RvcklkKSB7XG4gICAgICAgIGlmKCF0aGlzLnByZWRlY2Vzc29ycy5oYXMoY29ubmVjdG9ySWQpKSB7XG4gICAgICAgICAgICB0aGlzLnByZWRlY2Vzc29ycy5zZXQoY29ubmVjdG9ySWQsIG5ldyBTZXQoKSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJlZGVjZXNzb3JzLmdldChjb25uZWN0b3JJZCkuYWRkKHByZWRlY2Vzc29yQ29ubmVjdG9ySWQpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IHNldCBvZiBhbGwgb3V0cHV0IGNvbm5lY3RvcnMgdGhhdCBhcmUgYmVmb3JlIHRoaXMgb3V0cHV0IGNvbm5lY3RvclxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gY29ubmVjdG9ySWQgSUQgb2YgYSBjb25uZWN0b3JcbiAgICAgKiBAcmV0dXJuIHtTZXR9ICAgICAgICAgICAgICAgIHNldCBvZiBjb25uZWN0b3IgaWRzIHRoYXQgYXJlIGJlZm9yZSB0aGlzIG91dHB1dCBjb25uZWN0b3JcbiAgICAgKi9cbiAgICBnZXRBbGxQcmVkZWNlc3NvcnMoY29ubmVjdG9ySWQpIHtcbiAgICAgICAgaWYoIXRoaXMucHJlZGVjZXNzb3JzLmhhcyhjb25uZWN0b3JJZCkpIHtcbiAgICAgICAgICAgIHRoaXMucHJlZGVjZXNzb3JzLnNldChjb25uZWN0b3JJZCwgbmV3IFNldCgpKVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGFsbCA9IG5ldyBTZXQoKVxuXG4gICAgICAgIHRoaXMucHJlZGVjZXNzb3JzLmdldChjb25uZWN0b3JJZCkuZm9yRWFjaChhbGwuYWRkLCBhbGwpO1xuXG4gICAgICAgIGxldCBwcmV2U2l6ZSA9IDBcbiAgICAgICAgbGV0IHNpemUgPSBhbGwuc2l6ZVxuICAgICAgICB3aGlsZShwcmV2U2l6ZSA8IHNpemUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNvbm5lY3RvciBvZiBhbGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmVkZWNlc3NvcnMuaGFzKGNvbm5lY3RvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVkZWNlc3NvcnMuZ2V0KGNvbm5lY3RvcikuZm9yRWFjaChhbGwuYWRkLCBhbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZTaXplID0gc2l6ZVxuICAgICAgICAgICAgc2l6ZSA9IGFsbC5zaXplXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYWxsXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTm90aWZ5IGEgY2hhbmdlIGluIHRoZSBuZXR3b3JrLiBUaGlzIGZ1bmN0aW9uIGFkZHMgdGhlIGNoYW5nZWQgY29ubmVjdG9yIHRvIHRoZSBuZXh0IHdhdmVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGNvbm5lY3RvcklkIElEIG9mIHRoZSBjaGFuZ2VkIGNvbm5lY3RvclxuICAgICAqIEBwYXJhbSAge0xvZ2ljLnN0YXRlfSBzdGF0ZSAgbmV3IFtMb2dpYy5zdGF0ZV0oLi9tb2R1bGUtTG9naWMuaHRtbCMuc3RhdGUpIG9mIHRoZSBjb25uZWN0b3JcbiAgICAgKi9cbiAgICBub3RpZnlDaGFuZ2UoY29ubmVjdG9ySWQsIHN0YXRlKSB7XG4gICAgICAgIGxldCB3YXZlSWQgPSB0aGlzLndhdmUgKyAxXG5cbiAgICAgICAgaWYoIXRoaXMud2F2ZXMuaGFzKHdhdmVJZCkpIHtcbiAgICAgICAgICAgIHRoaXMud2F2ZXMuc2V0KHdhdmVJZCwgW10pXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLndhdmVzLmdldCh3YXZlSWQpLnB1c2gobmV3IHN0YXRlQ2hhbmdlKGNvbm5lY3RvcklkLCBzdGF0ZSwgdGhpcy53aG9DYXVzZWRJdCkpO1xuICAgIH1cbn1cbiIsImltcG9ydCBJZCBmcm9tICcuL2lkLmpzJ1xuXG4vKipcbiAqIFBhcmVudCBjbGFzcyBmb3IgYWxsIHN2Z09iamVjdHNcbiAqL1xuY2xhc3MgVGFnIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZSBTVkcgdGFnIGlkZW50aWZpZXIgKGByZWN0YCwgYGltYWdlYCwgYHBvbHlsaW5lYClcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0YWdOYW1lKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTVkcgdGFnIGlkZW50aWZpZXIgKGByZWN0YCwgYGltYWdlYCwgYHBvbHlsaW5lYClcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFnTmFtZSA9IHRhZ05hbWU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGpRdWVyeSBlbGVtZW50IGZvciB0aGlzIHRhZ1xuICAgICAgICAgKiBAdHlwZSB7alF1ZXJ5LmVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLiRlbCA9ICQoXCI8XCIrdGhpcy50YWdOYW1lK1wiPlwiKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogdW5pcXVlIElEIG9mIHRoaXMgU1ZHIG9iamVjdFxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pZCA9IG5ldyBJZCgpLnVuaXF1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhZGQgYSBjbGFzcyB0byB0aGlzIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBjbGFzcyBuYW1lIHRvIGJlIGFkZGVkXG4gICAgICovXG4gICAgYWRkQ2xhc3MobmFtZSkge1xuICAgICAgICB0aGlzLiRlbC5hZGRDbGFzcyhuYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgY2xhc3MgbmFtZXMgZnJvbSB0aGlzIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGNsYXNzZXMgY2xhc3MgbmFtZXMgdG8gYmUgcmVtb3ZlZFxuICAgICAqL1xuICAgIHJlbW92ZUNsYXNzZXMoLi4uY2xhc3Nlcykge1xuICAgICAgICBmb3IobGV0IGl0ZW0gb2YgY2xhc3Nlcykge1xuICAgICAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2xhc3MoaXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgYXR0cmlidXRlcyBvZiB0aGlzIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYXNzb2MgamF2YXNjcmlwdCBvYmplY3QgdGhhdCB3aWxsIGJlIG1hcHBlZCBpbnRvIGF0dHJpYnV0ZXMgKGB7a2V5OiB2YWx1ZX1gIC0+IGBrZXk9XCJ2YWx1ZVwiYClcbiAgICAgKi9cbiAgICBhZGRBdHRyKGFzc29jKSB7XG4gICAgICAgIHRoaXMuY2hlY2tJZkVsZW1lbnRFeGlzdHNJbkRPTSgpO1xuXG4gICAgICAgIC8vIGFkZCBhdHRyaWJ1dGVzIHRvIHRoZSBlbGVtZW50XG4gICAgICAgIHRoaXMuJGVsLmF0dHIoYXNzb2MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCBhdHRyaWJ1dGUgdmFsdWUgYnkgbmFtZVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAqL1xuICAgIGdldEF0dHIobmFtZSkge1xuICAgICAgICB0aGlzLmNoZWNrSWZFbGVtZW50RXhpc3RzSW5ET00oKTtcblxuICAgICAgICByZXR1cm4gdGhpcy4kZWwuYXR0cihuYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgYXR0cmlidXRlIGJ5IHZhbHVlXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB0byBiZSByZW1vdmVkXG4gICAgICovXG4gICAgcmVtb3ZlQXR0cihuYW1lKSB7XG4gICAgICAgIHRoaXMuY2hlY2tJZkVsZW1lbnRFeGlzdHNJbkRPTSgpO1xuXG4gICAgICAgIHRoaXMuJGVsLnJlbW92ZUF0dHIobmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IGlkIG9mIHRoaXMgU1ZHIG9iamVjdFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gaWQgbmV3IGlkIGZvciB0aGlzIG9iamVjdFxuICAgICAqL1xuICAgIHNldCBpZChpZCkge1xuICAgICAgICB0aGlzLmFkZEF0dHIoe1wiaWRcIjogaWR9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgaWQgb2YgdGhpcyBTVkcgb2JqZWN0XG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cihcImlkXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCBqUXVlcnkgZWxlbWVudCBmb3IgdGhpcyBTVkcgb2JqZWN0XG4gICAgICogQHJldHVybiB7alF1ZXJ5LmVsZW1lbnR9XG4gICAgICovXG4gICAgZ2V0KCkge1xuICAgICAgICB0aGlzLmNoZWNrSWZFbGVtZW50RXhpc3RzSW5ET00oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGVsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNoZWNrIGlmIHRoZSBlbGVtZW50IGV4aXN0cyBpbiBkb20sIGlmIHNvLCByZWZldGNoIGl0IGZyb20gRE9NIHVzaW5nIGpRdWVyeVxuICAgICAqL1xuICAgIGNoZWNrSWZFbGVtZW50RXhpc3RzSW5ET00oKSB7XG4gICAgICAgIGxldCAkanFFbGVtZW50ID0gJChcIiNcIit0aGlzLiRlbC5hdHRyKCdpZCcpKTtcbiAgICAgICAgaWYoJGpxRWxlbWVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsID0gJGpxRWxlbWVudDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiByZXByZXNlbnRzIHZpc2libGUgZWxlbWVudCBpbiBTVkcgdGhhdCBoYXMgcG9zaXRpb24gYW5kIGRpbWVuc2lvbnMgKGZvciBleGFtcGxlIGByZWN0YW5nbGVgIGlzIGEgU3ZnRWxlbWVudCwgYnV0IGBwYXR0ZXJuYCBpcyBub3QsIGV2ZW4gdGhvdWdoIGJvdGggYXJlIHRhZ3MpXG4gKiBAZXh0ZW5kcyBUYWdcbiAqL1xuY2xhc3MgU3ZnRWxlbWVudCBleHRlbmRzIFRhZyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggICAgICAgaG9yaXpvbnRhbCBwb3NpdGlvbiBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgICAgICAgdmVydGljYWwgcG9zaXRpb24gaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3ICAgICAgIHdpZHRoIGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaCAgICAgICBoZWlnaHQgaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lIHRhZyBuYW1lIG9mIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoeCwgeSwgdywgaCwgdGFnTmFtZSkge1xuICAgICAgICBzdXBlcih0YWdOYW1lKTtcblxuICAgICAgICB0aGlzLmFkZEF0dHIoe1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHksXG4gICAgICAgICAgICB3aWR0aDogdyxcbiAgICAgICAgICAgIGhlaWdodDogaFxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qKlxuICogYSByZWN0YW5nbGUgaW4gU1ZHXG4gKiBAZXh0ZW5kcyBTdmdFbGVtZW50XG4gKi9cbmV4cG9ydCBjbGFzcyBSZWN0YW5nbGUgZXh0ZW5kcyBTdmdFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCB3LCBoLCBmaWxsLCBzdHJva2UpIHtcbiAgICAgICAgc3VwZXIoeCwgeSwgdywgaCwgXCJyZWN0XCIpO1xuICAgICAgICB0aGlzLmFkZEF0dHIoe1xuICAgICAgICAgICAgZmlsbDogZmlsbCxcbiAgICAgICAgICAgIHN0cm9rZTogc3Ryb2tlLFxuICAgICAgICAgICAgJ3N0cm9rZS13aWR0aCc6IDAuNSxcbiAgICAgICAgICAgICdwb2ludGVyLWV2ZW50cyc6ICdhbGwnIC8vIHRvIHRyaWdnZXIgaG92ZXIgZXZlbiB3aXRoIHRyYW5zcGFyZW50IGJhY2tncm91bmRcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKipcbiAqIGFuIGltYWdlIGluIFNWR1xuICogQGV4dGVuZHMgU3ZnRWxlbWVudFxuICovXG5leHBvcnQgY2xhc3MgU3ZnSW1hZ2UgZXh0ZW5kcyBTdmdFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCB3LCBoLCB1cmwpIHtcbiAgICAgICAgc3VwZXIoeCwgeSwgdywgaCwgXCJpbWFnZVwiKTtcbiAgICAgICAgdGhpcy5hZGRBdHRyKHtcbiAgICAgICAgICAgIFwieGxpbms6aHJlZlwiOiB1cmxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY2hhbmdlIHVybCBvZiB0aGUgaW1hZ2VcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIHRoZSBuZXcgdXJsIG9mIHRoZSBpbWFnZVxuICAgICAqL1xuICAgIGNoYW5nZVVybCh1cmwpIHtcbiAgICAgICAgdGhpcy5hZGRBdHRyKHtcbiAgICAgICAgICAgIFwieGxpbms6aHJlZlwiOiB1cmxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFNWRyBncm91cCwgdXNlZCBmb3IgZ3JvdXBpbmcgZWxlbWVudHMsIGZvciBleGFtcGxlIGEgZ2F0ZSBpcyByZXByZXNlbnRlZCBieSBtYW55IGVsZW1lbnRzIChyZWN0YW5nbGUsIGltYWdlLCBpbml2aXNpYmxlIGhpdGJveCByZWN0YW5nbGUuLi4pLFxuICogYnV0IGFsbCBvZiB0aGUgZWxlbWVudHMgbmVlZCB0byBiZSB0cmFuc2Zvcm1lZCB0b2dldGhlci4gVXNpbmcgZ3JvdXBzIHRoZSB0cmFuc2Zvcm0gcHJvcGVydHkgY2FuIGJlIHNldCBvbiB0aGUgZ3JvdXAgd2hpY2ggY29udGFpbnMgYWxsIHRoZSBlbGVtZW50cy5cbiAqIEBleHRlbmRzIFRhZ1xuICovXG5leHBvcnQgY2xhc3MgR3JvdXAgZXh0ZW5kcyBUYWcge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihcImdcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYWRkIGFuIGVsZW1lbnQgdG8gdGhlIGdyb3VwXG4gICAgICogQHBhcmFtIHtTdmdFbGVtZW50fSBlbCBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgU3ZnRWxlbWVudH1cbiAgICAgKi9cbiAgICBhZGRDaGlsZChlbCkge1xuICAgICAgICB0aGlzLiRlbC5hcHBlbmQoZWwuJGVsKTtcbiAgICAgICAgcmV0dXJuIGVsOyAvLyBwcm8gamVkbm9kdXNzaSBcImxldCByZWN0ID0gZy5hZGRDaGlsZChuZXcgUmVjdGFuZ2xlKC4uLlwiXG4gICAgfVxufVxuXG4vKipcbiAqIG9uZSBwb2ludCBvZiB7QGxpbmsgUG9seWxpbmVQb2ludHN9LCB1c2VkIGluIHRoZSB7QGxpbmsgUG9seUxpbmV9IG9iamVjdFxuICovXG5leHBvcnQgY2xhc3MgUG9seWxpbmVQb2ludCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggaG9yaXpvbnRhbCBjb29yZGluYXRlIG9mIHRoZSBwb2x5bGluZSBwb2ludFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IHZlcnRpY2FsIGNvb3JkaW5hdGUgb2YgdGhlIHBvbHlsaW5lIHBvaW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoeCwgeSkge1xuICAgICAgICB0aGlzLnggPSAwO1xuICAgICAgICB0aGlzLnkgPSAwO1xuICAgICAgICBpZih4ICE9PSB1bmRlZmluZWQgJiYgeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNoYW5nZSB0aGUgY29vcmRpbmF0ZXMgb2YgdGhpcyBwb2ludFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IGhvcml6b250YWwgY29vcmRpbmF0ZSBvZiB0aGUgcG9seWxpbmUgcG9pbnRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSB2ZXJ0aWNhbCBjb29yZGluYXRlIG9mIHRoZSBwb2x5bGluZSBwb2ludFxuICAgICAqL1xuICAgIHNldCh4LCB5KSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY3JlYXRlIHBvbHlsaW5lIGZyb20gYSBjb21tYSBzZXBhcmF0ZWQgc3RyaW5nIChlLmcuIGZyb20gYSBzdHJpbmcgZm9ybWF0dGVkIGxpa2UgdGhpczogXCJ4LHlcIiwgZm9yIGV4YW1wbGUgXCIxNSw4XCIpXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBzdHJpbmcgc3RyaW5nIGluIHRoZSBmb3JtYXQgXCJ4LHlcIiByZXByZXNlbnRpbmcgYSBwb2ludCBpbiB0aGUgU1ZHIHBvbHlsaW5lXG4gICAgICogQHJldHVybiB7UG9seWxpbmVQb2ludH0gbmV3bHkgY3JlYXRlZCBpbnN0YW5jZSBvZiB7QGxpbmsgUG9seWxpbmVQb2ludH1cbiAgICAgKi9cbiAgICBzdGF0aWMgcGFyc2VGcm9tU3RyaW5nKHN0cmluZykge1xuICAgICAgICBsZXQgYXJyID0gc3RyaW5nLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5bGluZVBvaW50KGFyclswXSwgYXJyWzFdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBwb2x5bGluZSBwb2ludFxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gc3RyaW5nIGluIHRoZSBmb3JtYXQgXCJ4LHlcIlxuICAgICAqL1xuICAgIGdldCBzdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnggKyBcIixcIiArIHRoaXMueTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjb21wYXJlIHBvbHlsaW5lIHBvaW50cywgcmV0dXJuIGB0cnVlYCBpZiB0aGV5IGFyZSBlcXVhbCwgZWxzZSByZXR1cm4gYGZhbHNlYFxuICAgICAqIEBwYXJhbSAge1BvbHlsaW5lUG9pbnR9IGFcbiAgICAgKiBAcGFyYW0gIHtQb2x5bGluZVBvaW50fSBiXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEueCA9PT0gYi54ICYmIGEueSA9PT0gYi55O1xuICAgIH1cbn1cblxuLyoqXG4gKiBhcnJheS1saWtlIHN0cnVjdHVyZSB1c2VkIGluIHtAbGluayBQb2x5bGluZVBvaW50c31cbiAqL1xuY2xhc3MgU21hcnRBcnJheSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2Fycl0gaWYgc2V0LCBpbml0aWFsaXplZCBTbWFydEFycmF5IHdpbGwgY29udGFpbiB0aGVzZSB2YWx1ZXNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhcnIpIHtcbiAgICAgICAgaWYoYXJyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYXJyID0gYXJyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hcnIgPSBbXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCBhIGRlZXAgY29weSBvZiB0aGlzIGFycmF5XG4gICAgICogQHJldHVybiB7U21hcnRBcnJheX1cbiAgICAgKi9cbiAgICBjb3B5KCkge1xuICAgICAgICByZXR1cm4gU21hcnRBcnJheSgkLmV4dGVuZCh0cnVlLCBbXSwgdGhpcy5hcnIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhcHBlbmQgYW4gaXRlbSB0byB0aGUgYXJyYXlcbiAgICAgKiBAcGFyYW0gaXRlbSBuZXcgaXRlbSB0aGF0IHdpbGwgYmUgYXBwZW5kZWQgdG8gdGhlIGFycmF5XG4gICAgICovXG4gICAgYXBwZW5kKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkV2l0aEluZGV4KGl0ZW0sIHRoaXMuYXJyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcHJlcGVuZCBhbiBpdGVtIHRvIHRoZSBhcnJheVxuICAgICAqIEBwYXJhbSBpdGVtIG5ldyBpdGVtIHRoYXQgd2lsbCBiZSBwcmVwZW5kZWQgdG8gdGhlIGFycmF5XG4gICAgICovXG4gICAgcHJlcGVuZChpdGVtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZFdpdGhJbmRleChpdGVtLCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhZGQgYSBuZXcgaXRlbSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LCBtb3ZlIGFsbCBmb2xsb3dpbmcgaXRlbXNcbiAgICAgKiBAcGFyYW0gaXRlbSBuZXcgaXRlbSB0aGF0IHdpbGwgYmUgYWRkZWQgYXQgdGhlIHNwZWNpZmllZCBpbmRleFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBpbmRleCBvZiB0aGlzIGl0ZW1cbiAgICAgKi9cbiAgICBhZGRXaXRoSW5kZXgoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgZm9yKGxldCBpID0gdGhpcy5hcnIubGVuZ3RoIDsgaSA+IGluZGV4IDsgLS1pKSB7XG4gICAgICAgICAgICB0aGlzLmFycltpXSA9IHRoaXMuYXJyW2ktMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcnJbaW5kZXhdID0gaXRlbTtcbiAgICAgICAgcmV0dXJuIHRoaXM7IC8vIHRvIGVuYWJsZSBjaGFpbmluZyBvZiBhcHBlbmQgLyBwcmVwcGVuZCAvIGFkZFdpdGhJbmRleCBjb21tYW5kc1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCBsZW5ndGggb2YgdGhlIGFycmF5XG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFyci5sZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IGl0ZW0gYnkgaW5kZXhcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGluZGV4IGluZGV4IG9mIHRoZSBpdGVtXG4gICAgICogQHJldHVybiBjb250ZW50cyBvZiB0aGUgYXJyYXkgb24gdGhlIHNwZWNpZmllZCBpbmRleFxuICAgICAqL1xuICAgIGdldEl0ZW0oaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJyW2luZGV4XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIGxhc3QgZWxlbWVudCBvZiB0aGUgYXJyYXlcbiAgICAgKi9cbiAgICBnZXQgbGFzdCgpIHtcbiAgICAgICAgaWYodGhpcy5sZW5ndGghPT0wKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcnJbdGhpcy5sZW5ndGggLSAxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4gZmlyc3QgZWxlbWVudCBvZiB0aGUgYXJyYXlcbiAgICAgKi9cbiAgICBnZXQgZmlyc3QoKSB7XG4gICAgICAgIGlmKHRoaXMubGVuZ3RoIT09MCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyWzBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIGFuIGl0ZW0gZnJvbSB0aGUgYXJyYXkgYnkgaW5kZXhcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGluZGV4IGluZGV4IG9mIHRoZSBpdGVtIHRoYXQgd2lsbCBiZSByZW1vdmVkXG4gICAgICovXG4gICAgcmVtb3ZlKGluZGV4KSB7XG4gICAgICAgIGxldCBsZW5ndGggPSB0aGlzLmxlbmd0aDtcblxuICAgICAgICBmb3IobGV0IGkgPSBpbmRleCA7IGkgPCBsZW5ndGggOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMuYXJyW2ldID0gdGhpcy5hcnJbaSArIDFdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXJyLnBvcCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBwb2ludHMgb2YgdGhlIHtAbGluayBQb2x5TGluZX1cbiAqIEBleHRlbmRzIFNtYXJ0QXJyYXlcbiAqL1xuZXhwb3J0IGNsYXNzIFBvbHlsaW5lUG9pbnRzIGV4dGVuZHMgU21hcnRBcnJheSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheX0gW2Fycl0gYXJyYXkgY29udGFpbmluZyBpbnN0YW5jZXMgb2Yge0BsaW5rIFBvbHlsaW5lUG9pbnR9XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXJyKSB7XG4gICAgICAgIHN1cGVyKGFycik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IGEgZGVlcCBjb3B5IG9mIHRoaXMgb2JqZWN0XG4gICAgICogQHJldHVybiB7UG9seWxpbmVQb2ludHN9XG4gICAgICovXG4gICAgY29weSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5bGluZVBvaW50cygkLmV4dGVuZCh0cnVlLCBbXSwgdGhpcy5hcnIpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhcHBlbmQgYSBwb2ludFxuICAgICAqIEBwYXJhbSAge1BvbHlsaW5lUG9pbnR9IHBvaW50IGEgbmV3IHBvaW50XG4gICAgICovXG4gICAgYXBwZW5kKHBvaW50KSB7XG4gICAgICAgIC8vIGNhbGwgaW5oZXJpdGVkIGZ1bmN0aW9uIHRvIGhhbmRsZSB0aGUgYXBwZW5kaW5nXG4gICAgICAgIHN1cGVyLmFwcGVuZChwb2ludCk7XG5cbiAgICAgICAgLy8gaWYgdGhlIHNlY29uZCB0byBsYXN0IHBvaW50IGlzIHVubmVjZXNzYXJ5LCByZW1vdmUgaXRcbiAgICAgICAgbGV0IGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICAgICAgICBpZiAoIGxlbmd0aCA+PSAzXG4gICAgICAgICAgICAgICAgJiYgKCAgICAoIHRoaXMuZ2V0SXRlbShsZW5ndGggLSAzKS54ID09PSB0aGlzLmdldEl0ZW0obGVuZ3RoIC0gMikueCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEl0ZW0obGVuZ3RoIC0gMikueCA9PT0gdGhpcy5nZXRJdGVtKGxlbmd0aCAtIDEpLnggKVxuICAgICAgICAgICAgICAgICAgICAgfHwgKCB0aGlzLmdldEl0ZW0obGVuZ3RoIC0gMykueSA9PT0gdGhpcy5nZXRJdGVtKGxlbmd0aCAtIDIpLnkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJdGVtKGxlbmd0aCAtIDIpLnkgPT09IHRoaXMuZ2V0SXRlbShsZW5ndGggLSAxKS55IClcbiAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgIClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmUobGVuZ3RoIC0gMik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXR1cm4gdGhpcyBlbGVtZW50ICh0byBhbGxvdyBjaGFpbmluZylcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcGFyc2UgcG9seWxpbmUgZnJvbSBzdHJpbmdcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHN0cmluZyBzdHJpbmcgaW4gdGhlIHBvbHlsaW5lIGZvcm1hdCAoYHgxLHkxIHgyLHkyLCB4Myx5M2ApXG4gICAgICogQHJldHVybiB7UG9seWxpbmVQb2ludHN9IGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBQb2x5bGluZVBvaW50c30gY3JlYXRlZCBieSBwYXJzaW5nIHRoZSBzdHJpbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgcGFyc2VGcm9tU3RyaW5nKHN0cmluZykge1xuICAgICAgICBsZXQgcG9pbnRTdHJpbmdzID0gc3RyaW5nLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgbGV0IHBvaW50cyA9IG5ldyBQb2x5bGluZVBvaW50cygpO1xuXG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgcG9pbnRTdHJpbmdzLmxlbmd0aCA7ICsraSkge1xuICAgICAgICAgICAgcG9pbnRzLmFwcGVuZChQb2x5bGluZVBvaW50LnBhcnNlRnJvbVN0cmluZyhwb2ludFN0cmluZ3NbaV0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwb2ludHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcG9seWxpbmVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IHN0cmluZyBpbiB0aGUgcG9seWxpbmUgZm9ybWF0IChgeDEseTEgeDIseTIsIHgzLHkzYClcbiAgICAgKi9cbiAgICBnZXQgc3RyaW5nKCkge1xuICAgICAgICBsZXQgc3RyaW5nID0gXCJcIjtcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLmxlbmd0aCA7ICsraSkge1xuICAgICAgICAgICAgaWYoaSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHN0cmluZyArPSBcIiBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cmluZyArPSB0aGlzLmFycltpXS5zdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB3cmFwcGVyIGZvciBmb3JlYWNoIG9uIHRoZSBwb2x5bGluZSBwb2ludHNcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZnVuYyBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGVhY2ggZWxlbWVudFxuICAgICAqL1xuICAgIGZvckVhY2goZnVuYykge1xuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuYXJyLmxlbmd0aCA7ICsraSkge1xuICAgICAgICAgICAgZnVuYyh0aGlzLmFycltpXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogU1ZHIHBvbHlsaW5lIChhIHBhdGggZGVmaW5lZCBieSBzZXF1ZW5jZSBvZiBwb2ludHMgb24gcGxhbmUpXG4gKiBAZXh0ZW5kcyBUYWdcbiAqL1xuZXhwb3J0IGNsYXNzIFBvbHlMaW5lIGV4dGVuZHMgVGFnIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvbHlsaW5lUG9pbnRzfSBwb2ludHMgcG9pbnRzIGRlc2NyaWJpbmcgdGhpcyBwb2x5bGluZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvciBDU1MgY29sb3Igb2YgdGhpcyBwb2x5bGluZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdHJva2VXaWR0aCB3aWR0aCBvZiB0aGUgc3Ryb2tlIGZvciB0aGlzIHBvbHlsaW5lIGluIFNWRyBwaXhlbHNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwb2ludHMsIGNvbG9yLCBzdHJva2VXaWR0aCkge1xuICAgICAgICBzdXBlcihcInBvbHlsaW5lXCIpO1xuXG4gICAgICAgIHRoaXMuYWRkQXR0cih7XG4gICAgICAgICAgICBwb2ludHM6IHBvaW50cy5zdHJpbmcsXG4gICAgICAgICAgICBzdHJva2U6IGNvbG9yLFxuICAgICAgICAgICAgZmlsbDogXCJub25lXCIsXG4gICAgICAgICAgICBcInN0cm9rZS13aWR0aFwiOiBzdHJva2VXaWR0aFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiB1cGRhdGUgcG9pbnRzIG9mIHRoaXMgcG9seWxpbmVcbiAgICAgKiBAcGFyYW0ge1BvbHlsaW5lUG9pbnRzfSBwb2ludHMgbmV3IHNldCBvZiBwb2ludHMgZGVzY3JpYmluZyB0aGlzIHBvbHlsaW5lXG4gICAgICovXG4gICAgdXBkYXRlUG9pbnRzKHBvaW50cykge1xuICAgICAgICB0aGlzLmFkZEF0dHIoe1xuICAgICAgICAgICAgcG9pbnRzOiBwb2ludHMuc3RyaW5nXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUZXh0IGVsZW1lbnQgaW4gU1ZHXG4gKiBAZXh0ZW5kcyBUYWdcbiAqL1xuZXhwb3J0IGNsYXNzIFRleHQgZXh0ZW5kcyBUYWcge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4ICAgICAgIGhvcml6b250YWwgcG9zaXRpb24gaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5ICAgICAgIHZlcnRpY2FsIHBvc2l0aW9uIGluIFNWRyBwaXhlbHNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdyAgICAgICB3aWR0aCBvZiB0aGUgdGV4dCBib3ggaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoICAgICAgIGhlaWdodCBvZiB0aGUgdGV4dCBib3ggaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0ZXh0ICAgIHRleHQgY29udGVudCBvZiB0aGUgdGV4dCBib3hcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2l6ZSAgICBDU1MgZm9udCBzaXplIG9mIHRoZSB0ZXh0XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtjb2xvcj1cImJsYWNrXCJdIGNvbG9yIG9mIHRoZSB0ZXh0XG4gICAgICpcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCB3LCBoLCB0ZXh0LCBzaXplLCBjb2xvciA9IFwiYmxhY2tcIikge1xuICAgICAgICBzdXBlcihcInRleHRcIik7XG4gICAgICAgIHRoaXMuYWRkQXR0cih7XG4gICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgeTogeSxcbiAgICAgICAgICAgIHdpZHRoOiB3LFxuICAgICAgICAgICAgaGVpZ2h0OiBoLFxuICAgICAgICAgICAgZmlsbDogY29sb3JcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYoc2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5hZGRBdHRyKHtcbiAgICAgICAgICAgICAgICAnZm9udC1zaXplJzogc2l6ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuJGVsLmFwcGVuZCh0ZXh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogTXVsdGkgbGluZSB0ZXh0IGVsZW1lbnQgaW4gU1ZHXG4gKlxuICogTXVsdGkgbGluZSB0ZXh0IGlzIG5vdCBuYXRpdmVseSBzdXBwb3J0ZW5kIGluIFNWRyAxLjEsXG4gKiB0aGUgd29ya2Fyb3VuZCBpcyB0byB1c2UgdGhlIDxmb3JlaWduT2JqZWN0PiBlbGVtZW50IGFuZCBkaXNwbGF5XG4gKiBhIEhUTUwgcGFyYWdyYXBoIGluc2lkZSBvZiB0aGUgU1ZHIGRvY3VtZW50LlxuICpcbiAqIEJlY2F1c2UgdGhpcyB0ZWNobmlxdWUgaXMgbm90IHN1cHBvcnRlZCBieSBhbGwgb2YgdGhlIGJyb3dzZXJzLFxuICogdGhlIGZvcmVpZ25PYmplY3QgZWxlbWVudCBpcyB3cmFwcGVkIGluIDxzd2l0Y2g+LCB3aGljaFxuICogcHJvdmlkZXMgZmFsbGJhY2sgZm9yIHRob3NlIGNhc2VzLlxuICpcbiAqIHJlYWQgbW9yZTogW2ZvcmVpZ25PYmplY3Qgb24gTUROIHdlYiBkb2NzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9TVkcvRWxlbWVudC9mb3JlaWduT2JqZWN0KVxuICpcbiAqIEBleHRlbmRzIFRhZ1xuICovXG5leHBvcnQgY2xhc3MgTXVsdGlMaW5lVGV4dCBleHRlbmRzIFRhZyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggICAgICAgaG9yaXpvbnRhbCBwb3NpdGlvbiBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgICAgICAgdmVydGljYWwgcG9zaXRpb24gaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3ICAgICAgIHdpZHRoIG9mIHRoZSB0ZXh0IGJveCBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGggICAgICAgaGVpZ2h0IG9mIHRoZSB0ZXh0IGJveCBpbiBTVkcgcGl4ZWxzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRleHQgICAgdGV4dCBjb250ZW50IG9mIHRoZSB0ZXh0IGJveFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzaXplICAgIENTUyBmb250IHNpemUgb2YgdGhlIHRleHRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW2NvbG9yPVwiYmxhY2tcIl0gY29sb3Igb2YgdGhlIHRleHRcbiAgICAgKlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHgsIHksIHcsIGgsIHRleHQsIHNpemUsIGNvbG9yID0gXCJibGFja1wiKSB7XG4gICAgICAgIHN1cGVyKFwic3dpdGNoXCIpO1xuXG4gICAgICAgIGxldCBmb3JlaWduT2JqZWN0ID0gbmV3IFRhZyhcImZvcmVpZ25PYmplY3RcIik7XG4gICAgICAgIGxldCBhbHRlcm5hdGl2ZVRleHQgPSBuZXcgVGV4dCh4LCB5LCB3LCBoLCB0ZXh0LCBzaXplLCBjb2xvcik7XG5cbiAgICAgICAgZm9yZWlnbk9iamVjdC5hZGRBdHRyKHtcbiAgICAgICAgICAgIHgsXG4gICAgICAgICAgICB5LFxuICAgICAgICAgICAgd2lkdGg6IHcsXG4gICAgICAgICAgICBoZWlnaHQ6IGhcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yZWlnbk9iamVjdC4kZWwuYXBwZW5kKFxuICAgICAgICAgICAgJChgPHAgY2xhc3M9XCJtdWx0aWxpbmV0ZXh0XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIgc3R5bGU9XCJmb250LXNpemU6JHtzaXplfXB4XCI+YCkuYXBwZW5kKHRleHQpXG4gICAgICAgIClcblxuICAgICAgICB0aGlzLiRlbC5hcHBlbmQoXG4gICAgICAgICAgICBmb3JlaWduT2JqZWN0LiRlbFxuICAgICAgICApLmFwcGVuZChcbiAgICAgICAgICAgIGFsdGVybmF0aXZlVGV4dC4kZWxcbiAgICAgICAgKVxuICAgIH1cblxufVxuXG4vKipcbiAqIHBhdHRlcm4gb2JqZWN0IGluIFNWR1xuICogQGV4dGVuZHMgVGFnXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXR0ZXJuIGV4dGVuZHMgVGFnIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgICAgIHVuaXF1ZSBpZCBvZiB0aGlzIHBhdHRlcm5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggIHdpZHRoIG9mIG9uZSBwYXR0ZXJuIHRpbGUgaW4gU1ZHIHBpeGVsc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgaGVpZ2h0IG9mIG9uZSBwYXR0ZXJuIHRpbGUgaW4gU1ZHIHBpeGVsc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGlkLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHN1cGVyKFwicGF0dGVyblwiKTtcblxuICAgICAgICB0aGlzLmFkZEF0dHIoe1xuICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICAgIHBhdHRlcm5Vbml0czogXCJ1c2VyU3BhY2VPblVzZVwiLFxuICAgICAgICAgICAgdmlld0JveDogXCIwIDAgXCIrd2lkdGgrXCIgXCIraGVpZ2h0XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGFkZCBhIGNoaWxkIHRvIHRoaXMgcGF0dGVyblxuICAgICAqXG4gICAgICogcGF0dGVybiBiZWhhdmVzIGEgbGl0dGxlIGxpa2Uge0BsaW5rIEdyb3VwfSAtIGl0IGNvbnRhaW5zIGNoaWxkIGVsZW1lbnRzLCB3aGljaCByZXByZXNlbnQgdGhlIGNvbnRlbnQgb2Ygb25lIHRpbGUgb2YgdGhlIHBhdHRlcm5cbiAgICAgKiBhbmQgdGhlIHdob2xlIHBhY2thZ2Ugb2YgdGhlIGNoaWxkIGVsZW1lbnRzIGlzIHJlcGVhdGVkIG9uIGVhY2ggdGlsZSBvZiB0aGUgcGF0dGVyblxuICAgICAqIEBwYXJhbSB7U3ZnRWxlbWVudH0gZWwgZWxlbWVudCB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gdGhlIHBhdHRlcm5cbiAgICAgKi9cbiAgICBhZGRDaGlsZChlbCkge1xuICAgICAgICB0aGlzLiRlbC5hcHBlbmQoZWwuJGVsKTtcbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFR1dG9yaWFsIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRTVkcsIG9uVHV0b3JpYWxDbG9zZWQpIHtcbiAgICAgICAgdGhpcy5wYXJlbnRTVkcgPSBwYXJlbnRTVkc7XG4gICAgICAgIHRoaXMuY3VycmVudFN0ZXAgPSAwO1xuXG4gICAgICAgIHRoaXMuJHR1dG9yaWFsV2luZG93O1xuICAgICAgICB0aGlzLiR0dXRvcmlhbENvbnRlbnQ7XG5cbiAgICAgICAgdGhpcy5zdGVwcyA9IFsoKSA9PiB7IHRoaXMuY2xvc2VXaW5kb3cob25UdXRvcmlhbENsb3NlZCkgfV07XG5cbiAgICAgICAgdGhpcy5zZXRVcFR1dG9yaWFsKCk7XG5cbiAgICAgICAgdGhpcy5yZXNldEFjdGlvbnMoKTtcbiAgICB9XG5cbiAgICBnZXQgc3RlcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFN0ZXA7XG4gICAgfVxuXG4gICAgcmVzZXRBY3Rpb25zKCkge1xuICAgICAgICB0aGlzLm9uQ29udGV4dE1lbnVPcGVuZWQgPSAoKSA9PiB7fTtcbiAgICAgICAgdGhpcy5vbkVsZW1lbnRBZGRlZCA9ICgpID0+IHt9O1xuICAgICAgICB0aGlzLm9uQm94TW92ZWQgPSAoKSA9PiB7fTtcbiAgICAgICAgdGhpcy5vbkJveFJvdGF0ZWQgPSAoKSA9PiB7fTtcbiAgICAgICAgdGhpcy5vbk91dHB1dEJveFRydWUgPSAoKSA9PiB7fTtcbiAgICAgICAgdGhpcy5vbkNhbnZhc01vdmVkID0gKCkgPT4ge307XG4gICAgICAgIHRoaXMub25DYW52YXNab29tZWQgPSAoKSA9PiB7fTtcbiAgICAgICAgdGhpcy5vbkVsZW1lbnRSZW1vdmVkID0gKCkgPT4ge307XG4gICAgICAgIHRoaXMub25DaGFuZ2VJbnB1dEJveFN0YXRlID0gKCkgPT4ge307XG4gICAgfVxuXG4gICAgc2V0VXBUdXRvcmlhbCgpIHtcbiAgICAgICAgdGhpcy5zdGVwcy5wdXNoKFxuICAgICAgICAgICAgKCkgPT4geyB0aGlzLnN0ZXBXZWxjb21lKCkgfSxcbiAgICAgICAgICAgICgpID0+IHsgdGhpcy5zdGVwQWRkQm94ZXMoKSB9LFxuICAgICAgICAgICAgKCkgPT4geyB0aGlzLnN0ZXBNb3ZlQ2FudmFzKCkgfSxcbiAgICAgICAgICAgICgpID0+IHsgdGhpcy5zdGVwWm9vbUNhbnZhcygpIH0sXG4gICAgICAgICAgICAoKSA9PiB7IHRoaXMuc3RlcE1vdmVCb3hlcygpIH0sXG4gICAgICAgICAgICAoKSA9PiB7IHRoaXMuc3RlcFdpcmluZygpIH0sXG4gICAgICAgICAgICAoKSA9PiB7IHRoaXMuc3dpdGNoSW5wdXRCb3goKSB9LFxuICAgICAgICAgICAgKCkgPT4geyB0aGlzLnN0ZXBSZW1vdmVCb3goKSB9LFxuICAgICAgICAgICAgKCkgPT4geyB0aGlzLnN0ZXBGaW5pc2goKSB9XG4gICAgICAgIClcbiAgICB9XG5cbiAgICBzdGVwV2VsY29tZSgpIHtcbiAgICAgICAgdGhpcy53aW5kb3dDb250ZW50KFxuICAgICAgICAgICAgYFdlbGNvbWUgdG8gSHJhZGxhISBUbyBnZXQgc3RhcnRlZCwgY2xpY2sgYW55d2hlcmUgb24gdGhlIGVkaXRpbmcgYXJlYSB3aXRoIHlvdXIgcmlnaHQgbW91c2UgYnV0dG9uLmBcbiAgICAgICAgKVxuXG4gICAgICAgIHRoaXMub25Db250ZXh0TWVudU9wZW5lZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuXG4gICAgICAgICAgICAvLyB0aGlzIGZ1bmN0aW9uIHJ1bnMgb25seSBvbmNlXG4gICAgICAgICAgICB0aGlzLm9uQ29udGV4dE1lbnVPcGVuZWQgPSAoKSA9PiB7fVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RlcEFkZEJveGVzKCkge1xuICAgICAgICB0aGlzLndpbmRvd0NvbnRlbnQoXG4gICAgICAgICAgICBgR3JlYXQgam9iISBOb3cgeW91IGtub3csIGhvdyB0byBvcGVuIHRoZSBlZGl0b3IgbWVudS5cbiAgICAgICAgICAgIE5vdyB0cnkgdG8gYWRkIGFuIDxlbT5JbnB1dCBib3g8L2VtPiwgPGVtPk91dHB1dCBib3g8L2VtPiBhbmQgYSA8ZW0+Tk9UIGdhdGU8L2VtPlxuICAgICAgICAgICAgdG8gdGhlIGVkaXRpbmcgYXJlYS5gKVxuXG4gICAgICAgIGxldCBlbGVtZW50c0FkZGVkID0ge1xuICAgICAgICAgICAgaW5wdXRCb3g6IGZhbHNlLFxuICAgICAgICAgICAgb3V0cHV0Qm94OiBmYWxzZSxcbiAgICAgICAgICAgIG5vdEdhdGU6IGZhbHNlXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9uRWxlbWVudEFkZGVkID0gKG5hbWUpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJpbnB1dFwiOlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c0FkZGVkLmlucHV0Qm94ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm91dHB1dFwiOlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c0FkZGVkLm91dHB1dEJveCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJub3RcIjpcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNBZGRlZC5ub3RHYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gYWN0aW9uIG9uIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGVsZW1lbnRzQWRkZWQuaW5wdXRCb3ggJiYgZWxlbWVudHNBZGRlZC5vdXRwdXRCb3ggJiYgZWxlbWVudHNBZGRlZC5ub3RHYXRlKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBhY3Rpb25cbiAgICAgICAgICAgICAgICB0aGlzLm9uRWxlbWVudEFkZGVkID0gKCkgPT4ge31cblxuICAgICAgICAgICAgICAgIC8vIHByb2NlZWQgdG8gdGhlIG5leHQgc3RlcCBvZiB0aGUgdHV0b3JpYWxcbiAgICAgICAgICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzdGVwTW92ZUNhbnZhcygpIHtcbiAgICAgICAgdGhpcy53aW5kb3dDb250ZW50KFxuICAgICAgICAgICAgYFlvdSBjYW4gbW92ZSB0aGUgZWRpdGluZyBhcmVhIChzb21ldGltZXMgY2FsbGVkIGNhbnZhcykgYnkgZHJhZ2dpbmdcbiAgICAgICAgICAgIHdpdGggdGhlIG1pZGRsZSBtb3VzZSBidXR0b24gb3IgYnkgaG9sZGluZyB0aGUgPGNvZGU+Q3RybDwvY29kZT4ga2V5XG4gICAgICAgICAgICBhbmQgZHJhZ2dpbmcgd2l0aCB0aGUgbGVmdCBtb3VzZSBidXR0b24uIENoZWNrIGl0IG91dC5gKVxuXG4gICAgICAgIHRoaXMub25DYW52YXNNb3ZlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICAgICAgdGhpcy5vbkNhbnZhc01vdmVkID0gKCkgPT4ge31cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0ZXBab29tQ2FudmFzKCkge1xuICAgICAgICB0aGlzLndpbmRvd0NvbnRlbnQoXG4gICAgICAgICAgICBgWW91IGNhbiBhbHNvIHpvb20gaW4gYW5kIG91dCB1c2luZyA8Y29kZT5DdHJsPC9jb2RlPiBhbmQgdGhlIG1vdXNlIHdoZWVsLmBcbiAgICAgICAgKVxuXG4gICAgICAgIHRoaXMub25DYW52YXNab29tZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgICAgIHRoaXMub25DYW52YXNab29tZWQgPSAoKSA9PiB7fTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0ZXBNb3ZlQm94ZXMoKSB7XG4gICAgICAgIHRoaXMud2luZG93Q29udGVudChgWW91IGNhbiBtb3ZlIHRoZSBlbGVtZW50cyBvbiB0aGUgZWRpdGluZyBjYW52YXMgYnkgZHJhZ2dpbmcgdGhlbVxuICAgICAgICAgICAgdXNpbmcgdGhlIGxlZnQgbW91c2UgYnV0dG9uLiBZb3UgY2FuIGFsc28gcm90YXRlIHRoZW0gdXNpbmcgbWlkZGxlIGNsaWNrLiBUcnkgaXQgb3V0LmApXG5cbiAgICAgICAgbGV0IGJveE1vdmVkID0gZmFsc2U7XG4gICAgICAgIGxldCBib3hSb3RhdGVkID0gZmFsc2U7XG5cbiAgICAgICAgbGV0IG1vdmVSb3RhdGVDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmKGJveE1vdmVkICYmIGJveFJvdGF0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub25Cb3hNb3ZlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIGJveE1vdmVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgdGhpcy5vbkJveE1vdmVkID0gKCkgPT4ge31cblxuICAgICAgICAgICAgbW92ZVJvdGF0ZUNhbGxiYWNrKClcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub25Cb3hSb3RhdGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgYm94Um90YXRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHRoaXMub25Cb3hSb3RhdGVkID0gKCkgPT4ge31cblxuICAgICAgICAgICAgbW92ZVJvdGF0ZUNhbGxiYWNrKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0ZXBXaXJpbmcoKSB7XG4gICAgICAgIHRoaXMud2luZG93Q29udGVudChgRXNzZW50aWFsIHBhcnQgb2YgbG9naWMgbmV0d29ya3MgaXMgdGhlIHdpcmluZy4gQ3JlYXRlIGEgdmVyeSBzaW1wbGVcbiAgICAgICAgICAgIGludmVydGVyIGJ5IGNvbm5lY3RpbmcgdGhlIDxlbT5JbnB1dCBib3g8L2VtPiB0byB0aGUgaW5wdXQgb2YgdGhlIDxlbT5OT1QgZ2F0ZTwvZW0+XG4gICAgICAgICAgICBhbmQgdGhlIG91dHB1dCBvZiB0aGUgPGVtPk5PVCBnYXRlPC9lbT4gdG8gdGhlIGlucHV0IG9mIHRoZSA8ZW0+T3V0cHV0IGJveDwvZW0+LmAsXG4gICAgICAgICAgICBgVG8gY29ubmVjdCB0d28gZWxlbW50cywgc2ltcGx5IGNsaWNrIG9uIGEgY29ubmVjdG9yIG9mIHRoZSBmaXJzdCBlbGVtZW50LFxuICAgICAgICAgICAgdGhhbiBjbGljayBvbiBhIGNvbmVjdG9yIG9mIHRoZSBzZWNvbmQgZWxlbWVudC5gKVxuXG4gICAgICAgIHRoaXMub25PdXRwdXRCb3hUcnVlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZXh0KCk7XG5cbiAgICAgICAgICAgIHRoaXMub25PdXRwdXRCb3hUcnVlID0gKCkgPT4ge307XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3dpdGNoSW5wdXRCb3goKSB7XG4gICAgICAgIHRoaXMud2luZG93Q29udGVudChgXG4gICAgICAgICAgICBUaGUgaW5wdXQgYm94ZXMgY2FuIGJlIGluIHR3byBzdGF0ZXM6IDxlbT5PTjwvZW0+IGFuZCA8ZW0+T0ZGPC9lbT4sIHNpZ25hbGxlZFxuICAgICAgICAgICAgYnkgdGhlIGdyZWVuIGFuZCByZWQgY29sb3JzIHJlc3BlY3RpdmVseS4gWW91IGNhbiBsZWZ0IGNsaWNrIG9uIGFuIElucHV0IGJveCB0b1xuICAgICAgICAgICAgc3dpdGNoIGl0cyBzdGF0ZS4gVHJ5IGl0IG91dCFcbiAgICAgICAgYClcblxuICAgICAgICB0aGlzLm9uQ2hhbmdlSW5wdXRCb3hTdGF0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuXG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlSW5wdXRCb3hTdGF0ZSA9ICgpID0+IHt9O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHN0ZXBSZW1vdmVCb3goKSB7XG4gICAgICAgIHRoaXMud2luZG93Q29udGVudChcbiAgICAgICAgICAgIGBXaGVuIHlvdSByaWdodCBjbGljayBvbiBhbiBlbGVtZW50LCB5b3UgY2FuIGZpbmQgYSBuZXcgaXRlbSBpbiB0aGUgbWVudSxcbiAgICAgICAgICAgIHRoYXQgYWxsb3dzIHlvdSB0byByZW1vdmUgdGhlIGVsZW1lbnQuIFRoaXMgd29ya3MgZm9yIHdpcmVzIGFzIHdlbGwgYXMgZm9yIGdhdGVzIGFuZCBvdGhlciB0eXBlcyBvZiBib3hlcy5cbiAgICAgICAgICAgIFRyeSB0byByZW1vdmUgYW4gZWxlbWVudCFgXG4gICAgICAgIClcblxuICAgICAgICB0aGlzLm9uRWxlbWVudFJlbW92ZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHQoKTtcblxuICAgICAgICAgICAgdGhpcy5vbkVsZW1lbnRSZW1vdmVkID0gKCkgPT4ge307XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGVwRmluaXNoKCkge1xuICAgICAgICB0aGlzLndpbmRvd0NvbnRlbnQoYFlvdSdyZSBhbGwgc2V0LCBlbmpveSB5b3VyIHN0YXkhYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGBEbyB5b3Ugd2lzaCB0byBzdGFydCB3aXRoIGVtcHR5IGNhbnZhcz9gKVxuICAgICAgICB0aGlzLndpbmRvd0Nob2ljZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiAneWVzLCBjbGVhbiB0aGUgY2FudmFzJyxcbiAgICAgICAgICAgICAgICBmdW5jOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50U1ZHLmNsZWFuQ2FudmFzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGV4dDogJ25vLCBrZWVwIHRoZSBjYW52YXMgYXMgaXQgaXMnLFxuICAgICAgICAgICAgICAgIGZ1bmM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfVxuXG4gICAgc2V0IHN0ZXAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U3RlcCA9IHZhbHVlO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVHV0b3JpYWwgc3RlcFwiLCB0aGlzLnN0ZXApXG5cbiAgICAgICAgaWYodGhpcy5zdGVwIDwgdGhpcy5zdGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuc3RlcHNbdGhpcy5zdGVwXSgpO1xuXG4gICAgICAgICAgICBpZih0aGlzLnN0ZXAgPT09IDEpXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5V2luZG93KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0ZXAgPSAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGxheVdpbmRvdygpIHtcbiAgICAgICAgdGhpcy5wYXJlbnRTVkcuJHN2Zy5hZnRlcih0aGlzLiR0dXRvcmlhbFdpbmRvdylcbiAgICB9XG5cbiAgICBjbG9zZVdpbmRvdyhvblR1dG9yaWFsQ2xvc2VkKSB7XG4gICAgICAgIHRoaXMuJHR1dG9yaWFsV2luZG93LnJlbW92ZSgpO1xuXG4gICAgICAgIGlmKG9uVHV0b3JpYWxDbG9zZWQhPT11bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9uVHV0b3JpYWxDbG9zZWQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHdpbmRvd0NvbnRlbnQoLi4udGV4dCkge1xuICAgICAgICBpZighdGhpcy4kdHV0b3JpYWxXaW5kb3cpIHtcbiAgICAgICAgICAgIHRoaXMuJHR1dG9yaWFsV2luZG93ID0gJChcIjxkaXY+XCIpLmF0dHIoXCJpZFwiLCBcInR1dG9yaWFsXCIpO1xuXG4gICAgICAgICAgICB0aGlzLiR0dXRvcmlhbENvbnRlbnQgPSAkKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJjb250ZW50XCIpO1xuICAgICAgICAgICAgdGhpcy4kdHV0b3JpYWxXaW5kb3cuYXBwZW5kKHRoaXMuJHR1dG9yaWFsQ29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiR0dXRvcmlhbENvbnRlbnQuaHRtbChcIlwiKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhZ3JhcGggb2YgdGV4dCkge1xuICAgICAgICAgICAgdGhpcy4kdHV0b3JpYWxDb250ZW50LmFwcGVuZChcbiAgICAgICAgICAgICAgICAkKFwiPHA+XCIpLmh0bWwocGFyYWdyYXBoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHdpbmRvd0Nob2ljZSguLi5jaG9pY2VzKSB7XG4gICAgICAgIGxldCAkY2hvaWNlcyA9ICQoXCI8b2w+XCIpLmFkZENsYXNzKFwiY2hvaWNlc1wiKTtcbiAgICAgICAgZm9yIChjb25zdCBjaG9pY2Ugb2YgY2hvaWNlcykge1xuICAgICAgICAgICAgJGNob2ljZXMuYXBwZW5kKFxuICAgICAgICAgICAgICAgICQoXCI8bGk+XCIpLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgJChcIjxhPlwiKS5hdHRyKFwiaHJlZlwiLCBcIiNcIikuY2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlLmZ1bmMoKVxuICAgICAgICAgICAgICAgICAgICB9KS5odG1sKGNob2ljZS50ZXh0KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiR0dXRvcmlhbENvbnRlbnQuYXBwZW5kKCRjaG9pY2VzKTtcbiAgICB9XG5cbiAgICBzdGFydCgpIHsgdGhpcy5zdGVwID0gMTsgfVxuICAgIG5leHQoKSB7IHRoaXMuc3RlcCsrOyB9XG4gICAgc3RvcCgpIHsgdGhpcy5zdGVwID0gMCB9XG59XG4iXX0="}