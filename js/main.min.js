!function o(r,i,a){function u(e,t){if(!i[e]){if(!r[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(s)return s(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=i[e]={exports:{}},r[e][0].call(n.exports,function(t){return u(r[e][1][t]||t)},n,n.exports,o,r,i,a)}return i[e].exports}for(var s="function"==typeof require&&require,t=0;t<a.length;t++)u(a[t]);return u}({1:[function(t,e,n){"use strict";var b=/("(?:[^\\"]|\\.)*")|[:,]/g;e.exports=function(t,e){var y,v,g;return e=e||{},y=JSON.stringify([1],void 0,void 0===e.indent?2:e.indent).slice(2,-3),v=""===y?1/0:void 0===e.maxLength?80:e.maxLength,g=e.replacer,function t(e,n,o){var r,i,a,u,s,c,f,l,h,p,d;if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0===(p=JSON.stringify(e,g)))return p;if(c=v-n.length-o,p.length<=c&&(l=p.replace(b,function(t,e){return e||t+" "})).length<=c)return l;if(null!=g&&(e=JSON.parse(p),g=void 0),"object"==typeof e&&null!==e){if(f=n+y,a=[],i=0,Array.isArray(e))for(h="[",r="]",c=e.length;i<c;i++)a.push(t(e[i],f,i===c-1?0:1)||"null");else for(h="{",r="}",c=(s=Object.keys(e)).length;i<c;i++)d=s[i],u=JSON.stringify(d)+": ",void 0!==(d=t(e[d],f,u.length+(i===c-1?0:1)))&&a.push(u+d);if(0<a.length)return[h,y+a.join(",\n"+f),r].join("\n"+n)}return p}(t,"",0)}},{}],2:[function(t,e,n){var o=(r.prototype.add=function(t,e){if(t<0||t>=this._length)throw new Error("Out of bounds");for(var n=0,o=this._head;n<t;)o=o.next,n++;o.value=e},r.prototype.pop=function(){if(0===this._length)throw new Error("Can't pop from an empty data structure");var t=this._tail.value;return this._tail=this._tail.prev,this._tail&&(delete this._tail.next,this._tail.next=null),this._length--,0===this._length&&(delete this._head,this._head=null),t},r.prototype.shift=function(){if(0===this._length)throw new Error("Can't shift from an empty data structure");var t=this._head.value;return this._head=this._head.next,this._head&&(delete this._head.prev,this._head.prev=null),this._length--,t},r.prototype.push=function(t){t={value:t,prev:this._tail,next:null};0===this._length?this._head=this._tail=t:(this._tail.next=t,this._tail=this._tail.next),this._length++},r.prototype.unshift=function(t){t={value:t,prev:null,next:this._head};0===this._length?this._head=this._tail=t:(this._head.prev=t,this._head=this._head.prev),this._length++},r.prototype.top=function(){if(this._tail)return this._tail.value},r.prototype.bottom=function(){if(this._head)return this._head.value},r.prototype.count=function(){return this._length},r.prototype.isEmpty=function(){return 0===this._length},r.prototype.rewind=function(){this._key=0,this._current=this._head},r.prototype.current=function(){return this._current?this._current.value:null},r.prototype.key=function(){return this._key},r.prototype.next=function(){this._current=this._current.next,this._key++},r.prototype.prev=function(){this._current=this._current.prev,this._key--},r.prototype.valid=function(){return 0<=this._key&&this._key<this._length},r.prototype.toArray=function(){for(var t=[],e=this._head;e;)t.push(e.value),e=e.next;return t},r.prototype.toString=function(){return"{"+this.toArray().join("->")+"}"},r);function r(){this._length=0,this._key=0,this._head=null,this._tail=null,this._current=null}e.exports=o},{}],3:[function(t,e,n){var o=(r.prototype._child=function(t){return 2*t+1},r.prototype._parent=function(t){return Math.floor(t/2)},r.prototype._swap=function(t,e){var n=this._tree[t];this._tree[t]=this._tree[e],this._tree[e]=n},r.prototype._siftUp=function(t){for(;0<t;){var e=this._parent(t);if(!(0<this.compare(this._tree[t],this._tree[e])*this._type))break;this._swap(t,e),t=e}},r.prototype._siftDown=function(t){for(;t<this._tree.length;){var e=this._child(t),n=e+1;if(e<this._tree.length&&n<this._tree.length&&(this.compare(this._tree[t],this._tree[e])*this._type<0||this.compare(this._tree[t],this._tree[n])*this._type<0)){var o=e;this.compare(this._tree[e],this._tree[n])*this._type<0&&(o=n),this._swap(t,o),t=o}else{if(!(e<this._tree.length&&this.compare(this._tree[t],this._tree[e])*this._type<0))break;this._swap(t,e),t=e}}},r.prototype.extract=function(){if(0===this._tree.length)throw new Error("Can't extract from an empty data structure");var t=this._tree[0];return 1===this._tree.length?this._tree=[]:(this._tree[0]=this._tree.pop(),this._siftDown(0)),t},r.prototype.insert=function(t){this._tree.push(t),this._siftUp(this._tree.length-1)},r.prototype.top=function(){if(0===this._tree.length)throw new Error("Can't peek at an empty heap");return this._tree[0]},r.prototype.count=function(){return this._tree.length},r.prototype.isEmpty=function(){return 0===this._tree.length},r.prototype.rewind=function(){this._key=0},r.prototype.current=function(){return this._tree[this._key]},r.prototype.key=function(){return this._key},r.prototype.next=function(){this._key++},r.prototype.prev=function(){this._key--},r.prototype.valid=function(){return 0<=this._key&&this._key<this._tree.length},r.prototype.compare=function(t,e){return e<t?1:t==e?0:-1},r.prototype._displayNode=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=!0);var o=e,r=this._child(t),i=r+1;return o+=n?e?"└─":"  ":"├─",o+=this._tree[t],e+=n?"  ":"│ ",r<this._tree.length&&(o+="\n"+this._displayNode(r,e,null==this._tree[i])),i<this._tree.length&&(o+="\n"+this._displayNode(i,e,!0)),o},r.prototype.toString=function(){return this._displayNode(0)},r.prototype.toArray=function(){return this._tree},r.MAX=1,r.MIN=-1,r);function r(){this._tree=[],this._type=r.MAX,this._key=0}e.exports=o},{}],4:[function(t,e,n){var o,r=this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o},i=t("./Heap"),r=(r(a,o=i),a);function a(){o.apply(this,arguments),this._type=i.MAX}e.exports=r},{"./Heap":3}],5:[function(t,e,n){var o,r=this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function o(){this.constructor=t}o.prototype=e.prototype,t.prototype=new o},i=t("./Heap"),r=(r(a,o=i),a);function a(){o.apply(this,arguments),this._type=i.MIN}e.exports=r},{"./Heap":3}],6:[function(t,e,n){var o,r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function o(){this.constructor=t}t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},i=t("./Heap"),r=(r(a,o=i),a.prototype.enqueue=function(t,e){return this.insert(new u(t,e))},a.prototype.dequeue=function(){return this.extract().value},a.prototype.top=function(){return o.prototype.top.call(this).value},a.prototype.compare=function(t,e){return t.priority>e.priority?1:t.priority==e.priority?0:-1},a);function a(){o.apply(this,arguments),this._type=i.MAX}var u=(s.prototype.toString=function(){return this.value+" ["+this.priority+"]"},s);function s(t,e){this.value=t,this.priority=e}e.exports=r},{"./Heap":3}],7:[function(t,e,n){var o,r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function o(){this.constructor=t}t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},t=t("./DoublyLinkedList"),t=(r(i,o=t),i.prototype.enqueue=function(t){return this.push(t)},i.prototype.dequeue=function(){return this.shift()},i);function i(){o.apply(this,arguments)}e.exports=t},{"./DoublyLinkedList":2}],8:[function(t,e,n){var o,r=this&&this.__extends||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function o(){this.constructor=t}t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},t=t("./DoublyLinkedList"),t=(r(i,o=t),i);function i(){o.apply(this,arguments)}e.exports=t},{"./DoublyLinkedList":2}],9:[function(t,e,n){e.exports={DoublyLinkedList:t("./Datastructures/DoublyLinkedList"),Stack:t("./Datastructures/Stack"),Queue:t("./Datastructures/Queue"),Heap:t("./Datastructures/Heap"),MaxHeap:t("./Datastructures/MaxHeap"),MinHeap:t("./Datastructures/MinHeap"),PriorityQueue:t("./Datastructures/PriorityQueue")}},{"./Datastructures/DoublyLinkedList":2,"./Datastructures/Heap":3,"./Datastructures/MaxHeap":4,"./Datastructures/MinHeap":5,"./Datastructures/PriorityQueue":6,"./Datastructures/Queue":7,"./Datastructures/Stack":8}],10:[function(t,e,n){"use strict";var o,r=(o=t("./modules/App"))&&o.__esModule?o:{default:o};$(function(){new r.default("#canvas",10)})},{"./modules/App":11}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var E=i(t("./editorElements")),a=t("./svgObjects"),c=r(t("./Logic")),u=i(t("./Simulation")),s=r(t("./ui/ContextMenu")),f=r(t("./ui/FloatingMenu")),o=r(t("./ui/Tutorial")),l=r(t("./ui/Messages")),h=r(t("./ui/ViewBox")),R=t("./other/helperFunctions"),T=t("libstl");function r(t){return t&&t.__esModule?t:{default:t}}function p(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return p=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!==d(t)&&"function"!=typeof t)return{default:t};var e=p();if(e&&e.has(t))return e.get(t);var n,o,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t){Object.prototype.hasOwnProperty.call(t,n)&&((o=i?Object.getOwnPropertyDescriptor(t,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=t[n])}return r.default=t,e&&e.set(t,r),r}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=y(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,e=function(){};return{s:e,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw r}}}}function y(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function g(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}t=function(){function i(t,e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.$svg=$(t),this.gridSize=e,this.boxes=[],this.wires=[],this.messages=new l.default,this.simulationEnabled=!0,this.simulation=new u.SimulationDummy,this.leftTopPadding=4,this.$defs=$("<defs>"),this.$svg.prepend(this.$defs);var o,r=new a.Pattern("grid",this.gridSize,this.gridSize),e=(new a.PolyLinePoints).append(new a.PolyLinePoint(0,0)).append(new a.PolyLinePoint(this.gridSize,0)).append(new a.PolyLinePoint(this.gridSize,this.gridSize));r.addChild(new a.PolyLine(e,2,"#c2c3e4")),this.addPattern(r.get()),this.background=new a.Rectangle(0,0,this.width,this.height,"url(#grid)","none"),this.appendJQueryObject(this.background.get()),this.refresh(),this.$svg.attr("preserveAspectRatio","xMinYMin slice"),this.viewbox=new h.default(0,0,this.width,this.height),this.applyViewbox(),this.contextMenu=new s.default(this),this.floatingMenu=new f.default(this),this.$svg.on("mousedown",function(t){(void 0!==(o=n.getRealTarget(t.target))?o:n).onMouseDown(t),n.hideContextMenu(),t.preventDefault()}).on("mousemove",function(t){(void 0!==o?o:n).onMouseMove(t),t.preventDefault()}).on("mouseup",function(t){(void 0!==o?o:n).onMouseUp(t),o=void 0,t.preventDefault()}).on("contextmenu",function(t){n.displayContextMenu(t.pageX,t.pageY,n.getRealJQueryTarget(t.target)),t.preventDefault()}),$(document).on("keydown",function(t){n.onKeyDown(t)}).on("keyup",function(t){n.onKeyUp(t)}),$(window).on("resize",function(){n.viewbox.newDimensions(n.width,n.height),n.applyViewbox()}),(0,R.addMouseScrollEventListener)(t,function(t){t.ctrlKey||(n.zoom+=.1*t.delta,t.preventDefault())}),$(window).on("keydown",function(t){var e={"+":.1,"-":-.1};e[t.key]&&(n.zoom+=e[t.key])}),this.tutorial;try{localStorage.userHasVisited||this.startTutorial()}catch(t){console.warn(t)}}var t,e,n;return t=i,n=[{key:"snapToGrid",value:function(t,e){return Math.round(t/e)*e}}],(e=[{key:"onKeyDown",value:function(t){17!==t.keyCode&&91!==t.keyCode||this.$svg.addClass("grabbable")}},{key:"onKeyUp",value:function(t){17!==t.keyCode&&91!==t.keyCode||this.$svg.removeClass("grabbable")}},{key:"onMouseDown",value:function(t){this.cancelWireCreation(),(2===t.which||1===t.which&&t.ctrlKey)&&(this.$svg.addClass("grabbed"),this.moveCanvas={left:t.pageX,top:t.pageY})}},{key:"onMouseMove",value:function(t){var e,n;this.moveCanvas&&(e=t.pageX-this.moveCanvas.left,n=t.pageY-this.moveCanvas.top,this.viewbox.move(e,n),this.applyViewbox(),this.moveCanvas={left:t.pageX,top:t.pageY})}},{key:"onMouseUp",value:function(){this.moveCanvas&&(this.$svg.removeClass("grabbed"),this.moveCanvas=void 0,this.tutorial&&this.tutorial.onCanvasMoved())}},{key:"applyViewbox",value:function(){this.background.addAttr({x:this.viewbox.left,y:this.viewbox.top,width:this.viewbox.width,height:this.viewbox.height}),this.$svg.attr("viewBox",this.viewbox.str)}},{key:"startTutorial",value:function(){var t=this;this.tutorial=new o.default(this,function(){localStorage.userHasVisited=!0,t.tutorial=void 0}),this.tutorial.start()}},{key:"importData",value:function(C,I,M){var $=this;return new Promise(function(t){var v=[];I=void 0!==I?I:$.leftTopPadding,M=void 0!==M?M:$.leftTopPadding,$.simulationEnabled=!1;var g=new Map,b={x:0,y:0},e=B(C.boxes);try{for(e.s();!(n=e.n()).done;){var n=n.value;if(n.transform&&n.transform.items){var o=B(n.transform.items);try{for(o.s();!(r=o.n()).done;){var r=r.value;"translate"===r.name&&(b=b?{x:Math.min(b.x,r.args[0]),y:Math.min(b.y,r.args[1])}:{x:r.args[0],y:r.args[1]})}}catch(t){o.e(t)}finally{o.f()}}}}catch(t){e.e(t)}finally{e.f()}var m,i=B(C.boxes);try{for(i.s();!(m=i.n()).done;)!function(){var t=m.value,e={input:function(){return $.newInput(0,0,t.isOn,!1)},output:function(){return $.newOutput(0,0,!1)}},n={gate:function(){return $.newGate(t.name,0,0,!1)},blackbox:function(){return $.newBlackbox(t.inputs,t.outputs,t.table,t.name,0,0,!1)},other:function(){if(!t.name)throw"This network contains a box without a name.";if(!e[t.name])throw"This network contains unknown box names. (".concat(t.name,")");return e[t.name]()}},o=void 0;try{o=function(){if(!t.category)throw"This network a box without a category.";if(!n[t.category])throw"This network contains unknown box categories. (".concat(t.category,")");return n[t.category]()}()}catch(t){v.push(t)}if(o){var r=new E.Transform,i=0,a={translate:function(t){r.setTranslate(t[0]-b.x+I,t[1]-b.y+M)},rotate:function(t){i=t[0]%360/90}};if(t.transform&&t.transform.items){var u=B(t.transform.items);try{for(u.s();!(f=u.n()).done;){var s=f.value,c=s.name,f=s.args;if(!c){v.push("This network contains unnamed transform properties.");break}if(!a[c]){v.push("This network contains unknown transform properties. (".concat(s.name,")"));break}a[c](f)}}catch(t){u.e(t)}finally{u.f()}}r.toSVGPixels($),o.setTransform(r);for(var l=0;l<i;++l)o.rotate(!0);if(t.connections){var h=B(t.connections);try{for(h.s();!(y=h.n()).done;){var p=y.value,d=p.wireId,y={index:p.index,boxId:o.id};g.has(d)?((p=g.get(d)).push(y),g.set(d,p)):g.set(d,[y])}}catch(t){h.e(t)}finally{h.f()}}}}()}catch(t){i.e(t)}finally{i.f()}$.refresh();var a=new T.PriorityQueue,u=B(g.values());try{for(u.s();!(p=u.n()).done;){var s=p.value,c=[],f=B(s);try{for(f.s();!(h=f.n()).done;){var l=h.value,h=l.boxId,l=l.index;c.push($.getBoxById(h).connectors[l].id)}}catch(t){f.e(t)}finally{f.f()}var p,d=c.map(function(t){return $.getConnectorPosition($.getConnectorById(t),!0)});2===d.length?(p=$.newWire.apply($,c.concat([!1,!1])),s=R.manhattanDistance.apply(void 0,A(d)),a.enqueue(p,1/s)):v.push("Found a wire that does not have two endings. (It had ".concat(d.length," instead.)"))}}catch(t){u.e(t)}finally{u.f()}if(window.Worker){for(var y=[],w=[];!a.isEmpty();){var O=a.dequeue(),x=$.getConnectorPosition(O.connection.from.connector,!0),k=$.getConnectorPosition(O.connection.to.connector,!0);y.push([{x:x.x/$.gridSize,y:x.y/$.gridSize},{x:k.x/$.gridSize,y:k.y/$.gridSize}]),w.push(O)}var _=new Worker("js/routeWorker.min.js"),S=$.messages.newLoadingMessage("looking for the best wiring…");_.onmessage=function(t){var n=t.data.paths;w.forEach(function(t,e){t.setWirePath(t.pathToPolyLine(n[e])),t.updateWireState()}),S.hide()};var j={wires:y,nonRoutableNodes:$.getNonRoutableNodes(),inconvenientNodes:$.getInconvenientNodes()};_.postMessage(j)}else var P=window.setInterval(function(){if(a.isEmpty())console.log("finished"),clearInterval(P);else for(var t=0;t<10&&!a.isEmpty();++t){var e=a.dequeue();e.routeWire(!0,!1),e.updateWireState()}},200);$.refresh(),$.simulationEnabled=!0,t(v)})}},{key:"wireCreationHelper",value:function(t,e){this.wireCreation?this.wireCreation.fromId!==t&&(this.hideCreatedWire(),this.newWire(this.wireCreation.fromId,t),this.wireCreation=void 0):(this.wireCreation={fromId:t},this.displayCreatedWire(e))}},{key:"displayCreatedWire",value:function(e){var n=this;this.wireCreation.tempWire=new E.HelperWire(this,this.wireCreation.fromId,e),$(window).on("mousemove.wireCreation",function(t){t=n.viewbox.transformEvent(t),e={x:t.pageX,y:t.pageY},n.wireCreation.tempWire.updateMousePosition(e)}),this.appendElement(this.wireCreation.tempWire),this.moveToBackById(this.wireCreation.tempWire.id)}},{key:"hideCreatedWire",value:function(){$(window).off("mousemove.wireCreation"),this.wireCreation.tempWire.get().remove(),this.wireCreation.tempWire=void 0}},{key:"cancelWireCreation",value:function(){this.wireCreation&&(this.hideCreatedWire(),this.wireCreation=void 0)}},{key:"startNewSimulation",value:function(t,e){this.simulationEnabled&&(this.simulation=new u.default(this),this.simulation.notifyChange(t.id,e),this.simulation.run())}},{key:"newGate",value:function(t,e,n,o){o=!(3<arguments.length&&void 0!==o)||o;return this.newBox(e,n,new E.Gate(this,t,e,n),o)}},{key:"newInput",value:function(t,e,n,o){n=2<arguments.length&&void 0!==n&&n,o=!(3<arguments.length&&void 0!==o)||o;return this.newBox(t,e,new E.InputBox(this,n),o)}},{key:"newOutput",value:function(t,e,n){n=!(2<arguments.length&&void 0!==n)||n;return this.newBox(t,e,new E.OutputBox(this),n)}},{key:"newBox",value:function(t,e,n,o){var r=!(3<arguments.length&&void 0!==o)||o,o=this.boxes.length;return this.boxes[o]=n,t&&e&&((n=new E.Transform).setTranslate(t,e),this.boxes[o].svgObj.addAttr({transform:n.get()})),this.appendElement(this.boxes[o],r),this.tutorial&&this.tutorial.onElementAdded(this.boxes[o].name),this.boxes[o]}},{key:"removeBox",value:function(t){for(var e=$("#"+t),n=-1,o=0;o<this.boxes.length;o++)if(this.boxes[o].svgObj.id===t){n=o;break}if(-1<n){for(var r=0;r<this.boxes[n].connectors.length;r++)this.removeWiresByConnectorId(this.boxes[n].connectors[r].id);this.boxes.splice(n,1),e.remove(),this.tutorial&&this.tutorial.onElementRemoved()}else console.error("Trying to remove an nonexisting box. Box id:",t)}},{key:"cleanCanvas",value:function(){var e=B(this.boxes.map(function(t){return t.id}));try{for(e.s();!(t=e.n()).done;){var t=t.value;this.removeBox(t)}}catch(t){e.e(t)}finally{e.f()}}},{key:"newWire",value:function(t,e,n,o){var r=this,i=!(2<arguments.length&&void 0!==n)||n,a=!(3<arguments.length&&void 0!==o)||o;if(t!==e){o=[this.getConnectorById(t),this.getConnectorById(e)];o.forEach(function(t){t.isInputConnector&&r.removeWiresByConnectorId(t.id)});var u=this.wires.length;try{this.wires[u]=new E.Wire(this,t,e,i,a)}catch(t){return void this.messages.newErrorMessage(t)}return o.forEach(function(t){t.addWireId(r.wires[u].svgObj.id)}),this.appendElement(this.wires[u],i),this.moveToBackById(this.wires[u].svgObj.id),i&&this.wires[u].updateWireState(),this.wires[u]}}},{key:"getConnectorPosition",value:function(t,e){var n=!(1<arguments.length&&void 0!==e)||e,o=(t.svgObj.id,t.svgObj.$el),e=o.position();e.left=this.viewbox.transformX(e.left),e.top=this.viewbox.transformY(e.top);t=o.attr("width"),o=o.attr("height"),t=e.left+t/2,o=e.top+o/2;return n&&(t=this.snapToGrid(t),o=this.snapToGrid(o)),{x:t,y:o}}},{key:"newBlackbox",value:function(a,u,s,t,e,n,o){var r=!(6<arguments.length&&void 0!==o)||o,o=this.boxes.length;return this.boxes[o]=new E.Blackbox(this,a,u,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o,r=B(s);try{for(r.s();!(o=r.n()).done;){var i=function(){var t=o.value,n=t.slice(0,a);if(e.every(function(t,e){return t===n[e]}))return{v:t.slice(a)}}();if("object"===d(i))return i.v}}catch(t){r.e(t)}finally{r.f()}return Array.from(new Array(u),function(){return c.default.state.unknown})},t),e&&n&&((t=new E.Transform).setTranslate(e,n),this.boxes[o].svgObj.addAttr({transform:t.get()})),this.appendElement(this.boxes[o],r),this.boxes[o]}},{key:"getWireById",value:function(t){var e=B(this.wires);try{for(e.s();!(n=e.n()).done;){var n=n.value;if(n.svgObj.id===t)return n}}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"getWiresByConnectorId",value:function(t){return this.getConnectorById(t).wireIds}},{key:"removeWireById",value:function(t){for(var e=0;e<this.wires.length;++e)if(this.wires[e].svgObj.id===t){var n,o=B(this.wires[e].connectors);try{for(o.s();!(n=o.n()).done;){n.value.removeWireIdAndUpdate(t)}}catch(t){o.e(t)}finally{o.f()}var r=this.wires[e].connection.to.connector;this.startNewSimulation(r,r.state),this.wires[e].svgObj.$el.remove(),this.wires.splice(e,1);break}}},{key:"removeWiresByConnectorId",value:function(o){var r=this,t=this.getConnectorById(o);t.wireIds.forEach(function(t){var e=r.getWireById(t).connection,n=e.from,e=e.to,n=(o===n.id?e:n).connector;n.wireIds.delete(t),$("#"+t).remove(),n.isInputConnector&&(n.setState(c.default.state.unknown),r.startNewSimulation(n,c.default.state.unknown))}),t.wireIds.clear(),t.isInputConnector&&(t.setState(c.default.state.unknown),this.startNewSimulation(t,c.default.state.unknown))}},{key:"getBoxById",value:function(t){for(var e=0;e<this.boxes.length;e++)if(this.boxes[e].svgObj.id===t)return this.boxes[e]}},{key:"getBoxByConnectorId",value:function(t){for(var e=0;e<this.boxes.length;e++)if(void 0!==this.boxes[e].getConnectorById(t))return this.boxes[e];return!1}},{key:"getConnectorById",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:void 0;if(void 0!==n){e=n.connection,n=e.from,e=e.to;if(n.id===t)return n.connector;if(e.id===t)return e.connector}else{var o=B(this.boxes);try{for(o.s();!(r=o.n()).done;){var r=r.value.getConnectorById(t);if(r)return r}}catch(t){o.e(t)}finally{o.f()}}}},{key:"getRealJQueryTarget",value:function(t){var e=$(t);if(!e.hasClass("connector")&&0<e.parents("g").length)for(e=e.parent();"G"!==e.prop("tagName")&&"g"!==e.prop("tagName");)e=e.parent();return e}},{key:"getRealTarget",value:function(t){if(void 0!==t){t=$(t);if(t.hasClass("connector"))return this.getConnectorById(t.attr("id"));if(0<t.parents("g").length){for(var e=t.parent();"G"!==e.prop("tagName")&&"g"!==e.prop("tagName");)e=e.parent();return e.hasClass("box")?this.getBoxById(e.attr("id")):e.hasClass("wire")?this.getWireById(e.attr("id")):void 0}}}},{key:"appendElement",value:function(t,e){e=!(1<arguments.length&&void 0!==e)||e;this.appendJQueryObject(t.get(),e)}},{key:"appendJQueryObject",value:function(t,e){e=!(1<arguments.length&&void 0!==e)||e;this.$svg.append(t),e&&this.refresh()}},{key:"addPattern",value:function(t){this.$defs.append(t),this.refresh()}},{key:"refresh",value:function(){this.$svg.html(this.$svg.html()),console.log("SVG document has been reloaded.")}},{key:"displayContextMenu",value:function(t,e,n){this.contextMenu.display(t,e,n),this.tutorial&&this.tutorial.onContextMenuOpened()}},{key:"hideContextMenu",value:function(){this.contextMenu.hide()}},{key:"snapToGrid",value:function(t){return Math.round(t/this.gridSize)*this.gridSize}},{key:"gridToSVG",value:function(t){return t*this.gridSize}},{key:"SVGToGrid",value:function(t){return t/this.gridSize}},{key:"moveToFrontById",value:function(t){this.$svg.append($("#"+t))}},{key:"moveToBackById",value:function(t){$("#"+this.background.id).after($("#"+t))}},{key:"getNonRoutableNodes",value:function(){var t=new Set,e=B(this.boxes);try{for(e.s();!(n=e.n()).done;){var n=n.value,o=n.getGridPixelTransform().getTranslate(),r=B(n.blockedNodes);try{for(r.s();!(i=r.n()).done;){var i=i.value;t.add({x:o.x+i.x,y:o.y+i.y})}}catch(t){r.e(t)}finally{r.f()}}}catch(t){e.e(t)}finally{e.f()}return t}},{key:"getInconvenientNodes",value:function(t){var e=new Set,n=B(this.wires);try{for(n.s();!(o=n.n()).done;){var o=o.value;if((void 0===t||t!==o.id)&&o.inconvenientNodes){var r=B(o.inconvenientNodes);try{for(r.s();!(i=r.n()).done;){var i=i.value;e.add(i)}}catch(t){r.e(t)}finally{r.f()}}}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"width",get:function(){return this.$svg.width()}},{key:"height",get:function(){return this.$svg.height()}},{key:"zoom",get:function(){return this.viewbox.zoom},set:function(t){this.viewbox.zoom=t,this.applyViewbox(),this.tutorial&&this.tutorial.onCanvasZoomed()}},{key:"exportData",get:function(){this.exportWireIdMap=new Map,this.exportWireId=0;var t={boxes:[]},e=B(this.boxes);try{for(e.s();!(n=e.n()).done;){var n=n.value;t.boxes.push(n.exportData)}}catch(t){e.e(t)}finally{e.f()}return t}}])&&g(t.prototype,e),n&&g(t,n),i}();n.default=t},{"./Logic":12,"./Simulation":13,"./editorElements":14,"./other/helperFunctions":29,"./svgObjects":32,"./ui/ContextMenu":44,"./ui/FloatingMenu":45,"./ui/Messages":46,"./ui/Tutorial":47,"./ui/ViewBox":48,libstl:9}],12:[function(t,e,n){"use strict";function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,e=function(){};return{s:e,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw r}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i)}var t,e,n;return t=i,n=[{key:"and",value:function(t,e){return i.runSymmetricRules(t,e,[[i.state.on,i.state.on,i.state.on],[i.state.on,i.state.off,i.state.off],[i.state.on,i.state.unknown,i.state.unknown],[i.state.on,i.state.oscillating,i.state.oscillating],[i.state.off,i.state.off,i.state.off],[i.state.off,i.state.unknown,i.state.off],[i.state.off,i.state.oscillating,i.state.off],[i.state.unknown,i.state.unknown,i.state.unknown],[i.state.unknown,i.state.oscillating,i.state.unknown],[i.state.oscillating,i.state.oscillating,i.state.oscillating]])}},{key:"nand",value:function(t,e){return i.not(i.and(t,e))}},{key:"nor",value:function(t,e){return i.not(i.or(t,e))}},{key:"not",value:function(t){return t===i.state.on?i.state.off:t===i.state.off?i.state.on:t}},{key:"or",value:function(t,e){return i.runSymmetricRules(t,e,[[i.state.on,i.state.on,i.state.on],[i.state.on,i.state.off,i.state.on],[i.state.on,i.state.unknown,i.state.on],[i.state.on,i.state.oscillating,i.state.on],[i.state.off,i.state.off,i.state.off],[i.state.off,i.state.unknown,i.state.unknown],[i.state.off,i.state.oscillating,i.state.oscillating],[i.state.unknown,i.state.unknown,i.state.unknown],[i.state.unknown,i.state.oscillating,i.state.unknown],[i.state.oscillating,i.state.oscillating,i.state.oscillating]])}},{key:"xnor",value:function(t,e){return i.not(i.xor(t,e))}},{key:"xor",value:function(t,e){return i.runSymmetricRules(t,e,[[i.state.on,i.state.on,i.state.off],[i.state.on,i.state.off,i.state.on],[i.state.on,i.state.unknown,i.state.unknown],[i.state.on,i.state.oscillating,i.state.oscillating],[i.state.off,i.state.off,i.state.off],[i.state.off,i.state.unknown,i.state.unknown],[i.state.off,i.state.oscillating,i.state.oscillating],[i.state.unknown,i.state.unknown,i.state.unknown],[i.state.unknown,i.state.oscillating,i.state.unknown],[i.state.oscillating,i.state.oscillating,i.state.oscillating]])}},{key:"runSymmetricRules",value:function(t,e,n){var o=a(n);try{for(o.s();!(r=o.n()).done;){var r=r.value;if(r[0]===t&&r[1]===e||r[0]===e&&r[1]===t)return r[2]}}catch(t){o.e(t)}finally{o.f()}return i.state.unknown}},{key:"state",get:function(){return{off:0,on:1,unknown:2,oscillating:3}}},{key:"stateList",get:function(){var e=[];return Object.keys(i.state).forEach(function(t){e.push(i.state[t])}),e}}],(e=null)&&o(t.prototype,e),n&&o(t,n),i}();n.default=r},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.SimulationDummy=void 0;var o,i=(o=t("./Logic"))&&o.__esModule?o:{default:o};function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,e=function(){};return{s:e,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw r}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e,n){c(this,f),this.connectorId=t,this.state=e,this.whoCausedIt=n}var l=function(){function t(){c(this,t)}return s(t,[{key:"notifyChange",value:function(){console.log("SimulationDummy.notifyChange() has been called.")}},{key:"run",value:function(){console.log("SimulationDummy.run() has been called.")}}]),t}();n.SimulationDummy=l;l=function(){function e(t){c(this,e),this.appInstance=t,this.predecessors=new Map,this.waves=new Map,this.wave=0,this.cycledConnectors=new Map,this.resolvedCycledConnectors=new Set}return s(e,[{key:"run",value:function(){for(this.wave++;this.waves.has(this.wave);)this.step(),this.waves.delete(this.wave),this.wave++}},{key:"step",value:function(){var e=a(this.waves.get(this.wave));try{for(e.s();!(r=e.n()).done;){var t=r.value,n=t.connectorId,o=t.state,r=t.whoCausedIt;this.resolvedCycledConnectors.has(n)||(this.cycledConnectors.has(n)&&((t=this.cycledConnectors.get(n)).has(o)?(1<t.size&&(o=i.default.state.oscillating),this.resolvedCycledConnectors.add(n)):t.add(o),this.cycledConnectors.set(n,t)),this.whoCausedIt=n,r&&this.addPredecessor(n,r),!this.cycledConnectors.has(n)&&this.getAllPredecessors(n).has(n)&&this.cycledConnectors.set(n,new Set([o])),(n=this.appInstance.getConnectorById(n))&&n.setState(o))}}catch(t){e.e(t)}finally{e.f()}this.whoCausedIt=void 0}},{key:"addPredecessor",value:function(t,e){this.predecessors.has(t)||this.predecessors.set(t,new Set),this.predecessors.get(t).add(e)}},{key:"getAllPredecessors",value:function(t){this.predecessors.has(t)||this.predecessors.set(t,new Set);var e=new Set;this.predecessors.get(t).forEach(e.add,e);for(var n=0,o=e.size;n<o;){var r=a(e);try{for(r.s();!(i=r.n()).done;){var i=i.value;this.predecessors.has(i)&&this.predecessors.get(i).forEach(e.add,e)}}catch(t){r.e(t)}finally{r.f()}n=o,o=e.size}return e}},{key:"notifyChange",value:function(t,e){var n=this.wave+1;this.waves.has(n)||this.waves.set(n,[]),this.waves.get(n).push(new f(t,e,this.whoCausedIt))}}]),e}();n.default=l},{"./Logic":12}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Transform",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"InputConnector",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"OutputConnector",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"InputBox",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"OutputBox",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"Gate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"Blackbox",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"HelperWire",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"Wire",{enumerable:!0,get:function(){return l.default}});var o=h(t("./editorElements/Transform")),r=h(t("./editorElements/InputConnector")),i=h(t("./editorElements/OutputConnector")),a=h(t("./editorElements/InputBox")),u=h(t("./editorElements/OutputBox")),s=h(t("./editorElements/Gate")),c=h(t("./editorElements/Blackbox")),f=h(t("./editorElements/HelperWire")),l=h(t("./editorElements/Wire"));function h(t){return t&&t.__esModule?t:{default:t}}},{"./editorElements/Blackbox":15,"./editorElements/Gate":18,"./editorElements/HelperWire":19,"./editorElements/InputBox":20,"./editorElements/InputConnector":21,"./editorElements/OutputBox":23,"./editorElements/OutputConnector":24,"./editorElements/Transform":25,"./editorElements/Wire":26}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var v=t("../svgObjects"),r=i(t("../Logic")),o=i(t("./Box"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=u(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,e=function(){};return{s:e,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw r}}}}function h(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=b(n);return t=o?(t=b(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==a(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(y,o["default"]);var t,e,n,d=g(y);function y(t,e,n,o){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);var i,a=2*Math.max(e,n),u=2.5*(i=d.call(this,t,r,"blackbox",11,a)).gridSize;i.svgObj=new v.Group;t=new v.Rectangle(0,0,i.width,i.height,"none","none");t.$el.addClass("rect"),i.svgObj.addChild(t);a=i.width-2*u,t=new v.Rectangle(u,0,a,i.height,"white","black");t.addAttr({"stroke-width":"2.5"}),t.$el.addClass("rect"),i.svgObj.addChild(t);t=a-i.gridSize,a=i.height-i.gridSize,r=new v.MultiLineText((i.width-t)/2,(i.height-a)/2,t,a,r.toUpperCase(),1.2*i.gridSize);i.svgObj.addChild(r);for(var s=0;s<e;++s){var c=2*s+1,f=c*i.gridSize,f=new v.PolyLine(new v.PolyLinePoints([new v.PolyLinePoint(0,f),new v.PolyLinePoint(u,f)]),1,"black");i.svgObj.addChild(f),i.addInputConnector(0,c)}for(var l=0;l<n;++l){var h=2*l+1,p=h*i.gridSize,p=new v.PolyLine(new v.PolyLinePoints([new v.PolyLinePoint(i.width-u,p),new v.PolyLinePoint(i.width,p)]),1,"black");i.svgObj.addChild(p),i.addOutputConnector(11,h)}return i.svgObj.$el.addClass("box"),i.evalFunction=o,i.generateBlockNodes(),i}return t=y,(e=[{key:"refreshState",value:function(){for(var t=this.inputConnectors.map(function(t){return t.state}),e=this.evalFunction.apply(this,h(t)),n=0;n<e.length;++n)this.outputConnectors[n].setState(e[n])}},{key:"generateBlockNodes",value:function(){for(var t,e=[],n=1;n<2*this.inputConnectors.length;++n)e.push({x:0,y:n});for(var o=1;o<2*this.outputConnectors.length;++o)e.push({x:this.gridWidth,y:o});(t=p(b(y.prototype),"generateBlockNodes",this)).call.apply(t,[this,0,1,0,1].concat(e))}},{key:"exportData",get:function(){var t=p(b(y.prototype),"exportData",this);t.inputs=this.inputConnectors.length,t.outputs=this.outputConnectors.length,t.table=[];function c(t){var e=[];switch(t){case 0:return[];case 1:var n=l(f);try{for(n.s();!(o=n.n()).done;){var o=o.value;e.push([o])}}catch(t){n.e(t)}finally{n.f()}return e;default:var r,i=l(f);try{for(i.s();!(r=i.n()).done;){var a=r.value,u=l(c(t-1));try{for(u.s();!(s=u.n()).done;){var s=s.value;e.push([a].concat(h(s)))}}catch(t){u.e(t)}finally{u.f()}}}catch(t){i.e(t)}finally{i.f()}return e}}var f=r.default.stateList,e=l(c(t.inputs));try{for(e.s();!(o=e.n()).done;){var n=o.value,o=this.evalFunction.apply(this,h(n));o.reduce(function(t,e){return t||e!==r.default.state.unknown})&&t.table.push([].concat(h(n),h(o)))}}catch(t){e.e(t)}finally{e.f()}return t}}])&&c(t.prototype,e),n&&c(t,n),y}();n.default=t},{"../Logic":12,"../svgObjects":32,"./Box":16}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=t("../svgObjects"),o=i(t("./NetworkElement")),r=i(t("./InputConnector")),s=i(t("./OutputConnector")),c=i(t("./Transform"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,e=function(){};return{s:e,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw r}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=y(n);return t=o?(t=y(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==a(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(a,o["default"]);var t,e,n,i=d(a);function a(t,e,n,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,t)).name=e,t.category=n,t.gridSize=t.appInstance.gridSize,t.connectors=[],t.svgObj=new u.Group,t.width=o*t.gridSize,t.height=r*t.gridSize,t.gridWidth=o,t.gridHeight=r;r=new u.Rectangle(0,0,t.width,t.height,"none","none");return r.$el.addClass("rect"),t.svgObj.addChild(r),t.image=new u.SvgImage(0,0,t.width,t.height,t.url),t.svgObj.addChild(t.image),t.svgObj.addAttr({type:n}),t.svgObj.$el.addClass("box"),t.svgObj.$el.addClass(n),t}return t=a,(e=[{key:"generateBlockNodes",value:function(t,e,n,o){var r=0<arguments.length&&void 0!==t?t:0,i=1<arguments.length&&void 0!==e?e:0,a=2<arguments.length&&void 0!==n?n:0,o=3<arguments.length&&void 0!==o?o:0;this.blockedNodes=new Set;for(var u=o;u<=this.gridWidth-i;u++)for(var s=r;s<=this.gridHeight-a;s++)this.blockedNodes.add({x:u,y:s});for(var c=arguments.length,f=new Array(4<c?c-4:0),l=4;l<c;l++)f[l-4]=arguments[l];for(var h=0,p=f;h<p.length;h++){var d=p[h];this.blockedNodes.add(d)}}},{key:"refreshState",value:function(){console.warn("Calling the virtual function refreshState has no effect.")}},{key:"changeImage",value:function(t){this.imgSuffix=void 0===t||""===t?"":"-"+t,this.image.changeUrl(this.url)}},{key:"get",value:function(){return this.svgObj.get()}},{key:"rotateBlockedNodes",value:function(t,e){void 0===this.rotationParity&&(this.rotationParity=!1),this.rotationParity=!this.rotationParity;var n=new Set;console.log("center:",t);var o=f(this.blockedNodes);try{for(o.s();!(a=o.n()).done;){var r=a.value,i=void 0,a=this.rotationParity?1:-1;e?i={x:-r.y+this.gridHeight+(t.x-t.y)*a,y:r.x+(t.y-t.x)*a}:(i={x:r.y+(t.x-t.y)*a},this.rotationParity?i.y=-r.x+this.gridWidth+(this.gridHeight-t.y-(this.gridWidth-t.x)):i.y=-r.x+this.gridHeight+(t.y-t.x)),n.add(i)}}catch(t){o.e(t)}finally{o.f()}this.blockedNodes=n}},{key:"rotateBlockedNodesRight",value:function(t){this.rotateBlockedNodes(t,!0)}},{key:"rotateBlockedNodesLeft",value:function(t){this.rotateBlockedNodes(t,!1)}},{key:"rotate",value:function(t){var e=this.getTransform();e.toGridPixels(this.appInstance);var n={x:Math.round(this.gridWidth/2),y:Math.round(this.gridHeight/2)},n=this.rotationParity?{x:n.y,y:n.x}:n;t?e.rotateRight(n.x,n.y):e.rotateLeft(n.x,n.y),t?this.rotateBlockedNodesRight(n):this.rotateBlockedNodesLeft(n),e.toSVGPixels(this.appInstance),this.svgObj.addAttr({transform:e.get()}),this.updateWires(),this.appInstance.tutorial&&this.appInstance.tutorial.onBoxRotated()}},{key:"addConnector",value:function(t,e,n){var o=this.connectors.length;this.connectors[o]=new(n?r:s).default(this.appInstance,t,e),this.svgObj.addChild(this.connectors[o].get())}},{key:"addInputConnector",value:function(t,e){return this.addConnector(t,e,!0)}},{key:"addOutputConnector",value:function(t,e){return this.addConnector(t,e,!1)}},{key:"getConnectorById",value:function(t){for(var e=0;e<this.connectors.length;e++)if(this.connectors[e].id===t)return this.connectors[e]}},{key:"getTransform",value:function(t){var e,t=0<arguments.length&&void 0!==t&&t;return this.svgObj.$el.attr("transform")?e=new c.default(this.svgObj.$el.attr("transform")):((e=new c.default).setTranslate(0,0),this.svgObj.addAttr({transform:e.get()})),t&&e.toGridPixels(this.appInstance),e}},{key:"getGridPixelTransform",value:function(){return this.getTransform(!0)}},{key:"setTransform",value:function(t){this.svgObj.addAttr({transform:t.get()})}},{key:"onMouseDown",value:function(t){this.mouseLeft=!1,1===t.which&&(this.mouseLeft=!0,this.onMouseDownLeft(t),this.appInstance.moveToFrontById(this.svgObj.id))}},{key:"onMouseDownLeft",value:function(t){this.mouseMoved=!1;var e=this.getTransform().getTranslate(),n=this.appInstance.viewbox.transformEvent(t),t=n.pageX,n=n.pageY;this.offset={x:t-e.x,y:n-e.y}}},{key:"onMouseMove",value:function(t){var e,n;this.mouseLeft&&(this.svgObj.$el.addClass("grabbed"),this.mouseMoved=!0,n=(e=this.appInstance.viewbox.transformEvent(t)).pageX,t=e.pageY,e=n-this.offset.x,n=t-this.offset.y,(t=this.getTransform()).setTranslate(e,n),this.setTransform(t),this.updateWires(!0))}},{key:"onMouseUp",value:function(t){1===t.which?this.mouseMoved?this.onDrop(t):this.onClick():2===t.which&&this.onClickMiddle(t),this.svgObj.$el.removeClass("grabbed")}},{key:"onDrop",value:function(t){var e=this.appInstance.viewbox.transformEvent(t),n=e.pageX,t=e.pageY,e=n-this.offset.x,n=t-this.offset.y,e=this.appInstance.snapToGrid(e),n=this.appInstance.snapToGrid(n),t=this.getTransform();t.setTranslate(e,n),this.setTransform(t),this.updateWires(),this.appInstance.tutorial&&this.appInstance.tutorial.onBoxMoved()}},{key:"onClick",value:function(){}},{key:"onClickMiddle",value:function(t){t.ctrlKey?this.rotate(!1):this.rotate(!0)}},{key:"updateWires",value:function(t){var e=this,n=0<arguments.length&&void 0!==t&&t;this.connectors.forEach(function(t){t.wireIds.forEach(function(t){t=e.appInstance.getWireById(t);n?t.temporaryWire():t.routeWire()})})}},{key:"url",get:function(){var t=this.category||"",e=this.name||"",n=this.imgSuffix||"";return"img/svg/".concat(t,"/").concat(e).concat(n,".svg")}},{key:"inputConnectors",get:function(){return this.connectors.filter(function(t){return t.isInputConnector})}},{key:"outputConnectors",get:function(){return this.connectors.filter(function(t){return t.isOutputConnector})}},{key:"exportData",get:function(){var t,e=[],n=0,o=f(this.connectors);try{for(o.s();!(t=o.n()).done;){var r=t.value,i=f(r.wireIds);try{for(i.s();!(u=i.n()).done;){var a=u.value,u=void 0;this.appInstance.exportWireIdMap.has(a)?u=this.appInstance.exportWireIdMap.get(a):(this.appInstance.exportWireIdMap.set(a,this.appInstance.exportWireId),u=this.appInstance.exportWireId,this.appInstance.exportWireId++),e[e.length]={index:n,type:r.type,wireId:u}}}catch(t){i.e(t)}finally{i.f()}n++}}catch(t){o.e(t)}finally{o.f()}return{name:this.name,category:this.category,transform:this.getTransform(!0),connections:e}}}])&&h(t.prototype,e),n&&h(t,n),a}();n.default=t},{"../svgObjects":32,"./InputConnector":21,"./NetworkElement":22,"./OutputConnector":24,"./Transform":25}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("./NetworkElement")),a=t("../svgObjects"),u=r(t("../Logic")),s=r(t("./stateClasses"));function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=d(n);return t=o?(t=d(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(i,o["default"]);var t,e,n,r=p(i);function i(t,e,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(o=r.call(this,t)).gridSize=t.gridSize,o.connectorSize=t.gridSize,o.connectorOffset=o.connectorSize/2,o.svgObj=new a.Rectangle(e*o.gridSize-o.connectorOffset,n*o.gridSize-o.connectorOffset,o.connectorSize,o.connectorSize,"none","black"),o.svgObj.$el.addClass("connector"),o.isInputConnector=!1,o.elementState=u.default.state.unknown,o.svgObj.addClass(s.default[u.default.state.unknown]),o.wireIds=new Set,o}return t=i,(e=[{key:"addWireId",value:function(t){this.wireIds.add(t)}},{key:"removeWireId",value:function(t){this.wireIds.delete(t)}},{key:"removeWireIdAndUpdate",value:function(t){this.removeWireId(t)}},{key:"setState",value:function(t){var e;(e=this.svgObj).removeClasses.apply(e,c(s.default)),this.svgObj.addClass(s.default[t]),this.elementState=t}},{key:"get",value:function(){return this.svgObj}},{key:"onMouseUp",value:function(t){1===t.which&&(t={x:(t=this.appInstance.viewbox.transformEvent(t)).pageX,y:t.pageY},this.appInstance.wireCreationHelper(this.svgObj.id,t))}},{key:"isOutputConnector",get:function(){return!this.isInputConnector},set:function(t){this.isInputConnector=!t}},{key:"state",get:function(){return this.elementState}}])&&l(t.prototype,e),n&&l(t,n),i}();n.default=t},{"../Logic":12,"../svgObjects":32,"./NetworkElement":22,"./stateClasses":27}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(t("../Logic")),a=o(t("./Box"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=l(n);return t=o?(t=l(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(r,a["default"]);var t,e,n,o=f(r);function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=[];return(e=o.call(this,t,e,"gate",9,4)).addConnector(9,2,!1),n.push({x:9,y:2}),"not"===e.name||"repeater"===e.name?e.addConnector(0,2,!0):(e.addConnector(0,1,!0),e.addConnector(0,3,!0),n.push({x:0,y:1}),n.push({x:0,y:3})),n.push({x:0,y:2}),e.generateBlockNodes.apply(e,n),e.refreshState(),e}return t=r,n=[{key:"validGates",get:function(){return new Set(["not","and","or","nand","nor","xor","xnor"])}}],(e=[{key:"generateBlockNodes",value:function(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];void 0!==n?(t=s(l(r.prototype),"generateBlockNodes",this)).call.apply(t,[this,0,1,0,1].concat(n)):s(l(r.prototype),"generateBlockNodes",this).call(this,0,1,0,1)}},{key:"refreshState",value:function(){var t=this,e={and:function(){return i.default.and(t.connectors[1].state,t.connectors[2].state)},nand:function(){return i.default.nand(t.connectors[1].state,t.connectors[2].state)},nor:function(){return i.default.nor(t.connectors[1].state,t.connectors[2].state)},not:function(){return i.default.not(t.connectors[1].state)},or:function(){return i.default.or(t.connectors[1].state,t.connectors[2].state)},xnor:function(){return i.default.xnor(t.connectors[1].state,t.connectors[2].state)},xor:function(){return i.default.xor(t.connectors[1].state,t.connectors[2].state)},repeater:function(){return t.connectors[1].state}},n=i.default.state.unknown;e[this.name]&&(n=e[this.name]()),this.appInstance.simulation.notifyChange(this.connectors[0].id,n)}}])&&u(t.prototype,e),n&&u(t,n),r}();n.default=t},{"../Logic":12,"./Box":16}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,i=t("../svgObjects"),a=(o=t("./NetworkElement"))&&o.__esModule?o:{default:o};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=f(n);return t=o?(t=f(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(r,a["default"]);var t,e,n,o=c(r);function r(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);e=(t=o.call(this,t)).appInstance.getConnectorById(e);t.connectorPosition=t.appInstance.getConnectorPosition(e,!0);e=new i.PolyLinePoint(t.connectorPosition.x,t.connectorPosition.y),n=new i.PolyLinePoint(n.x,n.y),n=new i.PolyLinePoints([e,n]);return t.svgObj=new i.PolyLine(n,2,"#8b8b8b"),t}return t=r,(e=[{key:"updateMousePosition",value:function(t){var e=new i.PolyLinePoint(this.connectorPosition.x,this.connectorPosition.y),t=new i.PolyLinePoint(t.x,t.y),t=new i.PolyLinePoints([e,t]);this.svgObj.updatePoints(t)}},{key:"get",value:function(){return this.svgObj.get()}}])&&u(t.prototype,e),n&&u(t,n),r}();n.default=l},{"../svgObjects":32,"./NetworkElement":22}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(t("../Logic")),a=o(t("./Box"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=l(n);return t=o?(t=l(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(r,a["default"]);var t,e,n,o=f(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);return(t=o.call(this,t,"input","other",7,4)).addConnector(7,2,!1),t.on=e,t.generateBlockNodes(),t}return t=r,(e=[{key:"generateBlockNodes",value:function(){var t={x:this.gridWidth,y:this.gridHeight/2};s(l(r.prototype),"generateBlockNodes",this).call(this,0,1,1,0,t)}},{key:"refreshState",value:function(){this.appInstance.startNewSimulation(this.connectors[0],this.connectors[0].state)}},{key:"onClick",value:function(){this.on=!this.on,this.appInstance.tutorial&&this.appInstance.tutorial.onChangeInputBoxState()}},{key:"exportData",get:function(){var t=s(l(r.prototype),"exportData",this);return t.isOn=this.isOn,t}},{key:"on",set:function(t){t?(this.changeImage("on"),this.connectors[0].setState(i.default.state.on)):(this.changeImage(),this.connectors[0].setState(i.default.state.off)),this.refreshState(),this.isOn=t},get:function(){return this.isOn}}])&&u(t.prototype,e),n&&u(t,n),r}();n.default=t},{"../Logic":12,"./Box":16}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(t("./Connector")),a=o(t("../Logic"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=l(n);return t=o?(t=l(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(r,i["default"]);var t,e,n,o=f(r);function r(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=o.call(this,t,e,n)).isInputConnector=!0,n}return t=r,(e=[{key:"setState",value:function(t){s(l(r.prototype),"setState",this).call(this,t),this.appInstance.getBoxByConnectorId(this.svgObj.id).refreshState()}},{key:"removeWireIdAndUpdate",value:function(t){s(l(r.prototype),"removeWireIdAndUpdate",this).call(this,t),this.setState(a.default.state.unknown)}}])&&u(t.prototype,e),n&&u(t,n),r}();n.default=t},{"../Logic":12,"./Connector":17}],22:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t||console.error("Parent SVG element has to be defined."),this.appInstance=t,this.svgObj=void 0}var t,n,o;return t=e,(n=[{key:"onMouseDown",value:function(){}},{key:"onMouseUp",value:function(){}},{key:"onMouseMove",value:function(){}},{key:"id",get:function(){return this.svgObj.id}},{key:"exportData",get:function(){console.error("'json' getter has not been defined for this element",this)}}])&&r(t.prototype,n),o&&r(t,o),e}();n.default=o},{}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(t("../Logic")),a=o(t("./Box"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=l(n);return t=o?(t=l(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(r,a["default"]);var t,e,n,o=f(r);function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);return(t=o.call(this,t,"output","other",5,4)).addConnector(0,2,!0),t.generateBlockNodes(),t}return t=r,(e=[{key:"refreshState",value:function(){this.setState(this.connectors[0].state)}},{key:"setState",value:function(t){t===i.default.state.on&&this.appInstance.tutorial&&this.appInstance.tutorial.onOutputBoxTrue();var e={};e[i.default.state.on]="on",e[i.default.state.off]="off",e[i.default.state.unknown]="",e[i.default.state.oscillating]="osc",this.changeImage(e[t])}},{key:"generateBlockNodes",value:function(){var t={x:0,y:this.gridHeight/2};s(l(r.prototype),"generateBlockNodes",this).call(this,0,0,0,1,t)}}])&&u(t.prototype,e),n&&u(t,n),r}();n.default=t},{"../Logic":12,"./Box":16}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,i=(o=t("./Connector"))&&o.__esModule?o:{default:o};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,e=function(){};return{s:e,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw r}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=h(n);return t=o?(t=h(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(r,i["default"]);var t,e,n,o=l(r);function r(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(n=o.call(this,t,e,n)).isOutputConnector=!0,n}return t=r,(e=[{key:"setState",value:function(t){c(h(r.prototype),"setState",this).call(this,t);var e=a(this.wireIds);try{for(e.s();!(n=e.n()).done;){var n=n.value;this.appInstance.getWireById(n).setState(t)}}catch(t){e.e(t)}finally{e.f()}}}])&&s(t.prototype,e),n&&s(t,n),r}();n.default=p},{"./Connector":17}],25:[function(t,e,n){"use strict";function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,e=function(){};return{s:e,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw r}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(){function e(t){i(this,e),void 0!==t&&(this.name=t.replace(/^[ ]*([^(]+).*/,"$1"),this.args=t.replace(/^[^(]+\((.*)\)/,"$1").split(" "))}return a(e,[{key:"setName",value:function(t){this.name=t}},{key:"setArguments",value:function(t){this.args=t}},{key:"get",value:function(){return this.name+"("+this.args.join(" ")+")"}}]),e}(),c=function(){function o(t){if(i(this,o),this.items=[],void 0!==t){var e=r(t.split(")"));try{for(e.s();!(n=e.n()).done;){var n=n.value;n&&this.items.push(new s(n+")"))}}catch(t){e.e(t)}finally{e.f()}}}return a(o,[{key:"toGridPixels",value:function(e){this.pixelConversion(function(t){return e.SVGToGrid(t)})}},{key:"toSVGPixels",value:function(e){this.pixelConversion(function(t){return e.gridToSVG(t)})}},{key:"pixelConversion",value:function(e){var n={translate:function(t){return t.args=t.args.map(function(t){return e(t)}),t},rotate:function(t){return t.args=[t.args[0],e(t.args[1]),e(t.args[2])],t}};this.items=this.items.map(function(t){return n[t.name]?n[t.name](t):t})}},{key:"getIndex",value:function(t){for(var e=0;e<this.items.length;e++)if(t===this.items[e].name)return e;return-1}},{key:"getTranslate",value:function(){var t=this.getArguments(this.getIndex("translate"));return{x:Number(t[0]),y:Number(t[1])}}},{key:"getRotate",value:function(){var t=this.getArguments(this.getIndex("rotate"));return{deg:Number(t[0]),centerX:Number(t[1]),centerY:Number(t[2])}}},{key:"setTranslate",value:function(t,e){this.setParameter("translate",[t,e])}},{key:"setRotate",value:function(t,e,n){this.setParameter("rotate",[t,e,n])}},{key:"rotateRightAngle",value:function(t,e,n){var o=n?90:270;-1===this.getIndex("rotate")?this.setRotate(o,t,e):(180==(n=(parseInt(this.getRotate().deg)+o)%360)&&(o=t,t=e,e=o),this.setRotate(n,t,e))}},{key:"rotateRight",value:function(t,e){this.rotateRightAngle(t,e,!0)}},{key:"rotateLeft",value:function(t,e){this.rotateRightAngle(t,e,!1)}},{key:"get",value:function(){var t,e=r(this.items);try{for(e.s();!(n=e.n()).done;){var n=n.value;t?t+=" "+n.get():t=n.get()}}catch(t){e.e(t)}finally{e.f()}return t}},{key:"getArguments",value:function(t){return this.items[t].args}},{key:"setParameter",value:function(t,e){var n=this.getIndex(t);-1===n&&(n=this.items.length,this.items[n]=new s,this.items[n].setName(t)),this.items[n].setArguments(e)}}]),o}();n.default=c},{}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../svgObjects"),s=a(t("../Logic")),o=a(t("./stateClasses")),i=a(t("../findPath")),c=a(t("./NetworkElement"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=h(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,e=function(){};return{s:e,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw r}}}}function l(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=g(n);return t=o?(t=g(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==u(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(u,c["default"]);var t,e,n,a=v(u);function u(t,e,n){var o,r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i=!(4<arguments.length&&void 0!==arguments[4])||arguments[4];if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(o=a.call(this,t)).gridSize=t.gridSize,o.connection={from:{id:e,box:o.appInstance.getBoxByConnectorId(e),connector:o.appInstance.getConnectorById(e)},to:{id:n,box:o.appInstance.getBoxByConnectorId(n),connector:o.appInstance.getConnectorById(n)}},o.connection.from.connector.isOutputConnector){if(!o.connection.to.connector.isInputConnector)throw"Can not place wire between two output connectors"}else{if(o.connection.to.connector.isInputConnector)throw"Can not place wire between two input connectors";n=[o.connection.to,o.connection.from];o.connection.from=n[0],o.connection.to=n[1]}return i?o.routeWire(!0,r):o.temporaryWire(),o.elementState=s.default.state.unknown,o.setState(o.connection.from.connector.state),r&&(r=o.connection.to.connector,o.appInstance.startNewSimulation(r,r.state)),o.svgObj.$el.addClass("wire"),o}return t=u,(e=[{key:"setState",value:function(t){var e;(e=this.svgObj).removeClasses.apply(e,l(o.default)),this.svgObj.addClass(o.default[t]),this.connection.to.connector.setState(t),this.elementState=t}},{key:"updateWireState",value:function(){var t,e=f(this.boxes);try{for(e.s();!(t=e.n()).done;){t.value.refreshState()}}catch(t){e.e(t)}finally{e.f()}}},{key:"get",value:function(){return this.svgObj.get()}},{key:"getTemporaryWirePoints",value:function(){var t=new r.PolyLinePoints;return t.append(new r.PolyLinePoint(this.wireStart.x,this.wireStart.y)),t.append(new r.PolyLinePoint(this.wireEnd.x,this.wireEnd.y)),t}},{key:"temporaryWire",value:function(){this.wireStart=this.appInstance.getConnectorPosition(this.connection.from.connector,!1),this.wireEnd=this.appInstance.getConnectorPosition(this.connection.to.connector,!1),this.setWirePath(this.getTemporaryWirePoints())}},{key:"routeWire",value:function(t,e){t=!(0<arguments.length&&void 0!==t)||t,e=!(1<arguments.length&&void 0!==e)||e;this.wireStart=this.appInstance.getConnectorPosition(this.connection.from.connector,t),this.wireEnd=this.appInstance.getConnectorPosition(this.connection.to.connector,t),this.points=this.findRoute({x:this.wireStart.x/this.gridSize,y:this.wireStart.y/this.gridSize},{x:this.wireEnd.x/this.gridSize,y:this.wireEnd.y/this.gridSize}),this.setWirePath(this.points),e&&this.updateWireState(),this.generateInconvenientNodes()}},{key:"setWirePath",value:function(t){if(void 0!==this.svgObj){var e,n=f(this.svgObj.children);try{for(n.s();!(e=n.n()).done;){e.value.updatePoints(t)}}catch(t){n.e(t)}finally{n.f()}}else{this.svgObj=new r.Group;var o=new r.PolyLine(t,10,"white");o.addClass("hitbox"),o.addAttr({opacity:0}),this.svgObj.addChild(o);o=new r.PolyLine(t,2);o.addClass("main","stateUnknown"),this.svgObj.addChild(o)}}},{key:"pathToPolyLine",value:function(t){var e=new r.PolyLinePoints,n=f(t);try{for(n.s();!(o=n.n()).done;){var o=o.value;e.append(new r.PolyLinePoint(o.x*this.gridSize,o.y*this.gridSize))}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"findRoute",value:function(t,e){var n=this.appInstance.getNonRoutableNodes(),o=void 0===this.svgObj?this.appInstance.getInconvenientNodes():this.appInstance.getInconvenientNodes(this.svgObj.id),o=(0,i.default)(t,e,n,o,this.gridSize);return(o=o||(0,i.default)(t,e,new Set,new Set,this.gridSize))?this.pathToPolyLine(o):this.getTemporaryWirePoints()}},{key:"generateInconvenientNodes",value:function(){var u,s=this;this.inconvenientNodes=new Set,this.points.forEach(function(t){var e=s.appInstance.SVGToGrid(t.x),n=s.appInstance.SVGToGrid(t.y);if(void 0===u)s.inconvenientNodes.add({x:e,y:n});else if(u.x===e)for(var o=Math.min(u.y,n),r=Math.max(u.y,n);o<=r;)s.inconvenientNodes.add({x:e,y:o}),o++;else if(u.y===n)for(var i=Math.min(u.x,e),a=Math.max(u.x,e);i<=a;)s.inconvenientNodes.add({x:i,y:n}),i++;u={x:e,y:n}})}},{key:"boxes",get:function(){return[this.connection.from.box,this.connection.to.box]}},{key:"connectors",get:function(){return[this.connection.from.connector,this.connection.to.connector]}},{key:"exportData",get:function(){return{fromId:this.connection.from.id,toId:this.connection.to.id}}},{key:"state",get:function(){return this.elementState}}])&&d(t.prototype,e),n&&d(t,n),u}();n.default=t},{"../Logic":12,"../findPath":28,"../svgObjects":32,"./NetworkElement":22,"./stateClasses":27}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,r=(o=t("../Logic"))&&o.__esModule?o:{default:o};var i=[];i[r.default.state.on]="stateOn",i[r.default.state.off]="stateOff",i[r.default.state.unknown]="stateUnknown",i[r.default.state.oscillating]="stateOscillating",n.default=i},{"../Logic":12}],28:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n,o){function r(t,e){u.add(t),s.enqueue(t,1/e)}var i=b.manhattanDistance,a=new Set,u=new Set,s=new w.PriorityQueue,c=new Map,f=new m.default(1/0);f.set(t,0);var l=i(t,e);r(t,l),u.add(t),s.enqueue(t,1/l);for(;0<u.size;){var h=function(){var t=s.dequeue();return u.delete(t),t}();if(h.x==e.x&&h.y==e.y)return function(t,e){var n=[];n.push({x:e.x,y:e.y});for(;t.has(e);)e=t.get(e),n.push({x:e.x,y:e.y});return n}(c,h);a.add(h);for(var p=0;p<4;p++)for(var d,y=x(h,p),v=0,g=0;g<50&&(!O(n,y)||(y.x===e.x&&y.y===e.y||y.x===t.x&&y.y===t.y));g++){a.has(y)||(d=1+f.getWithDefault(h),O(o,y)&&v++,(d+=+v)>=f.getWithDefault(y)||(c.set(y,h),f.set(y,d),d=d+i(y,e),u.has(y)||r(y,d),y=x(y,p)))}if(1e5<u.size){console.log("aStar: Number of open nodes (".concat(u.size,") exceeded the limit for open nodes (").concat(1e5,")."));break}}return};var o,b=t("./other/helperFunctions"),m=(o=t("./other/mapWithDefaultValue"))&&o.__esModule?o:{default:o},w=t("libstl");function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,e=function(){};return{s:e,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw r}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function O(t,e){var n=r(t);try{for(n.s();!(o=n.n()).done;){var o=o.value;if(o.x===e.x&&o.y===e.y)return 1}}catch(t){n.e(t)}finally{n.f()}}function x(t,e){var n=t.x,o=t.y;return{0:function(){--o},1:function(){n+=1},2:function(){o+=1},3:function(){--n}}[e](),{x:n,y:o}}},{"./other/helperFunctions":29,"./other/mapWithDefaultValue":31,libstl:9}],29:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addMouseScrollEventListener=function(t,e){function n(t){return(t=window.event||t).delta=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),e(t),!1}t=t.match(/^#\w+$/)?document.getElementById(t.substr(1)):document.querySelector(t);t.addEventListener?(t.addEventListener("mousewheel",n,!1),t.addEventListener("DOMMouseScroll",n,!1)):t.attachEvent("onmousewheel",n);t.addEventListener("mousewheel",function(t){console.log("event",t)},!1)},n.getJSONString=function t(e){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return o?"data:application/json;charset=utf-8,"+encodeURIComponent(t(e,n)):n?(0,r.default)(e,{maxLength:50}):JSON.stringify(e)},n.manhattanDistance=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)};var o,r=(o=t("json-stringify-pretty-compact"))&&o.__esModule?o:{default:o}},{"json-stringify-pretty-compact":1}],30:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var i;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i=i||this,this.prefix="id",this.nextId=0,i}var e,n,o;return e=t,(n=[{key:"unique",get:function(){for(var t=this.prefix+this.nextId;$("#"+t).length;)this.nextId++,t=this.generate();return this.nextId++,t}}])&&r(e.prototype,n),o&&r(e,o),t}();n.default=o},{}],31:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=new Map;return n.getWithDefault=function(t){return n.has(t)?n.get(t):e},n}},{}],32:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"PolyLinePoint",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"PolyLinePoints",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"Pattern",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"Group",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"Rectangle",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"SvgImage",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"PolyLine",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"Text",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"MultiLineText",{enumerable:!0,get:function(){return l.default}});var o=h(t("./svgObjects/PolyLinePoint")),r=h(t("./svgObjects/PolyLinePoints")),i=h(t("./svgObjects/Pattern")),a=h(t("./svgObjects/Group")),u=h(t("./svgObjects/Rectangle")),s=h(t("./svgObjects/SvgImage")),c=h(t("./svgObjects/PolyLine")),f=h(t("./svgObjects/Text")),l=h(t("./svgObjects/MultiLineText"));function h(t){return t&&t.__esModule?t:{default:t}}},{"./svgObjects/Group":33,"./svgObjects/MultiLineText":34,"./svgObjects/Pattern":35,"./svgObjects/PolyLine":36,"./svgObjects/PolyLinePoint":37,"./svgObjects/PolyLinePoints":38,"./svgObjects/Rectangle":39,"./svgObjects/SvgImage":41,"./svgObjects/Text":43}],33:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,i=(o=t("./Tag"))&&o.__esModule?o:{default:o};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=o?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,i["default"]);var t,e,n,o=s(r);function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=o.call(this,"g")).children=[],t}return t=r,(e=[{key:"addChild",value:function(t){return this.children.push(t),this.$el.append(t.$el),t}}])&&a(t.prototype,e),n&&a(t,n),r}();n.default=f},{"./Tag":42}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=o(t("./Tag")),h=o(t("./Text"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=u(n);return t=o?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(f,l["default"]);var c=a(f);function f(t,e,n,o,r,i){var a,u=6<arguments.length&&void 0!==arguments[6]?arguments[6]:"black";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),a=c.call(this,"switch");var s=new l.default("foreignObject"),u=new h.default(t,e,n,o,r,i,u);s.addAttr({x:t,y:e,width:n,height:o});o=$("<div>").attr("xmlns","http://www.w3.org/1999/xhtml").addClass("multilinetext").css("height",o),r=$("<p>").attr("xmlns","http://www.w3.org/1999/xhtml").css("font-size",i).append(r);return o.append(r),s.$el.append(o),a.$el.append(s.$el).append(u.$el),a}return f}();n.default=t},{"./Tag":42,"./Text":43}],35:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a=(o=t("./Tag"))&&o.__esModule?o:{default:o};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=i(n);return t=o?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,a["default"]);var t,e,n,r=c(i);function i(t,e,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(o=r.call(this,"pattern")).addAttr({id:t,x:0,y:0,width:e,height:n,patternUnits:"userSpaceOnUse",viewBox:"0 0 "+e+" "+n}),o}return t=i,(e=[{key:"addChild",value:function(t){return this.$el.append(t.$el),t}}])&&u(t.prototype,e),n&&u(t,n),i}();n.default=f},{"./Tag":42}],36:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a=(o=t("./Tag"))&&o.__esModule?o:{default:o};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=i(n);return t=o?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,a["default"]);var t,e,n,r=c(i);function i(t,e,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o=r.call(this,"PolyLine");e={points:t.string,fill:"none","stroke-width":e};return void 0!==n&&(e.stroke=n),o.addAttr(e),o}return t=i,(e=[{key:"updatePoints",value:function(t){this.addAttr({points:t.string})}}])&&u(t.prototype,e),n&&u(t,n),i}();n.default=f},{"./Tag":42}],37:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=0,void(this.y=0)!==t&&void 0!==e&&(this.x=t,this.y=e)}var t,e,o;return t=n,o=[{key:"parseFromString",value:function(t){t=t.split(",");return new n(t[0],t[1])}},{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y}}],(e=[{key:"set",value:function(t,e){this.x=t,this.y=e}},{key:"string",get:function(){return this.x+","+this.y}}])&&r(t.prototype,e),o&&r(t,o),n}();n.default=o},{}],38:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,i=(o=t("./PolyLinePoint"))&&o.__esModule?o:{default:o};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=c(n);return t=o?(t=c(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}var p=function(){function e(t){f(this,e),this.arr=void 0!==t?t:[]}return h(e,[{key:"copy",value:function(){return e($.extend(!0,[],this.arr))}},{key:"append",value:function(t){return this.addWithIndex(t,this.arr.length)}},{key:"prepend",value:function(t){return this.addWithIndex(t,0)}},{key:"addWithIndex",value:function(t,e){for(var n=this.arr.length;e<n;--n)this.arr[n]=this.arr[n-1];return this.arr[e]=t,this}},{key:"getItem",value:function(t){return this.arr[t]}},{key:"remove",value:function(t){for(var e=this.length,n=t;n<e;++n)this.arr[n]=this.arr[n+1];this.arr.pop()}},{key:"length",get:function(){return this.arr.length}},{key:"last",get:function(){return 0!==this.length&&this.arr[this.length-1]}},{key:"first",get:function(){return 0!==this.length&&this.arr[0]}}]),e}(),d=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(r,p);var e=s(r);function r(t){return f(this,r),e.call(this,t)}return h(r,[{key:"copy",value:function(){return new r($.extend(!0,[],this.arr))}},{key:"append",value:function(t){a(c(r.prototype),"append",this).call(this,t);t=this.length;return 3<=t&&(this.getItem(t-3).x===this.getItem(t-2).x&&this.getItem(t-2).x===this.getItem(t-1).x||this.getItem(t-3).y===this.getItem(t-2).y&&this.getItem(t-2).y===this.getItem(t-1).y)&&this.remove(t-2),this}},{key:"forEach",value:function(t){for(var e=0;e<this.arr.length;++e)t(this.arr[e])}},{key:"string",get:function(){for(var t="",e=0;e<this.length;++e)0!==e&&(t+=" "),t+=this.arr[e].string;return t}}],[{key:"parseFromString",value:function(t){for(var e=t.split(" "),n=new r,o=0;o<e.length;++o)n.append(i.default.parseFromString(e[o]));return n}}]),r}();n.default=d},{"./PolyLinePoint":37}],39:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,r=(o=t("./SvgElement"))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=a(n);return t=o?(t=a(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(u,r["default"]);var a=c(u);function u(t,e,n,o,r,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(o=a.call(this,t,e,n,o,"rect")).addAttr({fill:r,stroke:i,"stroke-width":.5,"pointer-events":"all"}),o}return u}();n.default=u},{"./SvgElement":40}],40:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,r=(o=t("./Tag"))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=a(n);return t=o?(t=a(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(a,r["default"]);var i=s(a);function a(t,e,n,o,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,r)).addAttr({x:t,y:e,width:n,height:o}),r}return a}();n.default=c},{"./Tag":42}],41:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,r=(o=t("./SvgElement"))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=a(n);return t=o?(t=a(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(a,r["default"]);var t,e,n,i=c(a);function a(t,e,n,o,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(o=i.call(this,t,e,n,o,"image")).addAttr({"xlink:href":r}),o}return t=a,(e=[{key:"changeUrl",value:function(t){this.addAttr({"xlink:href":t})}}])&&u(t.prototype,e),n&&u(t,n),a}();n.default=f},{"./SvgElement":40}],42:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,r=(o=t("../other/id"))&&o.__esModule?o:{default:o};function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.tagName=t,this.$el=$("<"+this.tagName+">"),this.id=(new r.default).unique}var t,n,o;return t=e,(n=[{key:"addClass",value:function(t){this.$el.addClass(t)}},{key:"removeClasses",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var o=0,r=e;o<r.length;o++){var i=r[o];this.$el.removeClass(i)}}},{key:"addAttr",value:function(t){this.checkIfElementExistsInDOM(),this.$el.attr(t)}},{key:"getAttr",value:function(t){return this.checkIfElementExistsInDOM(),this.$el.attr(t)}},{key:"removeAttr",value:function(t){this.checkIfElementExistsInDOM(),this.$el.removeAttr(t)}},{key:"get",value:function(){return this.checkIfElementExistsInDOM(),this.$el}},{key:"checkIfElementExistsInDOM",value:function(){var t=$("#"+this.$el.attr("id"));t.length&&(this.$el=t)}},{key:"id",set:function(t){this.addAttr({id:t})},get:function(){return this.getAttr("id")}}])&&i(t.prototype,n),o&&i(t,o),e}();n.default=a},{"../other/id":30}],43:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,r=(o=t("./Tag"))&&o.__esModule?o:{default:o};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(n);return t=o?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==i(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,r["default"]);var s=u(c);function c(t,e,n,o,r,i){var a,u=6<arguments.length&&void 0!==arguments[6]?arguments[6]:"black";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(a=s.call(this,"text")).addAttr({x:t,y:e,width:n,height:o,fill:u}),i&&a.addAttr({"font-size":i}),a.$el.append(r),a}return c}();n.default=c},{"./Tag":42}],44:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=t("./networkLibrary"),f=t("../editorElements");function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,e=function(){};return{s:e,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){a=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw r}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=i(n);return t=o?(t=i(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function d(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}var y=function(){function r(t,e,n){var o=this;h(this,r),this.text=t,this.contextMenu=e,this.$el=$("<li>").text(t),void 0!==n&&$(this.$el).click(function(t){n(),e.hide(),t.stopPropagation()}),this.$submenu=void 0,this.itemCount=0,$(this.$el).hover(function(t){0<o.length&&(o.$submenu.css({display:"block",top:o.$el.offset().top,left:o.$el.parent().offset().left+o.$el.parent().width()}),o.contextMenu.$el.after(o.$submenu),t.stopPropagation())},function(){o.$submenu&&o.$submenu.css({display:"none"})})}return d(r,[{key:"addClass",value:function(t){return this.$el.addClass(t),this}},{key:"appendItem",value:function(t){var e=this;return this.$submenu||(this.$submenu=$("<ul>").addClass("subList"),this.$submenu.hover(function(){e.$submenu.css("display","block")},function(){e.$submenu.css("display","none")})),this.$submenu.append(t.$el),this.itemCount++,t}},{key:"appInstance",get:function(){return this.contextMenu.appInstance}},{key:"length",get:function(){return this.itemCount}},{key:"jQuery",get:function(){return this.$el}},{key:"jQuerySubmenu",get:function(){return this.$submenu}}]),r}(),v=function(){a(r,y);var o=s(r);function r(t,e){var n;return h(this,r),n=o.call(this,"".concat(t.toUpperCase()," gate"),e,function(){n.appInstance.newGate(t,n.appInstance.snapToGrid(n.appInstance.viewbox.transformX(e.position.x)),n.appInstance.snapToGrid(n.appInstance.viewbox.transformY(e.position.y)))})}return r}(),g=function(){a(o,y);var n=s(o);function o(t,e,i){var a;return h(this,o),a=n.call(this,t,i,function(){(0,c.getNetworkFromLibrary)(e).then(function(t){var e=t.blackbox,n=t.name,o=e.inputs,r=e.outputs,t=e.table,n=e.name||n;a.appInstance.newBlackbox(o,r,t,n,a.appInstance.snapToGrid(a.appInstance.viewbox.transformX(i.position.x)),a.appInstance.snapToGrid(a.appInstance.viewbox.transformY(i.position.y)))}).catch(function(t){console.error(t)})})}return o}(),b=function(){a(i,y);var r=s(i);function i(t,e,n){var o;return h(this,i),o=r.call(this,t,n,function(){(0,c.getNetworkFromLibrary)(e).then(function(t){o.appInstance.importData(t,Math.round(o.appInstance.viewbox.transformX(n.position.x)/o.appInstance.gridSize),Math.round(o.appInstance.viewbox.transformY(n.position.y)/o.appInstance.gridSize)).then(function(t){var e=l(t);try{for(e.s();!(n=e.n()).done;){var n=n.value;o.appInstance.messages.newWarningMessage(n)}}catch(t){e.e(t)}finally{e.f()}})}).catch(function(t){o.appInstance.messages.newErrorMessage(t)})})}return i}(),t=function(){function i(e){var a=this;h(this,i),this.appInstance=e,this.position={x:0,y:0},this.$el=$("<ul>"),this.$el.attr("id","contextMenu");var t=new y("Special elements",this);t.appendItem(new y("Input box",this,function(){var t={left:a.appInstance.snapToGrid(e.viewbox.transformX(a.position.x)),top:a.appInstance.snapToGrid(e.viewbox.transformY(a.position.y))};e.newInput(t.left,t.top)})),t.appendItem(new y("Output box",this,function(){var t={left:a.appInstance.snapToGrid(e.viewbox.transformX(a.position.x)),top:a.appInstance.snapToGrid(e.viewbox.transformY(a.position.y))};e.newOutput(t.left,t.top)})),this.appendItem(t);var t=f.Gate.validGates,n=new y("New gate",this,e),o=l(t);try{for(o.s();!(r=o.n()).done;){var r=r.value;n.appendItem(new v(r,this))}}catch(t){o.e(t)}finally{o.f()}this.appendItem(n);var u=new y("Add a network",this);u.appendItem(new y("Paste a network",this,function(){a.displayImportDialog()})),this.appendItem(u);var s=new y("Add a blackbox",this);(0,c.getLibrary)().then(function(t){var e=l(t);try{for(e.s();!(i=e.n()).done;){var n=i.value,o=n.name,r=n.file,i=n.hasTable,n=n.hasNetwork;i&&s.appendItem(new g(o,r,a)),n&&u.appendItem(new b(o,r,a))}}catch(t){e.e(t)}finally{e.f()}0<s.length&&a.appendItem(s)}).catch(function(t){console.error(t)}),this.appendConditionalItem("box","Remove this item",function(t){a.appInstance.removeBox(t)}),this.appendConditionalItem("wire","Remove this wire",function(t){a.appInstance.removeWireById(t)}),e.$svg.before(this.$el),this.itemCount=0}return d(i,[{key:"appendItem",value:function(t){return this.$el.append(t.jQuery),this.itemCount++,t}},{key:"appendConditionalItem",value:function(t,e,n){this.conditionalItems||(this.conditionalItems=[]),this.conditionalItems[this.conditionalItems.length]={itemClass:t,text:e,clickFunction:n}}},{key:"displayImportDialog",value:function(){var e,o=this,t=$("<div>").addClass("importExport").addClass("import"),n="importJSON",r=$("<textarea>").attr("id",n);t.append(r).append($("<a>").attr({href:"#",class:"upload"}).append($("<img>").attr("src","img/gui/import.svg")).append(" import from JSON").on("click",function(){var t;try{t=JSON.parse($("#"+n).val())}catch(t){o.appInstance.messages.newErrorMessage("The imported file is not a valid JSON file."),e.close()}t&&o.appInstance.importData(t,Math.round(o.appInstance.viewbox.transformX(o.position.x)/o.appInstance.gridSize),Math.round(o.appInstance.viewbox.transformY(o.position.y)/o.appInstance.gridSize)).then(function(t){var e=l(t);try{for(e.s();!(n=e.n()).done;){var n=n.value;o.appInstance.messages.newWarningMessage(n)}}catch(t){e.e(t)}finally{e.f()}}).finally(function(){e.close()})})),e=lity(t),r.focus()}},{key:"resolveConditionalItems",value:function(e){var n,o=this,r=l(this.conditionalItems);try{for(r.s();!(n=r.n()).done;)!function(){var t=n.value;e.hasClass(t.itemClass)&&o.appendItem(new y(t.text,o,function(){t.clickFunction(e.attr("id"))})).addClass("conditional")}()}catch(t){r.e(t)}finally{r.f()}}},{key:"hideAllConditionalItems",value:function(){this.$el.children(".conditional").remove()}},{key:"display",value:function(t,e,n){this.position={x:t,y:e},this.resolveConditionalItems(n),this.$el.css({display:"block",top:e,left:t}).css("width","auto").css("width",this.$el.innerWidth()+2)}},{key:"hide",value:function(){this.$el.css({display:"none"}),$(".subList").css({display:"none"}),this.hideAllConditionalItems()}},{key:"length",get:function(){return this.itemCount}}]),i}();n.default=t},{"../editorElements":14,"./networkLibrary":49}],45:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../other/helperFunctions");function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function t(e,n,o,r){var i=this;a(this,t),this.$el=$("<a>"),this.$el.addClass("button"),this.$el.addClass(e),this.$el.append($("<img>").attr("src","img/gui/".concat(e,".svg")).attr("alt",n)),n&&(this.$tooltip=$("<div>"),this.$tooltip.addClass("tooltip").html(n),r.$svg.after(this.$tooltip),this.$el.hover(function(){i.$tooltip.fadeIn(200)},function(){i.$tooltip.fadeOut(200)})),o&&this.$el.on("click",o)},t=function(){function e(n){a(this,e),this.$el=$("<div>");this.$el.attr("id","floatingMenu"),this.append(new u("export","Get code for this network",function(){var t=$("<div>").addClass("importExport").addClass("export"),e=$("<textarea>").text((0,r.getJSONString)(n.exportData,!0));t.append(e),t.append($("<a>").attr({href:(0,r.getJSONString)(n.exportData,!0,!0),class:"download",download:"network.json"}).append($("<img>").attr("src","img/gui/export.svg")).append(" expanded JSON")),t.append($("<a>").attr({href:(0,r.getJSONString)(n.exportData,!1,!0),class:"download",download:"network.min.json"}).append($("<img>").attr("src","img/gui/export.svg")).append(" compact JSON")),lity(t),e.select()},n)),this.append(new u("tutorial","Start the tutorial",function(){n.startTutorial()},n)),n.$svg.after(this.$el);var t=new u("help","Display a help page",!1,n);t.$el.attr({href:"./docs/user.html","data-lity":""}),this.append(t);t=new u("github","Open the project repository",!1,n);t.$el.attr({href:"https://github.com/janjaromirhorak/hradla",target:"_blank"}),this.append(t),n.$svg.after(this.$el)}var t,n,o;return t=e,(n=[{key:"append",value:function(t){this.$el.append(t.$el)}}])&&i(t.prototype,n),o&&i(t,o),e}();n.default=t},{"../other/helperFunctions":29}],46:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=u(n);return t=o?(t=u(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==r(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=function(){function n(t,e){s(this,n),this.$el=$("<div>").addClass("message").text(t),this.onHide=e}return f(n,[{key:"hide",value:function(){this.$el.remove(),this.onHide&&this.onHide()}}]),n}(),h=function(){i(o,l);var n=a(o);function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return s(this,o),(e=n.call(this,t,e)).$el.addClass("loading"),e}return o}(),p=function(){i(r,l);var o=a(r);function r(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return s(this,r),(e=o.call(this,t,n)).$el.append($("<span>").addClass("close").click(function(){e.hide()})),e}return r}(),d=function(){i(o,p);var n=a(o);function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return s(this,o),(e=n.call(this,t,e)).$el.addClass("error"),e}return o}(),y=function(){i(o,p);var n=a(o);function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return s(this,o),(e=n.call(this,t,e)).$el.addClass("warning"),e}return o}(),v=function(){function t(){s(this,t),this.$el=$("<div>").addClass("messages"),this.count=0,$("body").append(this.$el)}return f(t,[{key:"hide",value:function(){this.$el.addClass("hidden")}},{key:"display",value:function(){this.$el.removeClass("hidden")}},{key:"newMessage",value:function(t,e){var n=this,t=new(1<arguments.length&&void 0!==e?e:l)(t,function(){n.count--});return this.$el.append(t.$el),this.count++,t}},{key:"newLoadingMessage",value:function(t){return this.newMessage(t,h)}},{key:"newErrorMessage",value:function(t){return this.newMessage(t,d)}},{key:"newWarningMessage",value:function(t){return this.newMessage(t,y)}},{key:"count",get:function(){return this.messageCount},set:function(t){this.messageCount=t,this.messageCount<1?this.hide():this.display()}}]),t}();n.default=v},{}],47:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function o(t,e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.appInstance=t,this.currentStep=0,this.$tutorialWindow,this.$tutorialContent,this.steps=[function(){n.closeWindow(e)}],this.setUpTutorial()}var t,e,n;return t=o,(e=[{key:"resetHooks",value:function(){this.onContextMenuOpened=function(){},this.onElementAdded=function(){},this.onBoxMoved=function(){},this.onBoxRotated=function(){},this.onOutputBoxTrue=function(){},this.onCanvasMoved=function(){},this.onCanvasZoomed=function(){},this.onElementRemoved=function(){},this.onChangeInputBoxState=function(){}}},{key:"setUpTutorial",value:function(){var t=this;this.resetHooks(),this.steps.push(function(){t.stepWelcome()},function(){t.stepAddBoxes()},function(){t.stepMoveCanvas()},function(){t.stepZoomCanvas()},function(){t.stepMoveBoxes()},function(){t.stepWiring()},function(){t.switchInputBox()},function(){t.stepRemoveBox()},function(){t.stepFinish()})}},{key:"stepWelcome",value:function(){var t=this;this.windowContent("Welcome to Hradla! To get started, click anywhere on the editing area with your right mouse button."),this.onContextMenuOpened=function(){t.next()}}},{key:"stepAddBoxes",value:function(){var e=this;this.windowContent("Great job! Now you know, how to open the editor menu.\n            Now try to add an <em>Input box</em>, <em>Output box</em> and a <em>NOT gate</em>\n            to the editing area.");var n={inputBox:!1,outputBox:!1,notGate:!1};this.onElementAdded=function(t){switch(t){case"input":n.inputBox=!0;break;case"output":n.outputBox=!0;break;case"not":n.notGate=!0}n.inputBox&&n.outputBox&&n.notGate&&e.next()}}},{key:"stepMoveCanvas",value:function(){var t=this;this.windowContent("You can move the editing area (sometimes called canvas) by dragging\n            with the middle mouse button or by holding the <code>Ctrl</code> key\n            and dragging with the left mouse button. Check it out."),this.onCanvasMoved=function(){t.next()}}},{key:"stepZoomCanvas",value:function(){var t=this;this.windowContent("You can also zoom in and out using the mouse wheel\n            or with the <code>+</code>&nbsp;and <code>−</code>&nbsp;keys."),this.onCanvasZoomed=function(){t.next()}}},{key:"stepMoveBoxes",value:function(){var t=this;this.windowContent("You can move the elements on the editing canvas by dragging them\n            using the left mouse button. You can also rotate them using middle click. Try it out.");function e(){n&&o&&t.next()}var n=!1,o=!1;this.onBoxMoved=function(){n=!0,e()},this.onBoxRotated=function(){o=!0,e()}}},{key:"stepWiring",value:function(){var t=this;this.windowContent("Essential part of logic networks is the wiring. Create a very simple\n            inverter by connecting the <em>Input box</em> to the input of the <em>NOT gate</em>\n            and the output of the <em>NOT gate</em> to the input of the <em>Output box</em>.","To connect two elemnts, simply click on a connector of the first element,\n            than click on a conector of the second element."),this.onOutputBoxTrue=function(){t.next()}}},{key:"switchInputBox",value:function(){var t=this;this.windowContent("\n            The input boxes can be in two states: <em>ON</em> and <em>OFF</em>, signalled\n            by the green and red colors respectively. You can left click on an Input box to\n            switch its state. Try it out!\n        "),this.onChangeInputBoxState=function(){t.next()}}},{key:"stepRemoveBox",value:function(){var t=this;this.windowContent("When you right click on an element, you can find a new item in the menu,\n            that allows you to remove the element. This works for wires as well as for gates and other types of boxes.\n            Try to remove an element!"),this.onElementRemoved=function(){t.next()}}},{key:"stepFinish",value:function(){var t=this;this.windowContent("You're all set, enjoy your stay!","Do you wish to start with empty canvas?"),this.windowChoice({text:"yes, clean the canvas",func:function(){t.appInstance.cleanCanvas(),t.stop()}},{text:"no, keep the canvas as it is",func:function(){t.stop()}})}},{key:"displayWindow",value:function(){this.appInstance.$svg.after(this.$tutorialWindow)}},{key:"closeWindow",value:function(t){this.$tutorialWindow.remove(),void 0!==t&&t()}},{key:"windowContent",value:function(){var t=this;this.$tutorialWindow||(this.$tutorialWindow=$("<div>").attr("id","tutorial"),this.$topButtonsLeft=$("<div>").addClass("left"),this.$tutorialWindow.append($("<div>").addClass("topButtons").append(this.$topButtonsLeft).append($("<div>").addClass("right").append($("<a>").attr({href:"#",title:"close tutorial"}).addClass("button close").click(function(){t.stop()})))),this.$tutorialWindow.append(this.$topButtons),this.$tutorialContent=$("<div>").addClass("content"),this.$tutorialWindow.append(this.$tutorialContent)),this.$topButtonsLeft.html("");var e=$("<a>").attr({href:"#",title:"go back"}).addClass("button prev");1<this.step?e.click(function(){t.prev()}):e.addClass("disabled");var n=$("<a>").attr({href:"#",title:"go forward"}).addClass("button next");this.step<this.steps.length-1?n.click(function(){t.next()}):n.addClass("disabled"),this.$topButtonsLeft.append(e).append(n),this.$tutorialContent.html("");for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];for(var a=0,u=r;a<u.length;a++){var s=u[a];this.$tutorialContent.append($("<p>").html(s))}}},{key:"windowChoice",value:function(){for(var e=$("<ol>").addClass("choices"),t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];for(var r=0,i=n;r<i.length;r++)!function(){var t=i[r];e.append($("<li>").append($("<a>").attr("href","#").click(function(){t.func()}).html(t.text)))}();this.$tutorialContent.append(e)}},{key:"start",value:function(){this.step=1}},{key:"next",value:function(){this.step++}},{key:"prev",value:function(){this.step--}},{key:"stop",value:function(){this.step=0}},{key:"step",get:function(){return this.currentStep},set:function(t){this.resetHooks(),this.currentStep=t,this.step<this.steps.length?(this.steps[this.step](),1===this.step&&this.displayWindow()):this.step=0}}])&&r(t.prototype,e),n&&r(t,n),o}();n.default=o},{}],48:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function r(t,e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.real={left:t,top:e,width:n,height:o},this.maxZoom=8,this.minZoom=.1,this.realZoom=1,this.leftShift=0,this.topShift=0}var t,e,n;return t=r,(e=[{key:"newDimensions",value:function(t,e){this.real.left+=(this.real.width-t)/2,this.real.top+=(this.real.height-e)/2,this.real.width=t,this.real.height=e}},{key:"move",value:function(t,e){this.leftShift+=t/this.zoom,this.topShift+=e/this.zoom}},{key:"transformX",value:function(t){return this.left+t/this.zoom}},{key:"transformY",value:function(t){return this.top+t/this.zoom}},{key:"transformEvent",value:function(t){return t.pageX=this.transformX(t.pageX),t.pageY=this.transformY(t.pageY),t}},{key:"zoom",get:function(){return this.realZoom},set:function(t){this.realZoom=Math.max(Math.min(t,this.maxZoom),this.minZoom)}},{key:"width",get:function(){return this.real.width/this.zoom}},{key:"height",get:function(){return this.real.height/this.zoom}},{key:"left",get:function(){return this.real.left-this.leftShift+(this.real.width-this.width)/2}},{key:"top",get:function(){return this.real.top-this.topShift+(this.real.height-this.height)/2}},{key:"str",get:function(){return"".concat(this.left," ").concat(this.top," ").concat(this.width," ").concat(this.height)}}])&&o(t.prototype,e),n&&o(t,n),r}();n.default=r},{}],49:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getLibrary=function(){return new Promise(function(t,e){var n=r+"networkList.json",o=new XMLHttpRequest;o.addEventListener("load",function(){this.response&&t(this.response.networks)}),o.addEventListener(["error","abort"],function(){e("Failed loading libraries.")}),o.open("GET",n,!0),o.responseType="json",o.send()})},n.getNetworkFromLibrary=function(o){return new Promise(function(t,e){var n=new XMLHttpRequest;n.addEventListener("load",function(){this.response&&t(this.response)}),n.addEventListener(["error","abort"],function(){e("Failed loading library ".concat(o,"."))}),n.open("GET",r+o+".json",!0),n.responseType="json",n.send()})};var r="./library/"},{}]},{},[10]);